<!DOCTYPE html><html lang="zh-CN"><head><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><title>容器标准和生态 | x³u³</title><meta name="theme-color" content="#000000"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0"/><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="Cloud Native"/><meta name="description" content="🗒 碎碎念"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="容器标准和生态 | x³u³"/><meta property="og:description" content="🗒 碎碎念"/><meta property="og:url" content="https://xxxuuu.me/post/container-spec-ecosystem"/><meta property="og:image" content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="og:site_name" content="容器标准和生态 | x³u³"/><meta property="og:type" content="Post"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="🗒 碎碎念"/><meta name="twitter:title" content="容器标准和生态 | x³u³"/><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="article:published_time"/><meta property="article:author" content="xxxuuu"/><meta property="article:section" content="分布式系统,存储,云原生"/><meta property="article:publisher"/><meta name="next-head-count" content="23"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerPolicy="no-referrer"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/d9514acc5a3191d6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d9514acc5a3191d6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script defer="" src="/_next/static/chunks/3607272e.2a7fac62e4aa2ed3.js"></script><script defer="" src="/_next/static/chunks/51472.1e4811d23d9c4c81.js"></script><script src="/_next/static/chunks/webpack-d21ff1857ee06ed4.js" defer=""></script><script src="/_next/static/chunks/framework-a9bb0a3aa321677c.js" defer=""></script><script src="/_next/static/chunks/main-38dcea65ee3c1f0e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d12e15a9a449482b.js" defer=""></script><script src="/_next/static/chunks/88495-591bdb3ec2a9391e.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bprefix%5D/%5Bslug%5D-287a9560b630d3bb.js" defer=""></script><script src="/_next/static/-5VYD6_DkK2ytlKzfJOJ1/_buildManifest.js" defer=""></script><script src="/_next/static/-5VYD6_DkK2ytlKzfJOJ1/_ssgManifest.js" defer=""></script><style id="__jsx-8b74b6d3b1887a15">:root{--content-width:768px;--theme-color:#ff8200;--fg-color:#495057}::-moz-selection{background-color:var(--theme-color)!important;color:#fff!important}::selection{background-color:var(--theme-color)!important;color:#fff!important}.notion-h-title{color:#343a40;font-weight:bold}.notion-text,.notion-list,.notion-toggle,.notion-to-do,.notion-quote,.notion-callout-text,.notion-simple-table-cell{letter-spacing:.5px;color:var(--fg-color);font-size:1rem;font-weight:400}.notion-inline-code{background:rgba(255,229,100,.2);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:var(--fg-color)}.notion-asset-wrapper img{-webkit-border-radius:.6em;-moz-border-radius:.6em;border-radius:.6em}.notion-quote{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;border-left:3px solid var(--theme-color);background-color:rgba(238,241,225,.3)}.notion-link{opacity:1;color:#36563c;border-bottom:1px dashed#36563c!important;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-link:hover{color:var(--theme-color);border-bottom:1px dashed var(--theme-color)!important}.notion-bookmark{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-bookmark:hover{border-color:var(--theme-color)}.notion-callout{border:0}.notion-property-checkbox-unchecked{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;border:1.3px solid var(--theme-color)}.notion-property-checkbox-checked{background:var(--theme-color);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.notion-property-checkbox-checked .svg{width:12px;height:12px;top:2px;left:2px}.notion-toggle>summary::marker{# TODO gap between marker and text
      }.notion-list li{padding-left:.5rem}.notion-list ol>ul{padding-left:0}.notion-list ul>ol{padding-left:0}.notion-list li::marker{color:var(--theme-color);font-weight:600}.notion-table-of-contents-item{opacity:1}</style><style id="__jsx-2783458257">null

  </style></head><body><div id="__next"><div id="theme-autumn" class="font-sans font-light bg-white scroll-smooth"><header style="background-color:null" class="w-full h-[430px] flex justify-center z-10"><div style="background-image:url(https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2)" class="max-w-[var(--content-width)] size-full px-5 flex justify-center items-center flex-col relative bg-cover bg-center"><div class="rounded-xl bg-white/[.6] w-full py-4 px-5 backdrop-blur-sm hover:scale-[1.03] transition duration-300 relative bottom-5"><div class="flex items-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="size-20 rounded-full shadow-lg pointer-events-none select-none"/><div class="flex flex-col flex-1 ml-7 size-full"><h1 class="text-2xl my-0 text-[var(--theme-color)] drop-shadow-[0_2px_10px_rgba(231,156,0,0.6)] font-bold">x³u³</h1><div class="text-sm font-normal w-full text-gray-500 mt-2 flex jusitify-between"><span class="flex-1">🗒 碎碎念</span><div class="justify-center flex-wrap flex"><div class="space-x-3 text-sm flex items-center text-gray-500 opacity-80"><a target="_blank" rel="noreferrer" title="github" href="https://github.com/xxxuuu"><i class="fab fa-github"></i></a><a target="_blank" rel="noreferrer" title="email" href="mailto:xxuuu0@outlook.com"><i class="fas fa-envelope"></i></a><a target="_blank" rel="noreferrer" title="RSS" href="/rss/feed.xml"><i class="fas fa-rss"></i></a></div></div></div></div></div></div><div class="absolute w-full bottom-0 px-5"><nav class="w-full bg-transparent"><ul class="flex"><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/"> <!-- -->🏠 首页</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/archive"> <!-- -->📃 归档</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/links"> <!-- -->👬 友链</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/about"> <!-- -->👤 关于</a></li></ul></nav></div></div></header><div id="container-inner" class="w-full relative mx-auto max-w-[var(--content-width)]"><div id="container-wrapper" class="relative mx-auto justify-center sm:flex"><div class="w-full transition ease-in-out duration-700 transform order-first opacity-0 translate-y-32"><div id="article-wrapper" class="px-4 sm:px-8 pb-12 sm:pb-20 relative"><section class="flex flex-col mt-16"><h1 class="text-4xl font-bold text-gray-800">容器标准和生态</h1><div class="mt-6 mb-8 text-gray-300 flex flex-row"><span class="mr-3 text-gray-300 text-sm sm:text-base font-normal flex justify-center items-center">2023-07-12</span><span id="wordCountWrapper" class="flex gap-3 font-light"><span class="flex whitespace-nowrap items-center"><i class="pl-1 pr-2 fas fa-file-word"></i><span id="wordCount">0</span></span><span class="flex whitespace-nowrap items-center"><i class="mr-1 fas fa-clock"></i><span></span><span id="readTime">0</span> <!-- -->分钟</span></span></div></section><div id="notion-article" class="mx-auto overflow-hidden "><main class="notion light-mode notion-page notion-block-deaccfa24562437c874efc5041f3fad5"><div class="notion-viewport"></div><div class="notion-collection-page-properties"><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">category</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">icon</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">password</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div></div></div></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-66df46a9db194cf2b01b4b07ca0aedf5" data-id="66df46a9db194cf2b01b4b07ca0aedf5"><span><div id="66df46a9db194cf2b01b4b07ca0aedf5" class="notion-header-anchor"></div><a class="notion-hash-link" href="#66df46a9db194cf2b01b4b07ca0aedf5" title="OCI（Open Container Initiative）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">OCI（Open Container Initiative）</span></span></h3><div class="notion-text notion-block-dfae54b73b7f4388bdede69a7ad43831"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://opencontainers.org/about/overview/">OCI（Open Container Initiative，开放容器提议）</a>，是围绕容器镜像格式和运行时设立的标准，在 2015 年 6 月推出。基于 Docker 捐赠的 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/runc">runC</a> 实现之上发展而来</div><div class="notion-text notion-block-3c19fc13466148eb8b9023eababa4156">其中，镜像标准（<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/image-spec">image-spec</a>）规定了镜像如何组织文件层，镜像配置文件格式</div><div class="notion-text notion-block-50ec4646c1744724ae76307339ac24cd">运行时标准（<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/runtime-spec">runtime-spec</a>）规定了容器的生命周期和需要支持的操作、配置项等</div><div class="notion-text notion-block-57bc02d6b8da45e8984ea1a4719e8b84">2022 年 5 月新增加了分发标准（<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/distribution-spec">distribution-spec</a>），规定了镜像分发的 API 协议，包括认证方式、Push、Pull、内容发现、管理等</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-326fe92b930e4809a74b9f3369d8a618" data-id="326fe92b930e4809a74b9f3369d8a618"><span><div id="326fe92b930e4809a74b9f3369d8a618" class="notion-header-anchor"></div><a class="notion-hash-link" href="#326fe92b930e4809a74b9f3369d8a618" title="镜像组成"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">镜像组成</span></span></h4><div class="notion-text notion-block-70e9b5ae87194455b9286386137d8db5">OCI 标准中，镜像由 index，config 和各个 layer 组成、</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5e5ada3780144492b0982cf0f4aab0e0"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F549cfd4e-8dc3-44e3-8a89-9874d88a18a3%2Fimage.png?table=block&amp;id=5e5ada37-8014-4492-b098-2cf0f4aab0e0&amp;t=5e5ada37-8014-4492-b098-2cf0f4aab0e0&amp;width=2304&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-62c9fc883fc94009a59c7c485127a8da">拉取一个 nginx 镜像并解压，可以看到其目录格式</div><div class="notion-text notion-block-7dc755bd9da646ea828c8c0611df54af">Docker 镜像并不符合 OCI 镜像标准，但 OCI 的镜像标准基于 Docker 镜像标准，因此两者在结构上是类似的，有一定对应关系</div><div class="notion-text notion-block-5d15dbb836a44e18a27170a6ea1fc07a">使用 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/containers/skopeo">skopeo</a> 可以将 Docker 镜像转化为 OCI 镜像</div><div class="notion-text notion-block-b62c78474cf04d46bf2847a05b7f3154">index.json 是 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/image-spec/blob/main/image-index.md">image index</a>，用于索引 manifest 文件，跨平台和架构的镜像可能对每一个平台都有一个 manifest 文件</div><div class="notion-text notion-block-542b9ce88bd749e4aa427603e67197ee"><code class="notion-inline-code">manifests.digest</code> 中就是 manifest 文件摘要值，同时也是文件名，由此可以很快找到 manifest 文件。<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/image-spec/blob/master/manifest.md">image manifest</a> 索引了镜像的配置和 layer 层文件位置及其类型。可以看出，配置是一个 JSON 文件，而每一层是进行压缩后存储的。</div><div class="notion-text notion-block-572847b959f544d0b4b6763e9e1828b5"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/opencontainers/image-spec/blob/main/config.md">image configuration</a> 描述了镜像所属的平台，配置（类似在 Dockerfile 中定义的环境变量、端口、ENTRYPOINT、CMD 等），以及各个层的历史记录，<code class="notion-inline-code">created_by</code> 是创建层的命令，<code class="notion-inline-code">empty_layer</code> 表示该层是否导致文件系统变化。最后是各个层未压缩内容的摘要（<code class="notion-inline-code">diff_ids</code>）</div><div class="notion-text notion-block-342138f9f51d405e81b7acc9327aa883">如果对层进行解压，就可以得到里面文件系统的内容</div><div class="notion-blank notion-block-b43a7707594244758a967e2cd2deae11"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-515e16e2ca7c438b8a96b343c85925e6" data-id="515e16e2ca7c438b8a96b343c85925e6"><span><div id="515e16e2ca7c438b8a96b343c85925e6" class="notion-header-anchor"></div><a class="notion-hash-link" href="#515e16e2ca7c438b8a96b343c85925e6" title="运行时"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">运行时</span></span></h4><div class="notion-text notion-block-d22a2efa8734437592bccfdbb9c91b23">runC 是纯粹的 runtime，OCI 的 runtime-spec 基于 runC 制定</div><div class="notion-text notion-block-ba89302f9e1d46cea386c5023d2edef8">要启动 runC（或其它符合 OCI runtime-spec 的运行时），需要一个 rootfs 和 <code class="notion-inline-code">config.json</code>，rootfs 就是容器运行的文件系统，<code class="notion-inline-code">config.json</code> 则定义了运行的配置</div><div class="notion-text notion-block-3f3b9a39e5544fa2bfcb279291dd3f6f">rootfs 可以从镜像 layer 中一层层解包合并得到。<code class="notion-inline-code">config.json</code> 的一个可能示例如下：</div><div class="notion-text notion-block-4b9e24a01d2f46db828f848dd3633d2b">通过 <code class="notion-inline-code">runc run</code> 即可启动容器，会自动读取路径下的 <code class="notion-inline-code">config.json</code>。其中 <code class="notion-inline-code">root.path</code> 指定了 rootfs 的路径</div><div class="notion-text notion-block-704fc3262c614187ab0280ce37449d07"><code class="notion-inline-code">config.json</code> 的配置和平常使用的 Docker 等基本都能大致对上，但 runC 是不包括网络实现的，通过 <code class="notion-inline-code">runc exec</code> 进入容器内就可以发现只有一张 loop 网卡</div><div class="notion-text notion-block-5e9bb4468a6544b4b641d22bbdad5980">这些部分是留给更高级的容器运行时去完成，例如可以在标准中生命周期的 <code class="notion-inline-code">createContainer</code> 和 <code class="notion-inline-code">start</code> 之间进行网卡创建，存储挂载等操作</div><div class="notion-text notion-block-92816505b2e1468c8fa9dc21059de4c5">runtime 这块还有一些有意思的实现，比如 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://katacontainers.io/">Kata</a> 和 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://gvisor.dev/">gVisor</a> 之类的内核容器，前者给容器跑了一个完整的 VMM（QEMU/KVM 等）来做内核隔离，后者给每个容器塞了一个 Go 写的模拟内核，重定向所有 syscall 过去，代替宿主机内核</div><div class="notion-blank notion-block-7976d42880bc4fe7a00d056720c93935"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-04e87d88f02f41e6af2a8aff149e665a" data-id="04e87d88f02f41e6af2a8aff149e665a"><span><div id="04e87d88f02f41e6af2a8aff149e665a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#04e87d88f02f41e6af2a8aff149e665a" title="一些历史"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">一些历史</span></span></h4><div class="notion-text notion-block-c62b2c6a417c4029be9ed87178c87c08">在早期，Docker 拥有容器领域的绝对领导权，但作为一个商业公司，这实际上引发了其它公司（Red Hat、Google 等）的不满和担忧</div><div class="notion-text notion-block-627d62d643484ed09f16961b3d213471">Google 也尝试过开源自身的容器方案，但未能成功。因此 Google 向 Docker 提议共同推动一个中立的容器运行时作为 Docker 项目的核心依赖，但没有得到 Docker 的同意</div><div class="notion-blank notion-block-7acbd22c8f764917ab6ac05bb2d07e12"> </div><div class="notion-text notion-block-50649ed3c65b4be39c9c171c57a9f834">在 2015 年，Docker 公司的强势长期饱受社区诟病，为了表示诚意，Docker 和 Google、Red Hat、CoreOS 决定成立一个「中立」的基金会，共同制定一套容器的标准和规范，这套标准就是 OCI。Docker 也将自身的 libcontainer 捐出，改名为 runC，作为 OCI 标准制定的基础</div><div class="notion-blank notion-block-db8507d832c44cc28013ee25f2bf405f"> </div><div class="notion-text notion-block-15ba5cdbd5fd4d62b140fa88c5e9a5b1">Docker 作为当时容器的事实标准，本身并无多大动力去推进 OCI 的发展，OCI 也未能削弱 Docker 的地位。Google 和 Red Hat 利用自己在大规模集群和平台上的经验，又成立了 CNCF（Cloud Native Computing Foundation），以 Google 内部的 Borg 孵化出的 Kubernetes 项目为基础，从平台侧架空 Docker，从现在来看，这个战略非常成功，Docker Swarm 面对 Kubernetes 无疑是失败的，Swarm 项目被取消，Docker 企业版直接内置 Kubernetes，放弃开源社区竞争，进行商业化转型。现在，CNCF 涉及越来越多的领域，成为了云原生新的绝对权威</div><div class="notion-blank notion-block-363c3ccba2ff40a48e962eaf68d5c953"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-5a31e2727ece408696a5a4a76d3d8e81" data-id="5a31e2727ece408696a5a4a76d3d8e81"><span><div id="5a31e2727ece408696a5a4a76d3d8e81" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5a31e2727ece408696a5a4a76d3d8e81" title="高级容器运行时"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">高级容器运行时</span></span></h3><div class="notion-text notion-block-7c1b0ee381ae46a7bffbdae9ace6082c">runC 只实现了 OCI 的 runtime-spec（这句话有点别扭，是先有的 runC，才有的 OCI），也就是说，它是无法处理镜像的，只负责运行进程和隔离。这是一种低级容器运行时，而且 OCI 也只专注核心的容器功能，网络、存储标准都没有进行定义（目前比较流行的网络和存储标准分别是 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/containernetworking/cni">CNI</a> 和 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/container-storage-interface/spec/blob/master/spec.md">CSI</a>）</div><div class="notion-text notion-block-cf184e1cb827448c84ac75080f72f837">更多时候，我们指的容器运行时是高级容器运行时，高级容器运行时最基本的功能就是能够将镜像处理成 rootfs 来传递给 runC 等低级运行时，这个过程中还要处理镜像的 layer 共享等很多问题。通常也会包括监控、日志、管理、API 等更多功能</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-946561b69cef4dd2a166cead429eaa3d"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F7265c446-afe8-44ed-b5f3-a0ad2f7c4530%2Fimage.png?table=block&amp;id=946561b6-9cef-4dd2-a166-cead429eaa3d&amp;t=946561b6-9cef-4dd2-a166-cead429eaa3d&amp;width=1097.7271728515625&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-b15c726a7cc345eca08d9874db9cb784"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-4c4860318a284b629bb051d7d5bd588a" data-id="4c4860318a284b629bb051d7d5bd588a"><span><div id="4c4860318a284b629bb051d7d5bd588a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#4c4860318a284b629bb051d7d5bd588a" title="containerd"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">containerd</span></span></h4><div class="notion-text notion-block-8fe9edcd9f104b1497fff91b8050d710">一个典型的高级容器运行时就是 containerd（最典型的应该是 Docker，但大家都太熟悉了就懒得说了），containerd 从 Docker 项目中独立出来</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-71146b10a4eb497da6d1b8e17ab3051c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F62de8781-6120-43e8-ae1e-f39c9f134457%2Fimage.png?table=block&amp;id=71146b10-a4eb-497d-a6d1-b8e17ab3051c&amp;t=71146b10-a4eb-497d-a6d1-b8e17ab3051c&amp;width=3564&amp;cache=v2" alt="⬆️ Docker 是一个大而全的容器运行时，以至于在这里甚至将它划分为了一个平台" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">⬆️ Docker 是一个大而全的容器运行时，以至于在这里甚至将它划分为了一个平台</figcaption></div></figure><div class="notion-text notion-block-e4452896da274954b9cb667a726b598b">containerd 的实现高度模块化，各个模块之间使用 ttrpc（gRPC 的改良）通信，并且支持通过插件来扩展。containerd 中默认使用 runC 作为低级容器运行时，也支持根据平台和需求替换成 runhcs、Kata 等</div><div class="notion-text notion-block-8f9a8351762d428ba9e314f89f31d819">containerd 没有打包网络和存储的实现，像网络就是使用 CNI 来让外部提供具体实现</div><div class="notion-text notion-block-ed93844741744c1aa15bcc220b940a8f">containerd 的设计目标是成为更高级系统中的一个组件来被调用，而非直接提供给用户使用，Docker 目前就是通过 containerd 来管理容器</div><div class="notion-blank notion-block-ed2d26089b9045caa3e7d6c2ec0c6bb0"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-0f674f0b498543b6a0b8ddaec8bda454" data-id="0f674f0b498543b6a0b8ddaec8bda454"><span><div id="0f674f0b498543b6a0b8ddaec8bda454" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0f674f0b498543b6a0b8ddaec8bda454" title="CRI-O"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">CRI-O</span></span></h4><div class="notion-text notion-block-43a2b96ecbee4fff9b8955bc89f0d8b0">CRI-O 的目的是构建一个最简单的 K8s 专用运行时，是一个最小化的实现，不需要面向最终用户的那些复杂功能</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-3aa91ef387a745eeb2008493466e5d88"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fe15a0e6c-d254-4d02-9280-279cb94b166a%2Fimage.png?table=block&amp;id=3aa91ef3-87a7-45ee-b200-8493466e5d88&amp;t=3aa91ef3-87a7-45ee-b200-8493466e5d88&amp;width=5346&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-cce64b0c005147e5a5fe6d47ffbbbc92">当一个 kubelet 的创建请求来临时：</div><ol start="1" class="notion-list notion-list-numbered notion-block-cc9bb24e3eb643f6b95138b58d0ec562"><li>CRI-O 会拉取镜像（如果不存在）</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-4c14b3b2085a45dca4bb28119c577347"><li>将镜像解压，构建 rootfs 和 OCI runtime-spec 的 <code class="notion-inline-code">config.json</code></li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-617df41a4ad34ec7998a1e73bb06c0f5"><li>调用低层的 OCI runtime（runC 等）</li></ol><ol start="4" class="notion-list notion-list-numbered notion-block-a3b03c2e85114ef784b0f8c696af07b5"><li>每个容器由一个 conmon 进程进行监控，它会为 PID 为 1 的进程提供一个 <code class="notion-inline-code">pty</code>，同时处理日志和记录退出代码</li></ol><ol start="5" class="notion-list notion-list-numbered notion-block-7fc7ff46f4644657993d23b82d0a400f"><li>通过 CNI 调用网络插件配置网络</li></ol><div class="notion-blank notion-block-398096482f244da1a9d784e91beb418f"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-b9c93da29a9944e9b48c7a174718fa92" data-id="b9c93da29a9944e9b48c7a174718fa92"><span><div id="b9c93da29a9944e9b48c7a174718fa92" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b9c93da29a9944e9b48c7a174718fa92" title="Podman"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Podman</span></span></h4><div class="notion-text notion-block-656232ca4ad741a2a14d0d6d025c70d4">containerd 和 CRI-O 都不是直接面向用户的，面向用户的容器运行时最典型的就是 Docker，而 Podman 也是一个 Docker 的竞品，由 Red Hat 推出</div><div class="notion-text notion-block-cd8dc61adfea4bc0900327173e9ffc6e">Podman 兼容大部分的 Docker 命令，甚至可以直接 <code class="notion-inline-code">alias podman=docker</code> 来无缝替换。</div><div class="notion-text notion-block-dee2d18fe9b64d94b1ad93e60be4e160">Podman 的特色在于对 rootless container 的良好支持，这能带来更好的安全性；另外我个人比较喜欢的一个功能是 Pod 模式，能直接从一个 K8s 的 Pod YAML 中来运行容器</div><div class="notion-blank notion-block-711a065260ae49feb23ea316c760ed5c"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-3fefe88fd29a46a795ae9156b0e1289a" data-id="3fefe88fd29a46a795ae9156b0e1289a"><span><div id="3fefe88fd29a46a795ae9156b0e1289a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#3fefe88fd29a46a795ae9156b0e1289a" title="CRI（Container Runtime Interface）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">CRI（Container Runtime Interface）</span></span></h3><div class="notion-text notion-block-b502cfff89054d9c90d2e057a66ed0dd"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md">CRI（Container Runtime Interface）</a> 是 K8s 的一套容器接口协议，用于 kubelet 和容器运行时之间的通信，避免直接依赖具体实现</div><div class="notion-text notion-block-14e3d853501445978dcac741b05a98df">OCI runtime-spec 是面向低级容器运行时的标准，而 CRI 是面向高级容器运行时的协议，还包括了一些 Pod 映射到容器所需的相关接口，其基于 gRPC，接口定义如下</div><div class="notion-text notion-block-925d1d453a9346f5955e9d6bc6c46ff5">早期（1.6 版本之前）K8s 是直接调用 Docker API 的，但随着容器生态的发展，各个容器运行时都希望能在 K8s 这掺一脚，这为 kubelet 的维护带来了很大的负担。因此就有了 CRI。在过渡期时为了保持兼容，K8s 内置了 dockershim 作为 CRI 请求到 Docker API 的适配器，后来 K8s 的所谓「弃用 Docker」指的 containerd 成熟后不再单独为 Docker 维护一套接口适配器（dockershim），而是直接采用 CRI 接口，各个 shim（接口适配器）需要由用户自己安装，脱离出 K8s 的代码，于是就有了该说法</div><div class="notion-blank notion-block-c8f29e1b646a4ac498ddf2c9555d9079"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-23045257fd4646eb80cadda9478e10c3" data-id="23045257fd4646eb80cadda9478e10c3"><span><div id="23045257fd4646eb80cadda9478e10c3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#23045257fd4646eb80cadda9478e10c3" title="WASM"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">WASM</span></span></h3><div class="notion-text notion-block-3f17867ca9b14d2781e99b3e0e8a5a8f">之前就有看到类似「WASM+WASI 替代 Docker」的说法，一直不是很能理解，WASM 在我的认知中应该是一个虚拟机，WASI 是 WASM 的系统接口，为了让 WASM 运行在非浏览器的 native 环境中（像 Node 一样）。因此 WASM+WASI 的对比对象应该是类似 JVM 一样的东西，为什么与容器扯上了关系？</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-ec86724dd10c416abef68102b1e056f9"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F05e22043-6194-4d98-a63b-239e9184bf8a%2Fimage.png?table=block&amp;id=ec86724d-d10c-416a-bef6-8102b1e056f9&amp;t=ec86724d-d10c-416a-bef6-8102b1e056f9&amp;width=1097.7271728515625&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-68f76f3d5ec341d39306e815d2ae9083">参考这篇文章和 Docker 的官方文档</div><ol start="1" class="notion-list notion-list-numbered notion-block-c3fac745c0db4805abac4afbf25d7b9c"><li>https://wasmlabs.dev/articles/docker-without-containers/</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-72f69691b689459aaec09a87fd9606f9"><li>https://www.docker.com/blog/docker-wasm-technical-preview/</li></ol><div class="notion-text notion-block-8788eb10ebbe41c592e5ea1cc9c3cd2b">简单来说，WasmEdge 提供了一个符合 OCI runtime-spec 的 WASI 运行时，因此可以使用 WasmEdge 替代 Docker 中的容器运行时。同时镜像不需要包含操作系统或任何基础镜像，单个 <code class="notion-inline-code">.wasm</code> 二进制文件就可以直接执行</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-71d09c0a3f1b405389bad3aa0b8dc921"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa207d3c2-0fa9-4e86-88a3-7043ee6f505c%2Fimage.png?table=block&amp;id=71d09c0a-3f1b-4053-89ba-d3aa0b8dc921&amp;t=71d09c0a-3f1b-4053-89ba-d3aa0b8dc921&amp;width=1097.7271728515625&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-5fc8337f2e5b4be7bf2be40cbafeb033">为什么 WASM+WASI 的方式被推崇：</div><ol start="1" class="notion-list notion-list-numbered notion-block-78ce7dc91f174b6b8171874b0f74786b"><li>开放，业界广泛采用的标准，开源社区生态加成</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-17b841c96dba481db4a17f765a517378"><li>快速，没有 VM 或容器的冷启动</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-7df414638bbe4fc39c9e1a33c836a872"><li>安全，沙盒运行</li></ol><ol start="4" class="notion-list notion-list-numbered notion-block-737f0b6cc5f0476abaf8d74b005c8331"><li>可移植，支持大多数 CPU 和操作系统</li></ol><ol start="5" class="notion-list notion-list-numbered notion-block-5f59ea2039764a5a8f61a088f32a55ad"><li>高效，最小内存和 CPU 占用</li></ol><div class="notion-text notion-block-53b38eb931954c06ace91a538c205dea">但目前来讲生态还不够完善，主要在于很多语言对编译为 <code class="notion-inline-code">.wasm</code> 有诸多限制，大量常用的依赖库不进行修改的话都无法编译。同时作为容器 runtime 的话没有 Linux 内核，也导致很多 specific 的功能无法实现。明显优势基本只有镜像非常轻量了，大小在几百 K 到几 M，适合的场景还是像 WasmEdge 本身的名字一样，做些应用层的 Edge Computing 吧</div><div class="notion-blank notion-block-576b6a09bf5c4e64b4ac2d13060fbb17"> </div></main></div><div class="flex flex-row gap-2"><a class="rounded-full px-4 py-1 bg-gray-100/[.3] text-gray-400 text-xs sm:text-sm font-normal leading-6 cursor-pointer transition-all duration-300 hover:bg-[var(--theme-color)] hover:text-white hover:-translate-y-1" href="/tag/Cloud%20Native">Cloud Native</a></div><div class="mt-8 mb-6 w-full border-b border-dashed border-gray-200"></div><p class="text-base mb-3 font-normal text-gray-300">下一篇</p><a href="/post/vim-as-an-ide"><h2 class="mb-2 sm:mb-4 text-gray-800 text-2xl font-bold relative transition-all duration-300 before:invisible before:h-5 before:w-0 before:bg-[var(--theme-color)] before:opacity-5 before:absolute before:top-4 before:-left-2 before:rounded-lg before:transition-all before:duration-500 hover:before:visible hover:before:w-full hover:text-[var(--theme-color)] hover:drop-shadow(0_1px_2px_rgb(255,255,255)">Vim as an IDE</h2></a><div class="mt-6 mb-8 w-full border-b border-dashed border-gray-200"></div><div id="comment" class="comment mt-5 text-gray-800 dark:text-gray-300 "><div class="text-center">Loading...<i class="fas fa-spinner animate-spin text-3xl "></i></div></div><aside class="hidden lg:block absolute h-full w-52 -right-56 top-36"><div class="sticky top-20"></div></aside></div></div></div></div><footer class="w-full border-t border-gray-200/[.8] relative mt-72 md:mt-60 before:w-full before:h-[22rem] before:z-10 before:block before:absolute before:-top-[17.6rem] before:left-0 before:bg-[url(/images/footer-bg.png)] before:bg-no-repeat before:bg-center before:bg-cover lg:before:bg-contain "><div class="max-w-[var(--content-width)] mx-auto my-12"><p class="mx-6 text-left text-xs text-gray-500 font-bold relative z-20">© <!-- -->2018-2024<!-- --> <!-- -->xxxuuu<!-- --> · Powered by <a class="hover:underline text-gray-700" href="https://github.com/xxxuuu/NotionNext">NotionNext</a></p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"NOTION_CONFIG":{"LINK":"https://xxxuuu.me","THEME":"autumn","KEYWORDS":"分布式系统,存储,云原生","AUTHOR":"xxxuuu","BIO":"xxxuuu","CUSTOM_MENU":"true","CUSTOM_RIGHT_CLICK_CONTEXT_MENU":"false","LANG":"zh-CN","SINCE":"2018","POST_TITLE_ICON":"false"},"notice":null,"siteInfo":{"title":"x³u³","description":"🗒 碎碎念","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","icon":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","link":"https://xxxuuu.me"},"allNavPages":[{"title":"Infra 窘境","pageCoverThumbnail":"","category":null,"tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","slug":"post/infra-dilemma","href":"/post/infra-dilemma","pageIcon":"","lastEditedDate":"2024-09-12T13:38:22.109Z","publishDate":1725321600000,"ext":{},"short_id":"5b4b2d85"},{"title":"迁移博客到 Notion","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"Make Notion Great Again！","slug":"post/migrate-blog-to-notion","href":"/post/migrate-blog-to-notion","pageIcon":"","lastEditedDate":"2024-08-29T13:08:42.341Z","publishDate":1724544000000,"ext":{},"short_id":"a06c26b2"},{"title":"Longhorn 浅析","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","category":null,"tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","slug":"post/longhorn","href":"/post/longhorn","pageIcon":"","lastEditedDate":"2024-09-14T04:21:06.938Z","publishDate":1723075200000,"ext":{},"short_id":"bde25ba8"},{"title":"从 Linux 内核看读写锁设计","pageCoverThumbnail":"","category":null,"tags":["Linux","内核"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","slug":"post/kernel-rwlock","href":"/post/kernel-rwlock","pageIcon":"","lastEditedDate":"2024-08-27T15:25:28.206Z","publishDate":1704326400000,"ext":{},"short_id":"0e96a78e"},{"title":"2023 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block\u0026id=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026t=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2023summary","href":"/post/2023summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:27.095Z","publishDate":1703980800000,"ext":{},"short_id":"d26ce18a"},{"title":"混乱的软中断概念","pageCoverThumbnail":"","category":null,"tags":["Linux","内核"],"summary":"软中断（softirq）和软件中断（software interrupt）","slug":"post/softirq-and-software-interrupt","href":"/post/softirq-and-software-interrupt","pageIcon":"","lastEditedDate":"2024-08-27T15:25:25.736Z","publishDate":1692144000000,"ext":{},"short_id":"3327d648"},{"title":"PVE8 上启用 12 代 Intel CPU 核显 SR-IOV","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"拯救我的 Galgame 和追番体验～","slug":"post/pve8-intel-sr-iov","href":"/post/pve8-intel-sr-iov","pageIcon":"","lastEditedDate":"2024-08-27T15:25:24.786Z","publishDate":1691280000000,"ext":{},"short_id":"d5fd419b"},{"title":"容器标准和生态","pageCoverThumbnail":"","category":null,"tags":["Cloud Native"],"summary":null,"slug":"post/container-spec-ecosystem","href":"/post/container-spec-ecosystem","pageIcon":"","lastEditedDate":"2024-08-27T15:25:22.390Z","publishDate":1689120000000,"ext":{},"short_id":"deaccfa2"},{"title":"Vim as an IDE","pageCoverThumbnail":"","category":null,"tags":["折腾","Vim"],"summary":"记录 Vim 入教过程和折腾记录","slug":"post/vim-as-an-ide","href":"/post/vim-as-an-ide","pageIcon":"","lastEditedDate":"2024-08-27T15:25:23.390Z","publishDate":1687392000000,"ext":{},"short_id":"f26f0a34"},{"title":"Kubernetes CSI","pageCoverThumbnail":"","category":null,"tags":["Cloud Native","Kubernetes"],"summary":null,"slug":"post/kubernetes-csi","href":"/post/kubernetes-csi","pageIcon":"","lastEditedDate":"2024-08-27T15:25:21.307Z","publishDate":1686960000000,"ext":{},"short_id":"a23d61e0"},{"title":"2022 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F967f6a03-c26f-451c-971a-3b507ae769f3%2Ftencent_badge.jpg?table=block\u0026id=cc463e20-63ea-4132-acea-84fc7307dde8\u0026t=cc463e20-63ea-4132-acea-84fc7307dde8\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2022summary","href":"/post/2022summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:20.451Z","publishDate":1672444800000,"ext":{},"short_id":"cc463e20"},{"title":"The Google File System 论文概览","pageCoverThumbnail":"","category":null,"tags":["论文阅读","分布式系统"],"summary":null,"slug":"post/gfs-paper","href":"/post/gfs-paper","pageIcon":"","lastEditedDate":"2024-08-27T15:25:15.003Z","publishDate":1644796800000,"ext":{},"short_id":"1eecd7c4"},{"title":"MIT6.824 Lab1 MapReduce","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":null,"slug":"post/mit6824-lab1-mapreduce","href":"/post/mit6824-lab1-mapreduce","pageIcon":"","lastEditedDate":"2024-08-27T15:25:13.836Z","publishDate":1644624000000,"ext":{},"short_id":"514ae2e3"},{"title":"蒟蒻的 2021 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block\u0026id=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026t=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"落落落落的一年","slug":"post/2021summary","href":"/post/2021summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:12.636Z","publishDate":1640908800000,"ext":{},"short_id":"7b0eb02d"},{"title":"蒟蒻的 2020 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F1dc80ee3-5c1d-4af8-a284-d7896174816a%2Ficpc%25E5%258D%2597%25E4%25BA%25AC.png?table=block\u0026id=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026t=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"转眼三年已经过去，我也迎来了毕业","slug":"post/2020summary","href":"/post/2020summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:11.370Z","publishDate":1610236800000,"ext":{},"short_id":"37c4cfd9"},{"title":"蒟蒻的 2019 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F2fdfd260-e2c8-42ea-9d8d-6fd6795797dc%2Flanqiao.jpeg?table=block\u0026id=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026t=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"随着2019年最后一晚的落幕，21世纪的10年代也结束了，今年的我无论是在技术上还是别的方面，都成长了许多。以本文记录我的技术路程，迎接新的一年","slug":"post/2019summary","href":"/post/2019summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:09.504Z","publishDate":1577836800000,"ext":{},"short_id":"8aa3f594"},{"title":"蒟蒻的 2018 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff362b439-342f-451a-b70e-41ec07d86ab3%2F2018summary.jpeg?table=block\u0026id=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026t=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"又是一年过去了，2018算是人生中最重要的转折点之一，总结一下今年的经历和感想，也算是记录我的技术路程","slug":"post/2018summary","href":"/post/2018summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:07.408Z","publishDate":1546214400000,"ext":{},"short_id":"806f9f46"}],"tagOptions":[{"name":"碎碎念","color":"red","count":7},{"name":"分布式系统","color":"gray","count":3},{"name":"折腾","color":"blue","count":3},{"name":"Linux","color":"purple","count":2},{"name":"内核","color":"blue","count":2},{"name":"Cloud Native","color":"brown","count":2},{"name":"存储","color":"default","count":1},{"name":"Vim","color":"pink","count":1},{"name":"论文阅读","color":"orange","count":1},{"name":"Kubernetes","color":"green","count":1}],"categoryOptions":[],"customNav":[{"icon":"fas fa-link","name":"友链","href":"/links","target":"_self","show":true},{"icon":null,"name":"关于","href":"/about","target":"_self","show":true}],"customMenu":[{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/","title":"🏠 首页","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:49.016Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/","name":"🏠 首页","target":"_self","password":"","show":true},{"date":{"start_date":"2024-08-24","date_format":"relative"},"type":"Menu","slug":"/archive","title":"📃 归档","status":"Published","category":"","comment":"","publishDate":1724457600000,"publishDay":"2024-8-24","lastEditedDate":"2024-08-25T14:25:34.971Z","lastEditedDay":"2024-8-25","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/archive","name":"📃 归档","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/links","summary":"跳转到/links","title":"👬 友链","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:37.252Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/links","name":"👬 友链","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/about","summary":"跳转到/about","title":"👤 关于","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:43.389Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/about","name":"👤 关于","target":"_self","password":"","show":true}],"postCount":17,"latestPosts":[{"id":"bde25ba8-2381-4da6-bb5e-5787ace45def","date":{"start_date":"2024-08-08","date_format":"relative"},"type":"Post","slug":"post/longhorn","tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","title":"Longhorn 浅析","status":"Published","category":"","comment":"","publishDate":1723075200000,"publishDay":"2024-8-8","lastEditedDate":"2024-09-14T04:21:06.938Z","lastEditedDay":"2024-9-14","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"存储","color":"default"},{"name":"分布式系统","color":"gray"}],"href":"/post/longhorn","target":"_self","password":""},{"id":"5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","date":{"start_date":"2024-09-03","date_format":"relative"},"type":"Post","slug":"post/infra-dilemma","tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","title":"Infra 窘境","status":"Published","category":"","comment":"","publishDate":1725321600000,"publishDay":"2024-9-3","lastEditedDate":"2024-09-12T13:38:22.109Z","lastEditedDay":"2024-9-12","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/infra-dilemma","target":"_self","password":""},{"id":"a06c26b2-5941-43ea-a89e-d0bebab47add","date":{"start_date":"2024-08-25","date_format":"relative"},"type":"Post","slug":"post/migrate-blog-to-notion","tags":["折腾"],"summary":"Make Notion Great Again！","title":"迁移博客到 Notion","status":"Published","category":"","comment":"","publishDate":1724544000000,"publishDay":"2024-8-25","lastEditedDate":"2024-08-29T13:08:42.341Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"折腾","color":"blue"}],"href":"/post/migrate-blog-to-notion","target":"_self","password":""},{"id":"0e96a78e-dec9-4620-b0e8-a2b889017cb7","date":{"start_date":"2024-01-04","date_format":"relative"},"type":"Post","slug":"post/kernel-rwlock","tags":["Linux","内核"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","title":"从 Linux 内核看读写锁设计","status":"Published","category":"","comment":"","publishDate":1704326400000,"publishDay":"2024-1-4","lastEditedDate":"2024-08-27T15:25:28.206Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Linux","color":"purple"},{"name":"内核","color":"blue"}],"href":"/post/kernel-rwlock","target":"_self","password":""},{"id":"d26ce18a-fa8d-4df4-8b82-69c419c5b621","date":{"start_date":"2023-12-31","date_format":"relative"},"type":"Post","slug":"post/2023summary","tags":["碎碎念"],"title":"2023 年度总结","status":"Published","category":"","comment":"","publishDate":1703980800000,"publishDay":"2023-12-31","lastEditedDate":"2024-08-27T15:25:27.095Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block\u0026id=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026t=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block\u0026id=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026t=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2023summary","target":"_self","password":""},{"id":"3327d648-8e54-4edf-a38e-a9cba8884a1a","date":{"start_date":"2023-08-16","date_format":"relative"},"type":"Post","slug":"post/softirq-and-software-interrupt","tags":["Linux","内核"],"summary":"软中断（softirq）和软件中断（software interrupt）","title":"混乱的软中断概念","status":"Published","category":"","comment":"","publishDate":1692144000000,"publishDay":"2023-8-16","lastEditedDate":"2024-08-27T15:25:25.736Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Linux","color":"purple"},{"name":"内核","color":"blue"}],"href":"/post/softirq-and-software-interrupt","target":"_self","password":""}],"post":{"id":"deaccfa2-4562-437c-874e-fc5041f3fad5","date":{"start_date":"2023-07-12","date_format":"relative"},"type":"Post","slug":"post/container-spec-ecosystem","tags":["Cloud Native"],"title":"容器标准和生态","status":"Published","category":"","comment":"","publishDate":1689120000000,"publishDay":"2023-7-12","lastEditedDate":"2024-08-27T15:25:22.390Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Cloud Native","color":"brown"}],"href":"/post/container-spec-ecosystem","target":"_self","password":"","blockMap":{"block":{"deaccfa2-4562-437c-874e-fc5041f3fad5":{"value":{"id":"deaccfa2-4562-437c-874e-fc5041f3fad5","version":303,"type":"page","content":["66df46a9-db19-4cf2-b01b-4b07ca0aedf5","dfae54b7-3b7f-4388-bded-e69a7ad43831","3c19fc13-4661-48eb-8b90-23eababa4156","50ec4646-c174-4724-ae76-307339ac24cd","57bc02d6-b8da-45e8-984e-a1a4719e8b84","326fe92b-930e-4809-a74b-9f3369d8a618","70e9b5ae-8719-4455-b928-6386137d8db5","5e5ada37-8014-4492-b098-2cf0f4aab0e0","62c9fc88-3fc9-4009-a59c-7c485127a8da","6cead1f9-7862-454d-ac39-e12536cd21a4","7dc755bd-9da6-46ea-828c-8c0611df54af","5d15dbb8-36a4-4e18-a271-70a6ea1fc07a","21ea0dbd-8ffa-40b5-9f78-e4c445fcdd5f","b62c7847-4cf0-4d46-bf28-47a05b7f3154","0e86f41d-8ac1-4cd1-be9b-b1053e842cdc","542b9ce8-8bd7-49e4-aa42-7603e67197ee","cdb1929a-f03b-4124-b1db-345ffd280ccf","572847b9-59f5-44d0-b4b6-763e9e1828b5","41b94b51-4731-47f8-85ec-5fa44816f48e","342138f9-f51d-405e-81b7-acc9327aa883","010008c3-6b5e-4e6b-ba0d-d657aa24ff07","b43a7707-5942-4475-8a96-7e2cd2deae11","515e16e2-ca7c-438b-8a96-b343c85925e6","d22a2efa-8734-4375-92bc-cfdbb9c91b23","ba89302f-9e1d-46ce-a386-c5023d2edef8","3f3b9a39-e554-4fa2-bfcb-279291dd3f6f","1081ffdd-4c71-4e0b-b5c4-088019e8f50d","4b9e24a0-1d2f-46db-828f-848dd3633d2b","704fc326-2c61-4187-ab02-80ce37449d07","5e9bb446-8a65-44b4-b641-d22bbdad5980","92816505-b2e1-468c-8fa9-dc21059de4c5","7976d428-80bc-4fe7-a00d-056720c93935","04e87d88-f02f-41e6-af2a-8aff149e665a","c62b2c6a-417c-4029-be9e-d87178c87c08","627d62d6-4348-4ed0-9f16-961b3d213471","7acbd22c-8f76-4917-ab6a-c05bb2d07e12","50649ed3-c65b-4be3-9c9c-171c57a9f834","db8507d8-32c4-4cc2-8013-ee25f2bf405f","15ba5cdb-d5fd-4d62-b140-fa88c5e9a5b1","363c3ccb-a2ff-40a4-8e96-2eaf68d5c953","5a31e272-7ece-4086-96a5-a4a76d3d8e81","7c1b0ee3-81ae-46a7-bffb-dae9ace6082c","cf184e1c-b827-448c-84ac-75080f72f837","946561b6-9cef-4dd2-a166-cead429eaa3d","b15c726a-7cc3-45ec-a08d-9874db9cb784","4c486031-8a28-4b62-9bb0-51d7d5bd588a","8fe9edcd-9f10-4b14-97ff-f91b8050d710","71146b10-a4eb-497d-a6d1-b8e17ab3051c","e4452896-da27-4954-b9cb-667a726b598b","8f9a8351-762d-428b-a9e3-14f89f31d819","ed938447-4174-4c1a-a15b-cc220b940a8f","ed2d2608-9b90-45ca-a3e7-d6c2ec0c6bb0","0f674f0b-4985-43b6-a0b8-ddaec8bda454","43a2b96e-cbee-4fff-9b89-55bc89f0d8b0","3aa91ef3-87a7-45ee-b200-8493466e5d88","cce64b0c-0051-47e5-a5fe-6d47ffbbbc92","cc9bb24e-3eb6-43f6-b951-38b58d0ec562","4c14b3b2-085a-45dc-a4bb-28119c577347","617df41a-4ad3-4ec7-998a-1e73bb06c0f5","a3b03c2e-8511-4ef7-84b0-f8c696af07b5","7fc7ff46-f464-4657-993d-23b82d0a400f","39809648-2f24-4da1-a9d7-84e91beb418f","b9c93da2-9a99-44e9-b48c-7a174718fa92","656232ca-4ad7-41a2-a14d-0d6d025c70d4","cd8dc61a-dfea-4bc0-9003-27173e9ffc6e","dee2d18f-e9b6-4d94-b1ad-93e60be4e160","711a0652-60ae-49fe-b23e-a316c760ed5c","3fefe88f-d29a-46a7-95ae-9156b0e1289a","b502cfff-8905-4d9c-90d2-e057a66ed0dd","14e3d853-5014-4597-8dca-c741b05a98df","c7d52a98-f875-45c7-92fd-06be63b4eea1","925d1d45-3a93-46f5-955e-9d6bc6c46ff5","c8f29e1b-646a-4ac4-98dd-f2c9555d9079","23045257-fd46-46eb-80ca-dda9478e10c3","3f17867c-a9b1-4d27-81e9-9b3e0e8a5a8f","ec86724d-d10c-416a-bef6-8102b1e056f9","68f76f3d-5ec3-41d3-9306-e815d2ae9083","c3fac745-c0db-4805-abac-4afbf25d7b9c","72f69691-b689-459a-aec0-9a87fd9606f9","8788eb10-ebbe-41c5-92e5-ea1cc9c3cd2b","71d09c0a-3f1b-4053-89ba-d3aa0b8dc921","5fc8337f-2e5b-4be7-bf2b-e40cbafeb033","78ce7dc9-1f17-4b6b-8171-874b0f74786b","17b841c9-6dba-481d-b4a1-7f765a517378","7df41463-8bbe-4fc3-9c9e-1a33c836a872","737f0b6c-c5f0-476a-baf8-d74b005c8331","5f59ea20-3976-4a5a-8f61-a088f32a55ad","53b38eb9-3195-4c06-ace9-1a538c205dea","576b6a09-bf5c-4e64-b4ac-2d13060fbb17"],"format":{"page_font":"mono","block_locked":false,"block_locked_by":"919e7400-5a69-4402-b2e1-f7d99cc48131","copied_from_pointer":{"id":"2eace25c-842c-46fd-9ccb-e9190981b6c3","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"page_cover_position":0.6,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/20d09889-b377-4044-bdd8-c7070833f235/SocialMediaPreviewImage.png"},"created_time":1724599793373,"last_edited_time":1724772322390,"parent_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","parent_table":"collection","alive":true,"copied_from":"2eace25c-842c-46fd-9ccb-e9190981b6c3","file_ids":["20d09889-b377-4044-bdd8-c7070833f235"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0dc306ca-50a6-4917-9b5a-85a61f0f66f5":{"value":{"id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","version":143,"type":"collection_view_page","content":["c12d1fcb-2e22-4dc3-a5f5-b5010c63059a"],"view_ids":["2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","8dfd415c-71af-41f9-b984-e7182bf2210b","3c2f93d8-6810-42a1-87da-55f1ecda9bca"],"collection_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","format":{"site_id":"cd684fc1-aa3f-4897-8f3a-ec903e77f063","block_locked":false,"block_locked_by":"27074aef-7216-41ed-baef-d9b53addd870","collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"copied_from_pointer":{"id":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","table":"block","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"page_cover_position":0.5,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/16412a4f-3220-4021-b553-56a010794a94/SocialMediaPreviewImage.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"919e7400-5a69-4402-b2e1-f7d99cc48131"},{"role":"reader","type":"public_permission","added_timestamp":1724420656606,"allow_duplicate":false}],"created_time":1724383978099,"last_edited_time":1725549574575,"parent_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","parent_table":"space","alive":true,"copied_from":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","file_ids":["49b4570c-b2f0-457b-81b7-b68e2693a471","708d7d1d-6233-408b-952f-594bb2831de7","145cea07-09d7-4146-bcf5-bebd1518488c","a9af1d6b-f284-4734-ba06-990353cf3f84","20ee2bf3-8f75-4cd7-9d6e-e1a780d5f17c","16412a4f-3220-4021-b553-56a010794a94"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"66df46a9-db19-4cf2-b01b-4b07ca0aedf5":{"value":{"id":"66df46a9-db19-4cf2-b01b-4b07ca0aedf5","version":2,"type":"sub_header","properties":{"title":[["OCI（Open Container Initiative）"]]},"created_time":1724682264789,"last_edited_time":1724682264791,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"dfae54b7-3b7f-4388-bded-e69a7ad43831":{"value":{"id":"dfae54b7-3b7f-4388-bded-e69a7ad43831","version":2,"type":"text","properties":{"title":[["OCI（Open Container Initiative，开放容器提议）",[["a","https://opencontainers.org/about/overview/"]]],["，是围绕容器镜像格式和运行时设立的标准，在 2015 年 6 月推出。基于 Docker 捐赠的 "],["runC",[["a","https://github.com/opencontainers/runc"]]],[" 实现之上发展而来"]]},"created_time":1724682264790,"last_edited_time":1724682264791,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c19fc13-4661-48eb-8b90-23eababa4156":{"value":{"id":"3c19fc13-4661-48eb-8b90-23eababa4156","version":2,"type":"text","properties":{"title":[["其中，镜像标准（"],["image-spec",[["a","https://github.com/opencontainers/image-spec"]]],["）规定了镜像如何组织文件层，镜像配置文件格式"]]},"created_time":1724682264790,"last_edited_time":1724682264791,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"50ec4646-c174-4724-ae76-307339ac24cd":{"value":{"id":"50ec4646-c174-4724-ae76-307339ac24cd","version":2,"type":"text","properties":{"title":[["运行时标准（"],["runtime-spec",[["a","https://github.com/opencontainers/runtime-spec"]]],["）规定了容器的生命周期和需要支持的操作、配置项等"]]},"created_time":1724682264790,"last_edited_time":1724682264791,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"57bc02d6-b8da-45e8-984e-a1a4719e8b84":{"value":{"id":"57bc02d6-b8da-45e8-984e-a1a4719e8b84","version":2,"type":"text","properties":{"title":[["2022 年 5 月新增加了分发标准（"],["distribution-spec",[["a","https://github.com/opencontainers/distribution-spec"]]],["），规定了镜像分发的 API 协议，包括认证方式、Push、Pull、内容发现、管理等"]]},"created_time":1724682264790,"last_edited_time":1724682264791,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"326fe92b-930e-4809-a74b-9f3369d8a618":{"value":{"id":"326fe92b-930e-4809-a74b-9f3369d8a618","version":2,"type":"sub_sub_header","properties":{"title":[["镜像组成"]]},"created_time":1724682302098,"last_edited_time":1724682302100,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"70e9b5ae-8719-4455-b928-6386137d8db5":{"value":{"id":"70e9b5ae-8719-4455-b928-6386137d8db5","version":4,"type":"text","properties":{"title":[["OCI 标准中，镜像由 index，config 和各个 layer 组成、"]]},"created_time":1724682302099,"last_edited_time":1724682311882,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5e5ada37-8014-4492-b098-2cf0f4aab0e0":{"value":{"id":"5e5ada37-8014-4492-b098-2cf0f4aab0e0","version":11,"type":"image","properties":{"size":[["39.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/549cfd4e-8dc3-44e3-8a89-9874d88a18a3/image.png"]]},"format":{"block_width":1152,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/549cfd4e-8dc3-44e3-8a89-9874d88a18a3/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3333333333333333,"block_preserve_scale":true},"created_time":1724682312424,"last_edited_time":1724682318103,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["549cfd4e-8dc3-44e3-8a89-9874d88a18a3"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"62c9fc88-3fc9-4009-a59c-7c485127a8da":{"value":{"id":"62c9fc88-3fc9-4009-a59c-7c485127a8da","version":5,"type":"text","properties":{"title":[["拉取一个 nginx 镜像并解压，可以看到其目录格式"]]},"created_time":1724682317031,"last_edited_time":1724682317508,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"6cead1f9-7862-454d-ac39-e12536cd21a4":{"value":{"id":"6cead1f9-7862-454d-ac39-e12536cd21a4","version":7,"type":"code","properties":{"title":[["$ docker pull nginx\n$ docker image save nginx -o nginx.tar\n$ mkdir nginx-image\n$ tar -C nginx-image -xvf nginx.tar\n$ tree nginx-image/\nnginx-image/\n├── 180ddd9cc15d32f0c1d5f85cf442ef1179f21ae197b60bf086b0e8c7ef153737\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── 2002d33a54f72d1333751d4d1b4793a60a635eac6e94a98daf0acea501580c4f.json\n├── 3cba2048aa0f37f06b8b1a3949e6b67da78d9f49fb6d5f34fefa328a304dfe8e\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── 570d178d9aab5e7b03bdf17302b91cece28924d72f204567dd6c2fcb1667e883\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── 5839a53cafa501af1381d6f0db2084e32bb64d0a1461a278f587cc0ea4fc62e2\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── 664733ad6a589f5aa51e830e2a10c0768b854f28cc278316938c00ce1c4c60e2\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── 907ca8c9f37f4bb34cef8feea392fff0d811b7d1fff826dc84c8330c0b158227\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── ae5db48f55baf22a5d27ab7965647d55c3f6aba87733e5f0ae57188d956a8a7b\n│   ├── VERSION\n│   ├── json\n│   └── layer.tar\n├── manifest.json\n└── repositories\n\n8 directories, 24 files"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682320004,"last_edited_time":1724682324992,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7dc755bd-9da6-46ea-828c-8c0611df54af":{"value":{"id":"7dc755bd-9da6-46ea-828c-8c0611df54af","version":2,"type":"text","properties":{"title":[["Docker 镜像并不符合 OCI 镜像标准，但 OCI 的镜像标准基于 Docker 镜像标准，因此两者在结构上是类似的，有一定对应关系"]]},"created_time":1724682333703,"last_edited_time":1724682333704,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5d15dbb8-36a4-4e18-a271-70a6ea1fc07a":{"value":{"id":"5d15dbb8-36a4-4e18-a271-70a6ea1fc07a","version":2,"type":"text","properties":{"title":[["使用 "],["skopeo",[["a","https://github.com/containers/skopeo"]]],[" 可以将 Docker 镜像转化为 OCI 镜像"]]},"created_time":1724682333703,"last_edited_time":1724682333704,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"21ea0dbd-8ffa-40b5-9f78-e4c445fcdd5f":{"value":{"id":"21ea0dbd-8ffa-40b5-9f78-e4c445fcdd5f","version":6,"type":"code","properties":{"title":[["$ skopeo copy docker-archive:nginx.tar oci:nginx-oci-image\n$ tree nginx-oci-image\nnginx-oci-image\n├── blobs\n│   └── sha256\n│       ├── 365ede46b010c470bbbd13f6bacc0df1700116f4c3a01f25a0fab726b7860e31\n│       ├── 50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd\n│       ├── 55bc6f293903816a086b9803b0fac7d6e854976aa96cfaacd66b39b4754415d0\n│       ├── 7a33d678a8761d2b10b60fe4da32e70e201d65550d2601f9b2e3e5fb4cc6e115\n│       ├── 861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d\n│       ├── af84cea3992c73a86ca5b3fcb8043f0964308be3db3dbc93222c589b15e90ba7\n│       ├── ba28188e316f3a7d8b65f6496a57cb9ce5f59b636ed0b0fae8bf564723321448\n│       ├── c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e\n│       └── f0baa6626451c47bb1cb7f72d5cb0e732283a231fa4cb001a36b55e5fc31640f\n├── index.json\n└── oci-layout\n\n3 directories, 11 files"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682336715,"last_edited_time":1724682341037,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b62c7847-4cf0-4d46-bf28-47a05b7f3154":{"value":{"id":"b62c7847-4cf0-4d46-bf28-47a05b7f3154","version":2,"type":"text","properties":{"title":[["index.json 是 "],["image index",[["a","https://github.com/opencontainers/image-spec/blob/main/image-index.md"]]],["，用于索引 manifest 文件，跨平台和架构的镜像可能对每一个平台都有一个 manifest 文件"]]},"created_time":1724682345807,"last_edited_time":1724682345809,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0e86f41d-8ac1-4cd1-be9b-b1053e842cdc":{"value":{"id":"0e86f41d-8ac1-4cd1-be9b-b1053e842cdc","version":10,"type":"code","properties":{"title":[["$ cat nginx-oci-image/index.json | json_pp\n{\n   \"manifests\" : [\n      {\n         \"digest\" : \"sha256:c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e\",\n         \"mediaType\" : \"application/vnd.oci.image.manifest.v1+json\",\n         \"size\" : 1338\n      }\n   ],\n   \"schemaVersion\" : 2\n}"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682345807,"last_edited_time":1724682357029,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"542b9ce8-8bd7-49e4-aa42-7603e67197ee":{"value":{"id":"542b9ce8-8bd7-49e4-aa42-7603e67197ee","version":5,"type":"text","properties":{"title":[["manifests.digest",[["c"]]],[" 中就是 manifest 文件摘要值，同时也是文件名，由此可以很快找到 manifest 文件。"],["image manifest",[["a","https://github.com/opencontainers/image-spec/blob/master/manifest.md"]]],[" 索引了镜像的配置和 layer 层文件位置及其类型。可以看出，配置是一个 JSON 文件，而每一层是进行压缩后存储的。"]]},"created_time":1724682362370,"last_edited_time":1724682363054,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cdb1929a-f03b-4124-b1db-345ffd280ccf":{"value":{"id":"cdb1929a-f03b-4124-b1db-345ffd280ccf","version":7,"type":"code","properties":{"title":[["$ cat nginx-oci-image/blobs/sha256/c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e | json_pp\n{\n   \"config\" : {\n      \"digest\" : \"sha256:50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd\",\n      \"mediaType\" : \"application/vnd.oci.image.config.v1+json\",\n      \"size\" : 7075\n   },\n   \"layers\" : [\n      {\n         \"digest\" : \"sha256:861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 29922714\n      },\n      {\n         \"digest\" : \"sha256:f0baa6626451c47bb1cb7f72d5cb0e732283a231fa4cb001a36b55e5fc31640f\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 39120911\n      },\n      {\n         \"digest\" : \"sha256:ba28188e316f3a7d8b65f6496a57cb9ce5f59b636ed0b0fae8bf564723321448\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 630\n      },\n      {\n         \"digest\" : \"sha256:7a33d678a8761d2b10b60fe4da32e70e201d65550d2601f9b2e3e5fb4cc6e115\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 975\n      },\n      {\n         \"digest\" : \"sha256:af84cea3992c73a86ca5b3fcb8043f0964308be3db3dbc93222c589b15e90ba7\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 376\n      },\n      {\n         \"digest\" : \"sha256:365ede46b010c470bbbd13f6bacc0df1700116f4c3a01f25a0fab726b7860e31\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 1234\n      },\n      {\n         \"digest\" : \"sha256:55bc6f293903816a086b9803b0fac7d6e854976aa96cfaacd66b39b4754415d0\",\n         \"mediaType\" : \"application/vnd.oci.image.layer.v1.tar+gzip\",\n         \"size\" : 1439\n      }\n   ],\n   \"mediaType\" : \"application/vnd.oci.image.manifest.v1+json\",\n   \"schemaVersion\" : 2\n}"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682370374,"last_edited_time":1724682371759,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"572847b9-59f5-44d0-b4b6-763e9e1828b5":{"value":{"id":"572847b9-59f5-44d0-b4b6-763e9e1828b5","version":2,"type":"text","properties":{"title":[["image configuration",[["a","https://github.com/opencontainers/image-spec/blob/main/config.md"]]],[" 描述了镜像所属的平台，配置（类似在 Dockerfile 中定义的环境变量、端口、ENTRYPOINT、CMD 等），以及各个层的历史记录，"],["created_by",[["c"]]],[" 是创建层的命令，"],["empty_layer",[["c"]]],[" 表示该层是否导致文件系统变化。最后是各个层未压缩内容的摘要（"],["diff_ids",[["c"]]],["）"]]},"created_time":1724682383536,"last_edited_time":1724682383538,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"41b94b51-4731-47f8-85ec-5fa44816f48e":{"value":{"id":"41b94b51-4731-47f8-85ec-5fa44816f48e","version":10,"type":"code","properties":{"title":[["$ cat nginx-oci-image/blobs/sha256/50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd | json_pp\n{\n   \"architecture\" : \"arm64\",\n   \"config\" : {\n      \"Cmd\" : [\n         \"nginx\",\n         \"-g\",\n         \"daemon off;\"\n      ],\n      \"Entrypoint\" : [\n         \"/docker-entrypoint.sh\"\n      ],\n      \"Env\" : [\n         \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n         \"NGINX_VERSION=1.25.1\",\n         \"NJS_VERSION=0.7.12\",\n         \"PKG_RELEASE=1~bookworm\"\n      ],\n      \"ExposedPorts\" : {\n         \"80/tcp\" : {}\n      },\n      \"Labels\" : {\n         \"maintainer\" : \"NGINX Docker Maintainers \u003cdocker-maint@nginx.com\u003e\"\n      },\n      \"StopSignal\" : \"SIGQUIT\"\n   },\n   \"created\" : \"2023-07-04T04:07:41.151938228Z\",\n   \"history\" : [\n      {\n         \"created\" : \"2023-07-04T01:57:35.692631089Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) ADD file:71fd66666294148382f2e6a09ae5e277d4c4e9c74402ab64b693a79387b67a09 in / \"\n      },\n      {\n         \"created\" : \"2023-07-04T01:57:36.102524763Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  CMD [\\\"bash\\\"]\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:14.692138315Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  LABEL maintainer=NGINX Docker Maintainers \u003cdocker-maint@nginx.com\u003e\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:14.774865505Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  ENV NGINX_VERSION=1.25.1\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:14.852567081Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  ENV NJS_VERSION=0.7.12\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:14.931774163Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  ENV PKG_RELEASE=1~bookworm\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.172513807Z\",\n         \"created_by\" : \"/bin/sh -c set -x     \u0026\u0026 groupadd --system --gid 101 nginx     \u0026\u0026 useradd --system --gid nginx --no-create-home --home /nonexistent --comment \\\"nginx user\\\" --shell /bin/false --uid 101 nginx     \u0026\u0026 apt-get update     \u0026\u0026 apt-get install --no-install-recommends --no-install-suggests -y gnupg1 ca-certificates     \u0026\u0026     NGINX_GPGKEY=573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62;     NGINX_GPGKEY_PATH=/usr/share/keyrings/nginx-archive-keyring.gpg;     export GNUPGHOME=\\\"$(mktemp -d)\\\";     found='';     for server in         hkp://keyserver.ubuntu.com:80         pgp.mit.edu     ; do         echo \\\"Fetching GPG key $NGINX_GPGKEY from $server\\\";         gpg1 --keyserver \\\"$server\\\" --keyserver-options timeout=10 --recv-keys \\\"$NGINX_GPGKEY\\\" \u0026\u0026 found=yes \u0026\u0026 break;     done;     test -z \\\"$found\\\" \u0026\u0026 echo \u003e\u00262 \\\"error: failed to fetch GPG key $NGINX_GPGKEY\\\" \u0026\u0026 exit 1;     gpg1 --export \\\"$NGINX_GPGKEY\\\" \u003e \\\"$NGINX_GPGKEY_PATH\\\" ;     rm -rf \\\"$GNUPGHOME\\\";     apt-get remove --purge --auto-remove -y gnupg1 \u0026\u0026 rm -rf /var/lib/apt/lists/*     \u0026\u0026 dpkgArch=\\\"$(dpkg --print-architecture)\\\"     \u0026\u0026 nginxPackages=\\\"         nginx=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}+${NJS_VERSION}-${PKG_RELEASE}     \\\"     \u0026\u0026 case \\\"$dpkgArch\\\" in         amd64|arm64)             echo \\\"deb [signed-by=$NGINX_GPGKEY_PATH] https://nginx.org/packages/mainline/debian/ bookworm nginx\\\" \u003e\u003e /etc/apt/sources.list.d/nginx.list             \u0026\u0026 apt-get update             ;;         *)             echo \\\"deb-src [signed-by=$NGINX_GPGKEY_PATH] https://nginx.org/packages/mainline/debian/ bookworm nginx\\\" \u003e\u003e /etc/apt/sources.list.d/nginx.list                         \u0026\u0026 tempDir=\\\"$(mktemp -d)\\\"             \u0026\u0026 chmod 777 \\\"$tempDir\\\"                         \u0026\u0026 savedAptMark=\\\"$(apt-mark showmanual)\\\"                         \u0026\u0026 apt-get update             \u0026\u0026 apt-get build-dep -y $nginxPackages             \u0026\u0026 (                 cd \\\"$tempDir\\\"                 \u0026\u0026 DEB_BUILD_OPTIONS=\\\"nocheck parallel=$(nproc)\\\"                     apt-get source --compile $nginxPackages             )                         \u0026\u0026 apt-mark showmanual | xargs apt-mark auto \u003e /dev/null             \u0026\u0026 { [ -z \\\"$savedAptMark\\\" ] || apt-mark manual $savedAptMark; }                         \u0026\u0026 ls -lAFh \\\"$tempDir\\\"             \u0026\u0026 ( cd \\\"$tempDir\\\" \u0026\u0026 dpkg-scanpackages . \u003e Packages )             \u0026\u0026 grep '^Package: ' \\\"$tempDir/Packages\\\"             \u0026\u0026 echo \\\"deb [ trusted=yes ] file://$tempDir ./\\\" \u003e /etc/apt/sources.list.d/temp.list             \u0026\u0026 apt-get -o Acquire::GzipIndexes=false update             ;;     esac         \u0026\u0026 apt-get install --no-install-recommends --no-install-suggests -y                         $nginxPackages                         gettext-base                         curl     \u0026\u0026 apt-get remove --purge --auto-remove -y \u0026\u0026 rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/nginx.list         \u0026\u0026 if [ -n \\\"$tempDir\\\" ]; then         apt-get purge -y --auto-remove         \u0026\u0026 rm -rf \\\"$tempDir\\\" /etc/apt/sources.list.d/temp.list;     fi     \u0026\u0026 ln -sf /dev/stdout /var/log/nginx/access.log     \u0026\u0026 ln -sf /dev/stderr /var/log/nginx/error.log     \u0026\u0026 mkdir /docker-entrypoint.d\"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.509711194Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) COPY file:7b307b62e82255f040c9812421a30090bf9abf3685f27b02d77fcca99f997911 in / \"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.592126807Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) COPY file:5c18272734349488bd0c94ec8d382c872c1a0a435cca13bd4671353d6021d2cb in /docker-entrypoint.d \"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.669169781Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) COPY file:d4375883ed5db364232ccf781e8ad28514cd005edb385d43dbfb984f2c63edb9 in /docker-entrypoint.d \"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.748027972Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) COPY file:36429cfeeb299f9913b84ea136b004be12fbe4bb4f975a977a3608044e8bfa91 in /docker-entrypoint.d \"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.825522699Z\",\n         \"created_by\" : \"/bin/sh -c #(nop) COPY file:e57eef017a414ca793499729d80a7b9075790c9a804f930f1417e56d506970cf in /docker-entrypoint.d \"\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.903102418Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  ENTRYPOINT [\\\"/docker-entrypoint.sh\\\"]\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:40.983008834Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  EXPOSE 80\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:41.065899155Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  STOPSIGNAL SIGQUIT\",\n         \"empty_layer\" : true\n      },\n      {\n         \"created\" : \"2023-07-04T04:07:41.151938228Z\",\n         \"created_by\" : \"/bin/sh -c #(nop)  CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\",\n         \"empty_layer\" : true\n      }\n   ],\n   \"os\" : \"linux\",\n   \"rootfs\" : {\n      \"diff_ids\" : [\n         \"sha256:efd1965f1684506744544d66c57387a60bd89607480e2dbc89bf3e8a30081bc1\",\n         \"sha256:c58d5a26ffa8db76c403fb4c29965689bb96d291f6b7973fcd2da7458e77b09f\",\n         \"sha256:4e6bef96e37ee051573dda6c367adb7310ef7a87128ce00fcf0ce2cbd2d8779b\",\n         \"sha256:ad6517b0c9140f029ee765885ec82f571513bc8db2f834aa1d204f67d61cad12\",\n         \"sha256:7cd1e5cbf1244b4fcca08e842c7672aba5ead973c2a4532496278aa5846802a3\",\n         \"sha256:45437bbd87f23643f7893993d62b4affddbdf91808ff8cd0530b301acbc5f120\",\n         \"sha256:0a13d2aaa54c14621a732a3ffe6f25a487aa726529ad152c4174d2e741b7ef66\"\n      ],\n      \"type\" : \"layers\"\n   },\n   \"variant\" : \"v8\"\n}"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682383536,"last_edited_time":1724682401437,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"342138f9-f51d-405e-81b7-acc9327aa883":{"value":{"id":"342138f9-f51d-405e-81b7-acc9327aa883","version":5,"type":"text","properties":{"title":[["如果对层进行解压，就可以得到里面文件系统的内容"]]},"created_time":1724682416046,"last_edited_time":1724682420288,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"010008c3-6b5e-4e6b-ba0d-d657aa24ff07":{"value":{"id":"010008c3-6b5e-4e6b-ba0d-d657aa24ff07","version":7,"type":"code","properties":{"title":[["$ mkdir rootfs\n$ tar -zxvf nginx-oci-image/blobs/sha256/861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d -C rootfs/\n$ tree rootfs -L 1\nrootfs\n├── bin -\u003e usr/bin\n├── boot\n├── dev\n├── etc\n├── home\n├── lib -\u003e usr/lib\n├── media\n├── mnt\n├── opt\n├── proc\n├── root\n├── run\n├── sbin -\u003e usr/sbin\n├── srv\n├── sys\n├── tmp\n├── usr\n└── var\n\n19 directories, 0 files"]],"language":[["Bash"]]},"format":{"code_wrap":false},"created_time":1724682423659,"last_edited_time":1724682428147,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b43a7707-5942-4475-8a96-7e2cd2deae11":{"value":{"id":"b43a7707-5942-4475-8a96-7e2cd2deae11","version":3,"type":"text","created_time":1724682742277,"last_edited_time":1724682742278,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"515e16e2-ca7c-438b-8a96-b343c85925e6":{"value":{"id":"515e16e2-ca7c-438b-8a96-b343c85925e6","version":2,"type":"sub_sub_header","properties":{"title":[["运行时"]]},"created_time":1724682435530,"last_edited_time":1724682435533,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"d22a2efa-8734-4375-92bc-cfdbb9c91b23":{"value":{"id":"d22a2efa-8734-4375-92bc-cfdbb9c91b23","version":2,"type":"text","properties":{"title":[["runC 是纯粹的 runtime，OCI 的 runtime-spec 基于 runC 制定"]]},"created_time":1724682435531,"last_edited_time":1724682435533,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ba89302f-9e1d-46ce-a386-c5023d2edef8":{"value":{"id":"ba89302f-9e1d-46ce-a386-c5023d2edef8","version":2,"type":"text","properties":{"title":[["要启动 runC（或其它符合 OCI runtime-spec 的运行时），需要一个 rootfs 和 "],["config.json",[["c"]]],["，rootfs 就是容器运行的文件系统，"],["config.json",[["c"]]],[" 则定义了运行的配置"]]},"created_time":1724682435531,"last_edited_time":1724682435533,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3f3b9a39-e554-4fa2-bfcb-279291dd3f6f":{"value":{"id":"3f3b9a39-e554-4fa2-bfcb-279291dd3f6f","version":2,"type":"text","properties":{"title":[["rootfs 可以从镜像 layer 中一层层解包合并得到。"],["config.json",[["c"]]],[" 的一个可能示例如下："]]},"created_time":1724682435531,"last_edited_time":1724682435533,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"1081ffdd-4c71-4e0b-b5c4-088019e8f50d":{"value":{"id":"1081ffdd-4c71-4e0b-b5c4-088019e8f50d","version":9,"type":"code","properties":{"title":[["{\n  \"ociVersion\": \"0.1.0\",\n  \"root\": {\n    \"path\": \"rootfs\",\n    \"readonly\": true\n  },\n  \"mounts\": [\n    {\n      \"destination\": \"/data\",\n      \"type\": \"none\",\n      \"source\": \"/volumes/testing\",\n      \"options\": [\"rbind\",\"rw\"]\n    }\n  ],\n  \"process\": {\n    \"env\": [\n      \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n      \"TERM=xterm\"\n    ],\n    \"args\": [\"sh\"]\n  }\n}"]],"language":[["JSON"]]},"format":{"code_wrap":false},"created_time":1724682445569,"last_edited_time":1724682450312,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"4b9e24a0-1d2f-46db-828f-848dd3633d2b":{"value":{"id":"4b9e24a0-1d2f-46db-828f-848dd3633d2b","version":2,"type":"text","properties":{"title":[["通过 "],["runc run",[["c"]]],[" 即可启动容器，会自动读取路径下的 "],["config.json",[["c"]]],["。其中 "],["root.path",[["c"]]],[" 指定了 rootfs 的路径"]]},"created_time":1724682458579,"last_edited_time":1724682458582,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"704fc326-2c61-4187-ab02-80ce37449d07":{"value":{"id":"704fc326-2c61-4187-ab02-80ce37449d07","version":2,"type":"text","properties":{"title":[["config.json",[["c"]]],[" 的配置和平常使用的 Docker 等基本都能大致对上，但 runC 是不包括网络实现的，通过 "],["runc exec",[["c"]]],[" 进入容器内就可以发现只有一张 loop 网卡"]]},"created_time":1724682458579,"last_edited_time":1724682458582,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5e9bb446-8a65-44b4-b641-d22bbdad5980":{"value":{"id":"5e9bb446-8a65-44b4-b641-d22bbdad5980","version":2,"type":"text","properties":{"title":[["这些部分是留给更高级的容器运行时去完成，例如可以在标准中生命周期的 "],["createContainer",[["c"]]],[" 和 "],["start",[["c"]]],[" 之间进行网卡创建，存储挂载等操作"]]},"created_time":1724682458580,"last_edited_time":1724682458582,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"92816505-b2e1-468c-8fa9-dc21059de4c5":{"value":{"id":"92816505-b2e1-468c-8fa9-dc21059de4c5","version":2,"type":"text","properties":{"title":[["runtime 这块还有一些有意思的实现，比如 "],["Kata",[["a","https://katacontainers.io/"]]],[" 和 "],["gVisor",[["a","https://gvisor.dev/"]]],[" 之类的内核容器，前者给容器跑了一个完整的 VMM（QEMU/KVM 等）来做内核隔离，后者给每个容器塞了一个 Go 写的模拟内核，重定向所有 syscall 过去，代替宿主机内核"]]},"created_time":1724682458580,"last_edited_time":1724682458582,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7976d428-80bc-4fe7-a00d-056720c93935":{"value":{"id":"7976d428-80bc-4fe7-a00d-056720c93935","version":3,"type":"text","created_time":1724682453708,"last_edited_time":1724682453708,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"04e87d88-f02f-41e6-af2a-8aff149e665a":{"value":{"id":"04e87d88-f02f-41e6-af2a-8aff149e665a","version":2,"type":"sub_sub_header","properties":{"title":[["一些历史"]]},"created_time":1724682463596,"last_edited_time":1724682463598,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c62b2c6a-417c-4029-be9e-d87178c87c08":{"value":{"id":"c62b2c6a-417c-4029-be9e-d87178c87c08","version":2,"type":"text","properties":{"title":[["在早期，Docker 拥有容器领域的绝对领导权，但作为一个商业公司，这实际上引发了其它公司（Red Hat、Google 等）的不满和担忧"]]},"created_time":1724682463596,"last_edited_time":1724682463598,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"627d62d6-4348-4ed0-9f16-961b3d213471":{"value":{"id":"627d62d6-4348-4ed0-9f16-961b3d213471","version":2,"type":"text","properties":{"title":[["Google 也尝试过开源自身的容器方案，但未能成功。因此 Google 向 Docker 提议共同推动一个中立的容器运行时作为 Docker 项目的核心依赖，但没有得到 Docker 的同意"]]},"created_time":1724682463596,"last_edited_time":1724682463598,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7acbd22c-8f76-4917-ab6a-c05bb2d07e12":{"value":{"id":"7acbd22c-8f76-4917-ab6a-c05bb2d07e12","version":3,"type":"text","created_time":1724682470089,"last_edited_time":1724682470090,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"50649ed3-c65b-4be3-9c9c-171c57a9f834":{"value":{"id":"50649ed3-c65b-4be3-9c9c-171c57a9f834","version":2,"type":"text","properties":{"title":[["在 2015 年，Docker 公司的强势长期饱受社区诟病，为了表示诚意，Docker 和 Google、Red Hat、CoreOS 决定成立一个「中立」的基金会，共同制定一套容器的标准和规范，这套标准就是 OCI。Docker 也将自身的 libcontainer 捐出，改名为 runC，作为 OCI 标准制定的基础"]]},"created_time":1724682463596,"last_edited_time":1724682463598,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"db8507d8-32c4-4cc2-8013-ee25f2bf405f":{"value":{"id":"db8507d8-32c4-4cc2-8013-ee25f2bf405f","version":3,"type":"text","created_time":1724682472442,"last_edited_time":1724682472444,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15ba5cdb-d5fd-4d62-b140-fa88c5e9a5b1":{"value":{"id":"15ba5cdb-d5fd-4d62-b140-fa88c5e9a5b1","version":2,"type":"text","properties":{"title":[["Docker 作为当时容器的事实标准，本身并无多大动力去推进 OCI 的发展，OCI 也未能削弱 Docker 的地位。Google 和 Red Hat 利用自己在大规模集群和平台上的经验，又成立了 CNCF（Cloud Native Computing Foundation），以 Google 内部的 Borg 孵化出的 Kubernetes 项目为基础，从平台侧架空 Docker，从现在来看，这个战略非常成功，Docker Swarm 面对 Kubernetes 无疑是失败的，Swarm 项目被取消，Docker 企业版直接内置 Kubernetes，放弃开源社区竞争，进行商业化转型。现在，CNCF 涉及越来越多的领域，成为了云原生新的绝对权威"]]},"created_time":1724682463596,"last_edited_time":1724682463598,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"363c3ccb-a2ff-40a4-8e96-2eaf68d5c953":{"value":{"id":"363c3ccb-a2ff-40a4-8e96-2eaf68d5c953","version":3,"type":"text","created_time":1724682474141,"last_edited_time":1724682474142,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5a31e272-7ece-4086-96a5-a4a76d3d8e81":{"value":{"id":"5a31e272-7ece-4086-96a5-a4a76d3d8e81","version":2,"type":"sub_header","properties":{"title":[["高级容器运行时"]]},"created_time":1724682480379,"last_edited_time":1724682480383,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7c1b0ee3-81ae-46a7-bffb-dae9ace6082c":{"value":{"id":"7c1b0ee3-81ae-46a7-bffb-dae9ace6082c","version":2,"type":"text","properties":{"title":[["runC 只实现了 OCI 的 runtime-spec（这句话有点别扭，是先有的 runC，才有的 OCI），也就是说，它是无法处理镜像的，只负责运行进程和隔离。这是一种低级容器运行时，而且 OCI 也只专注核心的容器功能，网络、存储标准都没有进行定义（目前比较流行的网络和存储标准分别是 "],["CNI",[["a","https://github.com/containernetworking/cni"]]],[" 和 "],["CSI",[["a","https://github.com/container-storage-interface/spec/blob/master/spec.md"]]],["）"]]},"created_time":1724682480379,"last_edited_time":1724682480383,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cf184e1c-b827-448c-84ac-75080f72f837":{"value":{"id":"cf184e1c-b827-448c-84ac-75080f72f837","version":2,"type":"text","properties":{"title":[["更多时候，我们指的容器运行时是高级容器运行时，高级容器运行时最基本的功能就是能够将镜像处理成 rootfs 来传递给 runC 等低级运行时，这个过程中还要处理镜像的 layer 共享等很多问题。通常也会包括监控、日志、管理、API 等更多功能"]]},"created_time":1724682480379,"last_edited_time":1724682480383,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"946561b6-9cef-4dd2-a166-cead429eaa3d":{"value":{"id":"946561b6-9cef-4dd2-a166-cead429eaa3d","version":13,"type":"image","properties":{"size":[["258.9KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7265c446-afe8-44ed-b5f3-a0ad2f7c4530/image.png"]]},"format":{"block_width":548.8635864257812,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7265c446-afe8-44ed-b5f3-a0ad2f7c4530/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3795,"block_preserve_scale":true},"created_time":1724682490708,"last_edited_time":1724682507333,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["7265c446-afe8-44ed-b5f3-a0ad2f7c4530"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b15c726a-7cc3-45ec-a08d-9874db9cb784":{"value":{"id":"b15c726a-7cc3-45ec-a08d-9874db9cb784","version":3,"type":"text","created_time":1724682500678,"last_edited_time":1724682500679,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"4c486031-8a28-4b62-9bb0-51d7d5bd588a":{"value":{"id":"4c486031-8a28-4b62-9bb0-51d7d5bd588a","version":2,"type":"sub_sub_header","properties":{"title":[["containerd"]]},"created_time":1724682500962,"last_edited_time":1724682500964,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8fe9edcd-9f10-4b14-97ff-f91b8050d710":{"value":{"id":"8fe9edcd-9f10-4b14-97ff-f91b8050d710","version":2,"type":"text","properties":{"title":[["一个典型的高级容器运行时就是 containerd（最典型的应该是 Docker，但大家都太熟悉了就懒得说了），containerd 从 Docker 项目中独立出来"]]},"created_time":1724682500962,"last_edited_time":1724682500964,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"71146b10-a4eb-497d-a6d1-b8e17ab3051c":{"value":{"id":"71146b10-a4eb-497d-a6d1-b8e17ab3051c","version":15,"type":"image","properties":{"size":[["459.3KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/62de8781-6120-43e8-ae1e-f39c9f134457/image.png"]],"caption":[["⬆️ Docker 是一个大而全的容器运行时，以至于在这里甚至将它划分为了一个平台"]]},"format":{"block_width":1782,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/62de8781-6120-43e8-ae1e-f39c9f134457/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6060606060606061,"block_preserve_scale":true},"created_time":1724682508499,"last_edited_time":1724682519032,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["62de8781-6120-43e8-ae1e-f39c9f134457"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"e4452896-da27-4954-b9cb-667a726b598b":{"value":{"id":"e4452896-da27-4954-b9cb-667a726b598b","version":2,"type":"text","properties":{"title":[["containerd 的实现高度模块化，各个模块之间使用 ttrpc（gRPC 的改良）通信，并且支持通过插件来扩展。containerd 中默认使用 runC 作为低级容器运行时，也支持根据平台和需求替换成 runhcs、Kata 等"]]},"created_time":1724682525291,"last_edited_time":1724682525293,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8f9a8351-762d-428b-a9e3-14f89f31d819":{"value":{"id":"8f9a8351-762d-428b-a9e3-14f89f31d819","version":2,"type":"text","properties":{"title":[["containerd 没有打包网络和存储的实现，像网络就是使用 CNI 来让外部提供具体实现"]]},"created_time":1724682525291,"last_edited_time":1724682525293,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ed938447-4174-4c1a-a15b-cc220b940a8f":{"value":{"id":"ed938447-4174-4c1a-a15b-cc220b940a8f","version":2,"type":"text","properties":{"title":[["containerd 的设计目标是成为更高级系统中的一个组件来被调用，而非直接提供给用户使用，Docker 目前就是通过 containerd 来管理容器"]]},"created_time":1724682525291,"last_edited_time":1724682525293,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ed2d2608-9b90-45ca-a3e7-d6c2ec0c6bb0":{"value":{"id":"ed2d2608-9b90-45ca-a3e7-d6c2ec0c6bb0","version":3,"type":"text","created_time":1724682527311,"last_edited_time":1724682527311,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0f674f0b-4985-43b6-a0b8-ddaec8bda454":{"value":{"id":"0f674f0b-4985-43b6-a0b8-ddaec8bda454","version":2,"type":"sub_sub_header","properties":{"title":[["CRI-O"]]},"created_time":1724682530602,"last_edited_time":1724682530604,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"43a2b96e-cbee-4fff-9b89-55bc89f0d8b0":{"value":{"id":"43a2b96e-cbee-4fff-9b89-55bc89f0d8b0","version":2,"type":"text","properties":{"title":[["CRI-O 的目的是构建一个最简单的 K8s 专用运行时，是一个最小化的实现，不需要面向最终用户的那些复杂功能"]]},"created_time":1724682530602,"last_edited_time":1724682530604,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3aa91ef3-87a7-45ee-b200-8493466e5d88":{"value":{"id":"3aa91ef3-87a7-45ee-b200-8493466e5d88","version":11,"type":"image","properties":{"size":[["353.7KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/e15a0e6c-d254-4d02-9280-279cb94b166a/image.png"]]},"format":{"block_width":2673,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/e15a0e6c-d254-4d02-9280-279cb94b166a/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6004489337822672,"block_preserve_scale":true},"created_time":1724682538733,"last_edited_time":1724682547014,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["e15a0e6c-d254-4d02-9280-279cb94b166a"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cce64b0c-0051-47e5-a5fe-6d47ffbbbc92":{"value":{"id":"cce64b0c-0051-47e5-a5fe-6d47ffbbbc92","version":2,"type":"text","properties":{"title":[["当一个 kubelet 的创建请求来临时："]]},"created_time":1724682545038,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cc9bb24e-3eb6-43f6-b951-38b58d0ec562":{"value":{"id":"cc9bb24e-3eb6-43f6-b951-38b58d0ec562","version":2,"type":"numbered_list","properties":{"title":[["CRI-O 会拉取镜像（如果不存在）"]]},"created_time":1724682545039,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"4c14b3b2-085a-45dc-a4bb-28119c577347":{"value":{"id":"4c14b3b2-085a-45dc-a4bb-28119c577347","version":2,"type":"numbered_list","properties":{"title":[["将镜像解压，构建 rootfs 和 OCI runtime-spec 的 "],["config.json",[["c"]]]]},"created_time":1724682545048,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"617df41a-4ad3-4ec7-998a-1e73bb06c0f5":{"value":{"id":"617df41a-4ad3-4ec7-998a-1e73bb06c0f5","version":2,"type":"numbered_list","properties":{"title":[["调用低层的 OCI runtime（runC 等）"]]},"created_time":1724682545049,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"a3b03c2e-8511-4ef7-84b0-f8c696af07b5":{"value":{"id":"a3b03c2e-8511-4ef7-84b0-f8c696af07b5","version":2,"type":"numbered_list","properties":{"title":[["每个容器由一个 conmon 进程进行监控，它会为 PID 为 1 的进程提供一个 "],["pty",[["c"]]],["，同时处理日志和记录退出代码"]]},"created_time":1724682545049,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7fc7ff46-f464-4657-993d-23b82d0a400f":{"value":{"id":"7fc7ff46-f464-4657-993d-23b82d0a400f","version":2,"type":"numbered_list","properties":{"title":[["通过 CNI 调用网络插件配置网络"]]},"created_time":1724682545049,"last_edited_time":1724682545051,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"39809648-2f24-4da1-a9d7-84e91beb418f":{"value":{"id":"39809648-2f24-4da1-a9d7-84e91beb418f","version":3,"type":"text","created_time":1724682547524,"last_edited_time":1724682547525,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b9c93da2-9a99-44e9-b48c-7a174718fa92":{"value":{"id":"b9c93da2-9a99-44e9-b48c-7a174718fa92","version":2,"type":"sub_sub_header","properties":{"title":[["Podman"]]},"created_time":1724682552531,"last_edited_time":1724682552534,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"656232ca-4ad7-41a2-a14d-0d6d025c70d4":{"value":{"id":"656232ca-4ad7-41a2-a14d-0d6d025c70d4","version":2,"type":"text","properties":{"title":[["containerd 和 CRI-O 都不是直接面向用户的，面向用户的容器运行时最典型的就是 Docker，而 Podman 也是一个 Docker 的竞品，由 Red Hat 推出"]]},"created_time":1724682552532,"last_edited_time":1724682552534,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cd8dc61a-dfea-4bc0-9003-27173e9ffc6e":{"value":{"id":"cd8dc61a-dfea-4bc0-9003-27173e9ffc6e","version":2,"type":"text","properties":{"title":[["Podman 兼容大部分的 Docker 命令，甚至可以直接 "],["alias podman=docker",[["c"]]],[" 来无缝替换。"]]},"created_time":1724682552532,"last_edited_time":1724682552534,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"dee2d18f-e9b6-4d94-b1ad-93e60be4e160":{"value":{"id":"dee2d18f-e9b6-4d94-b1ad-93e60be4e160","version":2,"type":"text","properties":{"title":[["Podman 的特色在于对 rootless container 的良好支持，这能带来更好的安全性；另外我个人比较喜欢的一个功能是 Pod 模式，能直接从一个 K8s 的 Pod YAML 中来运行容器"]]},"created_time":1724682552532,"last_edited_time":1724682552534,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"711a0652-60ae-49fe-b23e-a316c760ed5c":{"value":{"id":"711a0652-60ae-49fe-b23e-a316c760ed5c","version":3,"type":"text","created_time":1724682559276,"last_edited_time":1724682559276,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3fefe88f-d29a-46a7-95ae-9156b0e1289a":{"value":{"id":"3fefe88f-d29a-46a7-95ae-9156b0e1289a","version":2,"type":"sub_header","properties":{"title":[["CRI（Container Runtime Interface）"]]},"created_time":1724682560076,"last_edited_time":1724682560079,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b502cfff-8905-4d9c-90d2-e057a66ed0dd":{"value":{"id":"b502cfff-8905-4d9c-90d2-e057a66ed0dd","version":2,"type":"text","properties":{"title":[["CRI（Container Runtime Interface）",[["a","https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md"]]],[" 是 K8s 的一套容器接口协议，用于 kubelet 和容器运行时之间的通信，避免直接依赖具体实现"]]},"created_time":1724682560077,"last_edited_time":1724682560079,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e3d853-5014-4597-8dca-c741b05a98df":{"value":{"id":"14e3d853-5014-4597-8dca-c741b05a98df","version":2,"type":"text","properties":{"title":[["OCI runtime-spec 是面向低级容器运行时的标准，而 CRI 是面向高级容器运行时的协议，还包括了一些 Pod 映射到容器所需的相关接口，其基于 gRPC，接口定义如下"]]},"created_time":1724682560077,"last_edited_time":1724682560079,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c7d52a98-f875-45c7-92fd-06be63b4eea1":{"value":{"id":"c7d52a98-f875-45c7-92fd-06be63b4eea1","version":3,"type":"code","properties":{"title":[["service RuntimeService {\n    rpc Version(VersionRequest) returns (VersionResponse) {}\n    rpc RunPodSandbox(RunPodSandboxRequest) returns (RunPodSandboxResponse) {}\n    rpc StopPodSandbox(StopPodSandboxRequest) returns (StopPodSandboxResponse) {}\n    rpc RemovePodSandbox(RemovePodSandboxRequest) returns (RemovePodSandboxResponse) {}\n    rpc PodSandboxStatus(PodSandboxStatusRequest) returns (PodSandboxStatusResponse) {}\n    rpc ListPodSandbox(ListPodSandboxRequest) returns (ListPodSandboxResponse) {}\n    rpc CreateContainer(CreateContainerRequest) returns (CreateContainerResponse) {}\n    rpc StartContainer(StartContainerRequest) returns (StartContainerResponse) {}\n    rpc StopContainer(StopContainerRequest) returns (StopContainerResponse) {}\n    rpc RemoveContainer(RemoveContainerRequest) returns (RemoveContainerResponse) {}\n    rpc ListContainers(ListContainersRequest) returns (ListContainersResponse) {}\n    rpc ContainerStatus(ContainerStatusRequest) returns (ContainerStatusResponse) {}\n    rpc UpdateContainerResources(UpdateContainerResourcesRequest) returns (UpdateContainerResourcesResponse) {}\n    rpc ReopenContainerLog(ReopenContainerLogRequest) returns (ReopenContainerLogResponse) {}\n    rpc ExecSync(ExecSyncRequest) returns (ExecSyncResponse) {}\n    rpc Exec(ExecRequest) returns (ExecResponse) {}\n    rpc Attach(AttachRequest) returns (AttachResponse) {}\n    rpc PortForward(PortForwardRequest) returns (PortForwardResponse) {}\n    rpc ContainerStats(ContainerStatsRequest) returns (ContainerStatsResponse) {}\n    rpc ListContainerStats(ListContainerStatsRequest) returns (ListContainerStatsResponse) {}\n    rpc PodSandboxStats(PodSandboxStatsRequest) returns (PodSandboxStatsResponse) {}\n    rpc ListPodSandboxStats(ListPodSandboxStatsRequest) returns (ListPodSandboxStatsResponse) {}\n    rpc UpdateRuntimeConfig(UpdateRuntimeConfigRequest) returns (UpdateRuntimeConfigResponse) {}\n    rpc Status(StatusRequest) returns (StatusResponse) {}\n    rpc CheckpointContainer(CheckpointContainerRequest) returns (CheckpointContainerResponse) {}\n    rpc GetContainerEvents(GetEventsRequest) returns (stream ContainerEventResponse) {}\n    rpc ListMetricDescriptors(ListMetricDescriptorsRequest) returns (ListMetricDescriptorsResponse) {}\n    rpc ListPodSandboxMetrics(ListPodSandboxMetricsRequest) returns (ListPodSandboxMetricsResponse) {}\n}\n\nservice ImageService {\n    rpc ListImages(ListImagesRequest) returns (ListImagesResponse) {}\n    rpc ImageStatus(ImageStatusRequest) returns (ImageStatusResponse) {}\n    rpc PullImage(PullImageRequest) returns (PullImageResponse) {}\n    rpc RemoveImage(RemoveImageRequest) returns (RemoveImageResponse) {}\n    rpc ImageFsInfo(ImageFsInfoRequest) returns (ImageFsInfoResponse) {}\n}"]],"language":[["Protobuf"]]},"format":{"copied_from_pointer":{"id":"94fa414a-836d-4428-8468-236ba81fab26","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1724682832047,"last_edited_time":1724682832049,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"copied_from":"94fa414a-836d-4428-8468-236ba81fab26","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"925d1d45-3a93-46f5-955e-9d6bc6c46ff5":{"value":{"id":"925d1d45-3a93-46f5-955e-9d6bc6c46ff5","version":2,"type":"text","properties":{"title":[["早期（1.6 版本之前）K8s 是直接调用 Docker API 的，但随着容器生态的发展，各个容器运行时都希望能在 K8s 这掺一脚，这为 kubelet 的维护带来了很大的负担。因此就有了 CRI。在过渡期时为了保持兼容，K8s 内置了 dockershim 作为 CRI 请求到 Docker API 的适配器，后来 K8s 的所谓「弃用 Docker」指的 containerd 成熟后不再单独为 Docker 维护一套接口适配器（dockershim），而是直接采用 CRI 接口，各个 shim（接口适配器）需要由用户自己安装，脱离出 K8s 的代码，于是就有了该说法"]]},"created_time":1724682610313,"last_edited_time":1724682610315,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c8f29e1b-646a-4ac4-98dd-f2c9555d9079":{"value":{"id":"c8f29e1b-646a-4ac4-98dd-f2c9555d9079","version":3,"type":"text","created_time":1724682611800,"last_edited_time":1724682611800,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"23045257-fd46-46eb-80ca-dda9478e10c3":{"value":{"id":"23045257-fd46-46eb-80ca-dda9478e10c3","version":2,"type":"sub_header","properties":{"title":[["WASM"]]},"created_time":1724682616424,"last_edited_time":1724682616426,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3f17867c-a9b1-4d27-81e9-9b3e0e8a5a8f":{"value":{"id":"3f17867c-a9b1-4d27-81e9-9b3e0e8a5a8f","version":2,"type":"text","properties":{"title":[["之前就有看到类似「WASM+WASI 替代 Docker」的说法，一直不是很能理解，WASM 在我的认知中应该是一个虚拟机，WASI 是 WASM 的系统接口，为了让 WASM 运行在非浏览器的 native 环境中（像 Node 一样）。因此 WASM+WASI 的对比对象应该是类似 JVM 一样的东西，为什么与容器扯上了关系？"]]},"created_time":1724682616424,"last_edited_time":1724682616426,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ec86724d-d10c-416a-bef6-8102b1e056f9":{"value":{"id":"ec86724d-d10c-416a-bef6-8102b1e056f9","version":13,"type":"image","properties":{"size":[["675.8KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/05e22043-6194-4d98-a63b-239e9184bf8a/image.png"]]},"format":{"block_width":548.8635864257812,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/05e22043-6194-4d98-a63b-239e9184bf8a/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.438,"block_preserve_scale":true},"created_time":1724682623054,"last_edited_time":1724682630966,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["05e22043-6194-4d98-a63b-239e9184bf8a"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"68f76f3d-5ec3-41d3-9306-e815d2ae9083":{"value":{"id":"68f76f3d-5ec3-41d3-9306-e815d2ae9083","version":2,"type":"text","properties":{"title":[["参考这篇文章和 Docker 的官方文档"]]},"created_time":1724682627722,"last_edited_time":1724682627725,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c3fac745-c0db-4805-abac-4afbf25d7b9c":{"value":{"id":"c3fac745-c0db-4805-abac-4afbf25d7b9c","version":2,"type":"numbered_list","properties":{"title":[["https://wasmlabs.dev/articles/docker-without-containers/"]]},"created_time":1724682627723,"last_edited_time":1724682627725,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"72f69691-b689-459a-aec0-9a87fd9606f9":{"value":{"id":"72f69691-b689-459a-aec0-9a87fd9606f9","version":2,"type":"numbered_list","properties":{"title":[["https://www.docker.com/blog/docker-wasm-technical-preview/"]]},"created_time":1724682627723,"last_edited_time":1724682627725,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8788eb10-ebbe-41c5-92e5-ea1cc9c3cd2b":{"value":{"id":"8788eb10-ebbe-41c5-92e5-ea1cc9c3cd2b","version":2,"type":"text","properties":{"title":[["简单来说，WasmEdge 提供了一个符合 OCI runtime-spec 的 WASI 运行时，因此可以使用 WasmEdge 替代 Docker 中的容器运行时。同时镜像不需要包含操作系统或任何基础镜像，单个 "],[".wasm",[["c"]]],[" 二进制文件就可以直接执行"]]},"created_time":1724682627723,"last_edited_time":1724682627725,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"71d09c0a-3f1b-4053-89ba-d3aa0b8dc921":{"value":{"id":"71d09c0a-3f1b-4053-89ba-d3aa0b8dc921","version":13,"type":"image","properties":{"size":[["584.3KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a207d3c2-0fa9-4e86-88a3-7043ee6f505c/image.png"]]},"format":{"block_width":548.8635864257812,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a207d3c2-0fa9-4e86-88a3-7043ee6f505c/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4305,"block_preserve_scale":true},"created_time":1724682634171,"last_edited_time":1724682666137,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"file_ids":["a207d3c2-0fa9-4e86-88a3-7043ee6f505c"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5fc8337f-2e5b-4be7-bf2b-e40cbafeb033":{"value":{"id":"5fc8337f-2e5b-4be7-bf2b-e40cbafeb033","version":2,"type":"text","properties":{"title":[["为什么 WASM+WASI 的方式被推崇："]]},"created_time":1724682638324,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"78ce7dc9-1f17-4b6b-8171-874b0f74786b":{"value":{"id":"78ce7dc9-1f17-4b6b-8171-874b0f74786b","version":2,"type":"numbered_list","properties":{"title":[["开放，业界广泛采用的标准，开源社区生态加成"]]},"created_time":1724682638324,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"17b841c9-6dba-481d-b4a1-7f765a517378":{"value":{"id":"17b841c9-6dba-481d-b4a1-7f765a517378","version":2,"type":"numbered_list","properties":{"title":[["快速，没有 VM 或容器的冷启动"]]},"created_time":1724682638325,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7df41463-8bbe-4fc3-9c9e-1a33c836a872":{"value":{"id":"7df41463-8bbe-4fc3-9c9e-1a33c836a872","version":2,"type":"numbered_list","properties":{"title":[["安全，沙盒运行"]]},"created_time":1724682638325,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"737f0b6c-c5f0-476a-baf8-d74b005c8331":{"value":{"id":"737f0b6c-c5f0-476a-baf8-d74b005c8331","version":2,"type":"numbered_list","properties":{"title":[["可移植，支持大多数 CPU 和操作系统"]]},"created_time":1724682638325,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5f59ea20-3976-4a5a-8f61-a088f32a55ad":{"value":{"id":"5f59ea20-3976-4a5a-8f61-a088f32a55ad","version":2,"type":"numbered_list","properties":{"title":[["高效，最小内存和 CPU 占用"]]},"created_time":1724682638325,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"53b38eb9-3195-4c06-ace9-1a538c205dea":{"value":{"id":"53b38eb9-3195-4c06-ace9-1a538c205dea","version":2,"type":"text","properties":{"title":[["但目前来讲生态还不够完善，主要在于很多语言对编译为 "],[".wasm",[["c"]]],[" 有诸多限制，大量常用的依赖库不进行修改的话都无法编译。同时作为容器 runtime 的话没有 Linux 内核，也导致很多 specific 的功能无法实现。明显优势基本只有镜像非常轻量了，大小在几百 K 到几 M，适合的场景还是像 WasmEdge 本身的名字一样，做些应用层的 Edge Computing 吧"]]},"created_time":1724682638325,"last_edited_time":1724682638328,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"576b6a09-bf5c-4e64-b4ac-2d13060fbb17":{"value":{"id":"576b6a09-bf5c-4e64-b4ac-2d13060fbb17","version":3,"type":"text","created_time":1724682660270,"last_edited_time":1724682660270,"parent_id":"deaccfa2-4562-437c-874e-fc5041f3fad5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"collection":{"0bb2e606-8d0c-4f7c-aca9-70986e90c055":{"value":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","version":78,"name":[["x³u³"]],"description":[["🗒 碎碎念"]],"schema":{"@NcA":{"name":"password","type":"text"},"Dj]h":{"name":"icon","type":"text"},"NX\\Q":{"name":"date","type":"date","date_format":"YYYY/MM/DD"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"95b7fea5-98b3-476e-892f-79e8f36d0633","color":"brown","value":"Notice","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"2287395b-9f64-4852-b46f-ff3df4b4acef","color":"yellow","value":"Menu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"50fefd65-c28e-4806-9183-aa12995f11f3","color":"pink","value":"SubMenu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"b945f57d-dbcc-4603-9fab-5cfe447aad1b","color":"red","value":"Config","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"bB{M":{"name":"category","type":"select"},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"a027d99d-be10-412d-b94a-8c61f6eacc29","color":"default","value":"存储","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4bd9608a-d7d6-4597-beb7-d4849da04909","color":"gray","value":"分布式系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"ad04c718-fd54-4374-bfed-6c7e9dc65e01","color":"blue","value":"折腾","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"25bff120-77fb-40f1-9531-00997afcb444","color":"purple","value":"Linux","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e12d005d-ec78-4876-950d-2399744abbaa","color":"blue","value":"内核","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c7950cbd-8d2c-4cbe-8bb1-679fb433a74f","color":"red","value":"碎碎念","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be9970b9-6fe4-4351-92c2-1e3e41d2a3e3","color":"brown","value":"Cloud Native","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"61c97435-c65a-40b1-9e95-2c6345b6f9d3","color":"pink","value":"Vim","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d18e22d6-cbbb-4311-9928-7c5b58124456","color":"orange","value":"论文阅读","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"526115da-04f3-4be2-8a47-c83c7576b0de","color":"green","value":"Kubernetes","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"12016016-3ecc-4ee7-92c6-6973678fdd05","color":"yellow","value":"数据库","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"1edc83b3-f351-4a21-aafc-3b059d0c0f22","color":"brown","value":"Raft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"158014da-08eb-49f4-97ad-1ce6f6e0ee5c","color":"orange","value":"Rust","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d1242312-e0a8-456d-b8f0-6e998e2c4fb2","color":"orange","value":"Invisible","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]}},"icon":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/49b4570c-b2f0-457b-81b7-b68e2693a471/avatar.png","cover":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a9af1d6b-f284-4734-ba06-990353cf3f84/Elaina.jpg","format":{"copied_from_pointer":{"id":"4379bc14-5d22-453b-a153-12639616fc01","table":"collection","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"property_visibility":[{"property":"`gQ~","visibility":"show"},{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","visibility":"show"},{"property":"NX\\Q","visibility":"show"},{"property":"d]hq","visibility":"show"},{"property":"wz|S","visibility":"show"},{"property":"sD^m","visibility":"show"},{"property":"bB{M","visibility":"show"},{"property":"Dj]h","visibility":"hide_if_empty"},{"property":"uHoD","visibility":"show"},{"property":"kiCR","visibility":"hide"}],"ai_suggested_properties":[{"name":"created by","type":"person"},{"name":"updated at","type":"date"},{"name":"priority","type":"select","options":[{"id":"OqCJ","color":"purple","value":"low"},{"id":"X{Pz","color":"pink","value":"medium"},{"id":"LRCx","color":"red","value":"high"},{"id":"VY?=","color":"yellow","value":"urgent"}]},{"name":"visibility","type":"select","options":[{"id":"Q=_{","color":"red","value":"public"},{"id":"A|Nj","color":"green","value":"private"},{"id":"MWlx","color":"gray","value":"restricted"}]},{"name":"attachments","type":"file"},{"name":"related links","type":"multi_select","options":[{"id":"I^W\u003e","color":"default","value":"documentation"},{"id":"\u003cg\\P","color":"yellow","value":"tutorials"},{"id":"RMVI","color":"gray","value":"references"}]},{"name":"estimated completion","type":"date"},{"name":"contact email","type":"email"},{"name":"contact phone","type":"phone_number"},{"name":"is active","type":"checkbox"}],"collection_cover_position":0.6486,"collection_page_properties":[{"visible":false,"property":"`gQ~"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"Dj]h"},{"visible":true,"property":"@NcA"},{"visible":true,"property":"ckw_"}],"collection_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f","abe3a0aa-2aff-4274-81bb-c2443d4ef9e2","a2a32795-101d-46aa-a7f6-eb35b8750166","29db38d2-d5fa-4fa6-8a92-3b527cfe80d1","49b4570c-b2f0-457b-81b7-b68e2693a471","a9af1d6b-f284-4734-ba06-990353cf3f84"],"copied_from":"4379bc14-5d22-453b-a153-12639616fc01","template_pages":["2eace25c-842c-46fd-9ccb-e9190981b6c3"],"migrated":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"space":{},"collection_view":{"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef":{"value":{"id":"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","version":74,"type":"table","name":"Table","format":{"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","94e03781-e74c-41d0-89f7-df2e2a7ad93f","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d":{"value":{"id":"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","version":1,"type":"table","name":"Config","format":{"gallery_cover":{"type":"page_content"},"list_properties":[{"visible":true,"property":"NX\\Q"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"`gQ~"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"}],"property_filters":[{"id":"b54a6c88-635d-4de4-946e-5a855a1f4069","filter":{"filter":{"value":[{"type":"exact","value":"Notice"},{"type":"exact","value":"Menu"},{"type":"exact","value":"Config"},{"type":"exact","value":"SubMenu"},{"type":"exact","value":"Page"}],"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":116,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":118,"visible":true,"property":"`gQ~"},{"width":219,"visible":true,"property":"title"},{"width":326,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"`gQ~"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"}],"table_frozen_column_index":-1,"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8dfd415c-71af-41f9-b984-e7182bf2210b":{"value":{"id":"8dfd415c-71af-41f9-b984-e7182bf2210b","version":1,"type":"board","name":"Post Board","format":{"board_columns":[{"value":{"type":"select","value":"Draft"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Invisible"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Published"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}],"board_columns_by":{"sort":{"type":"manual"},"type":"select","property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},"board_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"wz|S"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"`gQ~"}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":219,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":155,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c2f93d8-6810-42a1-87da-55f1ecda9bca":{"value":{"id":"3c2f93d8-6810-42a1-87da-55f1ecda9bca","version":72,"type":"chart","format":{"chart_config":{"type":"column","dataConfig":{"type":"groups_reducer","groupBy":{"sort":{"type":"manual"},"type":"multi_select","property":"sD^m","hideEmptyGroups":false},"aggregationConfig":{"aggregation":{"aggregator":"count"},"seriesFormat":{"displayType":"column"}}},"chartFormat":{"mainSort":"manual","hideLegend":false,"axisCumulative":false,"axisGroupStyle":"normal","donutHideValue":false,"donutDataLabels":"value","axisShowDataLabels":true,"axisHideEmptyGroups":false}},"property_filters":[{"id":"01739a9c-9312-4d0d-bf7d-de1204300bdb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"subitem_display_mode":"flattened","table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}}},"prev":{"id":"d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","date":{"start_date":"2023-08-06","date_format":"relative"},"type":"Post","slug":"post/pve8-intel-sr-iov","tags":["折腾"],"summary":"拯救我的 Galgame 和追番体验～","title":"PVE8 上启用 12 代 Intel CPU 核显 SR-IOV","status":"Published","category":"","comment":"","publishDate":1691280000000,"publishDay":"2023-8-6","lastEditedDate":"2024-08-27T15:25:24.786Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"折腾","color":"blue"}],"href":"/post/pve8-intel-sr-iov","target":"_self","password":""},"next":{"id":"f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","date":{"start_date":"2023-06-22","date_format":"relative"},"type":"Post","slug":"post/vim-as-an-ide","tags":["折腾","Vim"],"summary":"记录 Vim 入教过程和折腾记录","title":"Vim as an IDE","status":"Published","category":"","comment":"","publishDate":1687392000000,"publishDay":"2023-6-22","lastEditedDate":"2024-08-27T15:25:23.390Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"折腾","color":"blue"},{"name":"Vim","color":"pink"}],"href":"/post/vim-as-an-ide","target":"_self","password":""},"recommendPosts":[{"id":"a23d61e0-cc90-4068-bfb0-986afaf60ac5","date":{"start_date":"2023-06-17","date_format":"relative"},"type":"Post","slug":"post/kubernetes-csi","tags":["Cloud Native","Kubernetes"],"title":"Kubernetes CSI","status":"Published","category":"","comment":"","publishDate":1686960000000,"publishDay":"2023-6-17","lastEditedDate":"2024-08-27T15:25:21.307Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Cloud Native","color":"brown"},{"name":"Kubernetes","color":"green"}],"href":"/post/kubernetes-csi","target":"_self","password":""}]},"__N_SSG":true},"page":"/[prefix]/[slug]","query":{"prefix":"post","slug":"container-spec-ecosystem"},"buildId":"-5VYD6_DkK2ytlKzfJOJ1","runtimeConfig":{"NODE_ENV_API":"prod","THEMES":["autumn","commerce","example","fukasawa","game","gitbook","heo","hexo","landing","matery","medium","movie","nav","next","nobelium","plog","simple","starter"]},"isFallback":false,"dynamicIds":[10635,46767],"gsp":true,"scriptLoader":[]}</script></body></html>
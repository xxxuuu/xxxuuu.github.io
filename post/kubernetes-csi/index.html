<!DOCTYPE html><html data-astro-cid-pjvcz6dw lang=zh-CN><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" rel=icon><link href=https://xxxuuu.me/post/kubernetes-csi/ rel=canonical><link href=/rss/feed.xml rel=alternate title=x³u³ type=application/rss+xml><link href=/sitemap-index.xml rel=sitemap><title>Kubernetes CSI | x³u³</title><meta content="🗒 碎碎念" name=description><meta content=website property=og:type><meta content=https://xxxuuu.me/post/kubernetes-csi/ property=og:url><meta content="Kubernetes CSI | x³u³" property=og:title><meta content="🗒 碎碎念" property=og:description><meta content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" property=og:image><meta content=summary_large_image name=twitter:card><meta content=@xxuuu0 name=twitter:site><meta content="Kubernetes CSI | x³u³" name=twitter:title><meta content="🗒 碎碎念" name=twitter:description><meta content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" name=twitter:image><link href=https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css rel=preload as=style onload="this.onload=null,this.rel=&#34;stylesheet&#34;"><noscript><link href=https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css rel=stylesheet></noscript><script>!function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.classList.add(e)}()</script><link href=/_astro/katex.CVb4srxQ.css rel=stylesheet><link href=/_astro/_slug_.CMbZ2cJ_.css rel=stylesheet><link href=/_astro/_slug_.BzJEnS8p.css rel=stylesheet><link href=/_astro/_slug_.DOIB7y8p.css rel=stylesheet><script src=/_astro/hoisted.B871fABB.js type=module></script></head><body data-astro-cid-pjvcz6dw><header class=notion-header data-astro-cid-4f4rmh32><div class=header-container data-astro-cid-4f4rmh32><div class=header-content data-astro-cid-4f4rmh32><div class=logo data-astro-cid-4f4rmh32><a href=/ class=logo-link data-astro-cid-4f4rmh32>x³u³</a></div><div class=header-actions data-astro-cid-4f4rmh32><nav class=nav data-astro-cid-4f4rmh32><a href=/ class=nav-link data-astro-cid-4f4rmh32>🏠 首页 </a><a href=/archive class=nav-link data-astro-cid-4f4rmh32>📃 归档 </a><a href=/links class=nav-link data-astro-cid-4f4rmh32>👬 友链 </a><a href=https://p.xxxuuu.me rel="noopener noreferrer" target=_blank class=nav-link data-astro-cid-4f4rmh32>📷 摄影 <span class=external-icon data-astro-cid-4f4rmh32>↗</span> </a><a href=/about class=nav-link data-astro-cid-4f4rmh32>👤 关于</a></nav><button aria-label="Toggle theme" title=切换主题 data-astro-cid-44mn2ykx id=theme-toggle><svg fill=none viewBox="0 0 24 24" height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 class=sun-icon data-astro-cid-44mn2ykx xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 data-astro-cid-44mn2ykx r=5></circle><line data-astro-cid-44mn2ykx x1=12 x2=12 y1=1 y2=3></line><line data-astro-cid-44mn2ykx x1=12 x2=12 y1=21 y2=23></line><line data-astro-cid-44mn2ykx x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line data-astro-cid-44mn2ykx x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line data-astro-cid-44mn2ykx x1=1 x2=3 y1=12 y2=12></line><line data-astro-cid-44mn2ykx x1=21 x2=23 y1=12 y2=12></line><line data-astro-cid-44mn2ykx x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line data-astro-cid-44mn2ykx x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg> <svg fill=none viewBox="0 0 24 24" height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 class=moon-icon data-astro-cid-44mn2ykx xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-astro-cid-44mn2ykx></path></svg></button></div></div></div></header><main class=notion-main data-astro-cid-pjvcz6dw><article class=content data-astro-cid-gbhzkc2y><div class=notion-page data-astro-cid-gbhzkc2y><div class=page-container data-astro-cid-gbhzkc2y><div class=page-main data-astro-cid-gbhzkc2y><header class=page-header data-astro-cid-gbhzkc2y><h1 class=page-title data-astro-cid-gbhzkc2y>Kubernetes CSI</h1></header><div class=page-meta data-astro-cid-gbhzkc2y><div class=meta-info data-astro-cid-gbhzkc2y><span class=meta-item data-astro-cid-gbhzkc2y><span class=meta-icon data-astro-cid-gbhzkc2y>📅</span> <time data-astro-cid-gbhzkc2y datetime=2023-06-17>2023年06月17日</time> </span><span class=meta-item data-astro-cid-gbhzkc2y><span class=meta-icon data-astro-cid-gbhzkc2y>⏱️</span> <span data-astro-cid-gbhzkc2y>4 分钟阅读</span></span></div><div class=meta-tags data-astro-cid-gbhzkc2y><span class=tags-icon data-astro-cid-gbhzkc2y>🏷️</span> <a href="/tag/cloud native" class=tag-pill data-astro-cid-gbhzkc2y>Cloud Native</a><a href=/tag/kubernetes class=tag-pill data-astro-cid-gbhzkc2y>Kubernetes</a></div></div><hr class=page-divider data-astro-cid-gbhzkc2y><div class=notion-content data-astro-cid-gbhzkc2y><h2 id="">基本概念</h2><p>K8s 的存储插件用于对接容器平台和底层存储资源，例如挂载 Volume 时可以配置的 nfs 或 gitRepo 等；第三方平台，如 AWS、Google Cloud 也都会提供存储插件用于接入它们的存储服务</p><p>存储插件分为 In-Tree 和 Out-of-Tree 两类：</p><ol><li>In-Tree 的存储插件是包含在 K8s 内部的，因此构建、编译、交付都与 Kuberentes 本身绑定，前面的 nfs 和 gitRepo 都是 In-Tree 的插件</li><li>Out-of-Tree 插件则是独立的，可以单独部署。Out-of-Tree 插件主要分为 FlexVolume 和 CSI（Container Storage Interface）两类方式，其中前者在 1.23 版本已经废弃</li></ol><p>从 1.17 版本开始，K8s 开始测试 CSI Migration，用于将 In-Tree 内的存储插件迁移到 Out-of-Tree 的 CSI 上，并<a href=https://kubernetes.io/blog/2022/09/26/storage-in-tree-to-csi-migration-status-update-1.25/ rel="noopener noreferrer" target=_blank>在 1.25 中正式发布</a>该功能</p><p>因此，存储插件的开发目前基本只剩下 CSI 一种选择，其不仅仅局限于 K8s，更是目前容器存储的工业标准</p><p><br></p><h2 id=csi->CSI 架构 &amp; 规范</h2><p>CSI Driver 在 K8s 中的架构如下所示</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9870eb1b-5de9-4225-93d4-65ec37e9d58f%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466ZIR7QMEA%252F20260204%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260204T125741Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEE0aCXVzLXdlc3QtMiJGMEQCIF6thcbJQrKiYKTOOEdO3UDWnjyr9IwPOGpM9GyIi39qAiB3yOl1mrE1qdsDjJ%252FgLCWadEXOymhrEbpFlhFz9Eid5Cr%252FAwgWEAAaDDYzNzQyMzE4MzgwNSIMNyK7WoXP%252BTbtOH6%252BKtwDhXEzYWozZg2ZZnaoX8arNdnGA0qIxqQeUYOQTrfbMhMqQt7g7KKA4bYECIzCEcP3N%252Fi%252Fdrs1sgEiw44pLEbg5qt8y98roOFhZdxQJtepxJT2DJmyTbRgWOTVdf1uKNRbglghFRHMPYlnf7fcox43LrIW0ohLq8im94c9tLrp0LT1ehOI6Cx6VijXlCrUUxHjFOdwsCUgx9u4%252FDHVsf9CTrVg%252FvA5MGsKc%252BqdRlXYjmRrGIp%252B0iIgy4bDPFguyh1VUB95DSt%252B7R62RMYN%252Fu5EnUHErtlZlSuR6B1TKrjA8x9tAPxYLOQgAjH5ylBtyEZhwBNwYHfLkotKRTbFKUrNB9tK%252BYBcnGeqNgqLNgKdsfY%252BhIiXbBut%252FhlGGsAjc%252FS4VqwC3iXbM16pq1zkGoCfWnBi2FaK7fQamtXHk7slAmqESkxaow%252FOM4cttsRGeCAw5tdc0NodxqYmGU5%252BsIrn1k2STXZ5P%252Bd9Og9lISxiSeotcUCQHfjWlUh27gVfnLeIz9bNyw62xJpLocprV2fpbmNd1NPUkfk7pammNVfAQ4GRdCKcANTT4Itsy6x7%252FUN5dQYX%252BJGKKXQDMhWFFUhPQupmWS6M9LJpiSq%252FKGw%252FNXTbCnwG0Cn7mxug3EUw7veMzAY6pgFQgEnpNKzRy360jge6yOk3Dqr6B9EaI99O5j2RDtsLrH5R2n2zwFLZXoJ%252FBVl7NlDmV0Khv6MLci%252BdgwpZQ9WBmqswmeSRqCTXJle24%252FvzfYlPG8GZjya%252Fbsn6EzqT%252BeA2ItUanvNOKYrHLALw3%252FJe4JAEfyfmYs6ph8WzsTW1rM6uh7DRaZddI2M0ldWLfOjsH5FQ0ZBxWu7Syytb4S2oHDGLFlBo%26X-Amz-Signature%3Dc831d36c158bd5b464458a7a8b49b40cc88c2f21b7b9a4e76c541ecbc69b850c%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=bc79c47f-fd6d-4e33-bdc1-d1f333710019" class=glightbox data-aspect-ratio=1.777778 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:1.777778><img alt=Image loading=lazy onload="const ratio=this.naturalWidth/this.naturalHeight;this.parentElement.style.aspectRatio=ratio.toFixed(6),this.parentElement.setAttribute(&#34;data-aspect-ratio&#34;,ratio.toFixed(6)),this.parentElement.classList.add(&#34;loaded&#34;)" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9870eb1b-5de9-4225-93d4-65ec37e9d58f%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466ZIR7QMEA%252F20260204%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260204T125741Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEE0aCXVzLXdlc3QtMiJGMEQCIF6thcbJQrKiYKTOOEdO3UDWnjyr9IwPOGpM9GyIi39qAiB3yOl1mrE1qdsDjJ%252FgLCWadEXOymhrEbpFlhFz9Eid5Cr%252FAwgWEAAaDDYzNzQyMzE4MzgwNSIMNyK7WoXP%252BTbtOH6%252BKtwDhXEzYWozZg2ZZnaoX8arNdnGA0qIxqQeUYOQTrfbMhMqQt7g7KKA4bYECIzCEcP3N%252Fi%252Fdrs1sgEiw44pLEbg5qt8y98roOFhZdxQJtepxJT2DJmyTbRgWOTVdf1uKNRbglghFRHMPYlnf7fcox43LrIW0ohLq8im94c9tLrp0LT1ehOI6Cx6VijXlCrUUxHjFOdwsCUgx9u4%252FDHVsf9CTrVg%252FvA5MGsKc%252BqdRlXYjmRrGIp%252B0iIgy4bDPFguyh1VUB95DSt%252B7R62RMYN%252Fu5EnUHErtlZlSuR6B1TKrjA8x9tAPxYLOQgAjH5ylBtyEZhwBNwYHfLkotKRTbFKUrNB9tK%252BYBcnGeqNgqLNgKdsfY%252BhIiXbBut%252FhlGGsAjc%252FS4VqwC3iXbM16pq1zkGoCfWnBi2FaK7fQamtXHk7slAmqESkxaow%252FOM4cttsRGeCAw5tdc0NodxqYmGU5%252BsIrn1k2STXZ5P%252Bd9Og9lISxiSeotcUCQHfjWlUh27gVfnLeIz9bNyw62xJpLocprV2fpbmNd1NPUkfk7pammNVfAQ4GRdCKcANTT4Itsy6x7%252FUN5dQYX%252BJGKKXQDMhWFFUhPQupmWS6M9LJpiSq%252FKGw%252FNXTbCnwG0Cn7mxug3EUw7veMzAY6pgFQgEnpNKzRy360jge6yOk3Dqr6B9EaI99O5j2RDtsLrH5R2n2zwFLZXoJ%252FBVl7NlDmV0Khv6MLci%252BdgwpZQ9WBmqswmeSRqCTXJle24%252FvzfYlPG8GZjya%252Fbsn6EzqT%252BeA2ItUanvNOKYrHLALw3%252FJe4JAEfyfmYs6ph8WzsTW1rM6uh7DRaZddI2M0ldWLfOjsH5FQ0ZBxWu7Syytb4S2oHDGLFlBo%26X-Amz-Signature%3Dc831d36c158bd5b464458a7a8b49b40cc88c2f21b7b9a4e76c541ecbc69b850c%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=bc79c47f-fd6d-4e33-bdc1-d1f333710019"/></a></figure><p>CSI Driver 会作为 Pod 运行在 K8s 中，通过监听资源（PVC、PV 等）事件触发对底层存储资源的操作，还有一些操作是 kubelet 通过 UDS（Unix Domain Socket）调用 CSI Driver 进行</p><p>监听资源变更这部分都是通用逻辑，实现重复度比较高，因此 Kubernetes Team 提供了一系列 Sidecar 来完成（上图粉色部分），以简化开发，同时解耦与 K8s API 的交互实现：<a href=https://kubernetes-csi.github.io/docs/sidecar-containers.html rel="noopener noreferrer" target=_blank>CSI Sidecar Containers</a></p><p><br></p><p>那么我们要实现的 CSI Driver 最后可以分为三个 gRPC 服务（上图绿色部分）：</p><ol><li>Identity Service：用于暴露插件本身的信息和进行健康检查</li><li>Controller Service：操作底层存储资源，对存储卷进行管理</li><li>Node Service：执行和宿主机相关的操作，例如 mount 等</li></ol><p><br></p><p>CSI 规范文档中有几个比较重要的点：</p><ol><li>首先，CSI 接口<strong>必须保证幂等性</strong>。虽然 K8s 保证在在给定时间内对每个卷「正在进行」的调用不超过一个，但当发生 failover 时，这个保证可能就会失效，导致诸如重复创建同一个卷的情况发生，因此 CSI 侧必须实现幂等性，以防止存储卷泄露</li><li>规范返回值，CSI 的 gRPC 接口<strong>必须返回标准错误码</strong>，以便 K8s 正确响应，这部分在<a href=https://github.com/container-storage-interface/spec/blob/master/spec.md rel="noopener noreferrer" target=_blank>标准文档</a>的 Error Scheme 部分可以看到</li></ol><p><br></p><p>最后部署时一般分为 Node Plugin 和 Controller Plugin 进行部署：</p><ol><li>前者需要实现 Identity Service 和 Node Service，以 DaemonSet 方式运行在每个节点上</li><li>后者需要实现 Identity Service 和 Controller Service，可以在任何地方运行，通常是个 Deployment 或 StatefulSet</li></ol><p><br></p><p>一个卷的生命周期如下所示</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Plain text</span> <button aria-label=复制代码 title=复制代码 class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class="language-plain text">   CreateVolume +------------+ DeleteVolume
 +-------------&gt;|  CREATED   +--------------+
 |              +---+----^---+              |
 |       Controller |    | Controller       v
+++         Publish |    | Unpublish       +++
|X|          Volume |    | Volume          | |
+-+             +---v----+---+             +-+
                | NODE_READY |
                +---+----^---+
               Node |    | Node
              Stage |    | Unstage
             Volume |    | Volume
                +---v----+---+
                |  VOL_READY |
                +---+----^---+
               Node |    | Node
            Publish |    | Unpublish
             Volume |    | Volume
                +---v----+---+
                | PUBLISHED  |
                +------------+</code></pre></div><p>例如，当创建一个使用 PVC 的 Pod 时：</p><ol><li>Volume Controller 监听到 PVC 创建，但其只负责 In-Tree 模式的管理，跳过执行</li><li>Sidecar 监听到 PVC 创建，<strong>调用 CSI Controller Service 的 </strong><code><strong>CreateVolume</strong></code>，CSI Driver 这时会创建底层存储资源。之后卷处于 CREATED 状态，PV 被创建，并绑定到 PVC 上</li><li>Volume Controller 创建 VolumeAttachment 资源，表示需要将 PV 挂载到宿主机上</li><li>Sidecar 监听到 VolumeAttachment 创建，<strong>调用 CSI Controller Service 的 </strong><code><strong>ControllerPublishVolume</strong></code>。CSI Driver 这时一般会将底层存储资源与目标节点关联起来，之后卷处于 NODE_READY 状态，对于 Node 可见</li><li>kubelet 感知到卷的存在，执行 MountDevice 操作，<strong>调用 CSI Node Service 的 </strong><code><strong>NodeStageVolume</strong></code>。CSI Driver 此时会初始化卷，例如进行分区和格式化、创建文件系统等，之后卷处于 VOL_READY 状态</li><li>最后 kubelet 执行 Setup 操作，<strong>调用 CSI Node Service 的 </strong><code><strong>NodePublishVolume</strong></code>。CSI Driver 将卷挂载到容器（kubelet 指定的 Volume 目录）内，卷进入 PUBLISHED 状态，可以正常使用</li></ol><p><br></p><h2 id="">部署</h2><p>前面提到，CSI Driver 是以 Pod 运行在 K8s 内的，因此本质上就是拉 Pod 运行即可。但 CSI 部署时也分为 Controller Plugin 和 Node Plugin，且可能涉及相关存储底层配置，要升级时也比较麻烦。因此一般会通过 Helm 进行部署：</p><p><a href=https://helm.sh/zh/docs/topics/charts/ rel="noopener noreferrer" target=_blank>Chart Development Guide</a></p><p><br></p><h2 id="">测试</h2><p>kubernetes-csi/csi-test 仓库下提供了一些测试工具</p><p><a href=https://github.com/kubernetes-csi/csi-test rel="noopener noreferrer" target=_blank>kubernetes-csi/csi-test: CSI test frameworks</a></p><p><br></p><p>首先 csi-test 里的 <code>pkg/sanity</code> 包可以帮助进行单元测试，其还提供了一个 CLI 程序 csi-sanity 可以用于检测 API 是否符合规范，但其没法很好的进行 API 和 E2E（End-to-End，端到端） 测试</p><p><br></p><p>API 测试要手动进行也是可以的，CSI Driver 只是提供几个 gRPC 接口，所以接口测试时使用 grpcurl 等 gRPC 调试工具即可，但 csc（Container Storage Client）等工具也提供了更便利的包装：</p><ul><li><a href=https://github.com/rexray/gocsi/tree/master/csc rel="noopener noreferrer" target=_blank>gocsi/csc at master · rexray/gocsi</a></li><li><a href=https://github.com/kubernetes/cloud-provider-openstack/blob/master/docs/cinder-csi-plugin/csc-tool.md#list-volumes rel="noopener noreferrer" target=_blank>cloud-provider-openstack/docs/cinder-csi-plugin/csc-tool.md at master · kubernetes/cloud-provider-openstack</a></li></ul><p><br></p><p>E2E 测试可以通过 kubectl 手动进行，官方也提供了一些套件用于进行自动化的 E2E 测试：</p><p><a href=https://github.com/kubernetes/kubernetes/tree/master/test/e2e/storage/external rel="noopener noreferrer" target=_blank>kubernetes/test/e2e/storage/external at master · kubernetes/kubernetes</a></p><p>E2E 测试这部分，之后有空打算单独写一篇文章讲一下</p><p><br></p><h2 id="">相关资料</h2><ul><li><a href=https://kubernetes-csi.github.io/docs/introduction.html rel="noopener noreferrer" target=_blank>Kubernetes CSI Developer Documentation</a></li><li><a href=https://github.com/kubernetes/design-proposals-archive/blob/main/storage/container-storage-interface.md rel="noopener noreferrer" target=_blank>Container Storage Interface Proposal</a></li><li><a href=https://github.com/container-storage-interface/spec/blob/master/spec.md rel="noopener noreferrer" target=_blank>Container Storage Interface Specification</a></li><li><a href=https://zhuanlan.zhihu.com/p/51757577 rel="noopener noreferrer" target=_blank>基于 CSI 的 Kubernetes 存储插件开发实践 ｜ QingCloud</a></li><li><a href=https://cloudnative.to/blog/develop-a-csi-driver/ rel="noopener noreferrer" target=_blank>CSI 驱动开发指南 ｜云原生社区（中国）</a></li></ul></div><nav class=post-navigation data-astro-cid-gbhzkc2y><a href=/post/2022summary class="nav-link nav-prev" data-astro-cid-gbhzkc2y><span class=nav-label data-astro-cid-gbhzkc2y>← 上一篇</span> <span class=nav-title data-astro-cid-gbhzkc2y>2022 年度总结</span> </a><a href=/post/vim-as-an-ide class="nav-link nav-next" data-astro-cid-gbhzkc2y><span class=nav-label data-astro-cid-gbhzkc2y>下一篇 →</span> <span class=nav-title data-astro-cid-gbhzkc2y>Vim as an IDE</span></a></nav><footer class=page-footer data-astro-cid-gbhzkc2y><a href=/ class=back-link data-astro-cid-gbhzkc2y>← 返回首页</a></footer><section class=comments-section data-astro-cid-gbhzkc2y><div class=comments-container data-astro-cid-te6ksoa6 data-giscus-config="{&#34;slug&#34;:&#34;kubernetes-csi&#34;,&#34;title&#34;:&#34;Kubernetes CSI&#34;,&#34;config&#34;:{&#34;repo&#34;:&#34;xxxuuu/xxxuuu.github.io&#34;,&#34;repoId&#34;:&#34;MDEwOlJlcG9zaXRvcnkxODQ3Mjk3Mjg&#34;,&#34;category&#34;:&#34;Announcements&#34;,&#34;categoryId&#34;:&#34;DIC_kwDOCwLAgM4ChgWc&#34;,&#34;mapping&#34;:&#34;title&#34;,&#34;strict&#34;:&#34;0&#34;,&#34;reactionsEnabled&#34;:&#34;1&#34;,&#34;emitMetadata&#34;:&#34;0&#34;,&#34;inputPosition&#34;:&#34;bottom&#34;,&#34;lang&#34;:&#34;zh-CN&#34;,&#34;lazy&#34;:true}}" data-provider=giscus id=comments><div class=comments-loading data-astro-cid-te6ksoa6>加载评论中...</div></div></section></div><aside class=toc-container data-astro-cid-gbhzkc2y><div class=toc-wrapper data-astro-cid-gbhzkc2y><div class=toc-title data-astro-cid-gbhzkc2y>目录</div><nav class=toc-nav data-astro-cid-gbhzkc2y></nav></div></aside></div></div></article></main><footer data-astro-cid-aoh3bln3><div class=container data-astro-cid-aoh3bln3><div class=footer-content data-astro-cid-aoh3bln3><div class=copyright data-astro-cid-aoh3bln3><p data-astro-cid-aoh3bln3>&copy; 2026 x³u³. All rights reserved.</p><p data-astro-cid-aoh3bln3 class=powered-by>Powered by <a href=https://github.com/xxxuuu/nopress rel="noopener noreferrer" target=_blank data-astro-cid-aoh3bln3>Nopress</a></p></div><div class=social-links data-astro-cid-aoh3bln3><a href=https://github.com/xxxuuu rel="noopener noreferrer" target=_blank class=social-icon aria-label=github data-astro-cid-aoh3bln3><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></span></a><a href=https://x.com/xxuuu0 rel="noopener noreferrer" target=_blank class=social-icon aria-label=twitter data-astro-cid-aoh3bln3><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></span></a><a href=mailto:xxuuu0@outlook.com rel="noopener noreferrer" target=_blank class=social-icon aria-label=email data-astro-cid-aoh3bln3><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg></span></a><a href=/rss/feed.xml class="social-icon rss" aria-label=RSS订阅 data-astro-cid-aoh3bln3><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg></span></a></div></div></div></footer></body></html>
<!DOCTYPE html><html lang="zh-CN"><head><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><title>应该在 DBMS 中使用 MMAP 吗？ | x³u³</title><meta name="theme-color" content="#000000"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0"/><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="论文阅读,数据库"/><meta name="description" content="🗒 碎碎念"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="应该在 DBMS 中使用 MMAP 吗？ | x³u³"/><meta property="og:description" content="🗒 碎碎念"/><meta property="og:url" content="https://xxxuuu.me/post/db-mmap"/><meta property="og:image" content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="og:site_name" content="应该在 DBMS 中使用 MMAP 吗？ | x³u³"/><meta property="og:type" content="Post"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="🗒 碎碎念"/><meta name="twitter:title" content="应该在 DBMS 中使用 MMAP 吗？ | x³u³"/><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="article:published_time"/><meta property="article:author" content="xxxuuu"/><meta property="article:section" content="分布式系统,存储,云原生"/><meta property="article:publisher"/><meta name="next-head-count" content="23"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerPolicy="no-referrer"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/ec75275403549c7b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec75275403549c7b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script defer="" src="/_next/static/chunks/3607272e.720be9a60ad0a2e4.js"></script><script src="/_next/static/chunks/webpack-2e93fd44b13cc828.js" defer=""></script><script src="/_next/static/chunks/framework-a9bb0a3aa321677c.js" defer=""></script><script src="/_next/static/chunks/main-38dcea65ee3c1f0e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e9e50482a01cfd95.js" defer=""></script><script src="/_next/static/chunks/88495-591bdb3ec2a9391e.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bprefix%5D/%5Bslug%5D-e9a6e2b9082a2bda.js" defer=""></script><script src="/_next/static/bzll3595dvYzC4mzTRuY5/_buildManifest.js" defer=""></script><script src="/_next/static/bzll3595dvYzC4mzTRuY5/_ssgManifest.js" defer=""></script><style id="__jsx-ae067b659f5ecbd6">:root{--content-width:768px;--theme-color:#ff8200;--fg-color:#495057}::-moz-selection{background-color:var(--theme-color)!important;color:#fff!important}::selection{background-color:var(--theme-color)!important;color:#fff!important}.notion-h-title{color:#343a40;font-weight:bold}.notion-text,.notion-list,.notion-toggle,.notion-to-do,.notion-quote,.notion-callout-text,.notion-simple-table-cell{letter-spacing:.5px;color:var(--fg-color);font-size:1rem;font-weight:400}.notion-inline-code{background:rgba(255,229,100,.2);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:var(--fg-color)}.notion-asset-wrapper img{-webkit-border-radius:.6em;-moz-border-radius:.6em;border-radius:.6em}.notion-quote{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;border-left:3px solid var(--theme-color);background-color:rgba(238,241,225,.3)}.notion-link{opacity:1;color:#36563c;border-bottom:1px dashed#36563c!important;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-link:hover{color:var(--theme-color);border-bottom:1px dashed var(--theme-color)!important}.notion-bookmark{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-bookmark:hover{border-color:var(--theme-color)}.notion-callout{border:0}.notion-property-checkbox-unchecked{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;border:1.3px solid var(--theme-color)}.notion-property-checkbox-checked{background:var(--theme-color);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.notion-property-checkbox-checked .svg{width:12px;height:12px;top:2px;left:2px}.notion-toggle>summary::marker{# TODO gap between marker and text
      }.notion-list li{padding-left:.5rem}.notion-list ol>ul{padding-left:0}.notion-list ul>ol{padding-left:0}.notion-list li::marker{color:var(--theme-color);font-weight:600;letter-spacing:-1px}.notion-table-of-contents-item{opacity:1}</style><style id="__jsx-2783458257">null

  </style></head><body><div id="__next"><div id="theme-autumn" class="font-sans font-light bg-white scroll-smooth"><header style="background-color:null" class="w-full h-[430px] flex justify-center z-10"><div style="background-image:url(https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2)" class="max-w-[var(--content-width)] size-full px-5 flex justify-center items-center flex-col relative bg-cover bg-center"><div class="rounded-xl bg-white/[.6] w-full py-4 px-5 backdrop-blur-sm hover:scale-[1.03] transition duration-300 relative bottom-5"><div class="flex items-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="size-20 rounded-full shadow-lg pointer-events-none select-none"/><div class="flex flex-col flex-1 ml-7 size-full"><h1 class="text-2xl my-0 text-[var(--theme-color)] drop-shadow-[0_2px_10px_rgba(231,156,0,0.6)] font-bold">x³u³</h1><div class="text-sm font-normal w-full text-gray-500 mt-2 flex jusitify-between"><span class="flex-1">🗒 碎碎念</span><div class="justify-center flex-wrap flex"><div class="space-x-3 text-sm flex items-center text-gray-500 opacity-80"><a target="_blank" rel="noreferrer" title="github" href="https://github.com/xxxuuu"><i class="fab fa-github"></i></a><a target="_blank" rel="noreferrer" title="email" href="mailto:xxuuu0@outlook.com"><i class="fas fa-envelope"></i></a><a target="_blank" rel="noreferrer" title="RSS" href="/rss/feed.xml"><i class="fas fa-rss"></i></a></div></div></div></div></div></div><div class="absolute w-full bottom-0 px-5"><nav class="w-full bg-transparent"><ul class="flex"><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/"> <!-- -->🏠 首页</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/archive"> <!-- -->📃 归档</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/links"> <!-- -->👬 友链</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/about"> <!-- -->👤 关于</a></li></ul></nav></div></div></header><div id="container-inner" class="w-full relative mx-auto max-w-[var(--content-width)]"><div id="container-wrapper" class="relative mx-auto justify-center sm:flex"><div class="w-full transition ease-in-out duration-700 transform order-first opacity-0 translate-y-32"><div id="article-wrapper" class="px-4 sm:px-8 pb-12 sm:pb-20 relative"><section class="flex flex-col mt-16"><h1 class="text-4xl font-bold text-gray-800">应该在 DBMS 中使用 MMAP 吗？</h1><div class="mt-6 mb-8 text-gray-300 flex flex-row"><span class="mr-3 text-gray-300 text-sm sm:text-base font-normal flex justify-center items-center">2024-10-27</span><span id="wordCountWrapper" class="flex gap-3 font-light"><span class="flex whitespace-nowrap items-center"><i class="pl-1 pr-2 fas fa-file-word"></i><span id="wordCount">0</span></span><span class="flex whitespace-nowrap items-center"><i class="mr-1 fas fa-clock"></i><span></span><span id="readTime">0</span> <!-- -->分钟</span></span></div></section><div id="notion-article" class="mx-auto overflow-hidden "><main class="notion light-mode notion-page notion-block-94e03781e74c41d089f7df2e2a7ad93f"><div class="notion-viewport"></div><div class="notion-collection-page-properties"><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">category</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">icon</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">password</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div></div></div></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-fa45317e598544ada6c59ed6426453d2" data-id="fa45317e598544ada6c59ed6426453d2"><span><div id="fa45317e598544ada6c59ed6426453d2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#fa45317e598544ada6c59ed6426453d2" title="Buffer Pool 和 MMAP"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Buffer Pool 和 MMAP</span></span></h2><div class="notion-text notion-block-f9fbf6dd0ea3468b96f411874b9499c6">对于（基于磁盘的）数据库来说，缓存（cache + buffer）管理是很重要的，因为次级存储速度很慢，必须设计一个缓存机制才能让数据库高效地进行读写</div><div class="notion-blank notion-block-5788384de0454fc59c2067a7f7c7864a"> </div><div class="notion-text notion-block-1a5eb03f8c344421848aabb573c609e5">传统的方法是数据库实现一个缓冲池（Buffer Pool），像 CMU 15-445 这样的数据库课程，通常第一个 Lab 就是实现一个 Buffer Pool 作为页面和缓存管理的组件</div><div class="notion-text notion-block-7d83d2ff3ac446a88d6a8c52f9f6c078">另一个方法是将一切交给操作系统，也就是使用 <code class="notion-inline-code">mmap()</code> 系统调用，mmap 将文件映射到内存地址空间上，程序透明地对内存进行访问，由内核负责管理页面的加载和刷写</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-e633f5c6aac94be2be6ce7d79fca0959"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F0bb67f4b-fc66-4c7f-8b45-af39e6585204%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=e633f5c6-aac9-4be2-be6c-e7d79fca0959&amp;t=e633f5c6-aac9-4be2-be6c-e7d79fca0959&amp;width=1366.7044677734375&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-dd47c10093494e7783c6cee5d149a144">使用 mmap 能大大简化开发，并且能避免 <code class="notion-inline-code">read</code>/<code class="notion-inline-code">write</code> 等系统调用和缓冲区拷贝的开销，理论上有更高的性能。因此不少数据库或存储系统也使用了 mmap，但也有一些不同的观点</div><div class="notion-blank notion-block-129887563979801a903ed851e11dc8d5"> </div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-1bb19bbca4e24e7fbde107647c830068" data-id="1bb19bbca4e24e7fbde107647c830068"><span><div id="1bb19bbca4e24e7fbde107647c830068" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1bb19bbca4e24e7fbde107647c830068" title="反方：不应该使用 MMAP"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">反方：不应该使用 MMAP</span></span></h2><div class="notion-text notion-block-12a88756397980d6b028d5a43aba1ba6">反方出自 CIDR 2022 上一篇比较短的 paper：<em><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://db.cs.cmu.edu/papers/2022/cidr2022-p13-crotty.pdf">Are You Sure You Want to Use MMAP in Your Database Management System?</a></em> 作者之一是 Andy Pavlo，刷过 CMU 15-445 的同学肯定不陌生</div><div class="notion-blank notion-block-12a88756397980198f24c8b5d5976365"> </div><div class="notion-text notion-block-129887563979800e9092fe48793ab545">PS：页眉有惊喜</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-12988756397980d39666e98f30e6c92f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fe6a32e12-65cc-426e-881b-8c2a4eb6b942%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=12988756-3979-80d3-9666-e98f30e6c92f&amp;t=12988756-3979-80d3-9666-e98f30e6c92f&amp;width=4372&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-1c1d3016de80489a973ae50a76d80cf2"> </div><div class="notion-text notion-block-12a88756397980fe9a1dd161acc907df">文章的主要观点是在 DBMS 内不应该使用 mmap，论文提出，mmap 存在一些阴暗面（dark side）会带来棘手的问题，而为了解决这些问题，在工程上带来的复杂性，会使得 mmap 本身的收益（简单和性能）都被抵消</div><div class="notion-blank notion-block-12988756397980bdb30af9daef787377"> </div><div class="notion-text notion-block-12988756397980728ff0e1303debe18d">论文具体讨论了 mmap 的以下几宗罪</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12988756397980e9ba8fce5f90f1c33d" data-id="12988756397980e9ba8fce5f90f1c33d"><span><div id="12988756397980e9ba8fce5f90f1c33d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12988756397980e9ba8fce5f90f1c33d" title="事务安全"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">事务安全</span></span></h3><div class="notion-text notion-block-12988756397980b6ac48d7d2a7cef530">mmap 对程序来说是透明的，何时将脏页刷到磁盘上取决于操作系统。虽然通过 <code class="notion-inline-code">msync</code> 可以强制刷盘，但没有办法能够阻止刷盘（这相当于强制数据库是 steal policy 的），也无法在静默刷盘时得到通知</div><div class="notion-blank notion-block-12b88756397980f1a397eed12112b0f2"> </div><div class="notion-text notion-block-12a88756397980ebb0fdda2dc689f849">为此数据库就需要一些复杂的协议来保证事务安全，论文总结了三种处理方法，都是写时复制的（Copy-on-Write，COW）想法：</div><ol start="1" class="notion-list notion-list-numbered notion-block-12a8875639798091b36ee147c41a2441"><li>内核写时复制</li><ol class="notion-list notion-list-numbered notion-block-12a8875639798091b36ee147c41a2441"><div class="notion-text notion-block-12a887563979807c976fccd38729687c">通过 <code class="notion-inline-code">MAP_PRIVATE</code> flag 创建 mmap，映射出来的地址空间就是写时复制的，不会作用到底层的文件。通过这个方法，可以创建一个私有的副本工作区用来修改数据，最后在私有工作区更新的数据并写入 WAL，再传播修改回主工作区</div><div class="notion-text notion-block-12b88756397980bead6eee0fe8cf2b25">这里要确保已提交事务的更新必须在其他冲突事务运行之前就传播到主工作区上，需要一些额外的数据结构去追踪脏页</div><div class="notion-text notion-block-12b887563979806c8b32daefe90dc2bf">另外因为是 COW 的，私有工作区会随着写入逐渐增长，最终可能会在内存中存在两个完整的数据库副本，可以通过 <code class="notion-inline-code">mremap</code> 定期收缩私有工作区的大小避免无限扩张，但同样有上面的问题，需要确保脏页传播到主工作区上，并在此期间阻止并发更新</div><div class="notion-text notion-block-12b8875639798090aa04d6bc0778e0dd">MongoDB 的 MMAPv1 引擎使用了这种方法</div></ol></ol><ol start="2" class="notion-list notion-list-numbered notion-block-12a887563979804394ecd34e0eb6e1d1"><li>用户态写时复制</li><ol class="notion-list notion-list-numbered notion-block-12a887563979804394ecd34e0eb6e1d1"><div class="notion-text notion-block-12b887563979800aa9fce24e6f24cdf8">第二种方法类似，但是在用户态进行。待更新页面从 mmap 区域手动复制到另一块单独维护的缓冲区上进行更新并写入 WAL，然后再复制回 mmap 区域</div><div class="notion-text notion-block-12b88756397980b0a829f0b2658617ed">SQLite，RavenDB 使用了类似的方法</div></ol></ol><ol start="3" class="notion-list notion-list-numbered notion-block-12a88756397980a3a2d7ee3ade906c2a"><li>影子分页</li><ol class="notion-list notion-list-numbered notion-block-12a88756397980a3a2d7ee3ade906c2a"><div class="notion-text notion-block-12b88756397980c88c73cde1817c776e">影子分页类似一种 swapping pointer 的做法，通过 mmap 映射两份出副本，其中一个是主副本。当要修改时将页面复制到影子副本上进行更新，<code class="notion-inline-code">msync</code> 刷盘后 swap pointer 将影子副本变为主副本，原主副本变为新的影子副本</div><div class="notion-text notion-block-12b88756397980ef83b5e8284bd610cb">LMDB 使用了这种方法，但只允许单个写者进行更新</div></ol></ol><div class="notion-blank notion-block-12b887563979806c8fa4fc304a2de619"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12988756397980cabb7def893e5bf4f2" data-id="12988756397980cabb7def893e5bf4f2"><span><div id="12988756397980cabb7def893e5bf4f2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12988756397980cabb7def893e5bf4f2" title="I/O 停顿"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">I/O 停顿</span></span></h3><div class="notion-text notion-block-12b88756397980bd8b32eb9e05746d9e">很多 DBMS 都使用了异步 I/O（例如 libaio 或 io_uring），例如对 B+ Tree 的叶子节点扫描可以通过异步 I/O 访问以避免非连续页面的阻塞读取导致的延迟。但 mmap 是不支持异步的</div><div class="notion-text notion-block-12b8875639798093b385eec2d68342c9">此外，操作系统可能会随时会将页面驱逐，再次访问就会导致缺页中断，会有明显的性能抖动。DBMS 无法知道页面是否真正在内存中，虽然可以使用 <code class="notion-inline-code">mlock</code> 将页面 pin 在内存中，但这又需要实现一些额外的页面管理工作</div><div class="notion-text notion-block-12b88756397980dab056c7bbd48d676b">或者通过 <code class="notion-inline-code">madvise</code> 来告知操作系统应用的访问模式以尽量避免接下来访问的页面被驱逐，但这只是一种 “advise” 而不是强力的控制，并且也只提供了简单的 <code class="notion-inline-code">MADV_SEQUENTIAL</code>、<code class="notion-inline-code">MADV_RANDOM</code> 和 <code class="notion-inline-code">MADV_WILLNEED</code> 等几个 flag，无法精细管理</div><div class="notion-blank notion-block-12b887563979806ba75eecd7d5a2dab5"> </div><div class="notion-text notion-block-12b887563979803c9a2dc4ceb7a2daf5">也许还可以创建额外的线程去做预取以避免阻塞主线程，但这额外的复杂性完全违背了使用 mmap 的初衷</div><div class="notion-blank notion-block-12988756397980b4adfdd5d8f7603e44"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-1298875639798046857bff3c95abcbe5" data-id="1298875639798046857bff3c95abcbe5"><span><div id="1298875639798046857bff3c95abcbe5" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1298875639798046857bff3c95abcbe5" title="错误处理"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">错误处理</span></span></h3><div class="notion-text notion-block-12b88756397980a8b5b5e9884205677c">DBMS 的一个核心职责是确保数据的完整性，大多数 DBMS 都会在各种级别的数据上维护 checksum，例如 SQL Server 在页面级别上维护了 checksum，从磁盘上读取数据时就会进行校验</div><div class="notion-blank notion-block-12b887563979809c840cff48282d23d1"> </div><div class="notion-text notion-block-12b8875639798073aafaee04c51f4899">但使用 mmap 的话难以实现，原因还是 DBMS 无法知道页面到底在哪里，没有一个明确的边界隔离内存和磁盘访问。操作系统可能在任意时刻将页面驱逐，下次访问再透明地重新从磁盘读取，因此必须每次进行页面访问都重新校验才能确保安全，但显然很多时候这种校验是不必要的</div><div class="notion-text notion-block-12b887563979800aa3f7e31462b91913">另外从语言角度考虑，如果使用了非内存安全的语言，有可能在不经意间破坏了 mmap 映射区域的内存数据，而这些错误的数据又会被静默地写入磁盘，永久损坏。如果是 Buffer Pool 实现，则可以在刷盘时显式检查</div><div class="notion-blank notion-block-12b88756397980bb8be9ca49714c04f3"> </div><div class="notion-text notion-block-12b887563979802bb964e3ef612d7ec8">mmap 这种透明性的「优点」也会导致在代码里更难进行 I/O 错误处理。Buffer Pool 实现中 I/O 交互只局限于它自身，可以很轻易地包装对 I/O 错误的处理。但 mmap 中任意时刻的内存访问都可能导致 I/O 错误，给异常处理流带来很大的不便</div><div class="notion-blank notion-block-129887563979809abc62f48973add07e"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12988756397980e39ed5e8af4e22fd67" data-id="12988756397980e39ed5e8af4e22fd67"><span><div id="12988756397980e39ed5e8af4e22fd67" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12988756397980e39ed5e8af4e22fd67" title="性能问题"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">性能问题</span></span></h3><div class="notion-text notion-block-12b887563979801aa04fe88c7f631a74">最后，mmap 真的性能更好吗？</div><div class="notion-blank notion-block-12b88756397980dcab37d7d68377ca2f"> </div><div class="notion-text notion-block-12b88756397980ba90cbf4bacf66baab">传统观点认为 mmap 性能好的点在于避免了 <code class="notion-inline-code">read</code>/<code class="notion-inline-code">write</code> 的系统调用，以及避免内核和用户态缓冲区来回拷贝的开销（这也降低了内存使用）。从这些点来看，随着 NVMe SSD 的提升，理论上 mmap 和传统 I/O 方法的差距还会进一步扩大</div><div class="notion-blank notion-block-12b887563979806fa0e3d7c9c7605ca1"> </div><div class="notion-text notion-block-12b88756397980d898b2ddf29c713237">但论文指出，内核的页面驱逐机制成为主要瓶颈，该机制无法扩展到更多的线程和更大带宽的存储设备上。除非没有内核级别的重大重写，这个问题无法解决。具体来说有下面三个瓶颈：</div><ol start="1" class="notion-list notion-list-numbered notion-block-12b8875639798065acd4c40cff49a5b0"><li>页表竞争：内核需要同步页面，在大量更新的时候会有显著竞争开销</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-12b8875639798097965ed32e2885e175"><li>单线程页面驱逐：内核使用单线程进行页面驱逐，扩展性受限</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-12b887563979801bacc2cd214518bfc1"><li>TLB shootdown：驱逐页面时，内核还要清理每个核心上的 TLB 项，这里多核设备的核间中断会有高昂的开销，需要数千个周期</li></ol><div class="notion-text notion-block-12b887563979809e8638ca163e9c8a11">
OLTP 比较常见的随机读负载实验中，mmap 如果使用 <code class="notion-inline-code">MADV_RANDOM</code> 的 hint，在一开始还能达到 fio 的基线性能，但马上就会 I/O 跌 0 将近 5 秒，最终恢复到基线性能的一半。右图可以看到此时正好是 Page cache 被填满，开始驱逐页面</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-12b88756397980af9b95e0d8d5496145"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fca6f2a55-8f94-4ce6-a6ff-9816dc9898ef%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=12b88756-3979-80af-9b95-e0d8d5496145&amp;t=12b88756-3979-80af-9b95-e0d8d5496145&amp;width=4112&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-12b8875639798015bc83ec2327647b01">对于 OLAP 场景的顺序读负载试验，<code class="notion-inline-code">MADV_SEQUENTIAL</code> hint 的 mmap 在一开始还能维持较高的性能，但同样在 20 秒左右 Page cache 被打满，性能严重下降。而在同时使用 10 块 SSD 的场景，mmap 性能和只有 1 块 SSD 时几乎完全一样，说明 mmap 性能无法随着硬件线性提升</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-12b8875639798082830adc6913a96ed5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F4bffeaa1-bcba-4bbc-baf3-2a9c49313af1%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=12b88756-3979-8082-830a-dc6913a96ed5&amp;t=12b88756-3979-8082-830a-dc6913a96ed5&amp;width=4252&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-12c887563979806886f8d8c226ce3808"> </div><div class="notion-text notion-block-12b88756397980b8b954dcd04f53a66a">不过在我看来这个 benchmark 应该得加上 Buffer Pool 的数据，只和 fio 来比较显然是不公平的，fio 读写方式和真实数据库的负载不同，Buffer Pool 肯定也远达不到 fio 压测的基线性能</div><div class="notion-blank notion-block-12c887563979806f9d71d0ab8b222d28"> </div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-12988756397980ba9b7eefe1c7fdde0a" data-id="12988756397980ba9b7eefe1c7fdde0a"><span><div id="12988756397980ba9b7eefe1c7fdde0a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12988756397980ba9b7eefe1c7fdde0a" title="正方：使用 MMAP 完全没问题"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">正方：使用 MMAP 完全没问题</span></span></h2><div class="notion-text notion-block-12a887563979803285aaca3305cfa36f">RavenDB 的 CEO, Oren Eini 发表了一篇文章回复：<em><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://ayende.com/blog/196161-C/re-are-you-sure-you-want-to-use-mmap-in-your-database-management-system">Re: Are You Sure You Want to Use MMAP in Your Database Management System?</a></em></div><div class="notion-text notion-block-12c88756397980d19f3be0ac276f1873">RavenDB 的 Voron 存储引擎使用 mmap 构建，他们还出了一本<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/ayende/libgavran">关于如何构建存储引擎的书</a>，其内部也使用了 mmap</div><div class="notion-blank notion-block-12c88756397980dcbffffa1e7081310e"> </div><div class="notion-text notion-block-12c88756397980dcbae5c869c188e5ae">文章首先指出了 Buffer Pool 要做的事情并不少，而且也对实现有一定要求，如果不是高度优化的实现，不会有好的性能，而在 mmap 这些都能由操作系统来保障</div><div class="notion-blank notion-block-12c8875639798074a685f236b1817562"> </div><div class="notion-text notion-block-12c887563979801981edef988504a1c8">接下来，文章对四个问题进行了逐一反驳</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12c88756397980a895f7e01867822607" data-id="12c88756397980a895f7e01867822607"><span><div id="12c88756397980a895f7e01867822607" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12c88756397980a895f7e01867822607" title="事务安全"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">事务安全</span></span></h3><div class="notion-text notion-block-12c88756397980499521e5865fe9ca32">mmap 确实无法知道数据何时落盘，但作者认为这本质上与使用 Buffer Pool 时没有区别，在 Buffer Pool 中也同样需要考虑页面的驱逐和各种管理</div><div class="notion-text notion-block-12c88756397980f68772d2340fdcc080">文中还提到 RavenDB 使用写时复制的主要目的也是为了方便实现 MVCC，更容易处理并发事务。并且单写者模型在 DBMS 中并不罕见</div><div class="notion-blank notion-block-12c88756397980e38057c5dc06a974e8"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12c88756397980aaa2eaddf259ca9447" data-id="12c88756397980aaa2eaddf259ca9447"><span><div id="12c88756397980aaa2eaddf259ca9447" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12c88756397980aaa2eaddf259ca9447" title="I/O 停顿"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">I/O 停顿</span></span></h3><div class="notion-text notion-block-12c8875639798024a356e40a096833a9">作者承认关于缺页导致的 I/O 抖动是使用 mmap 必须要处理的最重要的问题，但实际情况并没有想象中那么严重。RavenDB 中通过在专用线程上调用 <code class="notion-inline-code">madvise(WILL_NEED)</code>，他认为这和异步 I/O 的方式没什么不同</div><div class="notion-blank notion-block-12c88756397980e19663c27556f86066"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12c887563979806e918fe4d24fb0c307" data-id="12c887563979806e918fe4d24fb0c307"><span><div id="12c887563979806e918fe4d24fb0c307" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12c887563979806e918fe4d24fb0c307" title="错误处理"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">错误处理</span></span></h3><div class="notion-text notion-block-12c8875639798083b949c12c4fe0fb07">校验和的问题，即使在 Buffer Pool 中也会存在，因为数据可能从 cache 中读取，但实际上在磁盘中损坏；RavenDB 只会进行一次校验和检查，不需要每次都检查，两者没什么差别</div><div class="notion-text notion-block-12c887563979804792bcd92af5e844eb">对于 I/O 错误，作者认为在数据库中处理该类错误的唯一答案是 crash 掉整个数据库然后从头恢复运行，因此在这里不需要什么额外工作</div><div class="notion-blank notion-block-12c88756397980939c88d10f38690a7e"> </div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-12c88756397980bbaef4fa08b65e579e" data-id="12c88756397980bbaef4fa08b65e579e"><span><div id="12c88756397980bbaef4fa08b65e579e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12c88756397980bbaef4fa08b65e579e" title="性能问题"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">性能问题</span></span></h3><div class="notion-text notion-block-12c88756397980869602d58e3b130f7f">对于 mmap 的三个性能瓶颈:</div><ol start="1" class="notion-list notion-list-numbered notion-block-12c88756397980d78fe4c5e7b0cebf50"><li>页表竞争：是一个<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://ravendb.net/articles/production-postmortem-the-guinness-record-for-page-faults-high-cpu">已修复的内核 bug</a>，现在无需操心</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-12c887563979809690b0d7260b927574"><li>单线程页面驱逐：RavenDB 从未遇到过，脏页是少数，页面驱逐的压力并不大</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-12c88756397980a8a9c3ff8ddb208bf8"><li>TLB shootdown：触发这个问题需要极快的 I/O 加上远超内存大小的工作集</li></ol><div class="notion-text notion-block-12c887563979802a824ec1b3cc40a44a">作者认为论文中的基准测试假设了不使用 mmap（也就是使用 Buffer Pool）的情况下没有其他成本，这是不现实的，例如使用 Buffer Pool，也同样需要考虑这些页面驱逐的问题，只不过现在是由 Buffer Pool 来负责。这个观点我是赞同的，前文的基准测试确实没有体现出 Buffer Pool 的对比</div><div class="notion-blank notion-block-12c88756397980329e3fda3cb2e51728"> </div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-12a887563979804c9010d0af55e5569b" data-id="12a887563979804c9010d0af55e5569b"><span><div id="12a887563979804c9010d0af55e5569b" class="notion-header-anchor"></div><a class="notion-hash-link" href="#12a887563979804c9010d0af55e5569b" title="总结"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">总结</span></span></h2><div class="notion-text notion-block-12c887563979801caaadfbc75072f3ad">两篇文章看下来，个人感觉 Oren Eini 反驳的文章中内容稍显空洞，没有什么特别有力的证据或数据支撑，例如异步 I/O 性能那块没有给出具体数据，在我个人的经验中异步 I/O 还是能带来很大的提升的，除非这里的数据集很小，能大部分都缓存命中</div><div class="notion-text notion-block-12c88756397980f8a36ac3438606c126">但这篇文章也可以作为一个不同角度的参考，有些地方还是值得思考的，比如关于错误处理，另一个相似的问题是，对于底层软件，内存分配失败的情况下应该如何处理？mmap 无法像手动实现 Buffer Pool 一样限制缓存容量，可能更需要考虑这个问题</div><div class="notion-text notion-block-12c8875639798051948accc0ba11f41a">另外还可以参考下 codedump 老师的这篇 blog：</div><ul class="notion-list notion-list-disc notion-block-12c887563979802ab722deef829acfa2"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.codedump.info/post/20220327-weekly-11/">周刊（第11期）：mmap适用于存储引擎吗？ - codedump的网络日志</a></li></ul><div class="notion-blank notion-block-12c8875639798003b771ff37be2da95e"> </div><div class="notion-text notion-block-12c88756397980e48ac8e9255219326b">回到 mmap 上，使用 mmap 确实需要考虑比想象中更多的问题，但随着内核发展，某些痛点也逐渐被解决了，例如现在内核支持了原子 <code class="notion-inline-code">msync</code> 调用，如果它失败了，就会禁用内核的透明页驱逐功能，这样就不需要再操心一些使用 mmap 带来的事务安全问题了</div><div class="notion-text notion-block-12c88756397980ffba8fd1164cc68022">但总的来说我认为是否使用 mmap 是一个 trade-off，如果你希望系统更加简单，有更低的开发成本，那就使用 mmap，把一切都交给内核；但反之这也可能会让内核实现成为整个系统的瓶颈，因为内核是 general-purpose 的实现，而不是针对数据库的 special-purpose 的实现。当内核会成为你的瓶颈，或需要更多细粒度的控制，为此需要进行大量改造的话，还不如从头就开始自己实现</div><div class="notion-blank notion-block-12c8875639798053a5a3d68e25dcece2"> </div></main></div><div class="flex flex-row gap-2"><a class="rounded-full px-4 py-1 bg-gray-100/[.3] text-gray-400 text-xs sm:text-sm font-normal leading-6 cursor-pointer transition-all duration-300 hover:bg-[var(--theme-color)] hover:text-white hover:-translate-y-1" href="/tag/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB">论文阅读</a><a class="rounded-full px-4 py-1 bg-gray-100/[.3] text-gray-400 text-xs sm:text-sm font-normal leading-6 cursor-pointer transition-all duration-300 hover:bg-[var(--theme-color)] hover:text-white hover:-translate-y-1" href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a></div><div class="mt-8 mb-6 w-full border-b border-dashed border-gray-200"></div><p class="text-base mb-3 font-normal text-gray-300">下一篇</p><a href="/post/japan-travel"><h2 class="mb-2 sm:mb-4 text-gray-800 text-2xl font-bold relative transition-all duration-300 before:invisible before:h-5 before:w-0 before:bg-[var(--theme-color)] before:opacity-5 before:absolute before:top-4 before:-left-2 before:rounded-lg before:transition-all before:duration-500 hover:before:visible hover:before:w-full hover:text-[var(--theme-color)] hover:drop-shadow(0_1px_2px_rgb(255,255,255)">日本游记</h2></a><div class="mt-6 mb-8 w-full border-b border-dashed border-gray-200"></div><div id="comment" class="comment mt-5 text-gray-800 dark:text-gray-300 "><div class="text-center">Loading...<i class="fas fa-spinner animate-spin text-3xl "></i></div></div><aside class="hidden lg:block absolute h-full w-52 -right-56 top-36"><div class="sticky top-20"></div></aside></div></div></div></div><footer class="w-full border-t border-gray-200/[.8] relative mt-72 md:mt-60 before:w-full before:h-[22rem] before:z-10 before:block before:absolute before:-top-[17.6rem] before:left-0 before:bg-[url(/images/footer-bg.png)] before:bg-no-repeat before:bg-center before:bg-cover lg:before:bg-contain "><div class="max-w-[var(--content-width)] mx-auto my-12"><p class="mx-6 text-left text-xs text-gray-500 font-bold relative z-20">© <!-- -->2018-2025<!-- --> <!-- -->xxxuuu<!-- --> · Powered by <a class="hover:underline text-gray-700" href="https://github.com/xxxuuu/NotionNext">NotionNext</a></p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"NOTION_CONFIG":{"LINK":"https://xxxuuu.me","THEME":"autumn","KEYWORDS":"分布式系统,存储,云原生","AUTHOR":"xxxuuu","BIO":"xxxuuu","CUSTOM_MENU":"true","CUSTOM_RIGHT_CLICK_CONTEXT_MENU":"false","LANG":"zh-CN","SINCE":"2018","POST_TITLE_ICON":"false"},"notice":null,"siteInfo":{"title":"x³u³","description":"🗒 碎碎念","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","icon":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","link":"https://xxxuuu.me"},"allNavPages":[{"title":"Summer Pockets 圣地巡礼记","pageCoverThumbnail":"https://www.notion.so/image/attachment%3Ab7e99627-78b8-440b-ab94-290679fd56a8%3Atoudai-5-1.jpg?table=block\u0026id=25d88756-3979-8023-9a5a-d926873b7b9b\u0026t=25d88756-3979-8023-9a5a-d926873b7b9b","category":null,"tags":["旅行"],"summary":"眩しさだけは、忘れなかった","slug":"post/summer-pockets-junrei","href":"/post/summer-pockets-junrei","pageIcon":"","lastEditedDate":"2025-09-01T18:26:01.035Z","publishDate":1756339200000,"ext":{},"short_id":"25d88756"},{"title":"2024 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2024summary","href":"/post/2024summary","pageIcon":"","lastEditedDate":"2025-01-01T09:43:48.713Z","publishDate":1735689600000,"ext":{},"short_id":"16e88756"},{"title":"确定性模拟器","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":"最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题","slug":"post/deterministic-simulator","href":"/post/deterministic-simulator","pageIcon":"","lastEditedDate":"2024-12-21T17:14:04.799Z","publishDate":1734739200000,"ext":{},"short_id":"14688756"},{"title":"浅谈协程","pageCoverThumbnail":"","category":null,"tags":["操作系统"],"summary":"最近经常被各种人问到一些关于协程的事情，例如 xx 语言的 xx 是不是协程，xx 语言和 xx 语言的协程有什么区别，我不得不一次次 share 出我的文章，索性直接发到 blog 上吧","slug":"post/coroutine","href":"/post/coroutine","pageIcon":"","lastEditedDate":"2024-11-22T15:31:35.279Z","publishDate":1732233600000,"ext":{},"short_id":"14688756"},{"title":"MemoryDB: Redis + Remote Log","pageCoverThumbnail":"","category":null,"tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","slug":"post/memorydb","href":"/post/memorydb","pageIcon":"","lastEditedDate":"2024-11-18T03:17:24.167Z","publishDate":1731801600000,"ext":{},"short_id":"12988756"},{"title":"应该在 DBMS 中使用 MMAP 吗？","pageCoverThumbnail":"","category":null,"tags":["论文阅读","数据库"],"summary":null,"slug":"post/db-mmap","href":"/post/db-mmap","pageIcon":"","lastEditedDate":"2024-11-03T07:26:55.808Z","publishDate":1729987200000,"ext":{},"short_id":"94e03781"},{"title":"日本游记","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念","旅行"],"summary":"次の駅は、東京です","slug":"post/japan-travel","href":"/post/japan-travel","pageIcon":"","lastEditedDate":"2024-11-09T06:15:00.191Z","publishDate":1729468800000,"ext":{},"short_id":"11688756"},{"title":"PVE 迁移翻车自救","pageCoverThumbnail":"","category":null,"tags":["折腾","PVE"],"summary":null,"slug":"post/pve-migration-rescue","href":"/post/pve-migration-rescue","pageIcon":"","lastEditedDate":"2024-10-13T12:39:01.429Z","publishDate":1728777600000,"ext":{},"short_id":"11d88756"},{"title":"译：使 Rust library 兼容 no_std","pageCoverThumbnail":"","category":null,"tags":["Rust"],"summary":"Effective Rust Item 33","slug":"post/rust-no-std","href":"/post/rust-no-std","pageIcon":"","lastEditedDate":"2024-09-21T10:57:48.428Z","publishDate":1726876800000,"ext":{},"short_id":"4e5d7fc0"},{"title":"Infra 窘境","pageCoverThumbnail":"","category":null,"tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","slug":"post/infra-dilemma","href":"/post/infra-dilemma","pageIcon":"","lastEditedDate":"2024-09-12T13:38:22.110Z","publishDate":1725321600000,"ext":{},"short_id":"5b4b2d85"},{"title":"迁移博客到 Notion","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"Make Notion Great Again！","slug":"post/migrate-blog-to-notion","href":"/post/migrate-blog-to-notion","pageIcon":"","lastEditedDate":"2024-11-17T13:06:23.285Z","publishDate":1724544000000,"ext":{},"short_id":"a06c26b2"},{"title":"Longhorn 浅析","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","category":null,"tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","slug":"post/longhorn","href":"/post/longhorn","pageIcon":"","lastEditedDate":"2024-10-08T10:27:34.637Z","publishDate":1723075200000,"ext":{},"short_id":"bde25ba8"},{"title":"从 Linux 内核看读写锁设计","pageCoverThumbnail":"","category":null,"tags":["Linux","操作系统"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","slug":"post/kernel-rwlock","href":"/post/kernel-rwlock","pageIcon":"","lastEditedDate":"2024-11-22T13:43:47.075Z","publishDate":1704326400000,"ext":{},"short_id":"0e96a78e"},{"title":"2023 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block\u0026id=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026t=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2023summary","href":"/post/2023summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:27.096Z","publishDate":1703980800000,"ext":{},"short_id":"d26ce18a"},{"title":"混乱的软中断概念","pageCoverThumbnail":"","category":null,"tags":["Linux","操作系统"],"summary":"软中断（softirq）和软件中断（software interrupt）","slug":"post/softirq-and-software-interrupt","href":"/post/softirq-and-software-interrupt","pageIcon":"","lastEditedDate":"2024-11-22T13:43:43.071Z","publishDate":1692144000000,"ext":{},"short_id":"3327d648"},{"title":"PVE8 上启用 12 代 Intel CPU 核显 SR-IOV","pageCoverThumbnail":"","category":null,"tags":["折腾","PVE"],"summary":"拯救我的 Galgame 和追番体验～","slug":"post/pve8-intel-sr-iov","href":"/post/pve8-intel-sr-iov","pageIcon":"","lastEditedDate":"2024-10-13T03:51:26.212Z","publishDate":1691280000000,"ext":{},"short_id":"d5fd419b"},{"title":"容器标准和生态","pageCoverThumbnail":"","category":null,"tags":["Cloud Native"],"summary":null,"slug":"post/container-spec-ecosystem","href":"/post/container-spec-ecosystem","pageIcon":"","lastEditedDate":"2025-01-13T12:53:01.310Z","publishDate":1689120000000,"ext":{},"short_id":"deaccfa2"},{"title":"Vim as an IDE","pageCoverThumbnail":"","category":null,"tags":["折腾","Vim"],"summary":"记录 Vim 入教过程和折腾记录","slug":"post/vim-as-an-ide","href":"/post/vim-as-an-ide","pageIcon":"","lastEditedDate":"2024-08-27T15:25:23.391Z","publishDate":1687392000000,"ext":{},"short_id":"f26f0a34"},{"title":"Kubernetes CSI","pageCoverThumbnail":"","category":null,"tags":["Cloud Native","Kubernetes"],"summary":null,"slug":"post/kubernetes-csi","href":"/post/kubernetes-csi","pageIcon":"","lastEditedDate":"2024-08-27T15:25:21.308Z","publishDate":1686960000000,"ext":{},"short_id":"a23d61e0"},{"title":"2022 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F967f6a03-c26f-451c-971a-3b507ae769f3%2Ftencent_badge.jpg?table=block\u0026id=cc463e20-63ea-4132-acea-84fc7307dde8\u0026t=cc463e20-63ea-4132-acea-84fc7307dde8\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2022summary","href":"/post/2022summary","pageIcon":"","lastEditedDate":"2024-11-10T10:41:29.539Z","publishDate":1672444800000,"ext":{},"short_id":"cc463e20"},{"title":"The Google File System 论文概览","pageCoverThumbnail":"","category":null,"tags":["论文阅读","分布式系统"],"summary":null,"slug":"post/gfs-paper","href":"/post/gfs-paper","pageIcon":"","lastEditedDate":"2025-04-15T02:57:01.735Z","publishDate":1644796800000,"ext":{},"short_id":"1eecd7c4"},{"title":"MIT6.824 Lab1 MapReduce","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":null,"slug":"post/mit6824-lab1-mapreduce","href":"/post/mit6824-lab1-mapreduce","pageIcon":"","lastEditedDate":"2024-08-27T15:25:13.837Z","publishDate":1644624000000,"ext":{},"short_id":"514ae2e3"},{"title":"蒟蒻的 2021 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block\u0026id=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026t=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"落落落落的一年","slug":"post/2021summary","href":"/post/2021summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:12.637Z","publishDate":1640908800000,"ext":{},"short_id":"7b0eb02d"},{"title":"蒟蒻的 2020 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F1dc80ee3-5c1d-4af8-a284-d7896174816a%2Ficpc%25E5%258D%2597%25E4%25BA%25AC.png?table=block\u0026id=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026t=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"转眼三年已经过去，我也迎来了毕业","slug":"post/2020summary","href":"/post/2020summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:11.371Z","publishDate":1610236800000,"ext":{},"short_id":"37c4cfd9"},{"title":"蒟蒻的 2019 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F2fdfd260-e2c8-42ea-9d8d-6fd6795797dc%2Flanqiao.jpeg?table=block\u0026id=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026t=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"随着2019年最后一晚的落幕，21世纪的10年代也结束了，今年的我无论是在技术上还是别的方面，都成长了许多。以本文记录我的技术路程，迎接新的一年","slug":"post/2019summary","href":"/post/2019summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:09.505Z","publishDate":1577836800000,"ext":{},"short_id":"8aa3f594"},{"title":"蒟蒻的 2018 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff362b439-342f-451a-b70e-41ec07d86ab3%2F2018summary.jpeg?table=block\u0026id=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026t=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"又是一年过去了，2018算是人生中最重要的转折点之一，总结一下今年的经历和感想，也算是记录我的技术路程","slug":"post/2018summary","href":"/post/2018summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:07.409Z","publishDate":1546214400000,"ext":{},"short_id":"806f9f46"}],"tagOptions":[{"name":"碎碎念","color":"red","count":9},{"name":"分布式系统","color":"gray","count":5},{"name":"折腾","color":"blue","count":4},{"name":"论文阅读","color":"orange","count":3},{"name":"操作系统","color":"blue","count":3},{"name":"Linux","color":"purple","count":2},{"name":"Cloud Native","color":"brown","count":2},{"name":"数据库","color":"yellow","count":2},{"name":"旅行","color":"yellow","count":2},{"name":"PVE","color":"blue","count":2},{"name":"存储","color":"default","count":1},{"name":"Vim","color":"pink","count":1},{"name":"Kubernetes","color":"green","count":1},{"name":"Rust","color":"orange","count":1}],"categoryOptions":[],"customNav":[{"icon":"fas fa-link","name":"友链","href":"/links","target":"_self","show":true},{"icon":null,"name":"关于","href":"/about","target":"_self","show":true}],"customMenu":[{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/","title":"🏠 首页","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:49.017Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/","name":"🏠 首页","target":"_self","password":"","show":true},{"date":{"start_date":"2024-08-24","date_format":"relative"},"type":"Menu","slug":"/archive","title":"📃 归档","status":"Published","category":"","comment":"","publishDate":1724457600000,"publishDay":"2024-8-24","lastEditedDate":"2024-08-25T14:25:34.972Z","lastEditedDay":"2024-8-25","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/archive","name":"📃 归档","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/links","summary":"跳转到/links","title":"👬 友链","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:37.253Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/links","name":"👬 友链","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/about","summary":"跳转到/about","title":"👤 关于","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:43.390Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/about","name":"👤 关于","target":"_self","password":"","show":true}],"postCount":26,"latestPosts":[{"id":"25d88756-3979-8023-9a5a-d926873b7b9b","date":{"start_date":"2025-08-28","date_format":"relative"},"type":"Post","slug":"post/summer-pockets-junrei","tags":["旅行"],"summary":"眩しさだけは、忘れなかった","title":"Summer Pockets 圣地巡礼记","status":"Published","category":"","comment":"","publishDate":1756339200000,"publishDay":"2025-8-28","lastEditedDate":"2025-09-01T18:26:01.035Z","lastEditedDay":"2025-9-1","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/attachment%3Ab7e99627-78b8-440b-ab94-290679fd56a8%3Atoudai-5-1.jpg?table=block\u0026id=25d88756-3979-8023-9a5a-d926873b7b9b\u0026t=25d88756-3979-8023-9a5a-d926873b7b9b","pageCoverThumbnail":"https://www.notion.so/image/attachment%3Ab7e99627-78b8-440b-ab94-290679fd56a8%3Atoudai-5-1.jpg?table=block\u0026id=25d88756-3979-8023-9a5a-d926873b7b9b\u0026t=25d88756-3979-8023-9a5a-d926873b7b9b","ext":{},"tagItems":[{"name":"旅行","color":"yellow"}],"href":"/post/summer-pockets-junrei","target":"_self","password":""},{"id":"16e88756-3979-8010-aeb9-d7e49f597453","date":{"start_date":"2025-01-01","date_format":"relative"},"type":"Post","slug":"post/2024summary","tags":["碎碎念"],"title":"2024 年度总结","status":"Published","category":"","comment":"","publishDate":1735689600000,"publishDay":"2025-1-1","lastEditedDate":"2025-01-01T09:43:48.713Z","lastEditedDay":"2025-1-1","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2024summary","target":"_self","password":""},{"id":"14688756-3979-80f8-8f88-d0bb8697b4a4","date":{"start_date":"2024-12-21","date_format":"relative"},"type":"Post","slug":"post/deterministic-simulator","tags":["分布式系统"],"summary":"最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题","title":"确定性模拟器","status":"Published","category":"","comment":"","publishDate":1734739200000,"publishDay":"2024-12-21","lastEditedDate":"2024-12-21T17:14:04.799Z","lastEditedDay":"2024-12-21","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"}],"href":"/post/deterministic-simulator","target":"_self","password":""},{"id":"14688756-3979-806c-af3c-f23f4c85d88e","date":{"start_date":"2024-11-22","date_format":"relative"},"type":"Post","slug":"post/coroutine","tags":["操作系统"],"summary":"最近经常被各种人问到一些关于协程的事情，例如 xx 语言的 xx 是不是协程，xx 语言和 xx 语言的协程有什么区别，我不得不一次次 share 出我的文章，索性直接发到 blog 上吧","title":"浅谈协程","status":"Published","category":"","comment":"","publishDate":1732233600000,"publishDay":"2024-11-22","lastEditedDate":"2024-11-22T15:31:35.279Z","lastEditedDay":"2024-11-22","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"操作系统","color":"blue"}],"href":"/post/coroutine","target":"_self","password":""},{"id":"12988756-3979-8065-aeb4-e6ec1258ed90","date":{"start_date":"2024-11-17","date_format":"relative"},"type":"Post","slug":"post/memorydb","tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","title":"MemoryDB: Redis + Remote Log","status":"Published","category":"","comment":"","publishDate":1731801600000,"publishDay":"2024-11-17","lastEditedDate":"2024-11-18T03:17:24.167Z","lastEditedDay":"2024-11-18","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"},{"name":"数据库","color":"yellow"},{"name":"论文阅读","color":"orange"}],"href":"/post/memorydb","target":"_self","password":""},{"id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","date":{"start_date":"2024-10-27","date_format":"relative"},"type":"Post","slug":"post/db-mmap","tags":["论文阅读","数据库"],"title":"应该在 DBMS 中使用 MMAP 吗？","status":"Published","category":"","comment":"","publishDate":1729987200000,"publishDay":"2024-10-27","lastEditedDate":"2024-11-03T07:26:55.808Z","lastEditedDay":"2024-11-3","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"数据库","color":"yellow"}],"href":"/post/db-mmap","target":"_self","password":""}],"post":{"id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","date":{"start_date":"2024-10-27","date_format":"relative"},"type":"Post","slug":"post/db-mmap","tags":["论文阅读","数据库"],"title":"应该在 DBMS 中使用 MMAP 吗？","status":"Published","category":"","comment":"","publishDate":1729987200000,"publishDay":"2024-10-27","lastEditedDate":"2024-11-03T07:26:55.808Z","lastEditedDay":"2024-11-3","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"数据库","color":"yellow"}],"href":"/post/db-mmap","target":"_self","password":"","blockMap":{"block":{"94e03781-e74c-41d0-89f7-df2e2a7ad93f":{"value":{"id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","version":968,"type":"page","content":["fa45317e-5985-44ad-a6c5-9ed6426453d2","f9fbf6dd-0ea3-468b-96f4-11874b9499c6","5788384d-e045-4fc5-9c20-67a7f7c7864a","1a5eb03f-8c34-4421-848a-abb573c609e5","7d83d2ff-3ac4-46a8-8d6a-8c52f9f6c078","e633f5c6-aac9-4be2-be6c-e7d79fca0959","dd47c100-9349-4e77-83c6-cee5d149a144","12988756-3979-801a-903e-d851e11dc8d5","1bb19bbc-a4e2-4e7f-bde1-07647c830068","12a88756-3979-80d6-b028-d5a43aba1ba6","12a88756-3979-8019-8f24-c8b5d5976365","12988756-3979-800e-9092-fe48793ab545","12988756-3979-80d3-9666-e98f30e6c92f","1c1d3016-de80-489a-973a-e50a76d80cf2","12a88756-3979-80fe-9a1d-d161acc907df","12988756-3979-80bd-b30a-f9daef787377","12988756-3979-8072-8ff0-e1303debe18d","12988756-3979-80e9-ba8f-ce5f90f1c33d","12988756-3979-80b6-ac48-d7d2a7cef530","12b88756-3979-80f1-a397-eed12112b0f2","12a88756-3979-80eb-b0fd-da2dc689f849","12a88756-3979-8091-b36e-e147c41a2441","12a88756-3979-8043-94ec-d34e0eb6e1d1","12a88756-3979-80a3-a2d7-ee3ade906c2a","12b88756-3979-806c-8fa4-fc304a2de619","12988756-3979-80ca-bb7d-ef893e5bf4f2","12b88756-3979-80bd-8b32-eb9e05746d9e","12b88756-3979-8093-b385-eec2d68342c9","12b88756-3979-80da-b056-c7bbd48d676b","12b88756-3979-806b-a75e-ecd7d5a2dab5","12b88756-3979-803c-9a2d-c4ceb7a2daf5","12988756-3979-80b4-adfd-d5d8f7603e44","12988756-3979-8046-857b-ff3c95abcbe5","12b88756-3979-80a8-b5b5-e9884205677c","12b88756-3979-809c-840c-ff48282d23d1","12b88756-3979-8073-aafa-ee04c51f4899","12b88756-3979-800a-a3f7-e31462b91913","12b88756-3979-80bb-8be9-ca49714c04f3","12b88756-3979-802b-b964-e3ef612d7ec8","12988756-3979-809a-bc62-f48973add07e","12988756-3979-80e3-9ed5-e8af4e22fd67","12b88756-3979-801a-a04f-e88c7f631a74","12b88756-3979-80dc-ab37-d7d68377ca2f","12b88756-3979-80ba-90cb-f4bacf66baab","12b88756-3979-806f-a0e3-d7c9c7605ca1","12b88756-3979-80d8-98b2-ddf29c713237","12b88756-3979-8065-acd4-c40cff49a5b0","12b88756-3979-8097-965e-d32e2885e175","12b88756-3979-801b-acc2-cd214518bfc1","12b88756-3979-809e-8638-ca163e9c8a11","12b88756-3979-80af-9b95-e0d8d5496145","12b88756-3979-8015-bc83-ec2327647b01","12b88756-3979-8082-830a-dc6913a96ed5","12c88756-3979-8068-86f8-d8c226ce3808","12b88756-3979-80b8-b954-dcd04f53a66a","12c88756-3979-806f-9d71-d0ab8b222d28","12988756-3979-80ba-9b7e-efe1c7fdde0a","12a88756-3979-8032-85aa-ca3305cfa36f","12c88756-3979-80d1-9f3b-e0ac276f1873","12c88756-3979-80dc-bfff-fa1e7081310e","12c88756-3979-80dc-bae5-c869c188e5ae","12c88756-3979-8074-a685-f236b1817562","12c88756-3979-8019-81ed-ef988504a1c8","12c88756-3979-80a8-95f7-e01867822607","12c88756-3979-8049-9521-e5865fe9ca32","12c88756-3979-80f6-8772-d2340fdcc080","12c88756-3979-80e3-8057-c5dc06a974e8","12c88756-3979-80aa-a2ea-ddf259ca9447","12c88756-3979-8024-a356-e40a096833a9","12c88756-3979-80e1-9663-c27556f86066","12c88756-3979-806e-918f-e4d24fb0c307","12c88756-3979-8083-b949-c12c4fe0fb07","12c88756-3979-8047-92bc-d92af5e844eb","12c88756-3979-8093-9c88-d10f38690a7e","12c88756-3979-80bb-aef4-fa08b65e579e","12c88756-3979-8086-9602-d58e3b130f7f","12c88756-3979-80d7-8fe4-c5e7b0cebf50","12c88756-3979-8096-90b0-d7260b927574","12c88756-3979-80a8-a9c3-ff8ddb208bf8","12c88756-3979-802a-824e-c1b3cc40a44a","12c88756-3979-8032-9e3f-da3cb2e51728","12a88756-3979-804c-9010-d0af55e5569b","12c88756-3979-801c-aaad-fbc75072f3ad","12c88756-3979-80f8-a36a-c3438606c126","12c88756-3979-8051-948a-ccc0ba11f41a","12c88756-3979-802a-b722-deef829acfa2","12c88756-3979-8003-b771-ff37be2da95e","12c88756-3979-80e4-8ac8-e9255219326b","12c88756-3979-80ff-ba8f-d1164cc68022","12c88756-3979-8053-a5a3-d68e25dcece2"],"format":{"page_font":"mono","block_locked":false,"block_locked_by":"919e7400-5a69-4402-b2e1-f7d99cc48131","copied_from_pointer":{"id":"2eace25c-842c-46fd-9ccb-e9190981b6c3","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"page_cover_position":0.6,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ad6f5bf4-57fc-4f07-b37f-5751863b5246/SocialMediaPreviewImage.png"},"created_time":1725117746600,"last_edited_time":1730618815808,"parent_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","parent_table":"collection","alive":true,"copied_from":"2eace25c-842c-46fd-9ccb-e9190981b6c3","file_ids":["033096a9-4f77-4220-81eb-82d75f2648ba","5ebc96bf-cbd8-4b44-8424-fa27b7cc0a59","60548940-f8b8-4ab6-8617-70a3d482e8ca","5220374d-1f88-40b3-90cd-10346d840eef","882aed4f-e84f-480e-9e4c-d202f6240d69","ac259509-e39a-4dba-b4de-111e3e0b2777","ad6f5bf4-57fc-4f07-b37f-5751863b5246"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"jXtLQ_GC3DUyE42zMcpZkg,\"start\",\"end\"","n":{"jXtLQ_GC3DUyE42zMcpZkg,\"start\",\"end\"":{"s":{"x":"jXtLQ_GC3DUyE42zMcpZkg","i":[{"t":"s"},{"t":"t","i":["n2oLtBi3A9Q0",1],"o":"start","l":20,"c":"应该在 DBMS 中使用 MMAP 吗？"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"0dc306ca-50a6-4917-9b5a-85a61f0f66f5":{"value":{"id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","version":203,"type":"collection_view_page","content":["c12d1fcb-2e22-4dc3-a5f5-b5010c63059a"],"view_ids":["2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","14688756-3979-80e7-97c9-000c212f8370","14588756-3979-8039-9990-000cefddccf8","55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","8dfd415c-71af-41f9-b984-e7182bf2210b","3c2f93d8-6810-42a1-87da-55f1ecda9bca"],"collection_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","format":{"site_id":"cd684fc1-aa3f-4897-8f3a-ec903e77f063","block_locked":false,"block_locked_by":"27074aef-7216-41ed-baef-d9b53addd870","collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"copied_from_pointer":{"id":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","table":"block","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"page_cover_position":0.5,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/16412a4f-3220-4021-b553-56a010794a94/SocialMediaPreviewImage.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"919e7400-5a69-4402-b2e1-f7d99cc48131"},{"role":"reader","type":"public_permission","is_site":true,"added_timestamp":1724420656606,"allow_duplicate":false}],"created_time":1724383978099,"last_edited_time":1756748880461,"parent_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","parent_table":"space","alive":true,"copied_from":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","file_ids":["49b4570c-b2f0-457b-81b7-b68e2693a471","708d7d1d-6233-408b-952f-594bb2831de7","145cea07-09d7-4146-bcf5-bebd1518488c","a9af1d6b-f284-4734-ba06-990353cf3f84","20ee2bf3-8f75-4cd7-9d6e-e1a780d5f17c","16412a4f-3220-4021-b553-56a010794a94"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"WL67X1wdfrRBQYoi916POg,\"start\",\"end\"","n":{"WL67X1wdfrRBQYoi916POg,\"start\",\"end\"":{"s":{"x":"WL67X1wdfrRBQYoi916POg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"fa45317e-5985-44ad-a6c5-9ed6426453d2":{"value":{"id":"fa45317e-5985-44ad-a6c5-9ed6426453d2","version":113,"type":"header","properties":{"title":[["Buffer Pool 和 MMAP"]]},"created_time":1725459686142,"last_edited_time":1729764919321,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"B_GdFSOFEMJCriq4bz0Y2Q,\"start\",\"end\"","n":{"B_GdFSOFEMJCriq4bz0Y2Q,\"start\",\"end\"":{"s":{"x":"B_GdFSOFEMJCriq4bz0Y2Q","i":[{"t":"s"},{"t":"t","i":["U_QwjqnCafTT",1],"o":"start","l":18,"c":"Buffer Pool 和 MMAP"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"f9fbf6dd-0ea3-468b-96f4-11874b9499c6":{"value":{"id":"f9fbf6dd-0ea3-468b-96f4-11874b9499c6","version":510,"type":"text","properties":{"title":[["对于（基于磁盘的）数据库来说，缓存（cache + buffer）管理是很重要的，因为次级存储速度很慢，必须设计一个缓存机制才能让数据库高效地进行读写"]]},"created_time":1725459927509,"last_edited_time":1729765228913,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"XyOTz1HVe2RpNVkgb48Upw,\"start\",\"end\"","n":{"XyOTz1HVe2RpNVkgb48Upw,\"start\",\"end\"":{"s":{"x":"XyOTz1HVe2RpNVkgb48Upw","i":[{"t":"s"},{"t":"t","i":["yW64TS0_Jp8T",1],"o":"start","l":75,"c":"对于（基于磁盘的）数据库来说，缓存（cache + buffer）管理是很重要的，因为次级存储速度很慢，必须设计一个缓存机制才能让数据库高效地进行读写"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"5788384d-e045-4fc5-9c20-67a7f7c7864a":{"value":{"id":"5788384d-e045-4fc5-9c20-67a7f7c7864a","version":5,"type":"text","created_time":1725460304382,"last_edited_time":1725460304383,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"GdvI2_7ySm4RcWOHvbcOiw,\"start\",\"end\"","n":{"GdvI2_7ySm4RcWOHvbcOiw,\"start\",\"end\"":{"s":{"x":"GdvI2_7ySm4RcWOHvbcOiw","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"1a5eb03f-8c34-4421-848a-abb573c609e5":{"value":{"id":"1a5eb03f-8c34-4421-848a-abb573c609e5","version":415,"type":"text","properties":{"title":[["传统的方法是数据库实现一个缓冲池（Buffer Pool），像 CMU 15-445 这样的数据库课程，通常第一个 Lab 就是实现一个 Buffer Pool 作为页面和缓存管理的组件"]]},"created_time":1725460304040,"last_edited_time":1729765189455,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"6WzrhAIAzJTa5N7GAYBw7Q,\"start\",\"end\"","n":{"6WzrhAIAzJTa5N7GAYBw7Q,\"start\",\"end\"":{"s":{"x":"6WzrhAIAzJTa5N7GAYBw7Q","i":[{"t":"s"},{"t":"t","i":["uuXG10fh9Ia9",1],"o":"start","l":93,"c":"传统的方法是数据库实现一个缓冲池（Buffer Pool），像 CMU 15-445 这样的数据库课程，通常第一个 Lab 就是实现一个 Buffer Pool 作为页面和缓存管理的组件"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"7d83d2ff-3ac4-46a8-8d6a-8c52f9f6c078":{"value":{"id":"7d83d2ff-3ac4-46a8-8d6a-8c52f9f6c078","version":632,"type":"text","properties":{"title":[["另一个方法是将一切交给操作系统，也就是使用 "],["mmap()",[["c"]]],[" 系统调用，mmap 将文件映射到内存地址空间上，程序透明地对内存进行访问，由内核负责管理页面的加载和刷写"]]},"created_time":1725460408019,"last_edited_time":1729777992410,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"d3V5OQMLwNOHoxGsRktjpg,\"start\",\"end\"","n":{"d3V5OQMLwNOHoxGsRktjpg,\"start\",\"end\"":{"s":{"x":"d3V5OQMLwNOHoxGsRktjpg","i":[{"t":"s"},{"t":"t","i":["LWN6_2nnh5Hl",1],"o":"start","l":22,"c":"另一个方法是将一切交给操作系统，也就是使用 "},{"t":"t","i":["LWN6_2nnh5Hl",23],"o":["LWN6_2nnh5Hl",22],"l":6,"c":"mmap()","b":[{"t":"a","x":"d3V5OQMLwNOHoxGsRktjpg","l":"","i":["LWN6_2nnh5Hl",82],"s":{"i":["LWN6_2nnh5Hl",23],"a":"b"},"e":{"i":["LWN6_2nnh5Hl",28],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["LWN6_2nnh5Hl",29],"o":["LWN6_2nnh5Hl",28],"l":53,"c":" 系统调用，mmap 将文件映射到内存地址空间上，程序透明地对内存进行访问，由内核负责管理页面的加载和刷写"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"e633f5c6-aac9-4be2-be6c-e7d79fca0959":{"value":{"id":"e633f5c6-aac9-4be2-be6c-e7d79fca0959","version":37,"type":"image","properties":{"size":[["108.9KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/0bb67f4b-fc66-4c7f-8b45-af39e6585204/image.png"]]},"format":{"block_width":683.3522338867188,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/0bb67f4b-fc66-4c7f-8b45-af39e6585204/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3418230563002681,"block_preserve_scale":true},"created_time":1725460209371,"last_edited_time":1729779044848,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"file_ids":["0bb67f4b-fc66-4c7f-8b45-af39e6585204"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"MUtJWLbRaQdBVztNPJAE6g,\"start\",\"end\"","n":{"MUtJWLbRaQdBVztNPJAE6g,\"start\",\"end\"":{"s":{"x":"MUtJWLbRaQdBVztNPJAE6g","i":[{"t":"s"},{"t":"t","i":["zGwWr2TstN-J",1],"o":"start","l":9,"c":"image.png"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"dd47c100-9349-4e77-83c6-cee5d149a144":{"value":{"id":"dd47c100-9349-4e77-83c6-cee5d149a144","version":676,"type":"text","properties":{"title":[["使用 mmap 能大大简化开发，并且能避免 "],["read",[["c"]]],["/"],["write",[["c"]]],[" 等系统调用和缓冲区拷贝的开销，理论上有更高的性能。因此不少数据库或存储系统也使用了 mmap，但也有一些不同的观点"]]},"created_time":1725117809267,"last_edited_time":1729954908834,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"EHZ3KzE_3a5KbNg1eNsTdA,\"start\",\"end\"","n":{"EHZ3KzE_3a5KbNg1eNsTdA,\"start\",\"end\"":{"s":{"x":"EHZ3KzE_3a5KbNg1eNsTdA","i":[{"t":"s"},{"t":"t","i":["Ixmk-EMHz_mR",1],"o":"start","l":22,"c":"使用 mmap 能大大简化开发，并且能避免 "},{"t":"t","i":["Ixmk-EMHz_mR",23],"o":["Ixmk-EMHz_mR",22],"l":4,"c":"read","b":[{"t":"a","x":"EHZ3KzE_3a5KbNg1eNsTdA","l":"","i":["Ixmk-EMHz_mR",91],"s":{"i":["Ixmk-EMHz_mR",23],"a":"b"},"e":{"i":["Ixmk-EMHz_mR",26],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["Ixmk-EMHz_mR",27],"o":["Ixmk-EMHz_mR",26],"l":1,"c":"/"},{"t":"t","i":["Ixmk-EMHz_mR",28],"o":["Ixmk-EMHz_mR",27],"l":5,"c":"write","b":[{"t":"a","x":"EHZ3KzE_3a5KbNg1eNsTdA","l":"","i":["Ixmk-EMHz_mR",92],"s":{"i":["Ixmk-EMHz_mR",28],"a":"b"},"e":{"i":["Ixmk-EMHz_mR",32],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["Ixmk-EMHz_mR",33],"o":["Ixmk-EMHz_mR",32],"l":58,"c":" 等系统调用和缓冲区拷贝的开销，理论上有更高的性能。因此不少数据库或存储系统也使用了 mmap，但也有一些不同的观点"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-801a-903e-d851e11dc8d5":{"value":{"id":"12988756-3979-801a-903e-d851e11dc8d5","version":13,"type":"text","created_time":1729781350316,"last_edited_time":1729781388000,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Hbs3JoRPzoqAoUHGlQYL_A,\"start\",\"end\"","n":{"Hbs3JoRPzoqAoUHGlQYL_A,\"start\",\"end\"":{"s":{"x":"Hbs3JoRPzoqAoUHGlQYL_A","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"1bb19bbc-a4e2-4e7f-bde1-07647c830068":{"value":{"id":"1bb19bbc-a4e2-4e7f-bde1-07647c830068","version":152,"type":"header","properties":{"title":[["反方：不应该使用 MMAP"]]},"created_time":1725459306168,"last_edited_time":1729864966252,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"gUAz9LSybIAgNqLisP_2Og,\"start\",\"end\"","n":{"gUAz9LSybIAgNqLisP_2Og,\"start\",\"end\"":{"s":{"x":"gUAz9LSybIAgNqLisP_2Og","i":[{"t":"s"},{"t":"t","i":["pKoh0f5e7Zrt",1],"o":"start","l":13,"c":"反方：不应该使用 MMAP"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-80d6-b028-d5a43aba1ba6":{"value":{"id":"12a88756-3979-80d6-b028-d5a43aba1ba6","version":71,"type":"text","properties":{"title":[["反方出自 CIDR 2022 上一篇比较短的 paper："],["Are You Sure You Want to Use MMAP in Your Database Management System?",[["a","https://db.cs.cmu.edu/papers/2022/cidr2022-p13-crotty.pdf"],["i"]]],[" 作者之一是 Andy Pavlo，刷过 CMU 15-445 的同学肯定不陌生"]]},"created_time":1729865008391,"last_edited_time":1730106059278,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"YnplCv1gjGRX6QH6ZlqUOw,\"start\",\"end\"","n":{"YnplCv1gjGRX6QH6ZlqUOw,\"start\",\"end\"":{"s":{"x":"YnplCv1gjGRX6QH6ZlqUOw","i":[{"t":"s"},{"t":"t","i":["zXVuLyPdtGPn",1],"o":"start","l":29,"c":"反方出自 CIDR 2022 上一篇比较短的 paper："},{"t":"t","i":["zXVuLyPdtGPn",30],"o":["zXVuLyPdtGPn",29],"l":69,"c":"Are You Sure You Want to Use MMAP in Your Database Management System?","b":[{"t":"a","x":"YnplCv1gjGRX6QH6ZlqUOw","l":"","i":["zXVuLyPdtGPn",139],"s":{"i":["zXVuLyPdtGPn",30],"a":"b"},"e":{"i":["zXVuLyPdtGPn",98],"a":"a"},"a":["a","https://db.cs.cmu.edu/papers/2022/cidr2022-p13-crotty.pdf"]},{"t":"a","x":"YnplCv1gjGRX6QH6ZlqUOw","l":"","i":["zXVuLyPdtGPn",140],"s":{"i":["zXVuLyPdtGPn",30],"a":"b"},"e":{"i":["zXVuLyPdtGPn",99],"a":"b"},"a":["i"]}],"a":[{"t":"a","x":"YnplCv1gjGRX6QH6ZlqUOw","l":"","i":["zXVuLyPdtGPn",140],"s":{"i":["zXVuLyPdtGPn",30],"a":"b"},"e":{"i":["zXVuLyPdtGPn",99],"a":"b"},"a":["i"]}]},{"t":"t","i":["zXVuLyPdtGPn",99],"o":["zXVuLyPdtGPn",98],"l":40,"c":" 作者之一是 Andy Pavlo，刷过 CMU 15-445 的同学肯定不陌生","b":[]},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-8019-8f24-c8b5d5976365":{"value":{"id":"12a88756-3979-8019-8f24-c8b5d5976365","version":5,"type":"text","created_time":1729865023068,"last_edited_time":1729865023070,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Efv-QTkXv4bq3QA4krLKeA,\"start\",\"end\"","n":{"Efv-QTkXv4bq3QA4krLKeA,\"start\",\"end\"":{"s":{"x":"Efv-QTkXv4bq3QA4krLKeA","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-800e-9092-fe48793ab545":{"value":{"id":"12988756-3979-800e-9092-fe48793ab545","version":67,"type":"text","properties":{"title":[["PS：页眉有惊喜"]]},"created_time":1729781350448,"last_edited_time":1729864940682,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"tXMSNmU7IXnYAMd61DvcpQ,\"start\",\"end\"","n":{"tXMSNmU7IXnYAMd61DvcpQ,\"start\",\"end\"":{"s":{"x":"tXMSNmU7IXnYAMd61DvcpQ","i":[{"t":"s"},{"t":"t","i":["fKllL-zI_lhq",1],"o":"start","l":8,"c":"PS：页眉有惊喜"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80d3-9666-e98f30e6c92f":{"value":{"id":"12988756-3979-80d3-9666-e98f30e6c92f","version":30,"type":"image","properties":{"size":[["20.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/e6a32e12-65cc-426e-881b-8c2a4eb6b942/image.png"]]},"format":{"block_width":2186,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/e6a32e12-65cc-426e-881b-8c2a4eb6b942/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.07319304666056725,"block_preserve_scale":true},"created_time":1729781357313,"last_edited_time":1729864940682,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"file_ids":["e6a32e12-65cc-426e-881b-8c2a4eb6b942"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"tWkfhTEDpNlOlCKFLxqbpQ,\"start\",\"end\"","n":{"tWkfhTEDpNlOlCKFLxqbpQ,\"start\",\"end\"":{"s":{"x":"tWkfhTEDpNlOlCKFLxqbpQ","i":[{"t":"s"},{"t":"t","i":["gCA5VT8n9NAs",1],"o":"start","l":9,"c":"image.png"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"1c1d3016-de80-489a-973a-e50a76d80cf2":{"value":{"id":"1c1d3016-de80-489a-973a-e50a76d80cf2","version":13,"type":"text","created_time":1725459306689,"last_edited_time":1729864940682,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"dvcrPYkZXEA_BoH8fZ_XQQ,\"start\",\"end\"","n":{"dvcrPYkZXEA_BoH8fZ_XQQ,\"start\",\"end\"":{"s":{"x":"dvcrPYkZXEA_BoH8fZ_XQQ","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-80fe-9a1d-d161acc907df":{"value":{"id":"12a88756-3979-80fe-9a1d-d161acc907df","version":25,"type":"text","properties":{"title":[["文章的主要观点是在 DBMS 内不应该使用 mmap，论文提出，mmap 存在一些阴暗面（dark side）会带来棘手的问题，而为了解决这些问题，在工程上带来的复杂性，会使得 mmap 本身的收益（简单和性能）都被抵消"]]},"created_time":1729864923567,"last_edited_time":1730031380835,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"jwy_gRS3ADkLbIiaUYz8Ug,\"start\",\"end\"","n":{"jwy_gRS3ADkLbIiaUYz8Ug,\"start\",\"end\"":{"s":{"x":"jwy_gRS3ADkLbIiaUYz8Ug","i":[{"t":"s"},{"t":"t","i":["XrZyKvoLE86K",1],"o":"start","l":110,"c":"文章的主要观点是在 DBMS 内不应该使用 mmap，论文提出，mmap 存在一些阴暗面（dark side）会带来棘手的问题，而为了解决这些问题，在工程上带来的复杂性，会使得 mmap 本身的收益（简单和性能）都被抵消"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80bd-b30a-f9daef787377":{"value":{"id":"12988756-3979-80bd-b30a-f9daef787377","version":5,"type":"text","created_time":1729781767056,"last_edited_time":1729781767059,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"r5e5gc1x7hpyMfctaZQq6A,\"start\",\"end\"","n":{"r5e5gc1x7hpyMfctaZQq6A,\"start\",\"end\"":{"s":{"x":"r5e5gc1x7hpyMfctaZQq6A","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-8072-8ff0-e1303debe18d":{"value":{"id":"12988756-3979-8072-8ff0-e1303debe18d","version":284,"type":"text","properties":{"title":[["论文具体讨论了 mmap 的以下几宗罪"]]},"created_time":1729772382251,"last_edited_time":1729779456560,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"vW8LuwfCnH0mHu-6OmEtgg,\"start\",\"end\"","n":{"vW8LuwfCnH0mHu-6OmEtgg,\"start\",\"end\"":{"s":{"x":"vW8LuwfCnH0mHu-6OmEtgg","i":[{"t":"s"},{"t":"t","i":["CVFIuln34yws",1],"o":"start","l":19,"c":"论文具体讨论了 mmap 的以下几宗罪"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80e9-ba8f-ce5f90f1c33d":{"value":{"id":"12988756-3979-80e9-ba8f-ce5f90f1c33d","version":53,"type":"sub_header","properties":{"title":[["事务安全"]]},"created_time":1729782302260,"last_edited_time":1729782305585,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"5ejxW6p1SBWgXFuAbMnm8A,\"start\",\"end\"","n":{"5ejxW6p1SBWgXFuAbMnm8A,\"start\",\"end\"":{"s":{"x":"5ejxW6p1SBWgXFuAbMnm8A","i":[{"t":"s"},{"t":"t","i":["b5qzWvFsULQw",1],"o":"start","l":4,"c":"事务安全"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80b6-ac48-d7d2a7cef530":{"value":{"id":"12988756-3979-80b6-ac48-d7d2a7cef530","version":1077,"type":"text","properties":{"title":[["mmap 对程序来说是透明的，何时将脏页刷到磁盘上取决于操作系统。虽然通过 "],["msync",[["c"]]],[" 可以强制刷盘，但没有办法能够阻止刷盘（这相当于强制数据库是 steal policy 的），也无法在静默刷盘时得到通知"]]},"created_time":1729782899594,"last_edited_time":1729917612758,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"V-GPljwHdrmav9trG8S5lw,\"start\",\"end\"","n":{"V-GPljwHdrmav9trG8S5lw,\"start\",\"end\"":{"s":{"x":"V-GPljwHdrmav9trG8S5lw","i":[{"t":"s"},{"t":"t","i":["PO0kOBvJ7_3U",1],"o":"start","l":38,"c":"mmap 对程序来说是透明的，何时将脏页刷到磁盘上取决于操作系统。虽然通过 "},{"t":"t","i":["PO0kOBvJ7_3U",39],"o":["PO0kOBvJ7_3U",38],"l":5,"c":"msync","b":[{"t":"a","x":"V-GPljwHdrmav9trG8S5lw","l":"","i":["PO0kOBvJ7_3U",104],"s":{"i":["PO0kOBvJ7_3U",39],"a":"b"},"e":{"i":["PO0kOBvJ7_3U",43],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["PO0kOBvJ7_3U",44],"o":["PO0kOBvJ7_3U",43],"l":60,"c":" 可以强制刷盘，但没有办法能够阻止刷盘（这相当于强制数据库是 steal policy 的），也无法在静默刷盘时得到通知"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80f1-a397-eed12112b0f2":{"value":{"id":"12b88756-3979-80f1-a397-eed12112b0f2","version":5,"type":"text","created_time":1729917638599,"last_edited_time":1729917638601,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"41V2irSduFTHc2P8hYcJ0w,\"start\",\"end\"","n":{"41V2irSduFTHc2P8hYcJ0w,\"start\",\"end\"":{"s":{"x":"41V2irSduFTHc2P8hYcJ0w","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-80eb-b0fd-da2dc689f849":{"value":{"id":"12a88756-3979-80eb-b0fd-da2dc689f849","version":479,"type":"text","properties":{"title":[["为此数据库就需要一些复杂的协议来保证事务安全，论文总结了三种处理方法，都是写时复制的（Copy-on-Write，COW）想法："]]},"created_time":1729866114656,"last_edited_time":1729923623607,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Fbo5K9DjgA8vsV3szxoXNA,\"start\",\"end\"","n":{"Fbo5K9DjgA8vsV3szxoXNA,\"start\",\"end\"":{"s":{"x":"Fbo5K9DjgA8vsV3szxoXNA","i":[{"t":"s"},{"t":"t","i":["0vKJZbRW89Ql",1],"o":"start","l":64,"c":"为此数据库就需要一些复杂的协议来保证事务安全，论文总结了三种处理方法，都是写时复制的（Copy-on-Write，COW）想法："},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-8091-b36e-e147c41a2441":{"value":{"id":"12a88756-3979-8091-b36e-e147c41a2441","version":124,"type":"numbered_list","properties":{"title":[["内核写时复制"]]},"content":["12a88756-3979-807c-976f-ccd38729687c","12b88756-3979-80be-ad6e-ee0fe8cf2b25","12b88756-3979-806c-8b32-daefe90dc2bf","12b88756-3979-8090-aa04-d6bc0778e0dd"],"created_time":1729866127407,"last_edited_time":1729924089631,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Qn22LGZCjQyBlw9vwZMtOw,\"start\",\"end\"","n":{"Qn22LGZCjQyBlw9vwZMtOw,\"start\",\"end\"":{"s":{"x":"Qn22LGZCjQyBlw9vwZMtOw","i":[{"t":"s"},{"t":"t","i":["CrUtqsj_dwZe",1],"o":"start","l":6,"c":"内核写时复制"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-8043-94ec-d34e0eb6e1d1":{"value":{"id":"12a88756-3979-8043-94ec-d34e0eb6e1d1","version":104,"type":"numbered_list","properties":{"title":[["用户态写时复制"]]},"content":["12b88756-3979-800a-a9fc-e24e6f24cdf8","12b88756-3979-80b0-a829-f0b2658617ed"],"created_time":1729866152413,"last_edited_time":1729928300792,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Cw3ejywv6NtNTUwnrs2_Ig,\"start\",\"end\"","n":{"Cw3ejywv6NtNTUwnrs2_Ig,\"start\",\"end\"":{"s":{"x":"Cw3ejywv6NtNTUwnrs2_Ig","i":[{"t":"s"},{"t":"t","i":["iwoD2tFZ1Dxj",1],"o":"start","l":7,"c":"用户态写时复制"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-80a3-a2d7-ee3ade906c2a":{"value":{"id":"12a88756-3979-80a3-a2d7-ee3ade906c2a","version":47,"type":"numbered_list","properties":{"title":[["影子分页"]]},"content":["12b88756-3979-80c8-8c73-cde1817c776e","12b88756-3979-80ef-83b5-e8284bd610cb"],"created_time":1729866156651,"last_edited_time":1729944375650,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"5D95EPPABBFG1Qm2xI44og,\"start\",\"end\"","n":{"5D95EPPABBFG1Qm2xI44og,\"start\",\"end\"":{"s":{"x":"5D95EPPABBFG1Qm2xI44og","i":[{"t":"s"},{"t":"t","i":["vQovnUAROGfO",1],"o":"start","l":4,"c":"影子分页"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-806c-8fa4-fc304a2de619":{"value":{"id":"12b88756-3979-806c-8fa4-fc304a2de619","version":5,"type":"text","created_time":1729945057741,"last_edited_time":1729945057743,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"CtCHCXlP4LKwq-BKAQP4pg,\"start\",\"end\"","n":{"CtCHCXlP4LKwq-BKAQP4pg,\"start\",\"end\"":{"s":{"x":"CtCHCXlP4LKwq-BKAQP4pg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-807c-976f-ccd38729687c":{"value":{"id":"12a88756-3979-807c-976f-ccd38729687c","version":672,"type":"text","properties":{"title":[["通过 "],["MAP_PRIVATE",[["c"]]],[" flag 创建 mmap，映射出来的地址空间就是写时复制的，不会作用到底层的文件。通过这个方法，可以创建一个私有的副本工作区用来修改数据，最后在私有工作区更新的数据并写入 WAL，再传播修改回主工作区"]]},"created_time":1729870443459,"last_edited_time":1729944868897,"parent_id":"12a88756-3979-8091-b36e-e147c41a2441","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"XTKFP4AFQNWbZeGzyk46bQ,\"start\",\"end\"","n":{"XTKFP4AFQNWbZeGzyk46bQ,\"start\",\"end\"":{"s":{"x":"XTKFP4AFQNWbZeGzyk46bQ","i":[{"t":"s"},{"t":"t","i":["9iIjsQoVfme4",1],"o":"start","l":3,"c":"通过 "},{"t":"t","i":["9iIjsQoVfme4",4],"o":["9iIjsQoVfme4",3],"l":11,"c":"MAP_PRIVATE","b":[{"t":"a","x":"XTKFP4AFQNWbZeGzyk46bQ","l":"","i":["9iIjsQoVfme4",116],"s":{"i":["9iIjsQoVfme4",4],"a":"b"},"e":{"i":["9iIjsQoVfme4",14],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["9iIjsQoVfme4",15],"o":["9iIjsQoVfme4",14],"l":101,"c":" flag 创建 mmap，映射出来的地址空间就是写时复制的，不会作用到底层的文件。通过这个方法，可以创建一个私有的副本工作区用来修改数据，最后在私有工作区更新的数据并写入 WAL，再传播修改回主工作区"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80be-ad6e-ee0fe8cf2b25":{"value":{"id":"12b88756-3979-80be-ad6e-ee0fe8cf2b25","version":320,"type":"text","properties":{"title":[["这里要确保已提交事务的更新必须在其他冲突事务运行之前就传播到主工作区上，需要一些额外的数据结构去追踪脏页"]]},"created_time":1729922944753,"last_edited_time":1729944892211,"parent_id":"12a88756-3979-8091-b36e-e147c41a2441","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Of7P2pdMoLAbLaL5PBdLnQ,\"start\",\"end\"","n":{"Of7P2pdMoLAbLaL5PBdLnQ,\"start\",\"end\"":{"s":{"x":"Of7P2pdMoLAbLaL5PBdLnQ","i":[{"t":"s"},{"t":"t","i":["llw5bM7GwR5T",1],"o":"start","l":52,"c":"这里要确保已提交事务的更新必须在其他冲突事务运行之前就传播到主工作区上，需要一些额外的数据结构去追踪脏页"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-806c-8b32-daefe90dc2bf":{"value":{"id":"12b88756-3979-806c-8b32-daefe90dc2bf","version":688,"type":"text","properties":{"title":[["另外因为是 COW 的，私有工作区会随着写入逐渐增长，最终可能会在内存中存在两个完整的数据库副本，可以通过 "],["mremap",[["c"]]],[" 定期收缩私有工作区的大小避免无限扩张，但同样有上面的问题，需要确保脏页传播到主工作区上，并在此期间阻止并发更新"]]},"created_time":1729922834263,"last_edited_time":1729944906271,"parent_id":"12a88756-3979-8091-b36e-e147c41a2441","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"kCvpSQNIjnaso8yrlAzGYg,\"start\",\"end\"","n":{"kCvpSQNIjnaso8yrlAzGYg,\"start\",\"end\"":{"s":{"x":"kCvpSQNIjnaso8yrlAzGYg","i":[{"t":"s"},{"t":"t","i":["smc8DLfRZZot",1],"o":"start","l":54,"c":"另外因为是 COW 的，私有工作区会随着写入逐渐增长，最终可能会在内存中存在两个完整的数据库副本，可以通过 "},{"t":"t","i":["smc8DLfRZZot",55],"o":["smc8DLfRZZot",54],"l":6,"c":"mremap","b":[{"t":"a","x":"kCvpSQNIjnaso8yrlAzGYg","l":"","i":["smc8DLfRZZot",117],"s":{"i":["smc8DLfRZZot",55],"a":"b"},"e":{"i":["smc8DLfRZZot",60],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["smc8DLfRZZot",61],"o":["smc8DLfRZZot",60],"l":56,"c":" 定期收缩私有工作区的大小避免无限扩张，但同样有上面的问题，需要确保脏页传播到主工作区上，并在此期间阻止并发更新"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8090-aa04-d6bc0778e0dd":{"value":{"id":"12b88756-3979-8090-aa04-d6bc0778e0dd","version":95,"type":"text","properties":{"title":[["MongoDB 的 MMAPv1 引擎使用了这种方法"]]},"created_time":1729923258202,"last_edited_time":1729923265545,"parent_id":"12a88756-3979-8091-b36e-e147c41a2441","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"u8IxSJ8P_MHcka4HuzeoUw,\"start\",\"end\"","n":{"u8IxSJ8P_MHcka4HuzeoUw,\"start\",\"end\"":{"s":{"x":"u8IxSJ8P_MHcka4HuzeoUw","i":[{"t":"s"},{"t":"t","i":["KJ_e-Rf9mg-7",1],"o":"start","l":26,"c":"MongoDB 的 MMAPv1 引擎使用了这种方法"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-800a-a9fc-e24e6f24cdf8":{"value":{"id":"12b88756-3979-800a-a9fc-e24e6f24cdf8","version":508,"type":"text","properties":{"title":[["第二种方法类似，但是在用户态进行。待更新页面从 mmap 区域手动复制到另一块单独维护的缓冲区上进行更新并写入 WAL，然后再复制回 mmap 区域"]]},"created_time":1729922344201,"last_edited_time":1729944704236,"parent_id":"12a88756-3979-8043-94ec-d34e0eb6e1d1","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"N0461uflFSndDmwmA-st6w,\"start\",\"end\"","n":{"N0461uflFSndDmwmA-st6w,\"start\",\"end\"":{"s":{"x":"N0461uflFSndDmwmA-st6w","i":[{"t":"s"},{"t":"t","i":["CAfk90MlMHG8",1],"o":"start","l":74,"c":"第二种方法类似，但是在用户态进行。待更新页面从 mmap 区域手动复制到另一块单独维护的缓冲区上进行更新并写入 WAL，然后再复制回 mmap 区域"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80b0-a829-f0b2658617ed":{"value":{"id":"12b88756-3979-80b0-a829-f0b2658617ed","version":106,"type":"text","properties":{"title":[["SQLite，RavenDB 使用了类似的方法"]]},"created_time":1729928165797,"last_edited_time":1729928176125,"parent_id":"12a88756-3979-8043-94ec-d34e0eb6e1d1","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"H30VQDa5Ihdo4P8mQkFSgA,\"start\",\"end\"","n":{"H30VQDa5Ihdo4P8mQkFSgA,\"start\",\"end\"":{"s":{"x":"H30VQDa5Ihdo4P8mQkFSgA","i":[{"t":"s"},{"t":"t","i":["qCEkRAAmtUPx",1],"o":"start","l":23,"c":"SQLite，RavenDB 使用了类似的方法"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80c8-8c73-cde1817c776e":{"value":{"id":"12b88756-3979-80c8-8c73-cde1817c776e","version":755,"type":"text","properties":{"title":[["影子分页类似一种 swapping pointer 的做法，通过 mmap 映射两份出副本，其中一个是主副本。当要修改时将页面复制到影子副本上进行更新，"],["msync",[["c"]]],[" 刷盘后 swap pointer 将影子副本变为主副本，原主副本变为新的影子副本"]]},"created_time":1729944375295,"last_edited_time":1729944626602,"parent_id":"12a88756-3979-80a3-a2d7-ee3ade906c2a","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"-ydMHaQkmJ5HrIioldZ7Jg,\"start\",\"end\"","n":{"-ydMHaQkmJ5HrIioldZ7Jg,\"start\",\"end\"":{"s":{"x":"-ydMHaQkmJ5HrIioldZ7Jg","i":[{"t":"s"},{"t":"t","i":["4sKKusswZqfc",1],"o":"start","l":76,"c":"影子分页类似一种 swapping pointer 的做法，通过 mmap 映射两份出副本，其中一个是主副本。当要修改时将页面复制到影子副本上进行更新，"},{"t":"t","i":["4sKKusswZqfc",77],"o":["4sKKusswZqfc",76],"l":5,"c":"msync","b":[{"t":"a","x":"-ydMHaQkmJ5HrIioldZ7Jg","l":"","i":["4sKKusswZqfc",123],"s":{"i":["4sKKusswZqfc",77],"a":"b"},"e":{"i":["4sKKusswZqfc",81],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["4sKKusswZqfc",82],"o":["4sKKusswZqfc",81],"l":41,"c":" 刷盘后 swap pointer 将影子副本变为主副本，原主副本变为新的影子副本"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80ef-83b5-e8284bd610cb":{"value":{"id":"12b88756-3979-80ef-83b5-e8284bd610cb","version":153,"type":"text","properties":{"title":[["LMDB 使用了这种方法，但只允许单个写者进行更新"]]},"created_time":1729944369668,"last_edited_time":1729945160377,"parent_id":"12a88756-3979-80a3-a2d7-ee3ade906c2a","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"6IEoJuuT4gb6cHTDcQVsPw,\"start\",\"end\"","n":{"6IEoJuuT4gb6cHTDcQVsPw,\"start\",\"end\"":{"s":{"x":"6IEoJuuT4gb6cHTDcQVsPw","i":[{"t":"s"},{"t":"t","i":["4wZR0FT7idEo",1],"o":"start","l":25,"c":"LMDB 使用了这种方法，但只允许单个写者进行更新"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80ca-bb7d-ef893e5bf4f2":{"value":{"id":"12988756-3979-80ca-bb7d-ef893e5bf4f2","version":55,"type":"sub_header","properties":{"title":[["I/O 停顿"]]},"created_time":1729779317553,"last_edited_time":1729779336627,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"OH7cAcnwl8dFbyGAX6tvzg,\"start\",\"end\"","n":{"OH7cAcnwl8dFbyGAX6tvzg,\"start\",\"end\"":{"s":{"x":"OH7cAcnwl8dFbyGAX6tvzg","i":[{"t":"s"},{"t":"t","i":["sSh-f6Cqwmub",1],"o":"start","l":6,"c":"I/O 停顿"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80bd-8b32-eb9e05746d9e":{"value":{"id":"12b88756-3979-80bd-8b32-eb9e05746d9e","version":623,"type":"text","properties":{"title":[["很多 DBMS 都使用了异步 I/O（例如 libaio 或 io_uring），例如对 B+ Tree 的叶子节点扫描可以通过异步 I/O 访问以避免非连续页面的阻塞读取导致的延迟。但 mmap 是不支持异步的"]]},"created_time":1729945181148,"last_edited_time":1730032744555,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"sYu5uO8QJRBog2Q8OjR9yg,\"start\",\"end\"","n":{"sYu5uO8QJRBog2Q8OjR9yg,\"start\",\"end\"":{"s":{"x":"sYu5uO8QJRBog2Q8OjR9yg","i":[{"t":"s"},{"t":"t","i":["qUnPmuILQ3mn",1],"o":"start","l":106,"c":"很多 DBMS 都使用了异步 I/O（例如 libaio 或 io_uring），例如对 B+ Tree 的叶子节点扫描可以通过异步 I/O 访问以避免非连续页面的阻塞读取导致的延迟。但 mmap 是不支持异步的"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8093-b385-eec2d68342c9":{"value":{"id":"12b88756-3979-8093-b385-eec2d68342c9","version":1315,"type":"text","properties":{"title":[["此外，操作系统可能会随时会将页面驱逐，再次访问就会导致缺页中断，会有明显的性能抖动。DBMS 无法知道页面是否真正在内存中，虽然可以使用 "],["mlock",[["c"]]],[" 将页面 pin 在内存中，但这又需要实现一些额外的页面管理工作"]]},"created_time":1729952090300,"last_edited_time":1729953243485,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"qVO-4InXD-K-sZsBJFKXDA,\"start\",\"end\"","n":{"qVO-4InXD-K-sZsBJFKXDA,\"start\",\"end\"":{"s":{"x":"qVO-4InXD-K-sZsBJFKXDA","i":[{"t":"s"},{"t":"t","i":["gWiMvFPJI0VP",1],"o":"start","l":69,"c":"此外，操作系统可能会随时会将页面驱逐，再次访问就会导致缺页中断，会有明显的性能抖动。DBMS 无法知道页面是否真正在内存中，虽然可以使用 "},{"t":"t","i":["gWiMvFPJI0VP",70],"o":["gWiMvFPJI0VP",69],"l":5,"c":"mlock","b":[{"t":"a","x":"qVO-4InXD-K-sZsBJFKXDA","l":"","i":["gWiMvFPJI0VP",107],"s":{"i":["gWiMvFPJI0VP",70],"a":"b"},"e":{"i":["gWiMvFPJI0VP",74],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["gWiMvFPJI0VP",75],"o":["gWiMvFPJI0VP",74],"l":32,"c":" 将页面 pin 在内存中，但这又需要实现一些额外的页面管理工作"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80da-b056-c7bbd48d676b":{"value":{"id":"12b88756-3979-80da-b056-c7bbd48d676b","version":71,"type":"text","properties":{"title":[["或者通过 "],["madvise",[["c"]]],[" 来告知操作系统应用的访问模式以尽量避免接下来访问的页面被驱逐，但这只是一种 “advise” 而不是强力的控制，并且也只提供了简单的 "],["MADV_SEQUENTIAL",[["c"]]],["、"],["MADV_RANDOM",[["c"]]],[" 和 "],["MADV_WILLNEED",[["c"]]],[" 等几个 flag，无法精细管理"]]},"created_time":1729953243481,"last_edited_time":1730032519756,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"qSvmJgVTR2iRUpynuujN8A,\"start\",\"end\"","n":{"qSvmJgVTR2iRUpynuujN8A,\"start\",\"end\"":{"s":{"x":"qSvmJgVTR2iRUpynuujN8A","i":[{"t":"s"},{"t":"t","i":["LGa6d70RWvQK",1],"o":"start","l":5,"c":"或者通过 "},{"t":"t","i":["LGa6d70RWvQK",6],"o":["LGa6d70RWvQK",5],"l":7,"c":"madvise","b":[{"t":"a","x":"qSvmJgVTR2iRUpynuujN8A","l":"","i":["LGa6d70RWvQK",140],"s":{"i":["LGa6d70RWvQK",6],"a":"b"},"e":{"i":["LGa6d70RWvQK",12],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["LGa6d70RWvQK",13],"o":["LGa6d70RWvQK",12],"l":68,"c":" 来告知操作系统应用的访问模式以尽量避免接下来访问的页面被驱逐，但这只是一种 “advise” 而不是强力的控制，并且也只提供了简单的 "},{"t":"t","i":["LGa6d70RWvQK",81],"o":["LGa6d70RWvQK",80],"l":15,"c":"MADV_SEQUENTIAL","b":[{"t":"a","x":"qSvmJgVTR2iRUpynuujN8A","l":"","i":["LGa6d70RWvQK",141],"s":{"i":["LGa6d70RWvQK",81],"a":"b"},"e":{"i":["LGa6d70RWvQK",95],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["LGa6d70RWvQK",96],"o":["LGa6d70RWvQK",95],"l":1,"c":"、"},{"t":"t","i":["LGa6d70RWvQK",97],"o":["LGa6d70RWvQK",96],"l":11,"c":"MADV_RANDOM","b":[{"t":"a","x":"qSvmJgVTR2iRUpynuujN8A","l":"","i":["LGa6d70RWvQK",142],"s":{"i":["LGa6d70RWvQK",97],"a":"b"},"e":{"i":["LGa6d70RWvQK",107],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["LGa6d70RWvQK",108],"o":["LGa6d70RWvQK",107],"l":3,"c":" 和 "},{"t":"t","i":["LGa6d70RWvQK",111],"o":["LGa6d70RWvQK",110],"l":13,"c":"MADV_WILLNEED","b":[{"t":"a","x":"qSvmJgVTR2iRUpynuujN8A","l":"","i":["LGa6d70RWvQK",143],"s":{"i":["LGa6d70RWvQK",111],"a":"b"},"e":{"i":["LGa6d70RWvQK",123],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["LGa6d70RWvQK",124],"o":["LGa6d70RWvQK",123],"l":16,"c":" 等几个 flag，无法精细管理"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-806b-a75e-ecd7d5a2dab5":{"value":{"id":"12b88756-3979-806b-a75e-ecd7d5a2dab5","version":5,"type":"text","created_time":1729953309372,"last_edited_time":1729953309374,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"n9CvQ1j2wT6ozOnXe8Kjew,\"start\",\"end\"","n":{"n9CvQ1j2wT6ozOnXe8Kjew,\"start\",\"end\"":{"s":{"x":"n9CvQ1j2wT6ozOnXe8Kjew","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-803c-9a2d-c4ceb7a2daf5":{"value":{"id":"12b88756-3979-803c-9a2d-c4ceb7a2daf5","version":316,"type":"text","properties":{"title":[["也许还可以创建额外的线程去做预取以避免阻塞主线程，但这额外的复杂性完全违背了使用 mmap 的初衷"]]},"created_time":1729945181278,"last_edited_time":1729953348998,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"DiED6_l9H7fiNWXhhsORmw,\"start\",\"end\"","n":{"DiED6_l9H7fiNWXhhsORmw,\"start\",\"end\"":{"s":{"x":"DiED6_l9H7fiNWXhhsORmw","i":[{"t":"s"},{"t":"t","i":["Kz6HJstXhSn7",1],"o":"start","l":49,"c":"也许还可以创建额外的线程去做预取以避免阻塞主线程，但这额外的复杂性完全违背了使用 mmap 的初衷"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80b4-adfd-d5d8f7603e44":{"value":{"id":"12988756-3979-80b4-adfd-d5d8f7603e44","version":5,"type":"text","created_time":1729779337158,"last_edited_time":1729779337161,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"wxnKMtSUBHfMPlQaSiAMQw,\"start\",\"end\"","n":{"wxnKMtSUBHfMPlQaSiAMQw,\"start\",\"end\"":{"s":{"x":"wxnKMtSUBHfMPlQaSiAMQw","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-8046-857b-ff3c95abcbe5":{"value":{"id":"12988756-3979-8046-857b-ff3c95abcbe5","version":37,"type":"sub_header","properties":{"title":[["错误处理"]]},"created_time":1729779337003,"last_edited_time":1729779343185,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"RW0hbIh14Yqw_afU9QF8FQ,\"start\",\"end\"","n":{"RW0hbIh14Yqw_afU9QF8FQ,\"start\",\"end\"":{"s":{"x":"RW0hbIh14Yqw_afU9QF8FQ","i":[{"t":"s"},{"t":"t","i":["aMRGhXMEE3hC",1],"o":"start","l":4,"c":"错误处理"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80a8-b5b5-e9884205677c":{"value":{"id":"12b88756-3979-80a8-b5b5-e9884205677c","version":763,"type":"text","properties":{"title":[["DBMS 的一个核心职责是确保数据的完整性，大多数 DBMS 都会在各种级别的数据上维护 checksum，例如 SQL Server 在页面级别上维护了 checksum，从磁盘上读取数据时就会进行校验"]]},"created_time":1729953351647,"last_edited_time":1730085652420,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"1I2tj6Ds6dgAZ0_croCeuQ,\"start\",\"end\"","n":{"1I2tj6Ds6dgAZ0_croCeuQ,\"start\",\"end\"":{"s":{"x":"1I2tj6Ds6dgAZ0_croCeuQ","i":[{"t":"s"},{"t":"t","i":["oyqp38cfe05l",1],"o":"start","l":102,"c":"DBMS 的一个核心职责是确保数据的完整性，大多数 DBMS 都会在各种级别的数据上维护 checksum，例如 SQL Server 在页面级别上维护了 checksum，从磁盘上读取数据时就会进行校验"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-809c-840c-ff48282d23d1":{"value":{"id":"12b88756-3979-809c-840c-ff48282d23d1","version":5,"type":"text","created_time":1729953574670,"last_edited_time":1729953574673,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"9MPdQyrS0KQmFdVLFGJLjg,\"start\",\"end\"","n":{"9MPdQyrS0KQmFdVLFGJLjg,\"start\",\"end\"":{"s":{"x":"9MPdQyrS0KQmFdVLFGJLjg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8073-aafa-ee04c51f4899":{"value":{"id":"12b88756-3979-8073-aafa-ee04c51f4899","version":1360,"type":"text","properties":{"title":[["但使用 mmap 的话难以实现，原因还是 DBMS 无法知道页面到底在哪里，没有一个明确的边界隔离内存和磁盘访问。操作系统可能在任意时刻将页面驱逐，下次访问再透明地重新从磁盘读取，因此必须每次进行页面访问都重新校验才能确保安全，但显然很多时候这种校验是不必要的"]]},"created_time":1729953574527,"last_edited_time":1730033023783,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"fe8aXpCYai0lpEfq2NDMJQ,\"start\",\"end\"","n":{"fe8aXpCYai0lpEfq2NDMJQ,\"start\",\"end\"":{"s":{"x":"fe8aXpCYai0lpEfq2NDMJQ","i":[{"t":"s"},{"t":"t","i":["_htO5-5mgOdl",1],"o":"start","l":130,"c":"但使用 mmap 的话难以实现，原因还是 DBMS 无法知道页面到底在哪里，没有一个明确的边界隔离内存和磁盘访问。操作系统可能在任意时刻将页面驱逐，下次访问再透明地重新从磁盘读取，因此必须每次进行页面访问都重新校验才能确保安全，但显然很多时候这种校验是不必要的"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-800a-a3f7-e31462b91913":{"value":{"id":"12b88756-3979-800a-a3f7-e31462b91913","version":617,"type":"text","properties":{"title":[["另外从语言角度考虑，如果使用了非内存安全的语言，有可能在不经意间破坏了 mmap 映射区域的内存数据，而这些错误的数据又会被静默地写入磁盘，永久损坏。如果是 Buffer Pool 实现，则可以在刷盘时显式检查"]]},"created_time":1729953351795,"last_edited_time":1729954062365,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"I3SFSbwjxFyuvFeOsXvqhA,\"start\",\"end\"","n":{"I3SFSbwjxFyuvFeOsXvqhA,\"start\",\"end\"":{"s":{"x":"I3SFSbwjxFyuvFeOsXvqhA","i":[{"t":"s"},{"t":"t","i":["LNTBgiSV41j6",1],"o":"start","l":105,"c":"另外从语言角度考虑，如果使用了非内存安全的语言，有可能在不经意间破坏了 mmap 映射区域的内存数据，而这些错误的数据又会被静默地写入磁盘，永久损坏。如果是 Buffer Pool 实现，则可以在刷盘时显式检查"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80bb-8be9-ca49714c04f3":{"value":{"id":"12b88756-3979-80bb-8be9-ca49714c04f3","version":5,"type":"text","created_time":1729954078706,"last_edited_time":1729954078707,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"JQIrX8y2y0LIBJaAHcM20g,\"start\",\"end\"","n":{"JQIrX8y2y0LIBJaAHcM20g,\"start\",\"end\"":{"s":{"x":"JQIrX8y2y0LIBJaAHcM20g","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-802b-b964-e3ef612d7ec8":{"value":{"id":"12b88756-3979-802b-b964-e3ef612d7ec8","version":629,"type":"text","properties":{"title":[["mmap 这种透明性的「优点」也会导致在代码里更难进行 I/O 错误处理。Buffer Pool 实现中 I/O 交互只局限于它自身，可以很轻易地包装对 I/O 错误的处理。但 mmap 中任意时刻的内存访问都可能导致 I/O 错误，给异常处理流带来很大的不便"]]},"created_time":1729954186222,"last_edited_time":1729954380322,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"eX5f8HRTQNKCyeBmkX78jQ,\"start\",\"end\"","n":{"eX5f8HRTQNKCyeBmkX78jQ,\"start\",\"end\"":{"s":{"x":"eX5f8HRTQNKCyeBmkX78jQ","i":[{"t":"s"},{"t":"t","i":["VR47fF5JcHGY",1],"o":"start","l":130,"c":"mmap 这种透明性的「优点」也会导致在代码里更难进行 I/O 错误处理。Buffer Pool 实现中 I/O 交互只局限于它自身，可以很轻易地包装对 I/O 错误的处理。但 mmap 中任意时刻的内存访问都可能导致 I/O 错误，给异常处理流带来很大的不便"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-809a-bc62-f48973add07e":{"value":{"id":"12988756-3979-809a-bc62-f48973add07e","version":5,"type":"text","created_time":1729779343560,"last_edited_time":1729779343561,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"KXYQ9ZYlI1H1TJFVcVO3Yw,\"start\",\"end\"","n":{"KXYQ9ZYlI1H1TJFVcVO3Yw,\"start\",\"end\"":{"s":{"x":"KXYQ9ZYlI1H1TJFVcVO3Yw","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80e3-9ed5-e8af4e22fd67":{"value":{"id":"12988756-3979-80e3-9ed5-e8af4e22fd67","version":37,"type":"sub_header","properties":{"title":[["性能问题"]]},"created_time":1729779343391,"last_edited_time":1729779346005,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"SRYMvvzdccv8SF4ZEIsaew,\"start\",\"end\"","n":{"SRYMvvzdccv8SF4ZEIsaew,\"start\",\"end\"":{"s":{"x":"SRYMvvzdccv8SF4ZEIsaew","i":[{"t":"s"},{"t":"t","i":["3DaCvzlzAgkr",1],"o":"start","l":4,"c":"性能问题"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-801a-a04f-e88c7f631a74":{"value":{"id":"12b88756-3979-801a-a04f-e88c7f631a74","version":80,"type":"text","properties":{"title":[["最后，mmap 真的性能更好吗？"]]},"created_time":1729954396473,"last_edited_time":1729954405049,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"n3BwCWLPIF0-Pk8hlKd3Dg,\"start\",\"end\"","n":{"n3BwCWLPIF0-Pk8hlKd3Dg,\"start\",\"end\"":{"s":{"x":"n3BwCWLPIF0-Pk8hlKd3Dg","i":[{"t":"s"},{"t":"t","i":["uqxeXUeO06AS",1],"o":"start","l":16,"c":"最后，mmap 真的性能更好吗？"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80dc-ab37-d7d68377ca2f":{"value":{"id":"12b88756-3979-80dc-ab37-d7d68377ca2f","version":5,"type":"text","created_time":1729954402704,"last_edited_time":1729954402708,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"2nsupjoyZJ4am6flTUj1Jg,\"start\",\"end\"","n":{"2nsupjoyZJ4am6flTUj1Jg,\"start\",\"end\"":{"s":{"x":"2nsupjoyZJ4am6flTUj1Jg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80ba-90cb-f4bacf66baab":{"value":{"id":"12b88756-3979-80ba-90cb-f4bacf66baab","version":508,"type":"text","properties":{"title":[["传统观点认为 mmap 性能好的点在于避免了 "],["read",[["c"]]],["/"],["write",[["c"]]],[" 的系统调用，以及避免内核和用户态缓冲区来回拷贝的开销（这也降低了内存使用）。从这些点来看，随着 NVMe SSD 的提升，理论上 mmap 和传统 I/O 方法的差距还会进一步扩大"]]},"created_time":1729954396623,"last_edited_time":1729957437221,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"pBcN-Xw1MnWxN-bvfnPPLg,\"start\",\"end\"","n":{"pBcN-Xw1MnWxN-bvfnPPLg,\"start\",\"end\"":{"s":{"x":"pBcN-Xw1MnWxN-bvfnPPLg","i":[{"t":"s"},{"t":"t","i":["HVGYYiSei0FV",1],"o":"start","l":23,"c":"传统观点认为 mmap 性能好的点在于避免了 "},{"t":"t","i":["HVGYYiSei0FV",24],"o":["HVGYYiSei0FV",23],"l":4,"c":"read","b":[{"t":"a","x":"pBcN-Xw1MnWxN-bvfnPPLg","l":"","i":["HVGYYiSei0FV",125],"s":{"i":["HVGYYiSei0FV",24],"a":"b"},"e":{"i":["HVGYYiSei0FV",27],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["HVGYYiSei0FV",28],"o":["HVGYYiSei0FV",27],"l":1,"c":"/"},{"t":"t","i":["HVGYYiSei0FV",29],"o":["HVGYYiSei0FV",28],"l":5,"c":"write","b":[{"t":"a","x":"pBcN-Xw1MnWxN-bvfnPPLg","l":"","i":["HVGYYiSei0FV",126],"s":{"i":["HVGYYiSei0FV",29],"a":"b"},"e":{"i":["HVGYYiSei0FV",33],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["HVGYYiSei0FV",34],"o":["HVGYYiSei0FV",33],"l":91,"c":" 的系统调用，以及避免内核和用户态缓冲区来回拷贝的开销（这也降低了内存使用）。从这些点来看，随着 NVMe SSD 的提升，理论上 mmap 和传统 I/O 方法的差距还会进一步扩大"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-806f-a0e3-d7c9c7605ca1":{"value":{"id":"12b88756-3979-806f-a0e3-d7c9c7605ca1","version":5,"type":"text","created_time":1729955022506,"last_edited_time":1729955022509,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"04bVIXZV03L2TUmOnwa23w,\"start\",\"end\"","n":{"04bVIXZV03L2TUmOnwa23w,\"start\",\"end\"":{"s":{"x":"04bVIXZV03L2TUmOnwa23w","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80d8-98b2-ddf29c713237":{"value":{"id":"12b88756-3979-80d8-98b2-ddf29c713237","version":573,"type":"text","properties":{"title":[["但论文指出，内核的页面驱逐机制成为主要瓶颈，该机制无法扩展到更多的线程和更大带宽的存储设备上。除非没有内核级别的重大重写，这个问题无法解决。具体来说有下面三个瓶颈："]]},"created_time":1729955138885,"last_edited_time":1729958572687,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"uXt9PfF3KOO46G_oKoLYWg,\"start\",\"end\"","n":{"uXt9PfF3KOO46G_oKoLYWg,\"start\",\"end\"":{"s":{"x":"uXt9PfF3KOO46G_oKoLYWg","i":[{"t":"s"},{"t":"t","i":["Bnuw475fBHKX",1],"o":"start","l":82,"c":"但论文指出，内核的页面驱逐机制成为主要瓶颈，该机制无法扩展到更多的线程和更大带宽的存储设备上。除非没有内核级别的重大重写，这个问题无法解决。具体来说有下面三个瓶颈："},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8065-acd4-c40cff49a5b0":{"value":{"id":"12b88756-3979-8065-acd4-c40cff49a5b0","version":232,"type":"numbered_list","properties":{"title":[["页表竞争：内核需要同步页面，在大量更新的时候会有显著竞争开销"]]},"created_time":1729955139035,"last_edited_time":1729958597293,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"A3KuzY9h-oLc3khQam0pHA,\"start\",\"end\"","n":{"A3KuzY9h-oLc3khQam0pHA,\"start\",\"end\"":{"s":{"x":"A3KuzY9h-oLc3khQam0pHA","i":[{"t":"s"},{"t":"t","i":["EABetx8izkYW",1],"o":"start","l":30,"c":"页表竞争：内核需要同步页面，在大量更新的时候会有显著竞争开销"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8097-965e-d32e2885e175":{"value":{"id":"12b88756-3979-8097-965e-d32e2885e175","version":200,"type":"numbered_list","properties":{"title":[["单线程页面驱逐：内核使用单线程进行页面驱逐，扩展性受限"]]},"created_time":1729955571270,"last_edited_time":1729958608827,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"QEmhRZJmKFw5D4T88QMnAw,\"start\",\"end\"","n":{"QEmhRZJmKFw5D4T88QMnAw,\"start\",\"end\"":{"s":{"x":"QEmhRZJmKFw5D4T88QMnAw","i":[{"t":"s"},{"t":"t","i":["vJjPYPicBFAa",1],"o":"start","l":27,"c":"单线程页面驱逐：内核使用单线程进行页面驱逐，扩展性受限"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-801b-acc2-cd214518bfc1":{"value":{"id":"12b88756-3979-801b-acc2-cd214518bfc1","version":131,"type":"numbered_list","properties":{"title":[["TLB shootdown：驱逐页面时，内核还要清理每个核心上的 TLB 项，这里多核设备的核间中断会有高昂的开销，需要数千个周期"]]},"created_time":1729955589146,"last_edited_time":1729957469303,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"rovIZZpn9TKLxD7U8nmO3w,\"start\",\"end\"","n":{"rovIZZpn9TKLxD7U8nmO3w,\"start\",\"end\"":{"s":{"x":"rovIZZpn9TKLxD7U8nmO3w","i":[{"t":"s"},{"t":"t","i":["X5TAYGOhKPJk",1],"o":"start","l":65,"c":"TLB shootdown：驱逐页面时，内核还要清理每个核心上的 TLB 项，这里多核设备的核间中断会有高昂的开销，需要数千个周期"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-809e-8638-ca163e9c8a11":{"value":{"id":"12b88756-3979-809e-8638-ca163e9c8a11","version":805,"type":"text","properties":{"title":[["\nOLTP 比较常见的随机读负载实验中，mmap 如果使用 "],["MADV_RANDOM",[["c"]]],[" 的 hint，在一开始还能达到 fio 的基线性能，但马上就会 I/O 跌 0 将近 5 秒，最终恢复到基线性能的一半。右图可以看到此时正好是 Page cache 被填满，开始驱逐页面"]]},"created_time":1729957462057,"last_edited_time":1729958731128,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"lxcViRTboF6Em1S_-CRKAA,\"start\",\"end\"","n":{"lxcViRTboF6Em1S_-CRKAA,\"start\",\"end\"":{"s":{"x":"lxcViRTboF6Em1S_-CRKAA","i":[{"t":"s"},{"t":"t","i":["3WLUMNapL0S4",1],"o":"start","l":30,"c":"\nOLTP 比较常见的随机读负载实验中，mmap 如果使用 "},{"t":"t","i":["3WLUMNapL0S4",31],"o":["3WLUMNapL0S4",30],"l":11,"c":"MADV_RANDOM","b":[{"t":"a","x":"lxcViRTboF6Em1S_-CRKAA","l":"","i":["3WLUMNapL0S4",136],"s":{"i":["3WLUMNapL0S4",31],"a":"b"},"e":{"i":["3WLUMNapL0S4",41],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["3WLUMNapL0S4",42],"o":["3WLUMNapL0S4",41],"l":94,"c":" 的 hint，在一开始还能达到 fio 的基线性能，但马上就会 I/O 跌 0 将近 5 秒，最终恢复到基线性能的一半。右图可以看到此时正好是 Page cache 被填满，开始驱逐页面"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80af-9b95-e0d8d5496145":{"value":{"id":"12b88756-3979-80af-9b95-e0d8d5496145","version":14,"type":"image","properties":{"size":[["145.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ca6f2a55-8f94-4ce6-a6ff-9816dc9898ef/image.png"]]},"format":{"block_width":2056,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ca6f2a55-8f94-4ce6-a6ff-9816dc9898ef/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.2529182879377432,"block_preserve_scale":true},"created_time":1729955401045,"last_edited_time":1729955404256,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"file_ids":["ca6f2a55-8f94-4ce6-a6ff-9816dc9898ef"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Y3T0exJVGzKqqG4hFmGakg,\"start\",\"end\"","n":{"Y3T0exJVGzKqqG4hFmGakg,\"start\",\"end\"":{"s":{"x":"Y3T0exJVGzKqqG4hFmGakg","i":[{"t":"s"},{"t":"t","i":["sxTMoCeroW4V",1],"o":"start","l":9,"c":"image.png"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8015-bc83-ec2327647b01":{"value":{"id":"12b88756-3979-8015-bc83-ec2327647b01","version":822,"type":"text","properties":{"title":[["对于 OLAP 场景的顺序读负载试验，"],["MADV_SEQUENTIAL",[["c"]]],[" hint 的 mmap 在一开始还能维持较高的性能，但同样在 20 秒左右 Page cache 被打满，性能严重下降。而在同时使用 10 块 SSD 的场景，mmap 性能和只有 1 块 SSD 时几乎完全一样，说明 mmap 性能无法随着硬件线性提升"]]},"created_time":1729955363118,"last_edited_time":1730085642847,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"hn24ao7-62hrMHCp0CxTyA,\"start\",\"end\"","n":{"hn24ao7-62hrMHCp0CxTyA,\"start\",\"end\"":{"s":{"x":"hn24ao7-62hrMHCp0CxTyA","i":[{"t":"s"},{"t":"t","i":["A_acIq-H0ZkK",1],"o":"start","l":19,"c":"对于 OLAP 场景的顺序读负载试验，"},{"t":"t","i":["A_acIq-H0ZkK",20],"o":["A_acIq-H0ZkK",19],"l":15,"c":"MADV_SEQUENTIAL","b":[{"t":"a","x":"hn24ao7-62hrMHCp0CxTyA","l":"","i":["A_acIq-H0ZkK",163],"s":{"i":["A_acIq-H0ZkK",20],"a":"b"},"e":{"i":["A_acIq-H0ZkK",34],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["A_acIq-H0ZkK",35],"o":["A_acIq-H0ZkK",34],"l":128,"c":" hint 的 mmap 在一开始还能维持较高的性能，但同样在 20 秒左右 Page cache 被打满，性能严重下降。而在同时使用 10 块 SSD 的场景，mmap 性能和只有 1 块 SSD 时几乎完全一样，说明 mmap 性能无法随着硬件线性提升"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-8082-830a-dc6913a96ed5":{"value":{"id":"12b88756-3979-8082-830a-dc6913a96ed5","version":14,"type":"image","properties":{"size":[["193.8KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/4bffeaa1-bcba-4bbc-baf3-2a9c49313af1/image.png"]]},"format":{"block_width":2126,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/4bffeaa1-bcba-4bbc-baf3-2a9c49313af1/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.21825023518344308,"block_preserve_scale":true},"created_time":1729955443204,"last_edited_time":1729955447278,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"file_ids":["4bffeaa1-bcba-4bbc-baf3-2a9c49313af1"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"1UHtHWDxgd79zJ_ytFD6aw,\"start\",\"end\"","n":{"1UHtHWDxgd79zJ_ytFD6aw,\"start\",\"end\"":{"s":{"x":"1UHtHWDxgd79zJ_ytFD6aw","i":[{"t":"s"},{"t":"t","i":["Ys4LnpMrhGUQ",1],"o":"start","l":9,"c":"image.png"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8068-86f8-d8c226ce3808":{"value":{"id":"12c88756-3979-8068-86f8-d8c226ce3808","version":5,"type":"text","created_time":1729997848274,"last_edited_time":1729997848276,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"AprlMauMlvRWOpFqfqGgbA,\"start\",\"end\"","n":{"AprlMauMlvRWOpFqfqGgbA,\"start\",\"end\"":{"s":{"x":"AprlMauMlvRWOpFqfqGgbA","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12b88756-3979-80b8-b954-dcd04f53a66a":{"value":{"id":"12b88756-3979-80b8-b954-dcd04f53a66a","version":623,"type":"text","properties":{"title":[["不过在我看来这个 benchmark 应该得加上 Buffer Pool 的数据，只和 fio 来比较显然是不公平的，fio 读写方式和真实数据库的负载不同，Buffer Pool 肯定也远达不到 fio 压测的基线性能"]]},"created_time":1729957478250,"last_edited_time":1729999808767,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"QqFwqf5mzuzvB6wq2gU-XQ,\"start\",\"end\"","n":{"QqFwqf5mzuzvB6wq2gU-XQ,\"start\",\"end\"":{"s":{"x":"QqFwqf5mzuzvB6wq2gU-XQ","i":[{"t":"s"},{"t":"t","i":["00tp3QIqNbcr",1],"o":"start","l":110,"c":"不过在我看来这个 benchmark 应该得加上 Buffer Pool 的数据，只和 fio 来比较显然是不公平的，fio 读写方式和真实数据库的负载不同，Buffer Pool 肯定也远达不到 fio 压测的基线性能"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-806f-9d71-d0ab8b222d28":{"value":{"id":"12c88756-3979-806f-9d71-d0ab8b222d28","version":5,"type":"text","created_time":1730032127038,"last_edited_time":1730032127040,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"2EOCPZicNAswYjskyxGt_w,\"start\",\"end\"","n":{"2EOCPZicNAswYjskyxGt_w,\"start\",\"end\"":{"s":{"x":"2EOCPZicNAswYjskyxGt_w","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12988756-3979-80ba-9b7e-efe1c7fdde0a":{"value":{"id":"12988756-3979-80ba-9b7e-efe1c7fdde0a","version":75,"type":"header","properties":{"title":[["正方：使用 MMAP 完全没问题"]]},"created_time":1729783006356,"last_edited_time":1729864969091,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"V923b8RE0JJW_bZARGwTFg,\"start\",\"end\"","n":{"V923b8RE0JJW_bZARGwTFg,\"start\",\"end\"":{"s":{"x":"V923b8RE0JJW_bZARGwTFg","i":[{"t":"s"},{"t":"t","i":["T29cfZ5TVeQ9",1],"o":"start","l":16,"c":"正方：使用 MMAP 完全没问题"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-8032-85aa-ca3305cfa36f":{"value":{"id":"12a88756-3979-8032-85aa-ca3305cfa36f","version":293,"type":"text","properties":{"title":[["RavenDB 的 CEO, Oren Eini 发表了一篇文章回复："],["Re: Are You Sure You Want to Use MMAP in Your Database Management System?",[["a","https://ayende.com/blog/196161-C/re-are-you-sure-you-want-to-use-mmap-in-your-database-management-system"],["i"]]]]},"created_time":1729871248775,"last_edited_time":1729998397233,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"ZnuNKlSxgbMe5jPsdEUoqA,\"start\",\"end\"","n":{"ZnuNKlSxgbMe5jPsdEUoqA,\"start\",\"end\"":{"s":{"x":"ZnuNKlSxgbMe5jPsdEUoqA","i":[{"t":"s"},{"t":"t","i":["G5VztowvLgzK",1],"o":"start","l":35,"c":"RavenDB 的 CEO, Oren Eini 发表了一篇文章回复："},{"t":"t","i":["G5VztowvLgzK",36],"o":["G5VztowvLgzK",35],"l":73,"c":"Re: Are You Sure You Want to Use MMAP in Your Database Management System?","b":[{"t":"a","x":"ZnuNKlSxgbMe5jPsdEUoqA","l":"","i":["G5VztowvLgzK",109],"s":{"i":["G5VztowvLgzK",36],"a":"b"},"e":{"i":["G5VztowvLgzK",108],"a":"a"},"a":["a","https://ayende.com/blog/196161-C/re-are-you-sure-you-want-to-use-mmap-in-your-database-management-system"]},{"t":"a","x":"ZnuNKlSxgbMe5jPsdEUoqA","l":"","i":["G5VztowvLgzK",110],"s":{"i":["G5VztowvLgzK",36],"a":"b"},"e":{"i":"end","a":"b"},"a":["i"]}],"a":[{"t":"a","x":"ZnuNKlSxgbMe5jPsdEUoqA","l":"","i":["G5VztowvLgzK",110],"s":{"i":["G5VztowvLgzK",36],"a":"b"},"e":{"i":"end","a":"b"},"a":["i"]}]},{"t":"e","b":[]}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80d1-9f3b-e0ac276f1873":{"value":{"id":"12c88756-3979-80d1-9f3b-e0ac276f1873","version":306,"type":"text","properties":{"title":[["RavenDB 的 Voron 存储引擎使用 mmap 构建，他们还出了一本"],["关于如何构建存储引擎的书",[["a","https://github.com/ayende/libgavran"]]],["，其内部也使用了 mmap"]]},"created_time":1729998266509,"last_edited_time":1729999427341,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Rz3yTFRnnqZkspiI3uJM5A,\"start\",\"end\"","n":{"Rz3yTFRnnqZkspiI3uJM5A,\"start\",\"end\"":{"s":{"x":"Rz3yTFRnnqZkspiI3uJM5A","i":[{"t":"s"},{"t":"t","i":["nkTE5Dzp09hO",1],"o":"start","l":38,"c":"RavenDB 的 Voron 存储引擎使用 mmap 构建，他们还出了一本"},{"t":"t","i":["nkTE5Dzp09hO",39],"o":["nkTE5Dzp09hO",38],"l":12,"c":"关于如何构建存储引擎的书","b":[{"t":"a","x":"Rz3yTFRnnqZkspiI3uJM5A","l":"","i":["nkTE5Dzp09hO",64],"s":{"i":["nkTE5Dzp09hO",39],"a":"b"},"e":{"i":["nkTE5Dzp09hO",50],"a":"a"},"a":["a","https://github.com/ayende/libgavran"]}],"a":[]},{"t":"t","i":["nkTE5Dzp09hO",51],"o":["nkTE5Dzp09hO",50],"l":13,"c":"，其内部也使用了 mmap"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80dc-bfff-fa1e7081310e":{"value":{"id":"12c88756-3979-80dc-bfff-fa1e7081310e","version":5,"type":"text","created_time":1729999427600,"last_edited_time":1729999427602,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"139I2n-Leh7Avkp0ed4IYA,\"start\",\"end\"","n":{"139I2n-Leh7Avkp0ed4IYA,\"start\",\"end\"":{"s":{"x":"139I2n-Leh7Avkp0ed4IYA","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80dc-bae5-c869c188e5ae":{"value":{"id":"12c88756-3979-80dc-bae5-c869c188e5ae","version":669,"type":"text","properties":{"title":[["文章首先指出了 Buffer Pool 要做的事情并不少，而且也对实现有一定要求，如果不是高度优化的实现，不会有好的性能，而在 mmap 这些都能由操作系统来保障"]]},"created_time":1729999427481,"last_edited_time":1730006063363,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"4qcFFw5JWbx4nt27XOhS0w,\"start\",\"end\"","n":{"4qcFFw5JWbx4nt27XOhS0w,\"start\",\"end\"":{"s":{"x":"4qcFFw5JWbx4nt27XOhS0w","i":[{"t":"s"},{"t":"t","i":["FwiN9WBK9Ka8",1],"o":"start","l":81,"c":"文章首先指出了 Buffer Pool 要做的事情并不少，而且也对实现有一定要求，如果不是高度优化的实现，不会有好的性能，而在 mmap 这些都能由操作系统来保障"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8074-a685-f236b1817562":{"value":{"id":"12c88756-3979-8074-a685-f236b1817562","version":5,"type":"text","created_time":1729999674793,"last_edited_time":1729999674794,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"c4hqJCfnEH6F3OfG5KOu7Q,\"start\",\"end\"","n":{"c4hqJCfnEH6F3OfG5KOu7Q,\"start\",\"end\"":{"s":{"x":"c4hqJCfnEH6F3OfG5KOu7Q","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8019-81ed-ef988504a1c8":{"value":{"id":"12c88756-3979-8019-81ed-ef988504a1c8","version":109,"type":"text","properties":{"title":[["接下来，文章对四个问题进行了逐一反驳"]]},"created_time":1729999502041,"last_edited_time":1729999691416,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"nv_CZuE72onO6PGPbuAGgw,\"start\",\"end\"","n":{"nv_CZuE72onO6PGPbuAGgw,\"start\",\"end\"":{"s":{"x":"nv_CZuE72onO6PGPbuAGgw","i":[{"t":"s"},{"t":"t","i":["LkAC-u9EEZxI",1],"o":"start","l":18,"c":"接下来，文章对四个问题进行了逐一反驳"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80a8-95f7-e01867822607":{"value":{"id":"12c88756-3979-80a8-95f7-e01867822607","version":124,"type":"sub_header","properties":{"title":[["事务安全"]]},"created_time":1729999691586,"last_edited_time":1730006151413,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"kIb9JKIes-CJf60s-RkREg,\"start\",\"end\"","n":{"kIb9JKIes-CJf60s-RkREg,\"start\",\"end\"":{"s":{"x":"kIb9JKIes-CJf60s-RkREg","i":[{"t":"s"},{"t":"t","i":["rrdTLJOBZpPN",1],"o":"start","l":4,"c":"事务安全"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8049-9521-e5865fe9ca32":{"value":{"id":"12c88756-3979-8049-9521-e5865fe9ca32","version":450,"type":"text","properties":{"title":[["mmap 确实无法知道数据何时落盘，但作者认为这本质上与使用 Buffer Pool 时没有区别，在 Buffer Pool 中也同样需要考虑页面的驱逐和各种管理"]]},"created_time":1730006151696,"last_edited_time":1730031513857,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"X84D4pA8-gmOsYDXAZj6KQ,\"start\",\"end\"","n":{"X84D4pA8-gmOsYDXAZj6KQ,\"start\",\"end\"":{"s":{"x":"X84D4pA8-gmOsYDXAZj6KQ","i":[{"t":"s"},{"t":"t","i":["BEdpWL1AtESD",1],"o":"start","l":81,"c":"mmap 确实无法知道数据何时落盘，但作者认为这本质上与使用 Buffer Pool 时没有区别，在 Buffer Pool 中也同样需要考虑页面的驱逐和各种管理"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80f6-8772-d2340fdcc080":{"value":{"id":"12c88756-3979-80f6-8772-d2340fdcc080","version":455,"type":"text","properties":{"title":[["文中还提到 RavenDB 使用写时复制的主要目的也是为了方便实现 MVCC，更容易处理并发事务。并且单写者模型在 DBMS 中并不罕见"]]},"created_time":1730006146127,"last_edited_time":1730032060396,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"ujwhtcwEV-8wULiXPXezyA,\"start\",\"end\"","n":{"ujwhtcwEV-8wULiXPXezyA,\"start\",\"end\"":{"s":{"x":"ujwhtcwEV-8wULiXPXezyA","i":[{"t":"s"},{"t":"t","i":["cjnBx-xRc-2_",1],"o":"start","l":68,"c":"文中还提到 RavenDB 使用写时复制的主要目的也是为了方便实现 MVCC，更容易处理并发事务。并且单写者模型在 DBMS 中并不罕见"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80e3-8057-c5dc06a974e8":{"value":{"id":"12c88756-3979-80e3-8057-c5dc06a974e8","version":5,"type":"text","created_time":1730032036354,"last_edited_time":1730032036357,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"NJkPdtrnkd1SNFizMTnIuQ,\"start\",\"end\"","n":{"NJkPdtrnkd1SNFizMTnIuQ,\"start\",\"end\"":{"s":{"x":"NJkPdtrnkd1SNFizMTnIuQ","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80aa-a2ea-ddf259ca9447":{"value":{"id":"12c88756-3979-80aa-a2ea-ddf259ca9447","version":54,"type":"sub_header","properties":{"title":[["I/O 停顿"]]},"created_time":1729999501865,"last_edited_time":1730032098796,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"HPzgU9hsVv6HJqZJ0WUcjA,\"start\",\"end\"","n":{"HPzgU9hsVv6HJqZJ0WUcjA,\"start\",\"end\"":{"s":{"x":"HPzgU9hsVv6HJqZJ0WUcjA","i":[{"t":"s"},{"t":"t","i":["Wp2WFOqlEBNG",1],"o":"start","l":6,"c":"I/O 停顿"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8024-a356-e40a096833a9":{"value":{"id":"12c88756-3979-8024-a356-e40a096833a9","version":1035,"type":"text","properties":{"title":[["作者承认关于缺页导致的 I/O 抖动是使用 mmap 必须要处理的最重要的问题，但实际情况并没有想象中那么严重。RavenDB 中通过在专用线程上调用 "],["madvise(WILL_NEED)",[["c"]]],["，他认为这和异步 I/O 的方式没什么不同"]]},"created_time":1730032268864,"last_edited_time":1730035431540,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Z8MsBjXZ-opSPpngjupA2w,\"start\",\"end\"","n":{"Z8MsBjXZ-opSPpngjupA2w,\"start\",\"end\"":{"s":{"x":"Z8MsBjXZ-opSPpngjupA2w","i":[{"t":"s"},{"t":"t","i":["tT7zTNUj6c9O",1],"o":"start","l":76,"c":"作者承认关于缺页导致的 I/O 抖动是使用 mmap 必须要处理的最重要的问题，但实际情况并没有想象中那么严重。RavenDB 中通过在专用线程上调用 "},{"t":"t","i":["tT7zTNUj6c9O",77],"o":["tT7zTNUj6c9O",76],"l":18,"c":"madvise(WILL_NEED)","b":[{"t":"a","x":"Z8MsBjXZ-opSPpngjupA2w","l":"","i":["tT7zTNUj6c9O",116],"s":{"i":["tT7zTNUj6c9O",77],"a":"b"},"e":{"i":["tT7zTNUj6c9O",94],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["tT7zTNUj6c9O",95],"o":["tT7zTNUj6c9O",94],"l":21,"c":"，他认为这和异步 I/O 的方式没什么不同"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80e1-9663-c27556f86066":{"value":{"id":"12c88756-3979-80e1-9663-c27556f86066","version":5,"type":"text","created_time":1730032361713,"last_edited_time":1730032361717,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"5AqYnMJSxR0XgrEPJ15Zlg,\"start\",\"end\"","n":{"5AqYnMJSxR0XgrEPJ15Zlg,\"start\",\"end\"":{"s":{"x":"5AqYnMJSxR0XgrEPJ15Zlg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-806e-918f-e4d24fb0c307":{"value":{"id":"12c88756-3979-806e-918f-e4d24fb0c307","version":45,"type":"sub_header","properties":{"title":[["错误处理"]]},"created_time":1730032099151,"last_edited_time":1730032104299,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"ErbXKfHpEaki-cwHVH2xGA,\"start\",\"end\"","n":{"ErbXKfHpEaki-cwHVH2xGA,\"start\",\"end\"":{"s":{"x":"ErbXKfHpEaki-cwHVH2xGA","i":[{"t":"s"},{"t":"t","i":["-lQO1XHyPDmz",1],"o":"start","l":4,"c":"错误处理"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8083-b949-c12c4fe0fb07":{"value":{"id":"12c88756-3979-8083-b949-c12c4fe0fb07","version":485,"type":"text","properties":{"title":[["校验和的问题，即使在 Buffer Pool 中也会存在，因为数据可能从 cache 中读取，但实际上在磁盘中损坏；RavenDB 只会进行一次校验和检查，不需要每次都检查，两者没什么差别"]]},"created_time":1730032104632,"last_edited_time":1730035624157,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"y2hu7DhQ0R_L4P4DM_Muag,\"start\",\"end\"","n":{"y2hu7DhQ0R_L4P4DM_Muag,\"start\",\"end\"":{"s":{"x":"y2hu7DhQ0R_L4P4DM_Muag","i":[{"t":"s"},{"t":"t","i":["vUw_zDUZ20VG",1],"o":"start","l":94,"c":"校验和的问题，即使在 Buffer Pool 中也会存在，因为数据可能从 cache 中读取，但实际上在磁盘中损坏；RavenDB 只会进行一次校验和检查，不需要每次都检查，两者没什么差别"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8047-92bc-d92af5e844eb":{"value":{"id":"12c88756-3979-8047-92bc-d92af5e844eb","version":459,"type":"text","properties":{"title":[["对于 I/O 错误，作者认为在数据库中处理该类错误的唯一答案是 crash 掉整个数据库然后从头恢复运行，因此在这里不需要什么额外工作"]]},"created_time":1730033102666,"last_edited_time":1730033567478,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"ETKzT2hP5RFKNrSbP-Xh7A,\"start\",\"end\"","n":{"ETKzT2hP5RFKNrSbP-Xh7A,\"start\",\"end\"":{"s":{"x":"ETKzT2hP5RFKNrSbP-Xh7A","i":[{"t":"s"},{"t":"t","i":["4v2awSCrf90f",1],"o":"start","l":67,"c":"对于 I/O 错误，作者认为在数据库中处理该类错误的唯一答案是 crash 掉整个数据库然后从头恢复运行，因此在这里不需要什么额外工作"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8093-9c88-d10f38690a7e":{"value":{"id":"12c88756-3979-8093-9c88-d10f38690a7e","version":5,"type":"text","created_time":1730033102471,"last_edited_time":1730033102475,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"_OhgKAEeuzMz6f9OrfgyrQ,\"start\",\"end\"","n":{"_OhgKAEeuzMz6f9OrfgyrQ,\"start\",\"end\"":{"s":{"x":"_OhgKAEeuzMz6f9OrfgyrQ","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80bb-aef4-fa08b65e579e":{"value":{"id":"12c88756-3979-80bb-aef4-fa08b65e579e","version":37,"type":"sub_header","properties":{"title":[["性能问题"]]},"created_time":1730032104495,"last_edited_time":1730032112993,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"xGxdfbD-ka2vkFk8DWD2eQ,\"start\",\"end\"","n":{"xGxdfbD-ka2vkFk8DWD2eQ,\"start\",\"end\"":{"s":{"x":"xGxdfbD-ka2vkFk8DWD2eQ","i":[{"t":"s"},{"t":"t","i":["6trumpA9HvpU",1],"o":"start","l":4,"c":"性能问题"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8086-9602-d58e3b130f7f":{"value":{"id":"12c88756-3979-8086-9602-d58e3b130f7f","version":91,"type":"text","properties":{"title":[["对于 mmap 的三个性能瓶颈:"]]},"created_time":1729999412482,"last_edited_time":1730034570162,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"StOxppYXckQJKak-20z7Vw,\"start\",\"end\"","n":{"StOxppYXckQJKak-20z7Vw,\"start\",\"end\"":{"s":{"x":"StOxppYXckQJKak-20z7Vw","i":[{"t":"s"},{"t":"t","i":["hHQou2DKcHqm",1],"o":"start","l":16,"c":"对于 mmap 的三个性能瓶颈:"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80d7-8fe4-c5e7b0cebf50":{"value":{"id":"12c88756-3979-80d7-8fe4-c5e7b0cebf50","version":170,"type":"numbered_list","properties":{"title":[["页表竞争：是一个"],["已修复的内核 bug",[["a","https://ravendb.net/articles/production-postmortem-the-guinness-record-for-page-faults-high-cpu"]]],["，现在无需操心"]]},"created_time":1730033669955,"last_edited_time":1730033695064,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"WyJSqdoIAP9VxY0xsa0_bw,\"start\",\"end\"","n":{"WyJSqdoIAP9VxY0xsa0_bw,\"start\",\"end\"":{"s":{"x":"WyJSqdoIAP9VxY0xsa0_bw","i":[{"t":"s"},{"t":"t","i":["vCxGGr-qa4Zp",1],"o":"start","l":8,"c":"页表竞争：是一个"},{"t":"t","i":["vCxGGr-qa4Zp",9],"o":["vCxGGr-qa4Zp",8],"l":10,"c":"已修复的内核 bug","b":[{"t":"a","x":"WyJSqdoIAP9VxY0xsa0_bw","l":"","i":["vCxGGr-qa4Zp",26],"s":{"i":["vCxGGr-qa4Zp",9],"a":"b"},"e":{"i":["vCxGGr-qa4Zp",18],"a":"a"},"a":["a","https://ravendb.net/articles/production-postmortem-the-guinness-record-for-page-faults-high-cpu"]}],"a":[]},{"t":"t","i":["vCxGGr-qa4Zp",19],"o":["vCxGGr-qa4Zp",18],"l":7,"c":"，现在无需操心"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8096-90b0-d7260b927574":{"value":{"id":"12c88756-3979-8096-90b0-d7260b927574","version":362,"type":"numbered_list","properties":{"title":[["单线程页面驱逐：RavenDB 从未遇到过，脏页是少数，页面驱逐的压力并不大"]]},"created_time":1730032118196,"last_edited_time":1730034553598,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Auhxl3Zi2BP2tYh87SfD3Q,\"start\",\"end\"","n":{"Auhxl3Zi2BP2tYh87SfD3Q,\"start\",\"end\"":{"s":{"x":"Auhxl3Zi2BP2tYh87SfD3Q","i":[{"t":"s"},{"t":"t","i":["YPaVbIysV_1h",1],"o":"start","l":38,"c":"单线程页面驱逐：RavenDB 从未遇到过，脏页是少数，页面驱逐的压力并不大"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80a8-a9c3-ff8ddb208bf8":{"value":{"id":"12c88756-3979-80a8-a9c3-ff8ddb208bf8","version":277,"type":"numbered_list","properties":{"title":[["TLB shootdown：触发这个问题需要极快的 I/O 加上远超内存大小的工作集"]]},"created_time":1730033732061,"last_edited_time":1730034563437,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"FRqqTPt2GyreGUasisw3Ew,\"start\",\"end\"","n":{"FRqqTPt2GyreGUasisw3Ew,\"start\",\"end\"":{"s":{"x":"FRqqTPt2GyreGUasisw3Ew","i":[{"t":"s"},{"t":"t","i":["H5-_zvtcurlC",1],"o":"start","l":42,"c":"TLB shootdown：触发这个问题需要极快的 I/O 加上远超内存大小的工作集"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-802a-824e-c1b3cc40a44a":{"value":{"id":"12c88756-3979-802a-824e-c1b3cc40a44a","version":816,"type":"text","properties":{"title":[["作者认为论文中的基准测试假设了不使用 mmap（也就是使用 Buffer Pool）的情况下没有其他成本，这是不现实的，例如使用 Buffer Pool，也同样需要考虑这些页面驱逐的问题，只不过现在是由 Buffer Pool 来负责。这个观点我是赞同的，前文的基准测试确实没有体现出 Buffer Pool 的对比"]]},"created_time":1730032118378,"last_edited_time":1730035464260,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"B7-LPho0rYa25ZUGcSZWfQ,\"start\",\"end\"","n":{"B7-LPho0rYa25ZUGcSZWfQ,\"start\",\"end\"":{"s":{"x":"B7-LPho0rYa25ZUGcSZWfQ","i":[{"t":"s"},{"t":"t","i":["fCeAjo7OJXV7",1],"o":"start","l":158,"c":"作者认为论文中的基准测试假设了不使用 mmap（也就是使用 Buffer Pool）的情况下没有其他成本，这是不现实的，例如使用 Buffer Pool，也同样需要考虑这些页面驱逐的问题，只不过现在是由 Buffer Pool 来负责。这个观点我是赞同的，前文的基准测试确实没有体现出 Buffer Pool 的对比"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8032-9e3f-da3cb2e51728":{"value":{"id":"12c88756-3979-8032-9e3f-da3cb2e51728","version":425,"type":"text","created_time":1730032144950,"last_edited_time":1730032218089,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"1LQduao3LaRb-NXBXlvB0w,\"start\",\"end\"","n":{"1LQduao3LaRb-NXBXlvB0w,\"start\",\"end\"":{"s":{"x":"1LQduao3LaRb-NXBXlvB0w","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12a88756-3979-804c-9010-d0af55e5569b":{"value":{"id":"12a88756-3979-804c-9010-d0af55e5569b","version":24,"type":"header","properties":{"title":[["总结"]]},"created_time":1729871247990,"last_edited_time":1729871276054,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Tb17OYeDvxbffYZxaWkUVg,\"start\",\"end\"","n":{"Tb17OYeDvxbffYZxaWkUVg,\"start\",\"end\"":{"s":{"x":"Tb17OYeDvxbffYZxaWkUVg","i":[{"t":"s"},{"t":"t","i":["qBn6GvQthFHU",1],"o":"start","l":2,"c":"总结"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-801c-aaad-fbc75072f3ad":{"value":{"id":"12c88756-3979-801c-aaad-fbc75072f3ad","version":220,"type":"text","properties":{"title":[["两篇文章看下来，个人感觉 Oren Eini 反驳的文章中内容稍显空洞，没有什么特别有力的证据或数据支撑，例如异步 I/O 性能那块没有给出具体数据，在我个人的经验中异步 I/O 还是能带来很大的提升的，除非这里的数据集很小，能大部分都缓存命中"]]},"created_time":1730034425965,"last_edited_time":1730618818477,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"fM6HVoKW05iXppHmjC76jg,\"start\",\"end\"","n":{"fM6HVoKW05iXppHmjC76jg,\"start\",\"end\"":{"s":{"x":"fM6HVoKW05iXppHmjC76jg","i":[{"t":"s"},{"t":"t","i":["HuYFvRNDsAmM",1],"o":"start","l":122,"c":"两篇文章看下来，个人感觉 Oren Eini 反驳的文章中内容稍显空洞，没有什么特别有力的证据或数据支撑，例如异步 I/O 性能那块没有给出具体数据，在我个人的经验中异步 I/O 还是能带来很大的提升的，除非这里的数据集很小，能大部分都缓存命中"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80f8-a36a-c3438606c126":{"value":{"id":"12c88756-3979-80f8-a36a-c3438606c126","version":562,"type":"text","properties":{"title":[["但这篇文章也可以作为一个不同角度的参考，有些地方还是值得思考的，比如关于错误处理，另一个相似的问题是，对于底层软件，内存分配失败的情况下应该如何处理？mmap 无法像手动实现 Buffer Pool 一样限制缓存容量，可能更需要考虑这个问题"]]},"created_time":1730033248279,"last_edited_time":1730036117180,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"uWGsw-nixOJyTJ2K9eNdFw,\"start\",\"end\"","n":{"uWGsw-nixOJyTJ2K9eNdFw,\"start\",\"end\"":{"s":{"x":"uWGsw-nixOJyTJ2K9eNdFw","i":[{"t":"s"},{"t":"t","i":["yAYzsA-l5f4G",1],"o":"start","l":120,"c":"但这篇文章也可以作为一个不同角度的参考，有些地方还是值得思考的，比如关于错误处理，另一个相似的问题是，对于底层软件，内存分配失败的情况下应该如何处理？mmap 无法像手动实现 Buffer Pool 一样限制缓存容量，可能更需要考虑这个问题"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8051-948a-ccc0ba11f41a":{"value":{"id":"12c88756-3979-8051-948a-ccc0ba11f41a","version":145,"type":"text","properties":{"title":[["另外还可以参考下 codedump 老师的这篇 blog："]]},"created_time":1730035180698,"last_edited_time":1730035253639,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"4TiwmElgoSQrykCYjIlU3w,\"start\",\"end\"","n":{"4TiwmElgoSQrykCYjIlU3w,\"start\",\"end\"":{"s":{"x":"4TiwmElgoSQrykCYjIlU3w","i":[{"t":"s"},{"t":"t","i":["qj3OXZRZvpQB",1],"o":"start","l":29,"c":"另外还可以参考下 codedump 老师的这篇 blog："},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-802a-b722-deef829acfa2":{"value":{"id":"12c88756-3979-802a-b722-deef829acfa2","version":57,"type":"bulleted_list","properties":{"title":[["周刊（第11期）：mmap适用于存储引擎吗？ - codedump的网络日志",[["a","https://www.codedump.info/post/20220327-weekly-11/"]]]]},"created_time":1730035190644,"last_edited_time":1730035300740,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"3DZ8RB4xIbx1Rd-HsTl-yw,\"start\",\"end\"","n":{"3DZ8RB4xIbx1Rd-HsTl-yw,\"start\",\"end\"":{"s":{"x":"3DZ8RB4xIbx1Rd-HsTl-yw","i":[{"t":"s"},{"t":"t","i":["sOeur4p6Nbai",1],"o":"start","l":38,"c":"周刊（第11期）：mmap适用于存储引擎吗？ - codedump的网络日志","b":[{"t":"a","x":"3DZ8RB4xIbx1Rd-HsTl-yw","l":"","i":["sOeur4p6Nbai",39],"s":{"i":["sOeur4p6Nbai",1],"a":"b"},"e":{"i":["sOeur4p6Nbai",38],"a":"a"},"a":["a","https://www.codedump.info/post/20220327-weekly-11/"]}],"a":[]},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8003-b771-ff37be2da95e":{"value":{"id":"12c88756-3979-8003-b771-ff37be2da95e","version":5,"type":"text","created_time":1730034464915,"last_edited_time":1730034464918,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"TQ3GXtV5nZHJKvp1LHrCrQ,\"start\",\"end\"","n":{"TQ3GXtV5nZHJKvp1LHrCrQ,\"start\",\"end\"":{"s":{"x":"TQ3GXtV5nZHJKvp1LHrCrQ","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80e4-8ac8-e9255219326b":{"value":{"id":"12c88756-3979-80e4-8ac8-e9255219326b","version":746,"type":"text","properties":{"title":[["回到 mmap 上，使用 mmap 确实需要考虑比想象中更多的问题，但随着内核发展，某些痛点也逐渐被解决了，例如现在内核支持了原子 "],["msync",[["c"]]],[" 调用，如果它失败了，就会禁用内核的透明页驱逐功能，这样就不需要再操心一些使用 mmap 带来的事务安全问题了"]]},"created_time":1730034465085,"last_edited_time":1730034844065,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Clw3JEXa0Gxgks7ku8avpg,\"start\",\"end\"","n":{"Clw3JEXa0Gxgks7ku8avpg,\"start\",\"end\"":{"s":{"x":"Clw3JEXa0Gxgks7ku8avpg","i":[{"t":"s"},{"t":"t","i":["E8uFHZxQzuaJ",1],"o":"start","l":66,"c":"回到 mmap 上，使用 mmap 确实需要考虑比想象中更多的问题，但随着内核发展，某些痛点也逐渐被解决了，例如现在内核支持了原子 "},{"t":"t","i":["E8uFHZxQzuaJ",67],"o":["E8uFHZxQzuaJ",66],"l":5,"c":"msync","b":[{"t":"a","x":"Clw3JEXa0Gxgks7ku8avpg","l":"","i":["E8uFHZxQzuaJ",127],"s":{"i":["E8uFHZxQzuaJ",67],"a":"b"},"e":{"i":["E8uFHZxQzuaJ",71],"a":"a"},"a":["c"]}],"a":[]},{"t":"t","i":["E8uFHZxQzuaJ",72],"o":["E8uFHZxQzuaJ",71],"l":55,"c":" 调用，如果它失败了，就会禁用内核的透明页驱逐功能，这样就不需要再操心一些使用 mmap 带来的事务安全问题了"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-80ff-ba8f-d1164cc68022":{"value":{"id":"12c88756-3979-80ff-ba8f-d1164cc68022","version":1232,"type":"text","properties":{"title":[["但总的来说我认为是否使用 mmap 是一个 trade-off，如果你希望系统更加简单，有更低的开发成本，那就使用 mmap，把一切都交给内核；但反之这也可能会让内核实现成为整个系统的瓶颈，因为内核是 general-purpose 的实现，而不是针对数据库的 special-purpose 的实现。当内核会成为你的瓶颈，或需要更多细粒度的控制，为此需要进行大量改造的话，还不如从头就开始自己实现"]]},"created_time":1730034662103,"last_edited_time":1730035114127,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"Z7wLzyFSKpEMSNOxJOS2PA,\"start\",\"end\"","n":{"Z7wLzyFSKpEMSNOxJOS2PA,\"start\",\"end\"":{"s":{"x":"Z7wLzyFSKpEMSNOxJOS2PA","i":[{"t":"s"},{"t":"t","i":["8OT4nd5Tx-4E",1],"o":"start","l":199,"c":"但总的来说我认为是否使用 mmap 是一个 trade-off，如果你希望系统更加简单，有更低的开发成本，那就使用 mmap，把一切都交给内核；但反之这也可能会让内核实现成为整个系统的瓶颈，因为内核是 general-purpose 的实现，而不是针对数据库的 special-purpose 的实现。当内核会成为你的瓶颈，或需要更多细粒度的控制，为此需要进行大量改造的话，还不如从头就开始自己实现"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"},"12c88756-3979-8053-a5a3-d68e25dcece2":{"value":{"id":"12c88756-3979-8053-a5a3-d68e25dcece2","version":5,"type":"text","created_time":1730034465244,"last_edited_time":1730034465245,"parent_id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","crdt_format_version":1,"crdt_data":{"title":{"r":"C9_I405dFpu1mzcsskGAlg,\"start\",\"end\"","n":{"C9_I405dFpu1mzcsskGAlg,\"start\",\"end\"":{"s":{"x":"C9_I405dFpu1mzcsskGAlg","i":[{"t":"s"},{"t":"e"}],"l":""},"c":[]}}}}},"role":"reader"}},"collection":{"0bb2e606-8d0c-4f7c-aca9-70986e90c055":{"value":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","version":85,"name":[["x³u³"]],"description":[["🗒 碎碎念"]],"schema":{"@NcA":{"name":"password","type":"text"},"Dj]h":{"name":"icon","type":"text"},"NX\\Q":{"name":"date","type":"date","date_format":"YYYY/MM/DD"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"95b7fea5-98b3-476e-892f-79e8f36d0633","color":"brown","value":"Notice","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"2287395b-9f64-4852-b46f-ff3df4b4acef","color":"yellow","value":"Menu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"50fefd65-c28e-4806-9183-aa12995f11f3","color":"pink","value":"SubMenu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"b945f57d-dbcc-4603-9fab-5cfe447aad1b","color":"red","value":"Config","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"bB{M":{"name":"category","type":"select"},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"a027d99d-be10-412d-b94a-8c61f6eacc29","color":"default","value":"存储","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4bd9608a-d7d6-4597-beb7-d4849da04909","color":"gray","value":"分布式系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"ad04c718-fd54-4374-bfed-6c7e9dc65e01","color":"blue","value":"折腾","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"25bff120-77fb-40f1-9531-00997afcb444","color":"purple","value":"Linux","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e12d005d-ec78-4876-950d-2399744abbaa","color":"blue","value":"内核","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c7950cbd-8d2c-4cbe-8bb1-679fb433a74f","color":"red","value":"碎碎念","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be9970b9-6fe4-4351-92c2-1e3e41d2a3e3","color":"brown","value":"Cloud Native","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"61c97435-c65a-40b1-9e95-2c6345b6f9d3","color":"pink","value":"Vim","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d18e22d6-cbbb-4311-9928-7c5b58124456","color":"orange","value":"论文阅读","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"526115da-04f3-4be2-8a47-c83c7576b0de","color":"green","value":"Kubernetes","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"12016016-3ecc-4ee7-92c6-6973678fdd05","color":"yellow","value":"数据库","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"1edc83b3-f351-4a21-aafc-3b059d0c0f22","color":"brown","value":"Raft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"158014da-08eb-49f4-97ad-1ce6f6e0ee5c","color":"orange","value":"Rust","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e93f6dd2-caed-4531-9ee1-28fc2cbf1811","color":"yellow","value":"旅行","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c885be61-3b71-4d5f-86cc-4da1586e660a","color":"blue","value":"PVE","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d4f1c8d8-1d0f-47af-a440-4dc14b658610","color":"blue","value":"日语","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be95bbc7-1806-4b7e-8b58-1f540ac0f223","color":"red","value":"网络","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"9bb01875-d8ae-4914-a41b-5eccd75e824f","color":"blue","value":"操作系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"66d0fb9a-8f36-4f9e-98ed-af4057a1773f","color":"default","value":"Nix","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4e4791ca-d6ec-48f9-9bd6-ad6f4572993a","color":"red","value":"NixOS","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d1242312-e0a8-456d-b8f0-6e998e2c4fb2","color":"orange","value":"Invisible","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]}},"icon":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/49b4570c-b2f0-457b-81b7-b68e2693a471/avatar.png","cover":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a9af1d6b-f284-4734-ba06-990353cf3f84/Elaina.jpg","format":{"copied_from_pointer":{"id":"4379bc14-5d22-453b-a153-12639616fc01","table":"collection","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"property_visibility":[{"property":"`gQ~","visibility":"show"},{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","visibility":"show"},{"property":"NX\\Q","visibility":"show"},{"property":"d]hq","visibility":"show"},{"property":"wz|S","visibility":"show"},{"property":"sD^m","visibility":"show"},{"property":"bB{M","visibility":"show"},{"property":"Dj]h","visibility":"hide_if_empty"},{"property":"uHoD","visibility":"show"},{"property":"kiCR","visibility":"hide"}],"ai_suggested_properties":[{"name":"created by","type":"person"},{"name":"updated at","type":"date"},{"name":"priority","type":"select","options":[{"id":"OqCJ","color":"purple","value":"low"},{"id":"X{Pz","color":"pink","value":"medium"},{"id":"LRCx","color":"red","value":"high"},{"id":"VY?=","color":"yellow","value":"urgent"}]},{"name":"visibility","type":"select","options":[{"id":"Q=_{","color":"red","value":"public"},{"id":"A|Nj","color":"green","value":"private"},{"id":"MWlx","color":"gray","value":"restricted"}]},{"name":"attachments","type":"file"},{"name":"related links","type":"multi_select","options":[{"id":"I^W\u003e","color":"default","value":"documentation"},{"id":"\u003cg\\P","color":"yellow","value":"tutorials"},{"id":"RMVI","color":"gray","value":"references"}]},{"name":"estimated completion","type":"date"},{"name":"contact email","type":"email"},{"name":"contact phone","type":"phone_number"},{"name":"is active","type":"checkbox"}],"collection_cover_position":0.6486,"collection_page_properties":[{"visible":false,"property":"`gQ~"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"Dj]h"},{"visible":true,"property":"@NcA"},{"visible":true,"property":"ckw_"}],"collection_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f","abe3a0aa-2aff-4274-81bb-c2443d4ef9e2","a2a32795-101d-46aa-a7f6-eb35b8750166","29db38d2-d5fa-4fa6-8a92-3b527cfe80d1","49b4570c-b2f0-457b-81b7-b68e2693a471","a9af1d6b-f284-4734-ba06-990353cf3f84"],"copied_from":"4379bc14-5d22-453b-a153-12639616fc01","template_pages":["2eace25c-842c-46fd-9ccb-e9190981b6c3"],"migrated":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"collection_view":{"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef":{"value":{"id":"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","version":128,"type":"table","name":"All","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"860c7b26-627e-4972-b471-8e8bfca0d897","filter":{"filter":{"value":{"type":"exact"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}},{"id":"1c5b2709-6f35-4692-b4db-cb219a62e22d","filter":{"filter":{"value":{"type":"exact"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","15c88756-3979-8089-acb1-e4ae25bf3f4f","16488756-3979-80aa-9bba-cf28c50dec07","b1c009da-991f-4449-b945-6bc4584cca98","1c588756-3979-8066-b5ce-f3d0811aa47e","25d88756-3979-8023-9a5a-d926873b7b9b","16e88756-3979-8010-aeb9-d7e49f597453","14688756-3979-80f8-8f88-d0bb8697b4a4","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","17788756-3979-808b-90e9-c0a0d9602ea0","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","created_time":1743233875731,"last_edited_time":1756748880461,"created_by_table":"notion_user","created_by_id":"919e7400-5a69-4402-b2e1-f7d99cc48131"},"role":"reader"},"14688756-3979-80e7-97c9-000c212f8370":{"value":{"id":"14688756-3979-80e7-97c9-000c212f8370","version":3,"type":"table","name":"Published Post","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"1c5b2709-6f35-4692-b4db-cb219a62e22d","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}},{"id":"860c7b26-627e-4972-b471-8e8bfca0d897","filter":{"filter":{"value":{"type":"exact","value":"Published"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"sort":[{"property":"NX\\Q","direction":"descending"}],"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14588756-3979-8039-9990-000cefddccf8":{"value":{"id":"14588756-3979-8039-9990-000cefddccf8","version":11,"type":"table","name":"All Post","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"eacd5736-8f45-4d4d-97ce-21001f75dceb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","14688756-3979-80f8-8f88-d0bb8697b4a4","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"sort":[{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","direction":"descending"},{"property":"NX\\Q","direction":"descending"}],"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d":{"value":{"id":"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","version":1,"type":"table","name":"Config","format":{"gallery_cover":{"type":"page_content"},"list_properties":[{"visible":true,"property":"NX\\Q"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"`gQ~"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"}],"property_filters":[{"id":"b54a6c88-635d-4de4-946e-5a855a1f4069","filter":{"filter":{"value":[{"type":"exact","value":"Notice"},{"type":"exact","value":"Menu"},{"type":"exact","value":"Config"},{"type":"exact","value":"SubMenu"},{"type":"exact","value":"Page"}],"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":116,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":118,"visible":true,"property":"`gQ~"},{"width":219,"visible":true,"property":"title"},{"width":326,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"`gQ~"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"}],"table_frozen_column_index":-1,"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8dfd415c-71af-41f9-b984-e7182bf2210b":{"value":{"id":"8dfd415c-71af-41f9-b984-e7182bf2210b","version":1,"type":"board","name":"Post Board","format":{"board_columns":[{"value":{"type":"select","value":"Draft"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Invisible"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Published"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}],"board_columns_by":{"sort":{"type":"manual"},"type":"select","property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},"board_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"wz|S"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"`gQ~"}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":219,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":155,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c2f93d8-6810-42a1-87da-55f1ecda9bca":{"value":{"id":"3c2f93d8-6810-42a1-87da-55f1ecda9bca","version":74,"type":"chart","name":"Tag","format":{"chart_config":{"type":"column","dataConfig":{"type":"groups_reducer","groupBy":{"sort":{"type":"manual"},"type":"multi_select","property":"sD^m","hideEmptyGroups":false},"aggregationConfig":{"aggregation":{"aggregator":"count"},"seriesFormat":{"displayType":"column"}}},"chartFormat":{"mainSort":"manual","hideLegend":false,"axisCumulative":false,"axisGroupStyle":"normal","donutHideValue":false,"donutDataLabels":"value","axisShowDataLabels":true,"axisHideEmptyGroups":false}},"property_filters":[{"id":"01739a9c-9312-4d0d-bf7d-de1204300bdb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}},{"id":"3e615570-2c44-41d9-ae7c-603eabc9056e","filter":{"filter":{"value":{"type":"exact","value":"Published"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"subitem_display_mode":"flattened","table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}}},"prev":{"id":"12988756-3979-8065-aeb4-e6ec1258ed90","date":{"start_date":"2024-11-17","date_format":"relative"},"type":"Post","slug":"post/memorydb","tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","title":"MemoryDB: Redis + Remote Log","status":"Published","category":"","comment":"","publishDate":1731801600000,"publishDay":"2024-11-17","lastEditedDate":"2024-11-18T03:17:24.167Z","lastEditedDay":"2024-11-18","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"},{"name":"数据库","color":"yellow"},{"name":"论文阅读","color":"orange"}],"href":"/post/memorydb","target":"_self","password":""},"next":{"id":"11688756-3979-8028-b7d8-ce8bf2ec4253","date":{"start_date":"2024-10-21","date_format":"relative"},"type":"Post","slug":"post/japan-travel","tags":["碎碎念","旅行"],"summary":"次の駅は、東京です","title":"日本游记","status":"Published","category":"","comment":"","publishDate":1729468800000,"publishDay":"2024-10-21","lastEditedDate":"2024-11-09T06:15:00.191Z","lastEditedDay":"2024-11-9","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"},{"name":"旅行","color":"yellow"}],"href":"/post/japan-travel","target":"_self","password":""},"recommendPosts":[{"id":"12988756-3979-8065-aeb4-e6ec1258ed90","date":{"start_date":"2024-11-17","date_format":"relative"},"type":"Post","slug":"post/memorydb","tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","title":"MemoryDB: Redis + Remote Log","status":"Published","category":"","comment":"","publishDate":1731801600000,"publishDay":"2024-11-17","lastEditedDate":"2024-11-18T03:17:24.167Z","lastEditedDay":"2024-11-18","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"},{"name":"数据库","color":"yellow"},{"name":"论文阅读","color":"orange"}],"href":"/post/memorydb","target":"_self","password":""},{"id":"1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","date":{"start_date":"2022-02-14","date_format":"relative"},"type":"Post","slug":"post/gfs-paper","tags":["论文阅读","分布式系统"],"title":"The Google File System 论文概览","status":"Published","category":"","comment":"","publishDate":1644796800000,"publishDay":"2022-2-14","lastEditedDate":"2025-04-15T02:57:01.735Z","lastEditedDay":"2025-4-15","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"分布式系统","color":"gray"}],"href":"/post/gfs-paper","target":"_self","password":""}]},"__N_SSG":true},"page":"/[prefix]/[slug]","query":{"prefix":"post","slug":"db-mmap"},"buildId":"bzll3595dvYzC4mzTRuY5","runtimeConfig":{"NODE_ENV_API":"prod","THEMES":["autumn","commerce","example","fukasawa","game","gitbook","heo","hexo","landing","matery","medium","movie","nav","next","nobelium","plog","simple","starter"]},"isFallback":false,"dynamicIds":[10635,46767],"gsp":true,"scriptLoader":[]}</script></body></html>
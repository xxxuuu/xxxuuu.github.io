<!DOCTYPE html><html data-astro-cid-pjvcz6dw lang=zh-CN><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" rel=icon><link href=https://xxxuuu.me/post/container-spec-ecosystem/ rel=canonical><link href=/rss/feed.xml rel=alternate title=xÂ³uÂ³ type=application/rss+xml><link href=/sitemap-index.xml rel=sitemap><title>å®¹å™¨æ ‡å‡†å’Œç”Ÿæ€ | xÂ³uÂ³</title><meta content="ğŸ—’ ç¢ç¢å¿µ" name=description><meta content=website property=og:type><meta content=https://xxxuuu.me/post/container-spec-ecosystem/ property=og:url><meta content="å®¹å™¨æ ‡å‡†å’Œç”Ÿæ€ | xÂ³uÂ³" property=og:title><meta content="ğŸ—’ ç¢ç¢å¿µ" property=og:description><meta content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" property=og:image><meta content=summary_large_image name=twitter:card><meta content=@xxuuu0 name=twitter:site><meta content="å®¹å™¨æ ‡å‡†å’Œç”Ÿæ€ | xÂ³uÂ³" name=twitter:title><meta content="ğŸ—’ ç¢ç¢å¿µ" name=twitter:description><meta content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055" name=twitter:image><link href=https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css rel=preload as=style onload="this.onload=null,this.rel=&#34;stylesheet&#34;"><noscript><link href=https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css rel=stylesheet></noscript><script>!function(){const e=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.classList.add(e)}()</script><link href=/_astro/katex.CVb4srxQ.css rel=stylesheet><link href=/_astro/_slug_.Hsk_LU_h.css rel=stylesheet><link href=/_astro/_slug_.BzJEnS8p.css rel=stylesheet><link href=/_astro/_slug_.DOIB7y8p.css rel=stylesheet><script src=/_astro/hoisted.B871fABB.js type=module></script></head><body data-astro-cid-pjvcz6dw><header class=notion-header data-astro-cid-4f4rmh32><div class=header-container data-astro-cid-4f4rmh32><div class=header-content data-astro-cid-4f4rmh32><div class=logo data-astro-cid-4f4rmh32><a href=/ class=logo-link data-astro-cid-4f4rmh32>xÂ³uÂ³</a></div><div class=header-actions data-astro-cid-4f4rmh32><nav class=nav data-astro-cid-4f4rmh32><a href=/ class=nav-link data-astro-cid-4f4rmh32>ğŸ  é¦–é¡µ </a><a href=/archive class=nav-link data-astro-cid-4f4rmh32>ğŸ“ƒ å½’æ¡£ </a><a href=/links class=nav-link data-astro-cid-4f4rmh32>ğŸ‘¬ å‹é“¾ </a><a href=https://p.xxxuuu.me class=nav-link data-astro-cid-4f4rmh32 rel="noopener noreferrer" target=_blank>ğŸ“· æ‘„å½± <span class=external-icon data-astro-cid-4f4rmh32>â†—</span> </a><a href=/about class=nav-link data-astro-cid-4f4rmh32>ğŸ‘¤ å…³äº</a></nav><button aria-label="Toggle theme" title=åˆ‡æ¢ä¸»é¢˜ data-astro-cid-44mn2ykx id=theme-toggle><svg fill=none viewBox="0 0 24 24" height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 class=sun-icon data-astro-cid-44mn2ykx xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 data-astro-cid-44mn2ykx r=5></circle><line data-astro-cid-44mn2ykx x1=12 x2=12 y1=1 y2=3></line><line data-astro-cid-44mn2ykx x1=12 x2=12 y1=21 y2=23></line><line data-astro-cid-44mn2ykx x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line data-astro-cid-44mn2ykx x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line data-astro-cid-44mn2ykx x1=1 x2=3 y1=12 y2=12></line><line data-astro-cid-44mn2ykx x1=21 x2=23 y1=12 y2=12></line><line data-astro-cid-44mn2ykx x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line data-astro-cid-44mn2ykx x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg> <svg fill=none viewBox="0 0 24 24" height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 class=moon-icon data-astro-cid-44mn2ykx xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-astro-cid-44mn2ykx></path></svg></button></div></div></div></header><main class=notion-main data-astro-cid-pjvcz6dw><article class=content data-astro-cid-gbhzkc2y><div class=notion-page data-astro-cid-gbhzkc2y><div class=page-container data-astro-cid-gbhzkc2y><div class=page-main data-astro-cid-gbhzkc2y><header class=page-header data-astro-cid-gbhzkc2y><h1 class=page-title data-astro-cid-gbhzkc2y>å®¹å™¨æ ‡å‡†å’Œç”Ÿæ€</h1></header><div class=page-meta data-astro-cid-gbhzkc2y><div class=meta-info data-astro-cid-gbhzkc2y><span class=meta-item data-astro-cid-gbhzkc2y><span class=meta-icon data-astro-cid-gbhzkc2y>ğŸ“…</span> <time data-astro-cid-gbhzkc2y datetime=2023-07-12>2023å¹´07æœˆ12æ—¥</time> </span><span class=meta-item data-astro-cid-gbhzkc2y><span class=meta-icon data-astro-cid-gbhzkc2y>â±ï¸</span> <span data-astro-cid-gbhzkc2y>17 åˆ†é’Ÿé˜…è¯»</span></span></div><div class=meta-tags data-astro-cid-gbhzkc2y><span class=tags-icon data-astro-cid-gbhzkc2y>ğŸ·ï¸</span> <a href="/tag/cloud native" class=tag-pill data-astro-cid-gbhzkc2y>Cloud Native</a></div></div><hr class=page-divider data-astro-cid-gbhzkc2y><div class=notion-content data-astro-cid-gbhzkc2y><h2 id=ociopen-container-initiative>OCIï¼ˆOpen Container Initiativeï¼‰</h2><p><a href=https://opencontainers.org/about/overview/ rel="noopener noreferrer" target=_blank>OCIï¼ˆOpen Container Initiativeï¼Œå¼€æ”¾å®¹å™¨æè®®ï¼‰</a>ï¼Œæ˜¯å›´ç»•å®¹å™¨é•œåƒæ ¼å¼å’Œè¿è¡Œæ—¶è®¾ç«‹çš„æ ‡å‡†ï¼Œåœ¨ 2015 å¹´ 6 æœˆæ¨å‡ºã€‚åŸºäº Docker æèµ çš„Â <a href=https://github.com/opencontainers/runc rel="noopener noreferrer" target=_blank>runC</a>Â å®ç°ä¹‹ä¸Šå‘å±•è€Œæ¥</p><p>å…¶ä¸­ï¼Œé•œåƒæ ‡å‡†ï¼ˆ<a href=https://github.com/opencontainers/image-spec rel="noopener noreferrer" target=_blank>image-spec</a>ï¼‰è§„å®šäº†é•œåƒå¦‚ä½•ç»„ç»‡æ–‡ä»¶å±‚ï¼Œé•œåƒé…ç½®æ–‡ä»¶æ ¼å¼</p><p>è¿è¡Œæ—¶æ ‡å‡†ï¼ˆ<a href=https://github.com/opencontainers/runtime-spec rel="noopener noreferrer" target=_blank>runtime-spec</a>ï¼‰è§„å®šäº†å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå’Œéœ€è¦æ”¯æŒçš„æ“ä½œã€é…ç½®é¡¹ç­‰</p><p>2022 å¹´ 5 æœˆæ–°å¢åŠ äº†åˆ†å‘æ ‡å‡†ï¼ˆ<a href=https://github.com/opencontainers/distribution-spec rel="noopener noreferrer" target=_blank>distribution-spec</a>ï¼‰ï¼Œè§„å®šäº†é•œåƒåˆ†å‘çš„ API åè®®ï¼ŒåŒ…æ‹¬è®¤è¯æ–¹å¼ã€Pushã€Pullã€å†…å®¹å‘ç°ã€ç®¡ç†ç­‰</p><h3 id="">é•œåƒç»„æˆ</h3><p>OCI æ ‡å‡†ä¸­ï¼Œé•œåƒç”± indexï¼Œconfig å’Œå„ä¸ª layer ç»„æˆã€</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F549cfd4e-8dc3-44e3-8a89-9874d88a18a3%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D5f087bc361b5eeb2c35a9abfb5ba4393b0e6cec87c457b0ef6a3271aa28062c0%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=5e5ada37-8014-4492-b098-2cf0f4aab0e0" class=glightbox data-aspect-ratio=3.000000 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:3.000000><img alt=Image loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F549cfd4e-8dc3-44e3-8a89-9874d88a18a3%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D5f087bc361b5eeb2c35a9abfb5ba4393b0e6cec87c457b0ef6a3271aa28062c0%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=5e5ada37-8014-4492-b098-2cf0f4aab0e0"/></a></figure><p>æ‹‰å–ä¸€ä¸ª nginx é•œåƒå¹¶è§£å‹ï¼Œå¯ä»¥çœ‹åˆ°å…¶ç›®å½•æ ¼å¼</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ docker pull nginx
$ docker image save nginx -o nginx.tar
$ mkdir nginx-image
$ tar -C nginx-image -xvf nginx.tar
$ tree nginx-image/
nginx-image/
â”œâ”€â”€ 180ddd9cc15d32f0c1d5f85cf442ef1179f21ae197b60bf086b0e8c7ef153737
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ 2002d33a54f72d1333751d4d1b4793a60a635eac6e94a98daf0acea501580c4f.json
â”œâ”€â”€ 3cba2048aa0f37f06b8b1a3949e6b67da78d9f49fb6d5f34fefa328a304dfe8e
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ 570d178d9aab5e7b03bdf17302b91cece28924d72f204567dd6c2fcb1667e883
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ 5839a53cafa501af1381d6f0db2084e32bb64d0a1461a278f587cc0ea4fc62e2
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ 664733ad6a589f5aa51e830e2a10c0768b854f28cc278316938c00ce1c4c60e2
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ 907ca8c9f37f4bb34cef8feea392fff0d811b7d1fff826dc84c8330c0b158227
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ ae5db48f55baf22a5d27ab7965647d55c3f6aba87733e5f0ae57188d956a8a7b
â”‚   â”œâ”€â”€ VERSION
â”‚   â”œâ”€â”€ json
â”‚   â””â”€â”€ layer.tar
â”œâ”€â”€ manifest.json
â””â”€â”€ repositories

8 directories, 24 files</code></pre></div><p>Docker é•œåƒå¹¶ä¸ç¬¦åˆ OCI é•œåƒæ ‡å‡†ï¼Œä½† OCI çš„é•œåƒæ ‡å‡†åŸºäº Docker é•œåƒæ ‡å‡†ï¼Œå› æ­¤ä¸¤è€…åœ¨ç»“æ„ä¸Šæ˜¯ç±»ä¼¼çš„ï¼Œæœ‰ä¸€å®šå¯¹åº”å…³ç³»</p><p>ä½¿ç”¨Â <a href=https://github.com/containers/skopeo rel="noopener noreferrer" target=_blank>skopeo</a>Â å¯ä»¥å°† Docker é•œåƒè½¬åŒ–ä¸º OCI é•œåƒ</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ skopeo copy docker-archive:nginx.tar oci:nginx-oci-image
$ tree nginx-oci-image
nginx-oci-image
â”œâ”€â”€ blobs
â”‚   â””â”€â”€ sha256
â”‚       â”œâ”€â”€ 365ede46b010c470bbbd13f6bacc0df1700116f4c3a01f25a0fab726b7860e31
â”‚       â”œâ”€â”€ 50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd
â”‚       â”œâ”€â”€ 55bc6f293903816a086b9803b0fac7d6e854976aa96cfaacd66b39b4754415d0
â”‚       â”œâ”€â”€ 7a33d678a8761d2b10b60fe4da32e70e201d65550d2601f9b2e3e5fb4cc6e115
â”‚       â”œâ”€â”€ 861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d
â”‚       â”œâ”€â”€ af84cea3992c73a86ca5b3fcb8043f0964308be3db3dbc93222c589b15e90ba7
â”‚       â”œâ”€â”€ ba28188e316f3a7d8b65f6496a57cb9ce5f59b636ed0b0fae8bf564723321448
â”‚       â”œâ”€â”€ c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e
â”‚       â””â”€â”€ f0baa6626451c47bb1cb7f72d5cb0e732283a231fa4cb001a36b55e5fc31640f
â”œâ”€â”€ index.json
â””â”€â”€ oci-layout

3 directories, 11 files</code></pre></div><p>index.json æ˜¯Â <a href=https://github.com/opencontainers/image-spec/blob/main/image-index.md rel="noopener noreferrer" target=_blank>image index</a>ï¼Œç”¨äºç´¢å¼• manifest æ–‡ä»¶ï¼Œè·¨å¹³å°å’Œæ¶æ„çš„é•œåƒå¯èƒ½å¯¹æ¯ä¸€ä¸ªå¹³å°éƒ½æœ‰ä¸€ä¸ª manifest æ–‡ä»¶</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ cat nginx-oci-image/index.json | json_pp
{
   &quot;manifests&quot; : [
      {
         &quot;digest&quot; : &quot;sha256:c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.manifest.v1+json&quot;,
         &quot;size&quot; : 1338
      }
   ],
   &quot;schemaVersion&quot; : 2
}</code></pre></div><p><code>manifests.digest</code>Â ä¸­å°±æ˜¯ manifest æ–‡ä»¶æ‘˜è¦å€¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ–‡ä»¶åï¼Œç”±æ­¤å¯ä»¥å¾ˆå¿«æ‰¾åˆ° manifest æ–‡ä»¶ã€‚<a href=https://github.com/opencontainers/image-spec/blob/master/manifest.md rel="noopener noreferrer" target=_blank>image manifest</a>Â ç´¢å¼•äº†é•œåƒçš„é…ç½®å’Œ layer å±‚æ–‡ä»¶ä½ç½®åŠå…¶ç±»å‹ã€‚å¯ä»¥çœ‹å‡ºï¼Œé…ç½®æ˜¯ä¸€ä¸ª JSON æ–‡ä»¶ï¼Œè€Œæ¯ä¸€å±‚æ˜¯è¿›è¡Œå‹ç¼©åå­˜å‚¨çš„ã€‚</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ cat nginx-oci-image/blobs/sha256/c26fc88390de90988b10de0590c08942dd7b1346c9ec912e9a0c763bc6de1e9e | json_pp
{
   &quot;config&quot; : {
      &quot;digest&quot; : &quot;sha256:50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd&quot;,
      &quot;mediaType&quot; : &quot;application/vnd.oci.image.config.v1+json&quot;,
      &quot;size&quot; : 7075
   },
   &quot;layers&quot; : [
      {
         &quot;digest&quot; : &quot;sha256:861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 29922714
      },
      {
         &quot;digest&quot; : &quot;sha256:f0baa6626451c47bb1cb7f72d5cb0e732283a231fa4cb001a36b55e5fc31640f&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 39120911
      },
      {
         &quot;digest&quot; : &quot;sha256:ba28188e316f3a7d8b65f6496a57cb9ce5f59b636ed0b0fae8bf564723321448&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 630
      },
      {
         &quot;digest&quot; : &quot;sha256:7a33d678a8761d2b10b60fe4da32e70e201d65550d2601f9b2e3e5fb4cc6e115&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 975
      },
      {
         &quot;digest&quot; : &quot;sha256:af84cea3992c73a86ca5b3fcb8043f0964308be3db3dbc93222c589b15e90ba7&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 376
      },
      {
         &quot;digest&quot; : &quot;sha256:365ede46b010c470bbbd13f6bacc0df1700116f4c3a01f25a0fab726b7860e31&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 1234
      },
      {
         &quot;digest&quot; : &quot;sha256:55bc6f293903816a086b9803b0fac7d6e854976aa96cfaacd66b39b4754415d0&quot;,
         &quot;mediaType&quot; : &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
         &quot;size&quot; : 1439
      }
   ],
   &quot;mediaType&quot; : &quot;application/vnd.oci.image.manifest.v1+json&quot;,
   &quot;schemaVersion&quot; : 2
}</code></pre></div><p><a href=https://github.com/opencontainers/image-spec/blob/main/config.md rel="noopener noreferrer" target=_blank>image configuration</a>Â æè¿°äº†é•œåƒæ‰€å±çš„å¹³å°ï¼Œé…ç½®ï¼ˆç±»ä¼¼åœ¨ Dockerfile ä¸­å®šä¹‰çš„ç¯å¢ƒå˜é‡ã€ç«¯å£ã€ENTRYPOINTã€CMD ç­‰ï¼‰ï¼Œä»¥åŠå„ä¸ªå±‚çš„å†å²è®°å½•ï¼Œ<code>created_by</code>Â æ˜¯åˆ›å»ºå±‚çš„å‘½ä»¤ï¼Œ<code>empty_layer</code>Â è¡¨ç¤ºè¯¥å±‚æ˜¯å¦å¯¼è‡´æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ã€‚æœ€åæ˜¯å„ä¸ªå±‚æœªå‹ç¼©å†…å®¹çš„æ‘˜è¦ï¼ˆ<code>diff_ids</code>ï¼‰</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ cat nginx-oci-image/blobs/sha256/50c4949e5433b622681d55d92f68bc289ed0b91536d07b0ed88d057fd95ba2bd | json_pp
{
   &quot;architecture&quot; : &quot;arm64&quot;,
   &quot;config&quot; : {
      &quot;Cmd&quot; : [
         &quot;nginx&quot;,
         &quot;-g&quot;,
         &quot;daemon off;&quot;
      ],
      &quot;Entrypoint&quot; : [
         &quot;/docker-entrypoint.sh&quot;
      ],
      &quot;Env&quot; : [
         &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,
         &quot;NGINX_VERSION=1.25.1&quot;,
         &quot;NJS_VERSION=0.7.12&quot;,
         &quot;PKG_RELEASE=1~bookworm&quot;
      ],
      &quot;ExposedPorts&quot; : {
         &quot;80/tcp&quot; : {}
      },
      &quot;Labels&quot; : {
         &quot;maintainer&quot; : &quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;
      },
      &quot;StopSignal&quot; : &quot;SIGQUIT&quot;
   },
   &quot;created&quot; : &quot;2023-07-04T04:07:41.151938228Z&quot;,
   &quot;history&quot; : [
      {
         &quot;created&quot; : &quot;2023-07-04T01:57:35.692631089Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) ADD file:71fd66666294148382f2e6a09ae5e277d4c4e9c74402ab64b693a79387b67a09 in / &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T01:57:36.102524763Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  CMD [\&quot;bash\&quot;]&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:14.692138315Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  LABEL maintainer=NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:14.774865505Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  ENV NGINX_VERSION=1.25.1&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:14.852567081Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  ENV NJS_VERSION=0.7.12&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:14.931774163Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  ENV PKG_RELEASE=1~bookworm&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.172513807Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c set -x     &amp;&amp; groupadd --system --gid 101 nginx     &amp;&amp; useradd --system --gid nginx --no-create-home --home /nonexistent --comment \&quot;nginx user\&quot; --shell /bin/false --uid 101 nginx     &amp;&amp; apt-get update     &amp;&amp; apt-get install --no-install-recommends --no-install-suggests -y gnupg1 ca-certificates     &amp;&amp;     NGINX_GPGKEY=573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62;     NGINX_GPGKEY_PATH=/usr/share/keyrings/nginx-archive-keyring.gpg;     export GNUPGHOME=\&quot;$(mktemp -d)\&quot;;     found=&#039;&#039;;     for server in         hkp://keyserver.ubuntu.com:80         pgp.mit.edu     ; do         echo \&quot;Fetching GPG key $NGINX_GPGKEY from $server\&quot;;         gpg1 --keyserver \&quot;$server\&quot; --keyserver-options timeout=10 --recv-keys \&quot;$NGINX_GPGKEY\&quot; &amp;&amp; found=yes &amp;&amp; break;     done;     test -z \&quot;$found\&quot; &amp;&amp; echo &gt;&amp;2 \&quot;error: failed to fetch GPG key $NGINX_GPGKEY\&quot; &amp;&amp; exit 1;     gpg1 --export \&quot;$NGINX_GPGKEY\&quot; &gt; \&quot;$NGINX_GPGKEY_PATH\&quot; ;     rm -rf \&quot;$GNUPGHOME\&quot;;     apt-get remove --purge --auto-remove -y gnupg1 &amp;&amp; rm -rf /var/lib/apt/lists/*     &amp;&amp; dpkgArch=\&quot;$(dpkg --print-architecture)\&quot;     &amp;&amp; nginxPackages=\&quot;         nginx=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-${PKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}+${NJS_VERSION}-${PKG_RELEASE}     \&quot;     &amp;&amp; case \&quot;$dpkgArch\&quot; in         amd64|arm64)             echo \&quot;deb [signed-by=$NGINX_GPGKEY_PATH] https://nginx.org/packages/mainline/debian/ bookworm nginx\&quot; &gt;&gt; /etc/apt/sources.list.d/nginx.list             &amp;&amp; apt-get update             ;;         *)             echo \&quot;deb-src [signed-by=$NGINX_GPGKEY_PATH] https://nginx.org/packages/mainline/debian/ bookworm nginx\&quot; &gt;&gt; /etc/apt/sources.list.d/nginx.list                         &amp;&amp; tempDir=\&quot;$(mktemp -d)\&quot;             &amp;&amp; chmod 777 \&quot;$tempDir\&quot;                         &amp;&amp; savedAptMark=\&quot;$(apt-mark showmanual)\&quot;                         &amp;&amp; apt-get update             &amp;&amp; apt-get build-dep -y $nginxPackages             &amp;&amp; (                 cd \&quot;$tempDir\&quot;                 &amp;&amp; DEB_BUILD_OPTIONS=\&quot;nocheck parallel=$(nproc)\&quot;                     apt-get source --compile $nginxPackages             )                         &amp;&amp; apt-mark showmanual | xargs apt-mark auto &gt; /dev/null             &amp;&amp; { [ -z \&quot;$savedAptMark\&quot; ] || apt-mark manual $savedAptMark; }                         &amp;&amp; ls -lAFh \&quot;$tempDir\&quot;             &amp;&amp; ( cd \&quot;$tempDir\&quot; &amp;&amp; dpkg-scanpackages . &gt; Packages )             &amp;&amp; grep &#039;^Package: &#039; \&quot;$tempDir/Packages\&quot;             &amp;&amp; echo \&quot;deb [ trusted=yes ] file://$tempDir ./\&quot; &gt; /etc/apt/sources.list.d/temp.list             &amp;&amp; apt-get -o Acquire::GzipIndexes=false update             ;;     esac         &amp;&amp; apt-get install --no-install-recommends --no-install-suggests -y                         $nginxPackages                         gettext-base                         curl     &amp;&amp; apt-get remove --purge --auto-remove -y &amp;&amp; rm -rf /var/lib/apt/lists/* /etc/apt/sources.list.d/nginx.list         &amp;&amp; if [ -n \&quot;$tempDir\&quot; ]; then         apt-get purge -y --auto-remove         &amp;&amp; rm -rf \&quot;$tempDir\&quot; /etc/apt/sources.list.d/temp.list;     fi     &amp;&amp; ln -sf /dev/stdout /var/log/nginx/access.log     &amp;&amp; ln -sf /dev/stderr /var/log/nginx/error.log     &amp;&amp; mkdir /docker-entrypoint.d&quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.509711194Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) COPY file:7b307b62e82255f040c9812421a30090bf9abf3685f27b02d77fcca99f997911 in / &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.592126807Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) COPY file:5c18272734349488bd0c94ec8d382c872c1a0a435cca13bd4671353d6021d2cb in /docker-entrypoint.d &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.669169781Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) COPY file:d4375883ed5db364232ccf781e8ad28514cd005edb385d43dbfb984f2c63edb9 in /docker-entrypoint.d &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.748027972Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) COPY file:36429cfeeb299f9913b84ea136b004be12fbe4bb4f975a977a3608044e8bfa91 in /docker-entrypoint.d &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.825522699Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop) COPY file:e57eef017a414ca793499729d80a7b9075790c9a804f930f1417e56d506970cf in /docker-entrypoint.d &quot;
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.903102418Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  ENTRYPOINT [\&quot;/docker-entrypoint.sh\&quot;]&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:40.983008834Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  EXPOSE 80&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:41.065899155Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  STOPSIGNAL SIGQUIT&quot;,
         &quot;empty_layer&quot; : true
      },
      {
         &quot;created&quot; : &quot;2023-07-04T04:07:41.151938228Z&quot;,
         &quot;created_by&quot; : &quot;/bin/sh -c #(nop)  CMD [\&quot;nginx\&quot; \&quot;-g\&quot; \&quot;daemon off;\&quot;]&quot;,
         &quot;empty_layer&quot; : true
      }
   ],
   &quot;os&quot; : &quot;linux&quot;,
   &quot;rootfs&quot; : {
      &quot;diff_ids&quot; : [
         &quot;sha256:efd1965f1684506744544d66c57387a60bd89607480e2dbc89bf3e8a30081bc1&quot;,
         &quot;sha256:c58d5a26ffa8db76c403fb4c29965689bb96d291f6b7973fcd2da7458e77b09f&quot;,
         &quot;sha256:4e6bef96e37ee051573dda6c367adb7310ef7a87128ce00fcf0ce2cbd2d8779b&quot;,
         &quot;sha256:ad6517b0c9140f029ee765885ec82f571513bc8db2f834aa1d204f67d61cad12&quot;,
         &quot;sha256:7cd1e5cbf1244b4fcca08e842c7672aba5ead973c2a4532496278aa5846802a3&quot;,
         &quot;sha256:45437bbd87f23643f7893993d62b4affddbdf91808ff8cd0530b301acbc5f120&quot;,
         &quot;sha256:0a13d2aaa54c14621a732a3ffe6f25a487aa726529ad152c4174d2e741b7ef66&quot;
      ],
      &quot;type&quot; : &quot;layers&quot;
   },
   &quot;variant&quot; : &quot;v8&quot;
}</code></pre></div><p>å¦‚æœå¯¹å±‚è¿›è¡Œè§£å‹ï¼Œå°±å¯ä»¥å¾—åˆ°é‡Œé¢æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Bash</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-bash>$ mkdir rootfs
$ tar -zxvf nginx-oci-image/blobs/sha256/861c679dd19193ec028cddb97f5b1e18738ec0525617ff698df4a055606af93d -C rootfs/
$ tree rootfs -L 1
rootfs
â”œâ”€â”€ bin -&gt; usr/bin
â”œâ”€â”€ boot
â”œâ”€â”€ dev
â”œâ”€â”€ etc
â”œâ”€â”€ home
â”œâ”€â”€ lib -&gt; usr/lib
â”œâ”€â”€ media
â”œâ”€â”€ mnt
â”œâ”€â”€ opt
â”œâ”€â”€ proc
â”œâ”€â”€ root
â”œâ”€â”€ run
â”œâ”€â”€ sbin -&gt; usr/sbin
â”œâ”€â”€ srv
â”œâ”€â”€ sys
â”œâ”€â”€ tmp
â”œâ”€â”€ usr
â””â”€â”€ var

19 directories, 0 files</code></pre></div><p><br></p><h3 id="">è¿è¡Œæ—¶</h3><p>runC æ˜¯çº¯ç²¹çš„ runtimeï¼ŒOCI çš„ runtime-spec åŸºäº runC åˆ¶å®š</p><p>è¦å¯åŠ¨ runCï¼ˆæˆ–å…¶å®ƒç¬¦åˆ OCI runtime-spec çš„è¿è¡Œæ—¶ï¼‰ï¼Œéœ€è¦ä¸€ä¸ª rootfs å’ŒÂ <code>config.json</code>ï¼Œrootfs å°±æ˜¯å®¹å™¨è¿è¡Œçš„æ–‡ä»¶ç³»ç»Ÿï¼Œ<code>config.json</code>Â åˆ™å®šä¹‰äº†è¿è¡Œçš„é…ç½®</p><p>rootfs å¯ä»¥ä»é•œåƒ layer ä¸­ä¸€å±‚å±‚è§£åŒ…åˆå¹¶å¾—åˆ°ã€‚<code>config.json</code>Â çš„ä¸€ä¸ªå¯èƒ½ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Json</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-json>{
  &quot;ociVersion&quot;: &quot;0.1.0&quot;,
  &quot;root&quot;: {
    &quot;path&quot;: &quot;rootfs&quot;,
    &quot;readonly&quot;: true
  },
  &quot;mounts&quot;: [
    {
      &quot;destination&quot;: &quot;/data&quot;,
      &quot;type&quot;: &quot;none&quot;,
      &quot;source&quot;: &quot;/volumes/testing&quot;,
      &quot;options&quot;: [&quot;rbind&quot;,&quot;rw&quot;]
    }
  ],
  &quot;process&quot;: {
    &quot;env&quot;: [
      &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,
      &quot;TERM=xterm&quot;
    ],
    &quot;args&quot;: [&quot;sh&quot;]
  }
}</code></pre></div><p>é€šè¿‡Â <code>runc run</code>Â å³å¯å¯åŠ¨å®¹å™¨ï¼Œä¼šè‡ªåŠ¨è¯»å–è·¯å¾„ä¸‹çš„Â <code>config.json</code>ã€‚å…¶ä¸­Â <code>root.path</code>Â æŒ‡å®šäº† rootfs çš„è·¯å¾„</p><p><code>config.json</code>Â çš„é…ç½®å’Œå¹³å¸¸ä½¿ç”¨çš„ Docker ç­‰åŸºæœ¬éƒ½èƒ½å¤§è‡´å¯¹ä¸Šï¼Œä½† runC æ˜¯ä¸åŒ…æ‹¬ç½‘ç»œå®ç°çš„ï¼Œé€šè¿‡Â <code>runc exec</code>Â è¿›å…¥å®¹å™¨å†…å°±å¯ä»¥å‘ç°åªæœ‰ä¸€å¼  loop ç½‘å¡</p><p>è¿™äº›éƒ¨åˆ†æ˜¯ç•™ç»™æ›´é«˜çº§çš„å®¹å™¨è¿è¡Œæ—¶å»å®Œæˆï¼Œä¾‹å¦‚å¯ä»¥åœ¨æ ‡å‡†ä¸­ç”Ÿå‘½å‘¨æœŸçš„Â <code>createContainer</code>Â å’ŒÂ <code>start</code>Â ä¹‹é—´è¿›è¡Œç½‘å¡åˆ›å»ºï¼Œå­˜å‚¨æŒ‚è½½ç­‰æ“ä½œ</p><p>runtime è¿™å—è¿˜æœ‰ä¸€äº›æœ‰æ„æ€çš„å®ç°ï¼Œæ¯”å¦‚Â <a href=https://katacontainers.io/ rel="noopener noreferrer" target=_blank>Kata</a>Â å’ŒÂ <a href=https://gvisor.dev/ rel="noopener noreferrer" target=_blank>gVisor</a>Â ä¹‹ç±»çš„å†…æ ¸å®¹å™¨ï¼Œå‰è€…ç»™å®¹å™¨è·‘äº†ä¸€ä¸ªå®Œæ•´çš„ VMMï¼ˆQEMU/KVM ç­‰ï¼‰æ¥åšå†…æ ¸éš”ç¦»ï¼Œåè€…ç»™æ¯ä¸ªå®¹å™¨å¡äº†ä¸€ä¸ª Go å†™çš„æ¨¡æ‹Ÿå†…æ ¸ï¼Œé‡å®šå‘æ‰€æœ‰ syscall è¿‡å»ï¼Œä»£æ›¿å®¿ä¸»æœºå†…æ ¸</p><p><br></p><h3 id="">ä¸€äº›å†å²</h3><p>åœ¨æ—©æœŸï¼ŒDocker æ‹¥æœ‰å®¹å™¨é¢†åŸŸçš„ç»å¯¹é¢†å¯¼æƒï¼Œä½†ä½œä¸ºä¸€ä¸ªå•†ä¸šå…¬å¸ï¼Œè¿™å®é™…ä¸Šå¼•å‘äº†å…¶å®ƒå…¬å¸ï¼ˆRed Hatã€Google ç­‰ï¼‰çš„ä¸æ»¡å’Œæ‹…å¿§</p><p>Google ä¹Ÿå°è¯•è¿‡å¼€æºè‡ªèº«çš„å®¹å™¨æ–¹æ¡ˆï¼Œä½†æœªèƒ½æˆåŠŸã€‚å› æ­¤ Google å‘ Docker æè®®å…±åŒæ¨åŠ¨ä¸€ä¸ªä¸­ç«‹çš„å®¹å™¨è¿è¡Œæ—¶ä½œä¸º Docker é¡¹ç›®çš„æ ¸å¿ƒä¾èµ–ï¼Œä½†æ²¡æœ‰å¾—åˆ° Docker çš„åŒæ„</p><p><br></p><p>åœ¨ 2015 å¹´ï¼ŒDocker å…¬å¸çš„å¼ºåŠ¿é•¿æœŸé¥±å—ç¤¾åŒºè¯Ÿç—…ï¼Œä¸ºäº†è¡¨ç¤ºè¯šæ„ï¼ŒDocker å’Œ Googleã€Red Hatã€CoreOS å†³å®šæˆç«‹ä¸€ä¸ªã€Œä¸­ç«‹ã€çš„åŸºé‡‘ä¼šï¼Œå…±åŒåˆ¶å®šä¸€å¥—å®¹å™¨çš„æ ‡å‡†å’Œè§„èŒƒï¼Œè¿™å¥—æ ‡å‡†å°±æ˜¯ OCIã€‚Docker ä¹Ÿå°†è‡ªèº«çš„ libcontainer æå‡ºï¼Œæ”¹åä¸º runCï¼Œä½œä¸º OCI æ ‡å‡†åˆ¶å®šçš„åŸºç¡€</p><p><br></p><p>Docker ä½œä¸ºå½“æ—¶å®¹å™¨çš„äº‹å®æ ‡å‡†ï¼Œæœ¬èº«å¹¶æ— å¤šå¤§åŠ¨åŠ›å»æ¨è¿› OCI çš„å‘å±•ï¼ŒOCI ä¹Ÿæœªèƒ½å‰Šå¼± Docker çš„åœ°ä½ã€‚Google å’Œ Red Hat åˆ©ç”¨è‡ªå·±åœ¨å¤§è§„æ¨¡é›†ç¾¤å’Œå¹³å°ä¸Šçš„ç»éªŒï¼Œåˆæˆç«‹äº† CNCFï¼ˆCloud Native Computing Foundationï¼‰ï¼Œä»¥ Google å†…éƒ¨çš„ Borg å­µåŒ–å‡ºçš„ Kubernetes é¡¹ç›®ä¸ºåŸºç¡€ï¼Œä»å¹³å°ä¾§æ¶ç©º Dockerï¼Œä»ç°åœ¨æ¥çœ‹ï¼Œè¿™ä¸ªæˆ˜ç•¥éå¸¸æˆåŠŸï¼ŒDocker Swarm é¢å¯¹ Kubernetes æ— ç–‘æ˜¯å¤±è´¥çš„ï¼ŒSwarm é¡¹ç›®è¢«å–æ¶ˆï¼ŒDocker ä¼ä¸šç‰ˆç›´æ¥å†…ç½® Kubernetesï¼Œæ”¾å¼ƒå¼€æºç¤¾åŒºç«äº‰ï¼Œè¿›è¡Œå•†ä¸šåŒ–è½¬å‹ã€‚ç°åœ¨ï¼ŒCNCF æ¶‰åŠè¶Šæ¥è¶Šå¤šçš„é¢†åŸŸï¼Œæˆä¸ºäº†äº‘åŸç”Ÿæ–°çš„ç»å¯¹æƒå¨</p><p><br></p><h2 id="">é«˜çº§å®¹å™¨è¿è¡Œæ—¶</h2><p>runC åªå®ç°äº† OCI çš„ runtime-specï¼ˆè¿™å¥è¯æœ‰ç‚¹åˆ«æ‰­ï¼Œæ˜¯å…ˆæœ‰çš„ runCï¼Œæ‰æœ‰çš„ OCIï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯æ— æ³•å¤„ç†é•œåƒçš„ï¼Œåªè´Ÿè´£è¿è¡Œè¿›ç¨‹å’Œéš”ç¦»ã€‚è¿™æ˜¯ä¸€ç§ä½çº§å®¹å™¨è¿è¡Œæ—¶ï¼Œè€Œä¸” OCI ä¹Ÿåªä¸“æ³¨æ ¸å¿ƒçš„å®¹å™¨åŠŸèƒ½ï¼Œç½‘ç»œã€å­˜å‚¨æ ‡å‡†éƒ½æ²¡æœ‰è¿›è¡Œå®šä¹‰ï¼ˆç›®å‰æ¯”è¾ƒæµè¡Œçš„ç½‘ç»œå’Œå­˜å‚¨æ ‡å‡†åˆ†åˆ«æ˜¯Â <a href=https://github.com/containernetworking/cni rel="noopener noreferrer" target=_blank>CNI</a>Â å’ŒÂ <a href=https://github.com/container-storage-interface/spec/blob/master/spec.md rel="noopener noreferrer" target=_blank>CSI</a>ï¼‰</p><p>æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬æŒ‡çš„å®¹å™¨è¿è¡Œæ—¶æ˜¯é«˜çº§å®¹å™¨è¿è¡Œæ—¶ï¼Œé«˜çº§å®¹å™¨è¿è¡Œæ—¶æœ€åŸºæœ¬çš„åŠŸèƒ½å°±æ˜¯èƒ½å¤Ÿå°†é•œåƒå¤„ç†æˆ rootfs æ¥ä¼ é€’ç»™ runC ç­‰ä½çº§è¿è¡Œæ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜è¦å¤„ç†é•œåƒçš„ layer å…±äº«ç­‰å¾ˆå¤šé—®é¢˜ã€‚é€šå¸¸ä¹Ÿä¼šåŒ…æ‹¬ç›‘æ§ã€æ—¥å¿—ã€ç®¡ç†ã€API ç­‰æ›´å¤šåŠŸèƒ½</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F7265c446-afe8-44ed-b5f3-a0ad2f7c4530%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D1ff39666ef5811f55fccd4faa45d3623786c11899219dec16e5c74028a116885%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=946561b6-9cef-4dd2-a166-cead429eaa3d" class=glightbox data-aspect-ratio=2.635046 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:2.635046><img alt=Image loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F7265c446-afe8-44ed-b5f3-a0ad2f7c4530%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D1ff39666ef5811f55fccd4faa45d3623786c11899219dec16e5c74028a116885%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=946561b6-9cef-4dd2-a166-cead429eaa3d"/></a></figure><p><br></p><h3 id=containerd>containerd</h3><p>ä¸€ä¸ªå…¸å‹çš„é«˜çº§å®¹å™¨è¿è¡Œæ—¶å°±æ˜¯ containerdï¼ˆæœ€å…¸å‹çš„åº”è¯¥æ˜¯ Dockerï¼Œä½†å¤§å®¶éƒ½å¤ªç†Ÿæ‚‰äº†å°±æ‡’å¾—è¯´äº†ï¼‰ï¼Œcontainerd ä» Docker é¡¹ç›®ä¸­ç‹¬ç«‹å‡ºæ¥</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F62de8781-6120-43e8-ae1e-f39c9f134457%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D97572f3594857cc69ec6c0e1fd83bd0c5410357aa99b4171d759d565d50c15b8%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=71146b10-a4eb-497d-a6d1-b8e17ab3051c" class=glightbox data-aspect-ratio=1.650000 data-description="â¬†ï¸ Docker æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥è‡³äºåœ¨è¿™é‡Œç”šè‡³å°†å®ƒåˆ’åˆ†ä¸ºäº†ä¸€ä¸ªå¹³å°" data-gallery=article-images data-title="â¬†ï¸ Docker æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥è‡³äºåœ¨è¿™é‡Œç”šè‡³å°†å®ƒåˆ’åˆ†ä¸ºäº†ä¸€ä¸ªå¹³å°" style=aspect-ratio:1.650000><img alt="â¬†ï¸ Docker æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥è‡³äºåœ¨è¿™é‡Œç”šè‡³å°†å®ƒåˆ’åˆ†ä¸ºäº†ä¸€ä¸ªå¹³å°" loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F62de8781-6120-43e8-ae1e-f39c9f134457%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163647Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D97572f3594857cc69ec6c0e1fd83bd0c5410357aa99b4171d759d565d50c15b8%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=71146b10-a4eb-497d-a6d1-b8e17ab3051c"/></a><figcaption>â¬†ï¸ Docker æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥è‡³äºåœ¨è¿™é‡Œç”šè‡³å°†å®ƒåˆ’åˆ†ä¸ºäº†ä¸€ä¸ªå¹³å°</figcaption></figure><p>containerd çš„å®ç°é«˜åº¦æ¨¡å—åŒ–ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´ä½¿ç”¨ ttrpcï¼ˆgRPC çš„æ”¹è‰¯ï¼‰é€šä¿¡ï¼Œå¹¶ä¸”æ”¯æŒé€šè¿‡æ’ä»¶æ¥æ‰©å±•ã€‚containerd ä¸­é»˜è®¤ä½¿ç”¨ runC ä½œä¸ºä½çº§å®¹å™¨è¿è¡Œæ—¶ï¼Œä¹Ÿæ”¯æŒæ ¹æ®å¹³å°å’Œéœ€æ±‚æ›¿æ¢æˆ runhcsã€Kata ç­‰</p><p>containerd æ²¡æœ‰æ‰“åŒ…ç½‘ç»œå’Œå­˜å‚¨çš„å®ç°ï¼Œåƒç½‘ç»œå°±æ˜¯ä½¿ç”¨ CNI æ¥è®©å¤–éƒ¨æä¾›å…·ä½“å®ç°</p><p>containerd çš„è®¾è®¡ç›®æ ‡æ˜¯æˆä¸ºæ›´é«˜çº§ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç»„ä»¶æ¥è¢«è°ƒç”¨ï¼Œè€Œéç›´æ¥æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ï¼ŒDocker ç›®å‰å°±æ˜¯é€šè¿‡ containerd æ¥ç®¡ç†å®¹å™¨</p><p><br></p><h3 id=cri-o>CRI-O</h3><p>CRI-O çš„ç›®çš„æ˜¯æ„å»ºä¸€ä¸ªæœ€ç®€å•çš„ K8s ä¸“ç”¨è¿è¡Œæ—¶ï¼Œæ˜¯ä¸€ä¸ªæœ€å°åŒ–çš„å®ç°ï¼Œä¸éœ€è¦é¢å‘æœ€ç»ˆç”¨æˆ·çš„é‚£äº›å¤æ‚åŠŸèƒ½</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fe15a0e6c-d254-4d02-9280-279cb94b166a%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3Def5f1cf1b3e09df3360870bab9f939dec061b16ccece1c6953fd8f3a6f652c73%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=3aa91ef3-87a7-45ee-b200-8493466e5d88" class=glightbox data-aspect-ratio=1.665421 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:1.665421><img alt=Image loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fe15a0e6c-d254-4d02-9280-279cb94b166a%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3Def5f1cf1b3e09df3360870bab9f939dec061b16ccece1c6953fd8f3a6f652c73%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=3aa91ef3-87a7-45ee-b200-8493466e5d88"/></a></figure><p>å½“ä¸€ä¸ª kubelet çš„åˆ›å»ºè¯·æ±‚æ¥ä¸´æ—¶ï¼š</p><ol><li>CRI-O ä¼šæ‹‰å–é•œåƒï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</li><li>å°†é•œåƒè§£å‹ï¼Œæ„å»º rootfs å’Œ OCI runtime-spec çš„Â <code>config.json</code></li><li>è°ƒç”¨ä½å±‚çš„ OCI runtimeï¼ˆrunC ç­‰ï¼‰</li><li>æ¯ä¸ªå®¹å™¨ç”±ä¸€ä¸ª conmon è¿›ç¨‹è¿›è¡Œç›‘æ§ï¼Œå®ƒä¼šä¸º PID ä¸º 1 çš„è¿›ç¨‹æä¾›ä¸€ä¸ªÂ <code>pty</code>ï¼ŒåŒæ—¶å¤„ç†æ—¥å¿—å’Œè®°å½•é€€å‡ºä»£ç </li><li>é€šè¿‡ CNI è°ƒç”¨ç½‘ç»œæ’ä»¶é…ç½®ç½‘ç»œ</li></ol><p><br></p><h3 id=podman>Podman</h3><p>containerd å’Œ CRI-O éƒ½ä¸æ˜¯ç›´æ¥é¢å‘ç”¨æˆ·çš„ï¼Œé¢å‘ç”¨æˆ·çš„å®¹å™¨è¿è¡Œæ—¶æœ€å…¸å‹çš„å°±æ˜¯ Dockerï¼Œè€Œ Podman ä¹Ÿæ˜¯ä¸€ä¸ª Docker çš„ç«å“ï¼Œç”± Red Hat æ¨å‡º</p><p>Podman å…¼å®¹å¤§éƒ¨åˆ†çš„ Docker å‘½ä»¤ï¼Œç”šè‡³å¯ä»¥ç›´æ¥Â <code>alias docker=podman</code>Â æ¥æ— ç¼æ›¿æ¢ã€‚</p><p>Podman çš„ç‰¹è‰²åœ¨äºå¯¹ rootless container çš„è‰¯å¥½æ”¯æŒï¼Œè¿™èƒ½å¸¦æ¥æ›´å¥½çš„å®‰å…¨æ€§ï¼›å¦å¤–æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ Pod æ¨¡å¼ï¼Œèƒ½ç›´æ¥ä»ä¸€ä¸ª K8s çš„ Pod YAML ä¸­æ¥è¿è¡Œå®¹å™¨</p><p><br></p><h2 id=cricontainer-runtime-interface>CRIï¼ˆContainer Runtime Interfaceï¼‰</h2><p><a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md rel="noopener noreferrer" target=_blank>CRIï¼ˆContainer Runtime Interfaceï¼‰</a>Â æ˜¯ K8s çš„ä¸€å¥—å®¹å™¨æ¥å£åè®®ï¼Œç”¨äº kubelet å’Œå®¹å™¨è¿è¡Œæ—¶ä¹‹é—´çš„é€šä¿¡ï¼Œé¿å…ç›´æ¥ä¾èµ–å…·ä½“å®ç°</p><p>OCI runtime-spec æ˜¯é¢å‘ä½çº§å®¹å™¨è¿è¡Œæ—¶çš„æ ‡å‡†ï¼Œè€Œ CRI æ˜¯é¢å‘é«˜çº§å®¹å™¨è¿è¡Œæ—¶çš„åè®®ï¼Œè¿˜åŒ…æ‹¬äº†ä¸€äº› Pod æ˜ å°„åˆ°å®¹å™¨æ‰€éœ€çš„ç›¸å…³æ¥å£ï¼Œå…¶åŸºäº gRPCï¼Œæ¥å£å®šä¹‰å¦‚ä¸‹</p><div class=notion-code-block><div class=notion-code-header><span class=notion-code-language>Protobuf</span> <button aria-label=å¤åˆ¶ä»£ç  title=å¤åˆ¶ä»£ç  class=notion-code-copy><svg fill=none viewBox="0 0 24 24" height=16 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=16><rect height=13 rx=2 ry=2 width=13 x=9 y=9></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class=copy-text>COPY</span></button></div><pre class=notion-code><code class=language-protobuf>service RuntimeService {
    rpc Version(VersionRequest) returns (VersionResponse) {}
    rpc RunPodSandbox(RunPodSandboxRequest) returns (RunPodSandboxResponse) {}
    rpc StopPodSandbox(StopPodSandboxRequest) returns (StopPodSandboxResponse) {}
    rpc RemovePodSandbox(RemovePodSandboxRequest) returns (RemovePodSandboxResponse) {}
    rpc PodSandboxStatus(PodSandboxStatusRequest) returns (PodSandboxStatusResponse) {}
    rpc ListPodSandbox(ListPodSandboxRequest) returns (ListPodSandboxResponse) {}
    rpc CreateContainer(CreateContainerRequest) returns (CreateContainerResponse) {}
    rpc StartContainer(StartContainerRequest) returns (StartContainerResponse) {}
    rpc StopContainer(StopContainerRequest) returns (StopContainerResponse) {}
    rpc RemoveContainer(RemoveContainerRequest) returns (RemoveContainerResponse) {}
    rpc ListContainers(ListContainersRequest) returns (ListContainersResponse) {}
    rpc ContainerStatus(ContainerStatusRequest) returns (ContainerStatusResponse) {}
    rpc UpdateContainerResources(UpdateContainerResourcesRequest) returns (UpdateContainerResourcesResponse) {}
    rpc ReopenContainerLog(ReopenContainerLogRequest) returns (ReopenContainerLogResponse) {}
    rpc ExecSync(ExecSyncRequest) returns (ExecSyncResponse) {}
    rpc Exec(ExecRequest) returns (ExecResponse) {}
    rpc Attach(AttachRequest) returns (AttachResponse) {}
    rpc PortForward(PortForwardRequest) returns (PortForwardResponse) {}
    rpc ContainerStats(ContainerStatsRequest) returns (ContainerStatsResponse) {}
    rpc ListContainerStats(ListContainerStatsRequest) returns (ListContainerStatsResponse) {}
    rpc PodSandboxStats(PodSandboxStatsRequest) returns (PodSandboxStatsResponse) {}
    rpc ListPodSandboxStats(ListPodSandboxStatsRequest) returns (ListPodSandboxStatsResponse) {}
    rpc UpdateRuntimeConfig(UpdateRuntimeConfigRequest) returns (UpdateRuntimeConfigResponse) {}
    rpc Status(StatusRequest) returns (StatusResponse) {}
    rpc CheckpointContainer(CheckpointContainerRequest) returns (CheckpointContainerResponse) {}
    rpc GetContainerEvents(GetEventsRequest) returns (stream ContainerEventResponse) {}
    rpc ListMetricDescriptors(ListMetricDescriptorsRequest) returns (ListMetricDescriptorsResponse) {}
    rpc ListPodSandboxMetrics(ListPodSandboxMetricsRequest) returns (ListPodSandboxMetricsResponse) {}
}

service ImageService {
    rpc ListImages(ListImagesRequest) returns (ListImagesResponse) {}
    rpc ImageStatus(ImageStatusRequest) returns (ImageStatusResponse) {}
    rpc PullImage(PullImageRequest) returns (PullImageResponse) {}
    rpc RemoveImage(RemoveImageRequest) returns (RemoveImageResponse) {}
    rpc ImageFsInfo(ImageFsInfoRequest) returns (ImageFsInfoResponse) {}
}</code></pre></div><p>æ—©æœŸï¼ˆ1.6 ç‰ˆæœ¬ä¹‹å‰ï¼‰K8s æ˜¯ç›´æ¥è°ƒç”¨ Docker API çš„ï¼Œä½†éšç€å®¹å™¨ç”Ÿæ€çš„å‘å±•ï¼Œå„ä¸ªå®¹å™¨è¿è¡Œæ—¶éƒ½å¸Œæœ›èƒ½åœ¨ K8s è¿™æºä¸€è„šï¼Œè¿™ä¸º kubelet çš„ç»´æŠ¤å¸¦æ¥äº†å¾ˆå¤§çš„è´Ÿæ‹…ã€‚å› æ­¤å°±æœ‰äº† CRIã€‚åœ¨è¿‡æ¸¡æœŸæ—¶ä¸ºäº†ä¿æŒå…¼å®¹ï¼ŒK8s å†…ç½®äº† dockershim ä½œä¸º CRI è¯·æ±‚åˆ° Docker API çš„é€‚é…å™¨ï¼Œåæ¥ K8s çš„æ‰€è°“ã€Œå¼ƒç”¨ Dockerã€æŒ‡çš„ containerd æˆç†Ÿåä¸å†å•ç‹¬ä¸º Docker ç»´æŠ¤ä¸€å¥—æ¥å£é€‚é…å™¨ï¼ˆdockershimï¼‰ï¼Œè€Œæ˜¯ç›´æ¥é‡‡ç”¨ CRI æ¥å£ï¼Œå„ä¸ª shimï¼ˆæ¥å£é€‚é…å™¨ï¼‰éœ€è¦ç”±ç”¨æˆ·è‡ªå·±å®‰è£…ï¼Œè„±ç¦»å‡º K8s çš„ä»£ç ï¼Œäºæ˜¯å°±æœ‰äº†è¯¥è¯´æ³•</p><p><br></p><h2 id=wasm>WASM</h2><p>ä¹‹å‰å°±æœ‰çœ‹åˆ°ç±»ä¼¼ã€ŒWASM+WASI æ›¿ä»£ Dockerã€çš„è¯´æ³•ï¼Œä¸€ç›´ä¸æ˜¯å¾ˆèƒ½ç†è§£ï¼ŒWASM åœ¨æˆ‘çš„è®¤çŸ¥ä¸­åº”è¯¥æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼ŒWASI æ˜¯ WASM çš„ç³»ç»Ÿæ¥å£ï¼Œä¸ºäº†è®© WASM è¿è¡Œåœ¨éæµè§ˆå™¨çš„ native ç¯å¢ƒä¸­ï¼ˆåƒ Node ä¸€æ ·ï¼‰ã€‚å› æ­¤ WASM+WASI çš„å¯¹æ¯”å¯¹è±¡åº”è¯¥æ˜¯ç±»ä¼¼ JVM ä¸€æ ·çš„ä¸œè¥¿ï¼Œä¸ºä»€ä¹ˆä¸å®¹å™¨æ‰¯ä¸Šäº†å…³ç³»ï¼Ÿ</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F05e22043-6194-4d98-a63b-239e9184bf8a%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D36ea94edb0cfe06532f4df0d592182ce1e3365f4e9b4b34702e73ced5f5b23d1%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=ec86724d-d10c-416a-bef6-8102b1e056f9" class=glightbox data-aspect-ratio=2.283105 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:2.283105><img alt=Image loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F05e22043-6194-4d98-a63b-239e9184bf8a%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3D36ea94edb0cfe06532f4df0d592182ce1e3365f4e9b4b34702e73ced5f5b23d1%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=ec86724d-d10c-416a-bef6-8102b1e056f9"/></a></figure><p>å‚è€ƒè¿™ç¯‡æ–‡ç« å’Œ Docker çš„å®˜æ–¹æ–‡æ¡£</p><ol><li>https://wasmlabs.dev/articles/docker-without-containers/</li><li>https://www.docker.com/blog/docker-wasm-technical-preview/</li></ol><p>ç®€å•æ¥è¯´ï¼ŒWasmEdge æä¾›äº†ä¸€ä¸ªç¬¦åˆ OCI runtime-spec çš„ WASI è¿è¡Œæ—¶ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ WasmEdge æ›¿ä»£ Docker ä¸­çš„å®¹å™¨è¿è¡Œæ—¶ã€‚åŒæ—¶é•œåƒä¸éœ€è¦åŒ…å«æ“ä½œç³»ç»Ÿæˆ–ä»»ä½•åŸºç¡€é•œåƒï¼Œå•ä¸ªÂ <code>.wasm</code>Â äºŒè¿›åˆ¶æ–‡ä»¶å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ</p><figure class="notion-image notion-image-center notion-image-page-width"><a href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa207d3c2-0fa9-4e86-88a3-7043ee6f505c%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3Da645b9bed631f4f808c53b6dade05e304a7a07bcda3e8febf6c10f3feddb99ec%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=71d09c0a-3f1b-4053-89ba-d3aa0b8dc921" class=glightbox data-aspect-ratio=2.322880 data-description="" data-gallery=article-images data-title=Image style=aspect-ratio:2.322880><img alt=Image loading=lazy src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa207d3c2-0fa9-4e86-88a3-7043ee6f505c%2Fimage.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DASIAZI2LB466WGZQVWSG%252F20260126%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20260126T163648Z%26X-Amz-Expires%3D3600%26X-Amz-Security-Token%3DIQoJb3JpZ2luX2VjEHgaCXVzLXdlc3QtMiJIMEYCIQDBwhjImcOVOOceGYjiYjhXCKqm4hf%252FHocg7o6NSMBURgIhAM6sUSHRxgrKYz%252BwmnqS66U8o%252BTGjmxks1XaNT2KjW%252FcKv8DCEEQABoMNjM3NDIzMTgzODA1IgwidpGzQh4I%252FCeiSowq3ANLBM8jSvAwZc8DGg9CpiqLVOJ0hFnuYmy2ivR1nCcaEwkkULtHlvnq%252BCahqtnOQ%252FBA24%252BudyLojuTxdZyd37t7Iqd0OUqRM%252FyhqWHavhMQnX9txSAx6m1Oz58XUvSu5bkVyfxNcvEksLTQxnDKV%252BBWT6hf2jO9z2FD%252Frw8hesTo3XYTceTCoSEnnsO4536AiwvTTgFDJoiPHisznYMpiFoAqyYy%252FTDPUucbubUtdARoF9kozRCMhEytqeDSxmxgGCTIKwN50aX17LwI3obvotw86rmo7PuFJwYsBJtYJmeCyc%252Binn08DVS53HckMmWH0tU1eorQHTfABwc2vQ2J%252Bo%252FjP0ADpoBPVGSz96ccyjooNS%252Bi8%252BYDXqwpRNykCseGVceKdSoUmdA7O8otc%252BnYWBfMC25aDQxXld1KVVEHxI%252FtZcLHBElVSDiamEMH6sVhaC%252FkCqIYvnx4O9OgXEhJduHja7Xm0jXjokZh%252FJ6dJNgzyGc0Zrq4CW1WqSS4gaJ8UCeYEUR6eYco07JPe3qKzbdGnIFOjTk2%252BNlCFxZyuhB8%252FFt1T9QvrpEASz5ScPnzbva7RCFZANDY1grkO%252F8WSFPpf2PPyPfJWqtJNBndkaplxQ7R9538GGBLmh5hTDUlN7LBjqkAQNWa48Fywac%252BPNZwDkvaO%252Fdu9M%252FCkkjr2p%252BllcdrXwh6d3F9j%252Ff1Ka2ZN8nWBhqin3NO4j6oxnVL8FKSMUDVfnjLotai44he%252FSIl0r%252B%252Bqqn7WtJjNlDGVa%252Fk%252FOovWwVx5L9d4DQ08dp9aW%252BdqlKdAz8FJlm6sgD2xXd75DCdlkhnBKd5Tj%252FNVLk2CoiyX5Xra%252By1cZatE0x6AKHiE0g7oAkF5k0%26X-Amz-Signature%3Da645b9bed631f4f808c53b6dade05e304a7a07bcda3e8febf6c10f3feddb99ec%26X-Amz-SignedHeaders%3Dhost%26x-amz-checksum-mode%3DENABLED%26x-id%3DGetObject?table=block&amp;id=71d09c0a-3f1b-4053-89ba-d3aa0b8dc921"/></a></figure><p>ä¸ºä»€ä¹ˆ WASM+WASI çš„æ–¹å¼è¢«æ¨å´‡ï¼š</p><ol><li>å¼€æ”¾ï¼Œä¸šç•Œå¹¿æ³›é‡‡ç”¨çš„æ ‡å‡†ï¼Œå¼€æºç¤¾åŒºç”Ÿæ€åŠ æˆ</li><li>å¿«é€Ÿï¼Œæ²¡æœ‰ VM æˆ–å®¹å™¨çš„å†·å¯åŠ¨</li><li>å®‰å…¨ï¼Œæ²™ç›’è¿è¡Œ</li><li>å¯ç§»æ¤ï¼Œæ”¯æŒå¤§å¤šæ•° CPU å’Œæ“ä½œç³»ç»Ÿ</li><li>é«˜æ•ˆï¼Œæœ€å°å†…å­˜å’Œ CPU å ç”¨</li></ol><p>ä½†ç›®å‰æ¥è®²ç”Ÿæ€è¿˜ä¸å¤Ÿå®Œå–„ï¼Œä¸»è¦åœ¨äºå¾ˆå¤šè¯­è¨€å¯¹ç¼–è¯‘ä¸ºÂ <code>.wasm</code>Â æœ‰è¯¸å¤šé™åˆ¶ï¼Œå¤§é‡å¸¸ç”¨çš„ä¾èµ–åº“ä¸è¿›è¡Œä¿®æ”¹çš„è¯éƒ½æ— æ³•ç¼–è¯‘ã€‚åŒæ—¶ä½œä¸ºå®¹å™¨ runtime çš„è¯æ²¡æœ‰ Linux å†…æ ¸ï¼Œä¹Ÿå¯¼è‡´å¾ˆå¤š specific çš„åŠŸèƒ½æ— æ³•å®ç°ã€‚æ˜æ˜¾ä¼˜åŠ¿åŸºæœ¬åªæœ‰é•œåƒéå¸¸è½»é‡äº†ï¼Œå¤§å°åœ¨å‡ ç™¾ K åˆ°å‡  Mï¼Œé€‚åˆçš„åœºæ™¯è¿˜æ˜¯åƒ WasmEdge æœ¬èº«çš„åå­—ä¸€æ ·ï¼Œåšäº›åº”ç”¨å±‚çš„ Edge Computing å§</p><p><br></p></div><nav class=post-navigation data-astro-cid-gbhzkc2y><a href=/post/vim-as-an-ide class="nav-link nav-prev" data-astro-cid-gbhzkc2y><span class=nav-label data-astro-cid-gbhzkc2y>â† ä¸Šä¸€ç¯‡</span> <span class=nav-title data-astro-cid-gbhzkc2y>Vim as an IDE</span> </a><a href=/post/pve8-intel-sr-iov class="nav-link nav-next" data-astro-cid-gbhzkc2y><span class=nav-label data-astro-cid-gbhzkc2y>ä¸‹ä¸€ç¯‡ â†’</span> <span class=nav-title data-astro-cid-gbhzkc2y>PVE8 ä¸Šå¯ç”¨ 12 ä»£ Intel CPU æ ¸æ˜¾ SR-IOV</span></a></nav><footer class=page-footer data-astro-cid-gbhzkc2y><a href=/ class=back-link data-astro-cid-gbhzkc2y>â† è¿”å›é¦–é¡µ</a></footer><section class=comments-section data-astro-cid-gbhzkc2y><div class=comments-container data-astro-cid-te6ksoa6 data-giscus-config={&#34;slug&#34;:&#34;container-spec-ecosystem&#34;,&#34;title&#34;:&#34;å®¹å™¨æ ‡å‡†å’Œç”Ÿæ€&#34;,&#34;config&#34;:{&#34;repo&#34;:&#34;xxxuuu/xxxuuu.github.io&#34;,&#34;repoId&#34;:&#34;MDEwOlJlcG9zaXRvcnkxODQ3Mjk3Mjg&#34;,&#34;category&#34;:&#34;Announcements&#34;,&#34;categoryId&#34;:&#34;DIC_kwDOCwLAgM4ChgWc&#34;,&#34;mapping&#34;:&#34;title&#34;,&#34;strict&#34;:&#34;0&#34;,&#34;reactionsEnabled&#34;:&#34;1&#34;,&#34;emitMetadata&#34;:&#34;0&#34;,&#34;inputPosition&#34;:&#34;bottom&#34;,&#34;lang&#34;:&#34;zh-CN&#34;,&#34;lazy&#34;:true}} data-provider=giscus id=comments><div class=comments-loading data-astro-cid-te6ksoa6>åŠ è½½è¯„è®ºä¸­...</div></div></section></div><aside class=toc-container data-astro-cid-gbhzkc2y><div class=toc-wrapper data-astro-cid-gbhzkc2y><div class=toc-title data-astro-cid-gbhzkc2y>ç›®å½•</div><nav class=toc-nav data-astro-cid-gbhzkc2y></nav></div></aside></div></div></article></main><footer data-astro-cid-aoh3bln3><div class=container data-astro-cid-aoh3bln3><div class=footer-content data-astro-cid-aoh3bln3><div class=copyright data-astro-cid-aoh3bln3><p data-astro-cid-aoh3bln3>&copy; 2026 xÂ³uÂ³. All rights reserved.</p><p data-astro-cid-aoh3bln3 class=powered-by>Powered by <a href=https://github.com/xxxuuu/nopress rel="noopener noreferrer" target=_blank data-astro-cid-aoh3bln3>Nopress</a></p></div><div class=social-links data-astro-cid-aoh3bln3><a href=https://github.com/xxxuuu class=social-icon aria-label=github data-astro-cid-aoh3bln3 rel="noopener noreferrer" target=_blank><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></span></a><a href=https://x.com/xxuuu0 class=social-icon aria-label=twitter data-astro-cid-aoh3bln3 rel="noopener noreferrer" target=_blank><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></span></a><a href=mailto:xxuuu0@outlook.com class=social-icon aria-label=email data-astro-cid-aoh3bln3 rel="noopener noreferrer" target=_blank><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg></span></a><a href=/rss/feed.xml class="social-icon rss" aria-label=RSSè®¢é˜… data-astro-cid-aoh3bln3><span class=icon-wrapper data-astro-cid-aoh3bln3><svg fill=currentColor viewBox="0 0 24 24" aria-hidden=true><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg></span></a></div></div></div></footer></body></html>
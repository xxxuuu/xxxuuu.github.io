<!DOCTYPE html><html lang="zh-CN"><head><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><title>确定性模拟器 | x³u³</title><meta name="theme-color" content="#000000"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0"/><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="keywords" content="分布式系统"/><meta name="description" content="最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="确定性模拟器 | x³u³"/><meta property="og:description" content="最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题"/><meta property="og:url" content="https://xxxuuu.me/post/deterministic-simulator"/><meta property="og:image" content="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="og:site_name" content="确定性模拟器 | x³u³"/><meta property="og:type" content="Post"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题"/><meta name="twitter:title" content="确定性模拟器 | x³u³"/><link rel="icon" href="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2"/><meta property="article:published_time"/><meta property="article:author" content="xxxuuu"/><meta property="article:section" content="分布式系统,存储,云原生"/><meta property="article:publisher"/><meta name="next-head-count" content="23"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerPolicy="no-referrer"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/ec75275403549c7b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec75275403549c7b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script defer="" src="/_next/static/chunks/3607272e.720be9a60ad0a2e4.js"></script><script defer="" src="/_next/static/chunks/15660.223d3f297fbf2e70.js"></script><script defer="" src="/_next/static/chunks/31794.7e73cf5150b281ef.js"></script><script src="/_next/static/chunks/webpack-2e93fd44b13cc828.js" defer=""></script><script src="/_next/static/chunks/framework-a9bb0a3aa321677c.js" defer=""></script><script src="/_next/static/chunks/main-38dcea65ee3c1f0e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-815a2230a71777a3.js" defer=""></script><script src="/_next/static/chunks/88495-591bdb3ec2a9391e.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bprefix%5D/%5Bslug%5D-e9a6e2b9082a2bda.js" defer=""></script><script src="/_next/static/qJmeKOSpowsMdtVOkS5A4/_buildManifest.js" defer=""></script><script src="/_next/static/qJmeKOSpowsMdtVOkS5A4/_ssgManifest.js" defer=""></script><style id="__jsx-ae067b659f5ecbd6">:root{--content-width:768px;--theme-color:#ff8200;--fg-color:#495057}::-moz-selection{background-color:var(--theme-color)!important;color:#fff!important}::selection{background-color:var(--theme-color)!important;color:#fff!important}.notion-h-title{color:#343a40;font-weight:bold}.notion-text,.notion-list,.notion-toggle,.notion-to-do,.notion-quote,.notion-callout-text,.notion-simple-table-cell{letter-spacing:.5px;color:var(--fg-color);font-size:1rem;font-weight:400}.notion-inline-code{background:rgba(255,229,100,.2);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:var(--fg-color)}.notion-asset-wrapper img{-webkit-border-radius:.6em;-moz-border-radius:.6em;border-radius:.6em}.notion-quote{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;border-left:3px solid var(--theme-color);background-color:rgba(238,241,225,.3)}.notion-link{opacity:1;color:#36563c;border-bottom:1px dashed#36563c!important;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-link:hover{color:var(--theme-color);border-bottom:1px dashed var(--theme-color)!important}.notion-bookmark{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.notion-bookmark:hover{border-color:var(--theme-color)}.notion-callout{border:0}.notion-property-checkbox-unchecked{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;border:1.3px solid var(--theme-color)}.notion-property-checkbox-checked{background:var(--theme-color);-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.notion-property-checkbox-checked .svg{width:12px;height:12px;top:2px;left:2px}.notion-toggle>summary::marker{# TODO gap between marker and text
      }.notion-list li{padding-left:.5rem}.notion-list ol>ul{padding-left:0}.notion-list ul>ol{padding-left:0}.notion-list li::marker{color:var(--theme-color);font-weight:600;letter-spacing:-1px}.notion-table-of-contents-item{opacity:1}</style><style id="__jsx-2783458257">null

  </style></head><body><div id="__next"><div id="theme-autumn" class="font-sans font-light bg-white scroll-smooth"><header style="background-color:null" class="w-full h-[430px] flex justify-center z-10"><div style="background-image:url(https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&amp;id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&amp;width=800&amp;cache=v2)" class="max-w-[var(--content-width)] size-full px-5 flex justify-center items-center flex-col relative bg-cover bg-center"><div class="rounded-xl bg-white/[.6] w-full py-4 px-5 backdrop-blur-sm hover:scale-[1.03] transition duration-300 relative bottom-5"><div class="flex items-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="size-20 rounded-full shadow-lg pointer-events-none select-none"/><div class="flex flex-col flex-1 ml-7 size-full"><h1 class="text-2xl my-0 text-[var(--theme-color)] drop-shadow-[0_2px_10px_rgba(231,156,0,0.6)] font-bold">x³u³</h1><div class="text-sm font-normal w-full text-gray-500 mt-2 flex jusitify-between"><span class="flex-1">🗒 碎碎念</span><div class="justify-center flex-wrap flex"><div class="space-x-3 text-sm flex items-center text-gray-500 opacity-80"><a target="_blank" rel="noreferrer" title="github" href="https://github.com/xxxuuu"><i class="fab fa-github"></i></a><a target="_blank" rel="noreferrer" title="email" href="mailto:xxuuu0@outlook.com"><i class="fas fa-envelope"></i></a><a target="_blank" rel="noreferrer" title="RSS" href="/rss/feed.xml"><i class="fas fa-rss"></i></a></div></div></div></div></div></div><div class="absolute w-full bottom-0 px-5"><nav class="w-full bg-transparent"><ul class="flex"><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/"> <!-- -->🏠 首页</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/archive"> <!-- -->📃 归档</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/links"> <!-- -->👬 友链</a></li><li class="cursor-pointer text-gray-200/[.9] text-sm font-normal drop-shadow-md mr-4 h-8 transition-all duration-100 hover:text-white hover:border-b-white hover:border-b-2"><a target="_self" class="pb-3" href="/about"> <!-- -->👤 关于</a></li></ul></nav></div></div></header><div id="container-inner" class="w-full relative mx-auto max-w-[var(--content-width)]"><div id="container-wrapper" class="relative mx-auto justify-center sm:flex"><div class="w-full transition ease-in-out duration-700 transform order-first opacity-0 translate-y-32"><div id="article-wrapper" class="px-4 sm:px-8 pb-12 sm:pb-20 relative"><section class="flex flex-col mt-16"><h1 class="text-4xl font-bold text-gray-800">确定性模拟器</h1><div class="mt-6 mb-8 text-gray-300 flex flex-row"><span class="mr-3 text-gray-300 text-sm sm:text-base font-normal flex justify-center items-center">2024-12-21</span><span id="wordCountWrapper" class="flex gap-3 font-light"><span class="flex whitespace-nowrap items-center"><i class="pl-1 pr-2 fas fa-file-word"></i><span id="wordCount">0</span></span><span class="flex whitespace-nowrap items-center"><i class="mr-1 fas fa-clock"></i><span></span><span id="readTime">0</span> <!-- -->分钟</span></span></div></section><div id="notion-article" class="mx-auto overflow-hidden "><main class="notion light-mode notion-page notion-block-14688756397980f88f88d0bb8697b4a4"><div class="notion-viewport"></div><div class="notion-collection-page-properties"><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">type</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">status</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M10.889 5.5H3.11v1.556h7.778V5.5zm1.555-4.444h-.777V0H10.11v1.056H3.89V0H2.333v1.056h-.777c-.864 0-1.548.7-1.548 1.555L0 12.5c0 .856.692 1.5 1.556 1.5h10.888C13.3 14 14 13.356 14 12.5V2.611c0-.855-.7-1.555-1.556-1.555zm0 11.444H1.556V3.944h10.888V12.5zM8.556 8.611H3.11v1.556h5.445V8.61z"></path></svg><div class="notion-collection-column-title-body">date</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-date"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">slug</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">summary</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 13A6 6 0 107 1a6 6 0 000 12zM3.751 5.323A.2.2 0 013.909 5h6.182a.2.2 0 01.158.323L7.158 9.297a.2.2 0 01-.316 0L3.751 5.323z"></path></svg><div class="notion-collection-column-title-body">category</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-select"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">icon</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">password</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div></div></div></div><div class="notion-text notion-block-14e887563979808fb237d3cde90f613c">最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题</div><div class="notion-blank notion-block-146887563979801abb15d0452b85dcda"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-1468875639798082ae22dd9fc9a43f62" data-id="1468875639798082ae22dd9fc9a43f62"><span><div id="1468875639798082ae22dd9fc9a43f62" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1468875639798082ae22dd9fc9a43f62" title="背景"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">背景</span></span></h3><div class="notion-text notion-block-146887563979803d87fce30cc9932e6e">分布式系统面临的问题：</div><ol start="1" class="notion-list notion-list-numbered notion-block-14688756397980ccacc3e58a3f6b6a57"><li>通信不可靠：丢包，超时，乱序，重复</li><ol class="notion-list notion-list-numbered notion-block-14688756397980ccacc3e58a3f6b6a57"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-496883606eeb480f9284f81070003083"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2f213fe1-0bc3-44f8-b28d-487ee51299bb%2FUntitled.png?table=block&amp;id=49688360-6eeb-480f-9284-f81070003083&amp;t=49688360-6eeb-480f-9284-f81070003083&amp;width=1359.984375&amp;cache=v2" alt="无法区分通信失败的原因" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">无法区分通信失败的原因</figcaption></div></figure></ol></ol><ol start="2" class="notion-list notion-list-numbered notion-block-146887563979803aa5b5f29c0e50d3b0"><li>时钟不可靠：时钟漂移，拖尾，回退</li><ol class="notion-list notion-list-numbered notion-block-146887563979803aa5b5f29c0e50d3b0"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-7f92640ce8eb42cfa3848d18a5089a04"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8674fe3b-771b-43f4-860a-10847162d1f5%2FUntitled.png?table=block&amp;id=7f92640c-e8eb-42cf-a384-8d18a5089a04&amp;t=7f92640c-e8eb-42cf-a384-8d18a5089a04&amp;width=1056&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-84ea314611e8488a93cc61dfd64e986d"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F03aedc4e-a2cf-4b3a-b645-d32d76a5b468%2FUntitled.png?table=block&amp;id=84ea3146-11e8-488a-93cc-61dfd64e986d&amp;t=84ea3146-11e8-488a-93cc-61dfd64e986d&amp;width=1359.96875&amp;cache=v2" alt="时钟使得事件排序不可靠" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">时钟使得事件排序不可靠</figcaption></div></figure></ol></ol><ol start="3" class="notion-list notion-list-numbered notion-block-1468875639798009a223cea1d27a3498"><li>节点不可靠：阻塞，宕机，掉线，停顿</li><ol class="notion-list notion-list-numbered notion-block-1468875639798009a223cea1d27a3498"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-d7e394ded11c48cb8e0c460e69085362"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe0b2eeac-ad50-478a-857f-36ceec223c72%2FUntitled.png?table=block&amp;id=d7e394de-d11c-48cb-8e0c-460e69085362&amp;t=d7e394de-d11c-48cb-8e0c-460e69085362&amp;width=1359.953125&amp;cache=v2" alt="GC 停顿期间，世界已经变天了" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">GC 停顿期间，世界已经变天了</figcaption></div></figure></ol></ol><div class="notion-text notion-block-1468875639798062b8c5d87d04aff441">分布式软件/算法的目标：容忍不可靠的环境，实现容错，同时保证安全性</div><div class="notion-text notion-block-1468875639798076a9d3dded2eb4b947">节点不可能只依赖自身状态来对整个系统进行判断，需要达成共识：Paxos、ZAB、Raft….</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-146887563979804dbdaacba241bd6b6c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:144px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://raft.github.io/logo/solo.svg?spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425&amp;t=14688756-3979-804d-bdaa-cba241bd6b6c" alt="Raft logo" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">Raft logo</figcaption></div></figure><div class="notion-text notion-block-14688756397980c6861cec28cce2d5e1">通常共识算法都是实现了全序广播，能够保证一系列消息以相同的顺序被应用到每个节点上，以此实现共识</div><div class="notion-blank notion-block-14688756397980f799e1c0397719a466"> </div><div class="notion-text notion-block-146887563979806ab7c9e9578695638b">共识算法的作者都声称他们的算法简单、易于理解，算法本身的正确性也通过形式化验证进行保证</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-14d887563979807887c5e2f310cf37a2"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F93c5caed-f667-49b7-8ba3-8b3cf803c63d%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=14d88756-3979-8078-87c5-e2f310cf37a2&amp;t=14d88756-3979-8078-87c5-e2f310cf37a2&amp;width=1415.95166015625&amp;cache=v2" alt="Raft 论文的标题的定语就是 Understandable" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">Raft 论文的标题的定语就是 Understandable</figcaption></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-14d8875639798086b923dfa7249c270a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F765fda1c-1475-4ca9-ba0e-7b1b8870060c%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=14d88756-3979-8086-b923-dfa7249c270a&amp;t=14d88756-3979-8086-b923-dfa7249c270a&amp;width=1415.9375&amp;cache=v2" alt="Lamport 的第二篇 Paxos Made Simple 论文中，第一句话是 Paxos is very simple" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">Lamport 的第二篇 <em>Paxos Made Simple</em> 论文中，第一句话是 Paxos is very simple</figcaption></div></figure><div class="notion-text notion-block-14d8875639798026835ff80b749733ab">共识算法看起来没有那么复杂，但具体落地时，正确实现非常困难，分布式系统的环境非常复杂，不确定因素和扰动过多，要在任何一种情况下都能正常工作是一个很大的挑战</div><div class="notion-text notion-block-146887563979802c9b5bf909ab4df682">一些 bug 可能需要运行数千次，才会发生一次，且几乎无法复现</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1468875639798040a39ff7a4e9444f67"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff9fa10f4-1198-4a2f-b546-aed8998940c7%2FUntitled.png?table=block&amp;id=14688756-3979-8040-a39f-f7a4e9444f67&amp;t=14688756-3979-8040-a39f-f7a4e9444f67&amp;width=1056&amp;cache=v2" alt="MIT 6.824 指南通常打着「数千次都不出错」的 slogan，也进一步说明了测试的困难" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">MIT 6.824 指南通常打着「数千次都不出错」的 slogan，也进一步说明了测试的困难</figcaption></div></figure><div class="notion-text notion-block-14688756397980c6b932f3528c2eb1cf">如何解决在分布式系统上进行测试的问题？</div><div class="notion-blank notion-block-14688756397980ada3aaecf1d52b66d2"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-14688756397980cf99e3e62ed68705a5" data-id="14688756397980cf99e3e62ed68705a5"><span><div id="14688756397980cf99e3e62ed68705a5" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14688756397980cf99e3e62ed68705a5" title="确定性测试 &amp; 模拟"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">确定性测试 &amp; 模拟</span></span></h3><div class="notion-text notion-block-1468875639798033ad07ef0f3d03592e">安全性的一些业界方案：</div><ul class="notion-list notion-list-disc notion-block-146887563979800c8533edac5c20d358"><li>混沌测试：ChaosMesh</li><ul class="notion-list notion-list-disc notion-block-146887563979800c8533edac5c20d358"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-14d887563979803695bac8201bde96f0"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:576px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fce9ced73-aa89-44bf-aa5f-7bc067eeaf13%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=14d88756-3979-8036-95ba-c8201bde96f0&amp;t=14d88756-3979-8036-95ba-c8201bde96f0&amp;width=1152&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure></ul></ul><ul class="notion-list notion-list-disc notion-block-146887563979809c9593f0d4daaa832f"><li>验证框架：Jepsen</li><ul class="notion-list notion-list-disc notion-block-146887563979809c9593f0d4daaa832f"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-87659099a29a423fb64611284eb2ffeb"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:576px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdfc75047-5a34-4cc6-91a0-c2a82f4e4cf8%2FUntitled.png?table=block&amp;id=87659099-a29a-423f-b646-11284eb2ffeb&amp;t=87659099-a29a-423f-b646-11284eb2ffeb&amp;width=1152&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure></ul></ul><div class="notion-text notion-block-1468875639798088ad6dc83f56aee1ae">主动向系统注入故障并验证，这能提高错误发生概率，暴露问题。但无法复现的根本问题还是没有解决：</div><ul class="notion-list notion-list-disc notion-block-14e88756397980189eb7d2af4375643f"><li>修复后如何验证真的解决了？还是需要精确复现这个问题</li></ul><ul class="notion-list notion-list-disc notion-block-14e88756397980678c33eef84ff81962"><li>更多时候还因为日志和信息不足无法定位，要给程序添加日志后等待再次复现</li></ul><div class="notion-blank notion-block-1468875639798023bc87da5ae108cbca"> </div><div class="notion-text notion-block-14688756397980058196c86a25cabe3c">可以发现，无法复现的原因是系统有很多因素每次运行时都是不确定的，bug 可能只有在程序的某些执行历史下才会复现。而网络延迟、进程调度的波动，最终都会导致执行历史变化，使系统走向无法预测</div><div class="notion-text notion-block-14e8875639798046b25be1efa8a8f2a3">甚至有可能因为「修复」行为导致问题更难复现，例如为了复现问题，在性能敏感区域加了一长串日志输出，结果因为输出的开销导致的蝴蝶效应更难踩中 bug 触发的时间窗口</div><div class="notion-blank notion-block-163887563979809e8e0ae5e68ab6e62f"> </div><div class="notion-text notion-block-163887563979806d86ced8f9fd7e7068">如果系统像纯函数一样是确定性的，测试就能简单得多。那能不能将不确定性的事件，通过某种参数关联为确定性的事件？典型例子是伪随机数生成器，看起来是不确定性的，实际上是与 seed 关联，结果是确定的。是否可能通过一个 seed，去 hook 系统中的不确定性因素？</div><div class="notion-blank notion-block-14688756397980d2a4dac3b81913bc35"> </div><div class="notion-text notion-block-14688756397980c9bf23db8484ff255f">Sled（一个类似 RocksDB 的嵌入式存储引擎） 的作者在<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://sled.rs/simulation.html">一篇文章</a>中提到他是如何在系统中进行测试的：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1468875639798004b4bfeb00d0243e23"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:624px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff0ceda69-c45c-4992-bc66-37c150805e04%2FUntitled.png?table=block&amp;id=14688756-3979-8004-b4bf-eb00d0243e23&amp;t=14688756-3979-8004-b4bf-eb00d0243e23&amp;width=1248&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><blockquote class="notion-quote notion-block-146887563979809abafdd84c762e6046"><div>Jepsen 的出现成功击溃了几乎所有它测试的分布式系统，这表明我们在根本上以一种错误的方式构建分布式系统，这种方式无法避免 bug 的出现</div></blockquote><div class="notion-blank notion-block-1468875639798064b23de634fd248245"> </div><div class="notion-text notion-block-14688756397980f094cdce1884d02c29">那我们要怎么做才是正确的？</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1468875639798016b156d447217c8c99"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:672px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F973a1bbf-337b-4131-91f6-446e7fe51205%2FUntitled.png?table=block&amp;id=14688756-3979-8016-b156-d447217c8c99&amp;t=14688756-3979-8016-b156-d447217c8c99&amp;width=1344&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><blockquote class="notion-quote notion-block-14688756397980c39d2ecfcff5cec2ec"><div>1. 将代码写成能在模拟器上被确定性运行的形式
2. 写一个模拟器去模拟真实世界的行为</div></blockquote><div class="notion-blank notion-block-14e887563979804a8b40f7b088c16bf0"> </div><div class="notion-text notion-block-14e8875639798040915fc27a22c99bdf">这就是确定性模拟器</div><div class="notion-blank notion-block-14d88756397980878306cd07f8fa013e"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-14688756397980d5bf4bdf676b154192" data-id="14688756397980d5bf4bdf676b154192"><span><div id="14688756397980d5bf4bdf676b154192" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14688756397980d5bf4bdf676b154192" title="业界实现和落地"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">业界实现和落地</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-14e887563979801fa62bdfbe156f074d" data-id="14e887563979801fa62bdfbe156f074d"><span><div id="14e887563979801fa62bdfbe156f074d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14e887563979801fa62bdfbe156f074d" title="FoundationDB"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">FoundationDB</span></span></h4><div class="notion-text notion-block-146887563979801dbcd3da848c7040c3">FoundationDB 是 Apple 开源的分布式 KV 数据库，FoundationDB 在开发之初花了两年实现模拟器，在后期取得了非常大的回报，是业界最早全面落地确定性测试的工程之一，也是为数不多能够通过 Jepsen 的系统</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-146887563979807fb5edf38e8d6f9f4e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:381.9957275390625px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F976d433c-4a1f-4a57-8512-3d3a96b455f1%2FUntitled.png?table=block&amp;id=14688756-3979-807f-b5ed-f38e8d6f9f4e&amp;t=14688756-3979-807f-b5ed-f38e8d6f9f4e&amp;width=763.991455078125&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-146887563979804ab414cf66116330b5">FoundationDB 基于 C++ 扩展出了一个名为 Flow 的语言（与其说是语言，更像一种扩展的宏功能，只进行了预编译处理）</div><div class="notion-text notion-block-15588756397980099b36e6ee36419c76">Flow 采用 Actor 单线程异步模型（async/await），由 runtime 负责所有调度，以此控制执行顺序，确保不会因为内核的线程调度导致不确定性。再通过接口接管了网络、存储、时间等其他外部调用，实现所有不确定性事件的受控</div><div class="notion-blank notion-block-1558875639798060a127e61da4ff8e98"> </div><div class="notion-text notion-block-15588756397980fc947ddab04fd4a368">在这些改造后，Flow 看起来也和 C++ 没什么区别，使用 <code class="notion-inline-code">ACTOR</code> 即可定义一个异步任务：</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-cpp">ACTOR Future&lt;float&gt; asyncAdd(Futur&lt;float&gt; f, float offset) {
    float value = wait(f);
    return value + offset;
}</code></pre><div class="notion-text notion-block-14e887563979807b840ce426982423df">模拟器中每个测试由一段配置文件定义，这里包括了测试的行为，以及注入的故障，例如向网络注入延迟、关闭连接、杀死节点、变更配置等。只要用相同的配置文件作为输入，模拟器就会产生相同的执行历史，问题就能被复现</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-plain text">testTitle=SwizzledCycleTest
    testName=Cycle
    transactionsPerSecond=1000.0
    testDuration=30.0
    expectedRate=0.01

    testName=RandomClogging
    testDuration=30.0
    swizzle = 1

    testName=Attrition
    machinesToKill=10
    machinesToLeave=3
    reboot=true
    testDuration=30.0
    
    testName=ChangeConfig
    maxDelayBeforeChange=30.0
    coordinators=auto</code></pre><div class="notion-text notion-block-14e887563979808188f0f6d31be0fd70">FoundationDB 本身是开源的，但可惜模拟器部分没有开源，论文和演讲中也只进行了简单介绍</div><figure class="notion-asset-wrapper notion-asset-wrapper-video notion-block-14d88756397980efa5a8fad2fa764a39"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;padding-bottom:56.25%"><link rel="preload" as="image" href="https://i.ytimg.com/vi/4fFDFbi3toc/hqdefault.jpg" imageSrcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/default.webp 120w, https://i.ytimg.com/vi_webp/4fFDFbi3toc/mqdefault.webp 320w, https://i.ytimg.com/vi_webp/4fFDFbi3toc/hqdefault.webp 480w, https://i.ytimg.com/vi_webp/4fFDFbi3toc/sddefault.webp 640w, https://i.ytimg.com/vi_webp/4fFDFbi3toc/maxresdefault.webp 1280w" imageSizes="(max-width: 120px) 120px, (max-width: 320px) 320px, (max-width: 480px) 480px, (max-width: 640px) 640px, (max-width: 1280px) 1280px"/><div class="notion-yt-lite notion-asset-object-fit" style="object-fit:contain"><picture><source srcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/default.webp 120w" media="(max-width: 120px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/mqdefault.webp 320w" media="(max-width: 320px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/hqdefault.webp 480w" media="(max-width: 480px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/sddefault.webp 640w" media="(max-width: 640px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/4fFDFbi3toc/maxresdefault.webp 1280w" media="(max-width: 1280px)" type="image/webp"/><img src="https://i.ytimg.com/vi/4fFDFbi3toc/hqdefault.jpg" class="notion-yt-thumbnail" alt="Video preview"/></picture><div class="notion-yt-playbtn"></div></div></div><figcaption class="notion-asset-caption">“Don’t debug your system, debug a simulation instead.”</figcaption></figure><div class="notion-blank notion-block-16388756397980c88a75fc9b49013e01"> </div><div class="notion-text notion-block-16388756397980db84d3cbdf3226052b">最终，他们声称确定性模拟让他们发现了数据库<b>所有</b> bug：</div><blockquote class="notion-quote notion-block-1638875639798055a2d2f0719ed0694d"><div>Anyway, we did this for a while and found all of the bugs in the database. I know, I know, that’s an insane thing to say. It’s kind of true though. In the entire history of the company, I think we only ever had one or two bugs reported by a customer. <em>Ever</em>. Kyle Kingsbury aka “aphyr” didn’t even bother testing it with Jepsen, because he didn’t think he’d find anything.</div></blockquote><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-163887563979809aa586f2403bc1a49b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:480px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ffb249a39-9fb3-4972-8d23-40a0631b0304%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=16388756-3979-809a-a586-f2403bc1a49b&amp;t=16388756-3979-809a-a586-f2403bc1a49b&amp;width=960&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-16388756397980dba4ffdf3176c6beef">无论如何，FoundationDB 开创了确定性模拟的先河。所有后来者都无法绕过 FoundationDB 的影响</div><div class="notion-blank notion-block-1468875639798089887fddef36bb3744"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-146887563979809697e1f9037ff18883" data-id="146887563979809697e1f9037ff18883"><span><div id="146887563979809697e1f9037ff18883" class="notion-header-anchor"></div><a class="notion-hash-link" href="#146887563979809697e1f9037ff18883" title="RisingWave &amp; MadSim"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">RisingWave &amp; MadSim</span></span></h4><div class="notion-text notion-block-15588756397980209a3ee98f34aabf18"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/risingwavelabs/risingwave">RisingWave</a> 是一个分布式流数据库，受到 FoundationDB 的启发，他们开发了一个名为 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/madsim-rs/madsim">MadSim</a> 的确定性测试框架，两者都是开源项目</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15588756397980d5a9c9d84116744b96"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F683e1fa8-10b4-46f1-8e56-dc5a6fe7630a%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-80d5-a9c9-d84116744b96&amp;t=15588756-3979-80d5-a9c9-d84116744b96&amp;width=1415.9658203125&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-155887563979805c8064ca0cf669e11e"> </div><div class="notion-text notion-block-1558875639798003a518d2a03b846bca">RisingWave 和 MadSim 都基于 Rust 开发。Rust 原生支持异步，但特殊的是，Rust 只提供了异步需要的语言特性、关键字和相关类型等；如异步任务如何执行、管理和调度等具体实现则不在语言内提供，因此社区有各种不同的 runtime</div><div class="notion-text notion-block-15588756397980bcad79c98d3ad9c90f">在这种设计下，MadSim 就可以作为一个异步 runtime 呈现，使用单线程运行异步任务，不需要对语言做侵入性改动即可轻松控制调度，并且能和工具链（如调试器）结合得更好</div><div class="notion-blank notion-block-15588756397980f9ab0fcb4f38655458"> </div><div class="notion-text notion-block-155887563979804181d5c26aa14efb3c">MadSim 的基本架构如下，这里也参考了 FoundationDB，包括一个全局的随机数生成器，以及基于这之上的定时器，任务调度器和环境模拟（网络、存储）</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15588756397980609138d8bae2d3e272"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fee0cf179-f3de-4b34-aed2-fe0ce16b7108%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-8060-9138-d8bae2d3e272&amp;t=15588756-3979-8060-9138-d8bae2d3e272&amp;width=1415.9801025390625&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-15588756397980dcb057f7491ab0735d">除此之外，MadSim 还提供了对 Rust 异步 runtime 事实标准 tokio 的 API 兼容，这使得使用 tokio 的项目无需修改一行代码，就可以无缝接入 MadSim</div><div class="notion-text notion-block-15588756397980759ca3c85efd227d9c">还有一些异步 API 之外的部分，例如获取系统时间和配置等（<code class="notion-inline-code">gettimeofday</code><span style="padding:0.5em"></span><code class="notion-inline-code">get_random</code><span style="padding:0.5em"></span><code class="notion-inline-code">sysconf</code> 等 API），可能会被部分标准库和依赖库不知不觉地调用而破坏确定性，Madsim 通过重载 libc 函数完成 hook</div><div class="notion-text notion-block-15588756397980d699b1fde45aa6e309">最后一些常见的外部系统网络交互的 client 库，也提供了有确定性模拟的包装实现</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15588756397980e9a241c485214a3f3a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F7cd5f1fb-c836-4b1a-bace-c3f094b8e3cb%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-80e9-a241-c485214a3f3a&amp;t=15588756-3979-80e9-a241-c485214a3f3a&amp;width=4456&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-blank notion-block-15588756397980ce9df5f0342930d96e"> </div><div class="notion-text notion-block-146887563979805d924fe6a74a881692">MadSim 中，系统中每一个节点被抽象成状态机。输入会触发节点的状态转移，输入通常有两类：消息和定时器。而节点的输出就是对另一个节点发送的消息，定时器通常是节点自身在某一时刻做的一件事情</div><div class="notion-text notion-block-ff0a8206103c457da809b4356a897c93">在系统的一开始，存在一个初始状态，接着一些节点的定时器可能被激活（例如心跳或注册等），触发状态转移，发送消息给其它节点，进一步触发其它节点的转移</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-93733ab20e614462b5bf01440b2c8d59"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:672px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd758bf6b-a683-4d6d-af43-3d498791c1e7%2FUntitled.png?table=block&amp;id=93733ab2-0e61-4462-b5bf-01440b2c8d59&amp;t=93733ab2-0e61-4462-b5bf-01440b2c8d59&amp;width=1344&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-14688756397980859faaf36901f37fe2">从更高的维度将「整个系统」看作一个大的状态机，唯一的外部输入就只有时间，整个系统就是一个随着时间不断变化状态的状态机，可以看作只有状态转移的时候，时间才被推进了</div><div class="notion-text notion-block-15588756397980249cb7cf4ba1e3f73f">将这些状态的转移在时间轴上排列，状态转移之间的时间对状态机是没意义的，模拟器就可以通过离散事件模拟的方式在一个转移结束后直接跳到下一个转移的时间节点，实现时间加速<div class="notion-text-children"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-f4b66a13e0af4e59b6318320d65ea25b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F71dc8c92-485e-4049-ac85-ed203598b1ce%2FUntitled.png?table=block&amp;id=f4b66a13-e0af-4e59-b631-8320d65ea25b&amp;t=f4b66a13-e0af-4e59-b631-8320d65ea25b&amp;width=1344&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure></div></div><div class="notion-text notion-block-15588756397980eb8801fda0a89bc81d">这也是 FoundationDB 中提过的模拟器的另一个好处</div><div class="notion-blank notion-block-15588756397980ca87ccd04e9c81f48a"> </div><div class="notion-text notion-block-15588756397980548a08fbb411b18a98">既然是开源的，简单看一下关键实现</div><ul class="notion-list notion-list-disc notion-block-14688756397980618912ed8070306960"><li>runtime 初始化时，使用传入的 seed 构造随机数生成器，之后所有事件的模拟都能被这个 seed 确定</li><ul class="notion-list notion-list-disc notion-block-14688756397980618912ed8070306960"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-rust">/// Create a new runtime instance with given seed and config.
pub fn with_seed_and_config(seed: u64, config: Config) -&gt; Self {
    let rand = rand::GlobalRng::new_with_seed(seed);
    let sims = Arc::new(Mutex::new(HashMap::new()));
    let task = task::Executor::new(rand.clone(), sims.clone());
    let handle = Handle {
        rand: rand.clone(),
        time: task.time_handle().clone(),
        task: task.handle().clone(),
        sims,
        config,
        allow_system_thread: false,
    };
    let rt = Runtime { rand, task, handle };
    rt.add_simulator::&lt;fs::FsSim&gt;();
    rt.add_simulator::&lt;net::NetSim&gt;();
    rt
}</code></pre><figcaption class="notion-asset-caption">madsim/src/sim/runtime/mod.rs</figcaption></ul></ul><ul class="notion-list notion-list-disc notion-block-146887563979808cb56bf7721a3b7fa0"><li>定时器，实质上是在时间堆中加入了一个带定时器回调的输入</li><ul class="notion-list notion-list-disc notion-block-146887563979808cb56bf7721a3b7fa0"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-rust">pub(crate) fn add_timer_at(
    &amp;self,
    deadline: Instant,
    callback: impl FnOnce() + Send + Sync + &#x27;static,
) {
    let mut timer = self.timer.lock();
    timer.add(deadline - self.clock.base_instant(), |_| callback());
}

pub(crate) fn add_timer(&amp;self, dur: Duration, callback: impl FnOnce() + Send + Sync + &#x27;static) {
    self.add_timer_at(self.clock.now_instant() + dur, callback);
}</code></pre><figcaption class="notion-asset-caption">madsim/src/sim/time/mod.rs</figcaption></ul></ul><ul class="notion-list notion-list-disc notion-block-14688756397980fb8a7dfccd5dffb793"><li>调度器：通过 event-loop 来进行调度，从就绪队列里随机取任务执行，这里的「随机」也是基于全局的随机数生成器，调度顺序都是被 seed 确定的。然后直接跳转到下一个事件的时间点</li><ul class="notion-list notion-list-disc notion-block-14688756397980fb8a7dfccd5dffb793"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-rust">pub fn block_on&lt;F: Future&gt;(&amp;self, future: F) -&gt; F::Output {
    // ...
    
    loop {
        self.run_all_ready();
        if task.is_finished() {
            return task.now_or_never().unwrap();
        }
        let going = self.time.advance_to_next_event();
        
        // ...
    }
}

/// Drain all tasks from ready queue and run them.
fn run_all_ready(&amp;self) {
    while let Ok(runnable) = self.queue.try_recv_random(&amp;self.rand) {
        // ...
        
        // run the task
        let res = {
            let _guard = crate::context::enter_task(info.clone());
            std::panic::catch_unwind(move || work(runnable))
        };
        if let Err(e) = res {
            // ...
        }

        // advance time: 50-100ns
        let dur = Duration::from_nanos(self.rand.with(|rng| rng.gen_range(50..100)));
        self.time.handle().advance(dur);
    }
}</code></pre><figcaption class="notion-asset-caption">madsim/src/sim/task/mod.rs</figcaption></ul></ul><ul class="notion-list notion-list-disc notion-block-14688756397980c18154d71ad5bbaf1d"><li>网络接口的语义比较复杂，这部分有不小工作量，最底下是维护链接的实现，这里存储了所有节点的信息，使用 channel 进行通信，并且可以根据配置的丢包率和延迟来注入故障。再往上提供 socket 语义的接口，感觉都是体力活</li><ul class="notion-list notion-list-disc notion-block-14688756397980c18154d71ad5bbaf1d"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-rust">/// Opens a new connection to destination.
pub(crate) async fn connect1(
    self: &amp;Arc&lt;Self&gt;,
    node: NodeId,
    port: u16,
    mut dst: SocketAddr,
    protocol: IpProtocol,
) -&gt; io::Result&lt;(PayloadSender, PayloadReceiver, SocketAddr)&gt; {
    self.rand_delay().await?;
    if let Some(addr) = self
        .ipvs
        .get_server(ServiceAddr::from_addr_proto(dst, protocol))
    {
        dst = addr.parse().expect(&quot;invalid socket address&quot;);
    }
    let (ip, dst_node, socket, latency) = (self.network.lock().try_send(node, dst, protocol))
        .ok_or_else(|| {
        io::Error::new(io::ErrorKind::ConnectionRefused, &quot;connection refused&quot;)
    })?;
    let src = (ip, port).into();
    let (tx1, rx1) = self.channel(node, dst, protocol);
    let (tx2, rx2) = self.channel(dst_node, src, protocol);
    trace!(?latency, &quot;delay&quot;);
    // FIXME: delay
    // self.time.add_timer(latency, move || {
    socket.new_connection(src, dst, tx2, rx1);
    // });
    Ok((tx1, rx2, src))
}

/// Try sending a message to the destination.
///
/// If destination is not found or packet loss, returns `None`.
/// Otherwise returns the source IP, socket and latency.
pub fn try_send(
    &amp;mut self,
    node: NodeId,
    dst: SocketAddr,
    protocol: IpProtocol,
) -&gt; Option&lt;(IpAddr, NodeId, Arc&lt;dyn Socket&gt;, Duration)&gt; {
    let dst_node = self.resolve_dest_node(node, dst, protocol)?;
    let latency = self.test_link(node, dst_node)?;
    let sockets = &amp;self.nodes.get(&amp;dst_node)?.sockets;
    let ep = (sockets.get(&amp;(dst, protocol)))
        .or_else(|| sockets.get(&amp;((Ipv4Addr::UNSPECIFIED, dst.port()).into(), protocol)))?;
    let src_ip = if dst.ip().is_loopback() {
        IpAddr::V4(Ipv4Addr::LOCALHOST)
    } else {
        self.nodes.get(&amp;node).expect(&quot;node not found&quot;).ip.unwrap()
    };
    Some((src_ip, dst_node, ep.clone(), latency))
}

/// Returns the latency of sending a packet. If packet loss, returns `None`.
fn test_link(&amp;mut self, src: NodeId, dst: NodeId) -&gt; Option&lt;Duration&gt; {
    if self.link_clogged(src, dst) || self.rand.gen_bool(self.config.packet_loss_rate) {
        None
    } else {
        self.stat.msg_count += 1;
        // TODO: special value for loopback
        Some(self.rand.gen_range(self.config.send_latency.clone()))
    }
}</code></pre><figcaption class="notion-asset-caption">madsim/src/sim/net/mod.rs &amp; madsim/src/sim/net/network.rs</figcaption></ul></ul><div class="notion-blank notion-block-1558875639798000a34dc6a02159cb77"> </div><div class="notion-text notion-block-15588756397980769bd3d7121fc3f77c">作者提供了一个基于 MadSim 的 MIT 6.824 课程 Raft 实验的重写版 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/madsim-rs/madraft">MadRaft</a>，这里模拟器中的 Raft 测试比真实运行快上近百倍：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-146887563979805daab6ee285a94362b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F20011529-118d-4555-a03e-fa8e8c527556%2FUntitled.png?table=block&amp;id=14688756-3979-805d-aab6-ee285a94362b&amp;t=14688756-3979-805d-aab6-ee285a94362b&amp;width=1416&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-1558875639798092858fe69881f0fee9">对于未通过的测试，模拟器返回一个 seed，下次使用同样的 seed 运行，就能得到相同的结果</div><div class="notion-blank notion-block-1558875639798019b605da63c99b640e"> </div><div class="notion-text notion-block-15588756397980c1a5bde7c817807ff5">在 RisingWave 中，Madsim 被应用在四种不同的测试中：</div><ol start="1" class="notion-list notion-list-numbered notion-block-15588756397980c8a5e9d86058788242"><li>单元测试：单元测试关注面比较小，难以发现复杂的问题，所以不是确定性测试主要作用的目标，但确定性模拟器在这里还是起了不少作用，比如测试有关超时的逻辑能瞬间完成。另外单元测试也能反过来验证一些外部系统包装（如 etcd 模拟器）的实现正确与否</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-1558875639798013a01cf1d76abbd18a"><li>E2E 测试：E2E 测试中涵盖了系统的各个模块，更容易出现错误。RisingWave 架构复杂，涉及各种服务</li><ol class="notion-list notion-list-numbered notion-block-1558875639798013a01cf1d76abbd18a"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15588756397980e9b9b3d1a2b78dfed3"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff109c7a4-9022-4d0b-b944-41c93e5d7180%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-80e9-b9b3-d1a2b78dfed3&amp;t=15588756-3979-80e9-b9b3-d1a2b78dfed3&amp;width=7680&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-1558875639798052b282e41bc56ecc5f">通过 MadSim，可以将上述所有服务运行在模拟器的单线程环境中，使环境构建简单得多，并且基于模拟器时间加速的特性，一轮完整测试只用耗时两分钟，是原先的四分之一</div><div class="notion-text notion-block-155887563979802298c8d0f39cf008b6">并且能轻松地并行执行测试，如果发生了错误，使用同样的 seed 就可以轻易复现结果，包括修改代码添加日志，也不会影响可复现性</div></ol></ol><ol start="3" class="notion-list notion-list-numbered notion-block-15588756397980a58c42dec92a24d35b"><li>异常测试：E2E 测试主要还是在测试正常情况下的行为，没法完全发挥 MadSim 的作用。在异常测试中，会刻意构造各种故障并验证系统是否仍然能保持正确。在这个过程中发现了很多 bug，得益于模拟器的可复现性，这些问题都能被很快定位和修复</li><ol class="notion-list notion-list-numbered notion-block-15588756397980a58c42dec92a24d35b"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15588756397980c2a428e4466ebf8748"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F68419cd1-0ecb-4e97-99dd-1a2adbb04406%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-80c2-a428-e4466ebf8748&amp;t=15588756-3979-80c2-a428-e4466ebf8748&amp;width=6910&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure></ol></ol><ol start="4" class="notion-list notion-list-numbered notion-block-15588756397980569ffaf5656b3c5b70"><li>扩容测试：集群配置发生变化时，需要进行重平衡，这个过程也很容易发生错误，特别是叠加异常情况时</li><ol class="notion-list notion-list-numbered notion-block-15588756397980569ffaf5656b3c5b70"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-155887563979803ca4ebfa1b93eb2234"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fdb6930a8-b915-4f9f-833c-16b133ea15f6%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15588756-3979-803c-a4eb-fa1b93eb2234&amp;t=15588756-3979-803c-a4eb-fa1b93eb2234&amp;width=1359.9857177734375&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-15688756397980379aadc09f5ac94bbf">在正常测试中，受限于集群和数据规模的问题，测试覆盖面不足。但在模拟器中可以轻松构造较大规模和极端情况下的 case，帮助发现并修复了大量问题</div></ol></ol><div class="notion-text notion-block-156887563979800c9402f7227ae25c39">在 CI 中，每一项确定性测试都会用不同的 seed 并行执行 16 次（16 核 CI 机器），以尽可能提高覆盖率</div><div class="notion-blank notion-block-15688756397980ceb0ecc39f8deb0f5f"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-15688756397980f5ae6def2512c94e7e" data-id="15688756397980f5ae6def2512c94e7e"><span><div id="15688756397980f5ae6def2512c94e7e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#15688756397980f5ae6def2512c94e7e" title="Dropbox Trinity"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Dropbox <b>Trinity</b></span></span></h4><div class="notion-text notion-block-15688756397980c49eb5c9a9a211f267">Dropbox 中 Sync Engine 是一个核心功能，负责在客户端和服务器之间进行文件同步</div><div class="notion-text notion-block-156887563979806da76cc663ddac212b">2016 年，Dropbox 开始使用 Rust 重写它们的 Sync Engine，并引入了确定性模拟技术来测试，该部分称为 Trinity</div><div class="notion-text notion-block-15688756397980b9804dfa061cd6059d">动机就像我们一开始提到的那样，问题复现困难，也没有足够日志定位：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1568875639798002812bc1bfb8bb916e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:624px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F70b000f9-def1-4452-ba16-29d7a0af0188%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15688756-3979-8002-812b-c1bfb8bb916e&amp;t=15688756-3979-8002-812b-c1bfb8bb916e&amp;width=1248&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-156887563979800bbe54c2d26a2fc767">整个测试流程也是类似的，通过 seed 构造全局随机数生成器来生成之后的所有随机决策，如果测试失败则输出 seed</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1568875639798098ad64f1f378d9ea14"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:576px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F5cf0904e-be75-4d15-a553-96685049fef7%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15688756-3979-8098-ad64-f1f378d9ea14&amp;t=15688756-3979-8098-ad64-f1f378d9ea14&amp;width=1152&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-156887563979803690d4ddc19da4df4f">由于也是 Rust 开发，Trinity 也是作为一个异步 runtime 执行，其他方面也都类似，包括文件系统、网络和时间模拟</div><div class="notion-text notion-block-16388756397980858430e495a91a56a3">Rust 生态中异步 runtime 的事实标准 tokio 也宣布了其官方的确定性测试项目 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/tokio-rs/turmoil">turmoil</a>，在这方面 Rust 还是走在了前列</div><div class="notion-blank notion-block-15688756397980ec9de5daeb532f7b16"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-1568875639798032881fe3ed296331a8" data-id="1568875639798032881fe3ed296331a8"><span><div id="1568875639798032881fe3ed296331a8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1568875639798032881fe3ed296331a8" title="TigerBeetle &amp; VOPR"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">TigerBeetle &amp; VOPR</span></span></h4><div class="notion-text notion-block-15688756397980249bafcb35507d9dc4"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/tigerbeetle/tigerbeetle">TigerBeetle</a> 是一个专为金融事务场景设计的数据库，使用 Zig 开发，在首页就着重强调了它们使用确定性模拟来构建数据库以体现可靠性</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15688756397980998ab3d69c8b466640"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F8f427043-fb74-48df-9093-53384be92349%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15688756-3979-8099-8ab3-d69c8b466640&amp;t=15688756-3979-8099-8ab3-d69c8b466640&amp;width=1415.9801025390625&amp;cache=v2" alt="「历经数个世纪的测试」" loading="lazy" decoding="async"/><figcaption class="notion-asset-caption">「历经数个世纪的测试」</figcaption></div></figure><div class="notion-text notion-block-15688756397980848c3fdc05dd9c488f">并且这个模拟版本 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://sim.tigerbeetle.com/">SimTigerBeetle</a> 是可以运行在浏览器中的，还包装成了一个游戏的形式，能够折磨这些 beetle（注入故障）</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-15688756397980409b67fbf1dc7c01f3"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:624px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff577125b-a82f-4bc4-9273-af63ba3158d2%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=15688756-3979-8040-9b67-fbf1dc7c01f3&amp;t=15688756-3979-8040-9b67-fbf1dc7c01f3&amp;width=1248&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-15688756397980af870ee158c659751a">他们开发了称为 Viewstamped Operation Replicator (VOPR) 的模拟器，并将系统编译为 WebAssembly 运行，和前面的模拟器一样，这里也都包含网络、存储、时钟的模拟，并支持故障注入</div><div class="notion-blank notion-block-15688756397980efa20eff5d2b27d237"> </div><div class="notion-text notion-block-15688756397980af8283c59e4f873bc6">Zig 不像 Rust 那样可以自定义异步 runtime，那这里是如何控制调度的呢？一开始认为这里编译为 WASM 的目的除了支持浏览器外，也是为了能在模拟器上单线程执行。但看了文档才发现，TigerBeetle 从一开始就是单线程的设计，那也不需要什么控制调度一说了：</div><ul class="notion-list notion-list-disc notion-block-1568875639798044a934f77c1927aa95"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.tigerbeetle.com/about/performance#single-core-by-design">https://docs.tigerbeetle.com/about/performance#single-core-by-design</a></li></ul><div class="notion-text notion-block-15d88756397980719a01fda4c4c76ea1">但并发是必须的，不利用多线程或其他语言的异步机制，如何实现并发？</div><div class="notion-text notion-block-15688756397980aa887cca129211a741">从<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/tigerbeetle/tigerbeetle/blob/main/src/vopr.zig">代码</a>上来看，模拟器会每次通过一个 <code class="notion-inline-code">tick</code> 推进进度，下面每一层，节点、网络、存储和时间都有对应的 <code class="notion-inline-code">tick</code> 实现</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-plain text">pub fn main() !void {
    // ...

    while (tick &lt; cli_args.ticks_max_convergence) : (tick += 1) {
        simulator.tick();
        tick_total += 1;
        if (simulator.pending() == null) {
            break;
        }
    }

    // ...
}

pub fn tick(simulator: *Simulator) void {
    simulator.cluster.context = simulator;

    simulator.cluster.tick();
    simulator.tick_requests();
    simulator.tick_crash();
}</code></pre><figcaption class="notion-asset-caption">tigerbeetle/src/vopr.zig</figcaption><div class="notion-text notion-block-156887563979801eb69ee2aa947cdf33">真实运行的部分，也是通过 <code class="notion-inline-code">tick</code> 不停推进。相当于手动在代码结构上设计了任务的时间片切分，每 <code class="notion-inline-code">tick</code> 一次就执行这个任务的一个时间片，调度顺序就是代码中 <code class="notion-inline-code">tick</code> 调用的顺序，本身就是被确定的。这是完全贯彻了把系统作为状态机实现的想法，从一开始就是为确定性模拟而设计的：</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-plain text">while (true) {
    replica.tick();
    if (multiversion != null) multiversion.?.tick();
    try command.io.run_for_ns(constants.tick_ms * std.time.ns_per_ms);
}</code></pre><figcaption class="notion-asset-caption">tigerbeetle/src/tigerbeetle/main.zig</figcaption><div class="notion-text notion-block-1568875639798033a8c4f2fa564262a8">这对代码设计要求会比较高，在很多场景是反范式的，例如 TigerBeetle 内 LSM-Tree 的实现，有点难想象如何通过一堆 tick 来推进整个 LSM-Tree 的 Compaction 流程：</div><ul class="notion-list notion-list-disc notion-block-15688756397980848ce8cac3a55edd48"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://docs.tigerbeetle.com/about/internals/lsm">https://docs.tigerbeetle.com/about/internals/lsm</a></li></ul><div class="notion-text notion-block-15d88756397980b0abc9f6e61c7e6a49">以及他们如何设计这样的 I/O 库：</div><ul class="notion-list notion-list-disc notion-block-15d88756397980609a0ccb05b9fb541d"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://tigerbeetle.com/blog/a-friendly-abstraction-over-iouring-and-kqueue">A Programmer-Friendly I/O Abstraction Over io_uring and kqueue</a></li></ul><div class="notion-text notion-block-15f88756397980c8bee5e16ebd98c2b5">除此之外，TigerBeetle 还有些很独特的设计哲学，例如 0 依赖、0 动态内存分配。包括确定性模拟，这些思想都很前卫，值得一看：</div><ul class="notion-list notion-list-disc notion-block-15f887563979805ea240e10edd6b6039"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/tigerbeetle/tigerbeetle/blob/main/docs/TIGER_STYLE.md">Tiger Style</a></li></ul><div class="notion-blank notion-block-156887563979807298abd5788f197995"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-14e8875639798099adefeb9c7aedb2c8" data-id="14e8875639798099adefeb9c7aedb2c8"><span><div id="14e8875639798099adefeb9c7aedb2c8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14e8875639798099adefeb9c7aedb2c8" title="FrostDB &amp; Resonate"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">FrostDB &amp; Resonate</span></span></h4><div class="notion-text notion-block-156887563979803d91e6ebcd952b1b20">从前面的方案中可以发现，大部分外部调用都可以通过接口 mock 的方式来实现确定性，最麻烦的是如何让整个分布式系统运行在一个节点的一个线程上，消除调度的不确定性</div><div class="notion-text notion-block-15d88756397980bd9e9ce0969fd8918d">上文提到的系统中除了 Rust 能比较好地实现外，其他语言都有些限制，但从头自己造一套任务和调度机制，还是能做到的</div><div class="notion-text notion-block-15d8875639798014a2fcd855d9a18884">而另外一些语言在设计之处就是完全透明多线程的，在这些语言上会困难得多。例如 Go，很难去避免使用 goroutine，而一旦有多个 goroutine，调度就完全不可控了</div><div class="notion-blank notion-block-15d8875639798018a997df6b4fc342b4"> </div><div class="notion-text notion-block-15d8875639798014a3f9eb9e919b10a9">虽然可以将 Go 程序编译为 WASM 来单线程执行并禁用抢占（<code class="notion-inline-code">GOMAXPROCS=1</code> 是不行的，碰到阻塞调用时还是会创建线程），但 runtime 仍然会<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/golang/go/blob/35ef4a9f330fdff870ff637558ec2fd03a93fd9c/src/runtime/proc.go#L6655">故意随机调度 goroutine</a>，以及 Go 的 map 遍历顺序也是故意随机的，还有<a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://blog.merovius.de/posts/2018-01-15-generating_entropy_without_imports_in_go/">其他很多不确定性来源</a></div><div class="notion-text notion-block-15d88756397980269adbca92f7e007a7">不过 Go runtime 中这些不确定性来源都是通过启动时的一个 seed 来确定的（就像确定性模拟器做的那样），如果能自定义这个 seed 那就能解决这些问题。但只差这一步，Go 的 runtime 开放和自定义程度很低。要想突破这最后一个限制，只能 fork 一份 runtime 来修改。这几乎就是 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/polarsignals/frostdb">FrostDB</a> 所做的事，他们 fork 了 Go runtime <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a#diff-99a8f74dc3dbef74ab6a6792a8e36e17d2196486ef16e9b8199ce9a9e7512183R44-R52">修改了几行代码</a> 来实现这一切：</div><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-15d88756397980c6817fc6bbd63bae9d" href="https://github.com/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a#diff-99a8f74dc3dbef74ab6a6792a8e36e17d2196486ef16e9b8199ce9a9e7512183R44-R52"><div><div class="notion-bookmark-title">runtime: add GORANDSEED to seed go runtime&#x27;s randomness · polarsignals/go@ea083ca</div><div class="notion-bookmark-description">This helps with deterministic execution. This commit additionally enables randomized scheduling. The runtime needs to be run with GOOS=wasip1 GOARCH=wasm for deterministic executions given an initi...</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><img src="https://www.notion.so/image/https%3A%2F%2Fgithub.com%2Ffluidicon.png?table=block&amp;id=15d88756-3979-80c6-817f-c6bbd63bae9d&amp;t=15d88756-3979-80c6-817f-c6bbd63bae9d" alt="runtime: add GORANDSEED to seed go runtime&#x27;s randomness · polarsignals/go@ea083ca" loading="lazy" decoding="async"/></div><div class="notion-bookmark-link-text">https://github.com/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a#diff-99a8f74dc3dbef74ab6a6792a8e36e17d2196486ef16e9b8199ce9a9e7512183R44-R52</div></div></div><div class="notion-bookmark-image"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fopengraph.githubassets.com%2F87e8c262666f4289280b098950624d382352a13bc2ff2d18524c0bc9859b943b%2Fpolarsignals%2Fgo%2Fcommit%2Fea083ca4892a62eb229c1886517e1cdb575ee19a?table=block&amp;id=15d88756-3979-80c6-817f-c6bbd63bae9d&amp;t=15d88756-3979-80c6-817f-c6bbd63bae9d" alt="runtime: add GORANDSEED to seed go runtime&#x27;s randomness · polarsignals/go@ea083ca" loading="lazy" decoding="async"/></div></a></div><div class="notion-blank notion-block-15d887563979807090a7c9036452a144"> </div><div class="notion-text notion-block-15d8875639798032b987d34fa11492ed">另一条路线是 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/resonatehq/resonate">Resonate</a>，他们则是确实避免使用 goroutine，自己造了一套 coroutine：</div><a target="_blank" rel="noopener noreferrer" href="https://github.com/resonatehq/resonate/blob/268c588e302f13187309e4b37636d19595d42fa1/internal/kernel/scheduler/coroutine.go" class="notion-external notion-external-block notion-row notion-block-15688756397980b8b0e7fe471ca097c1"><div class="notion-external-image"><svg viewBox="0 0 260 260"><g><path d="M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z" fill="#161614"></path></g></svg></div><div class="notion-external-description"><div class="notion-external-title">coroutine.go</div><div class="notion-external-block-desc">resonatehq</div></div></a><div class="notion-text notion-block-161887563979800383bef5c73388a2c3">Resonate 给出了一个使用模拟器发现 bug 的例子，包括 seed，用这个 seed 我们也能在本地复现出一样的结果：</div><ul class="notion-list notion-list-disc notion-block-161887563979803cbc3cfd96997ede33"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://blog.resonatehq.io/dst-finds-a-bug">The One Where DST Finds a Real Bug | Resonate</a></li></ul><div class="notion-blank notion-block-161887563979808fb4edec4610e57a92"> </div><div class="notion-text notion-block-16188756397980e6b285ee945f2f0c88">总得来说，在 Rust 这样比较开放的语言上实现确定性模拟是比较简单且兼容程度较高的。其次是其他相对底层的语言，虽然大多数时候需要实现一套自己的机制导致代码不具备普适性，但至少它们不会偷偷做额外的事把一切变得更糟。最麻烦的是 Go 这样隐藏了很多细节且不可控的语言，各种层面上限制都太大</div><div class="notion-text notion-block-15d88756397980908652d2dfbb4a4a29">恰好最近 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://tip.golang.org/doc/go1.24">Go 1.24 发布</a>，新增了 <code class="notion-inline-code">synctest</code> 包，可以在测试代码中实现作用域内的模拟时钟：</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">import (
	&quot;testing&quot;
	&quot;testing/synctest&quot;
	&quot;time&quot;
)

func Test(t *testing.T) {
	synctest.Run(func() {
		before := time.Now()
		time.Sleep(time.Second)
		after := time.Now()
		if d := after.Sub(before); d != time.Second {
			t.Fatalf(&quot;took %v&quot;, d)
		}
	})
}</code></pre><div class="notion-text notion-block-15d88756397980f79fddf05be4805fe0">这也是确定性模拟中所需的一个重要机制，希望随着 Go 自身的进一步开发，未来能有更 native 的方式在 Go 上实现确定性模拟</div><div class="notion-blank notion-block-15d88756397980079f87d679d633bf95"> </div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-14e88756397980c4aad5eb5f84c7cba2" data-id="14e88756397980c4aad5eb5f84c7cba2"><span><div id="14e88756397980c4aad5eb5f84c7cba2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14e88756397980c4aad5eb5f84c7cba2" title="Antithesis"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Antithesis</span></span></h4><div class="notion-text notion-block-15d88756397980a0808bf83287a80f92">模拟器都是单线程运行的，是因为我们默认无法干涉内核层面的调度，才有这样的限制。但真的不能吗？如果将模拟器实现在更底层的级别中呢？</div><div class="notion-blank notion-block-15d88756397980dea1b0d7d8abb937c5"> </div><div class="notion-text notion-block-14e88756397980fb9682c82cd0951eb8"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/">Antithesis</a> 是 FoundationDB 前成员（CEO 就是前面 FoundationDB 的演讲者）创立的一家公司，他们的平台能为任意系统提供确定性模拟：</div><blockquote class="notion-quote notion-block-163887563979803ea5ebf2e9b38810fd"><div>Antithesis is a <b>continuous reliability platform</b> that <b>autonomously searches</b> for problems in your software within a <b>simulated environment</b>. Every problem we find can be <b>perfectly reproduced</b>, allowing for <b>efficient debugging</b> of even the most complex problems.</div></blockquote><div class="notion-text notion-block-163887563979801d94dedbe880d5f14d">作为商业化解决方案，面对各种客户的不同系统。不可能要求客户对系统做大量修改和适配甚至重新设计，确定性模拟必须是透明的</div><div class="notion-text notion-block-16388756397980cf8567e086700c2500">因此，Antithesis 开发了一个<b>确定性模拟计算机</b>的 hypervisor。这很疯狂，但确实可行，只要整个虚拟机都是确定性的，那对被测试的软件就是完全透明的</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-163887563979805389c7c17c592b3b22"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9b66cf7a-d962-4958-83cf-d796d9aa08ad%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=16388756-3979-8053-89c7-c17c592b3b22&amp;t=16388756-3979-8053-89c7-c17c592b3b22&amp;width=1056&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-163887563979809abae5c09f2e391b1c">脱离语言的另一个好处是，可以真正运行「整个系统」。例如 FoundationDB 没法在模拟器中使用 RocksDB，因为它有后台线程。RisingWave 也给 etcd 和 Kafka 编写了单独的模拟器。但在 Antithesis 中都不需要为这些依赖的库和组件操心</div><div class="notion-blank notion-block-163887563979804caa50e42428d6f3c7"> </div><div class="notion-text notion-block-1638875639798008b456f8adb7e890e0">实现一个确定性的 hypervisor，这会比想象中更难，因为 CPU 也不是所有的情况都能保证确定性，而它非常复杂</div><div class="notion-text notion-block-163887563979807b9031cc7e6f644eda">为了模拟时间流逝，Antithesis 根据执行指令数来推进模拟时钟。但 PMC 中记录的执行指令数并不总是正确，这会破坏确定性。只有对 CPU 的细节足够了解，才可能解决这些问题</div><div class="notion-text notion-block-16388756397980148744f072e25c7ed3">在并发上，虽然被测系统是多线程的，但还是必须让它们运行在一个物理核上。因为有时间加速，这并不会对被测系统的性能造成多大影响。反而从 Antithesis 的角度来说，可以不需要关注核间同步，在不同核上运行更多单独的虚拟机实例提高效率。并且由于工作在更底层的级别上，使得 Antithesis 还能构造像线程饥饿这样的问题</div><figure class="notion-asset-wrapper notion-asset-wrapper-video notion-block-1638875639798063825de1b4d5c5f37b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;padding-bottom:56.25%"><link rel="preload" as="image" href="https://i.ytimg.com/vi/0E6GBg13P60/hqdefault.jpg" imageSrcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/default.webp 120w, https://i.ytimg.com/vi_webp/0E6GBg13P60/mqdefault.webp 320w, https://i.ytimg.com/vi_webp/0E6GBg13P60/hqdefault.webp 480w, https://i.ytimg.com/vi_webp/0E6GBg13P60/sddefault.webp 640w, https://i.ytimg.com/vi_webp/0E6GBg13P60/maxresdefault.webp 1280w" imageSizes="(max-width: 120px) 120px, (max-width: 320px) 320px, (max-width: 480px) 480px, (max-width: 640px) 640px, (max-width: 1280px) 1280px"/><div class="notion-yt-lite notion-asset-object-fit" style="object-fit:contain"><picture><source srcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/default.webp 120w" media="(max-width: 120px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/mqdefault.webp 320w" media="(max-width: 320px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/hqdefault.webp 480w" media="(max-width: 480px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/sddefault.webp 640w" media="(max-width: 640px)" type="image/webp"/><source srcSet="https://i.ytimg.com/vi_webp/0E6GBg13P60/maxresdefault.webp 1280w" media="(max-width: 1280px)" type="image/webp"/><img src="https://i.ytimg.com/vi/0E6GBg13P60/hqdefault.jpg" class="notion-yt-thumbnail" alt="Video preview"/></picture><div class="notion-yt-playbtn"></div></div></div></figure><div class="notion-blank notion-block-16388756397980a4ac7dc5e418719cd2"> </div><div class="notion-text notion-block-16388756397980588bdbefd7ab2f8664">Antithesis 还实现了一些很奇妙的技术，例如能智能判断系统执行历史、探索分支路径和状态空间，并且能保存状态。这意味着 Antithesis 的测试是完全自主的，你不需要编写任何测试用例，系统会自动生成用例挖掘可能的分支，进行比人工更可靠的测试，类似于一种更加智能的 fuzzing</div><div class="notion-text notion-block-16388756397980f0ad36df677f835799">Antithesis 可以提供每个 checkpoint 的快照，并且和走向其他分支的执行历史进行对比，他们称为 Multiverse（多重宇宙），你能在这些不同宇宙中进行「时间旅行」式的调试。随时回退到过去和继续走向未来看看发生了什么，甚至可以在时间旅行中执行命令或者使用调试器调试进程，捕获网络数据包，跑火焰图… 当你改变了过去之后，一个新的宇宙就会诞生</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-16388756397980a78de2ea3d83691037"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:cover" src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F39ec0609-297d-47f6-85d4-65c2c1b801c6%2Fimage.png%3FspaceId%3D4cc04375-345a-4a1e-bdf0-3a7c88ef0425?table=block&amp;id=16388756-3979-80a7-8de2-ea3d83691037&amp;t=16388756-3979-80a7-8de2-ea3d83691037&amp;width=1415.9801025390625&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-163887563979805695cbeb7189b9ce22">这一切都非常黑魔法，更多内容可以浏览他们的 Blog，都很有趣。也许 Antithesis 真的能定义未来的测试方法</div><ul class="notion-list notion-list-disc notion-block-16388756397980e9b7cef692887db5b2"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/">https://antithesis.com/blog/</a></li></ul><div class="notion-blank notion-block-16388756397980599633cef458af8d42"> </div><div class="notion-text notion-block-16388756397980e58895edd9a05561fe">Antithesis 的定价不便宜，但在客户侧都有不错的评价，包括一些知名基础设施系统：</div><ul class="notion-list notion-list-disc notion-block-1638875639798082908dcc6fca43ce89"><li>MongoDB 使用 Antithesis 测试存储引擎，核心服务器，同步和升降级功能。发现了一个严重的数据丢失问题：</li><ul class="notion-list notion-list-disc notion-block-1638875639798082908dcc6fca43ce89"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/case_studies/mongodb_productivity/">Accelerating developers at MongoDB</a></li><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/mongo_bug/">Working with Antithesis at MongoDB</a></li></ul></ul><ul class="notion-list notion-list-disc notion-block-1638875639798005a055cf615d7f8ccc"><li>Ethereum 在从 PoW（工作量证明）转向 PoS（权益证明）时使用 Antithesis 进行测试</li><ul class="notion-list notion-list-disc notion-block-1638875639798005a055cf615d7f8ccc"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/case_studies/ethereum_merge/">Testing the Ethereum merge</a></li></ul></ul><ul class="notion-list notion-list-disc notion-block-16388756397980649d05deca6e7e1b99"><li>WarpStream 端到端测试了整个 SaaS 系统，而不是局限在单个组件或进程</li><ul class="notion-list notion-list-disc notion-block-16388756397980649d05deca6e7e1b99"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.warpstream.com/blog/deterministic-simulation-testing-for-our-entire-saas">Deterministic Simulation Testing for Our Entire SaaS</a></li></ul></ul><ul class="notion-list notion-list-disc notion-block-1638875639798075924ef320ea24f1cd"><li>CockroachDB 在 Antithesis 上重现并定位了之前被搁置数年的事务并行提交 bug</li><ul class="notion-list notion-list-disc notion-block-1638875639798075924ef320ea24f1cd"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.cockroachlabs.com/blog/demonic-nondeterminism/">Antithesis of a One-in-a-Million Bug: Taming Demonic Nondeterminism</a></li></ul></ul><div class="notion-blank notion-block-16388756397980dfacd6cea786fdffde"> </div><div class="notion-text notion-block-163887563979801b956fe58a6ba86c1f">除了 Antithesis 之外，还有一些项目也试图在更底层的级别上进行确定性探索。例如 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://rr-project.org/">rr</a> 和 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/dettrace/dettrace">dettrace</a> 都是通过 ptrace 替换系统调用的想法来实现的确定性调试器，它们都诞生得更早一些。Facebook 也曾发起过 <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/facebookexperimental/hermit">hermit</a> 项目，虽然现在已经没有在积极开发</div><ul class="notion-list notion-list-disc notion-block-16388756397980e98f23f65876ae038e"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://developers.facebook.com/blog/post/2022/11/22/hermit-deterministic-linux-testing/">Hermit: Deterministic Linux for Controlled Testing and Software Bug-finding</a></li></ul><div class="notion-blank notion-block-1638875639798020839cdf1d8094357a"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-14688756397980c99fadf4cedf846fff" data-id="14688756397980c99fadf4cedf846fff"><span><div id="14688756397980c99fadf4cedf846fff" class="notion-header-anchor"></div><a class="notion-hash-link" href="#14688756397980c99fadf4cedf846fff" title="总结"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">总结</span></span></h3><div class="notion-text notion-block-163887563979803cae1dfcb8a529ede5">确定性模拟器提供了一个非常美好的、仿佛触手可及的设想。这里调试不再困难，系统更加可靠</div><div class="notion-text notion-block-163887563979802a8b7ac2f4a55c21af">但软件工程没有银弹，确定性模拟器仍然有很多问题。既然是模拟，前提是我们了解被模拟物的所有行为，但这是不可能的。所有模拟疏漏或失真的细节，最终也会在真实系统中遇见，例如错误理解的网络协议，意想不到的 system call 行为，依赖外部系统本身的 bug。都可能让系统再次在真实环境中故障</div><div class="notion-text notion-block-163887563979806d91c9efb99ad9e058">更重要的是不确定性的消除十分困难，模拟器本身来说，很难 cover 各种场景，而任何一点遗漏，都会把不确定性引入系统，最终走向混沌</div><div class="notion-text notion-block-163887563979803f9fb7fc047484627d">另一种情况是被测程序的修改会破坏可复现性，被测程序本身就是模拟器输入的一部分，如果修改被测程序，虽然不会破坏「确定性」，但可能会无法复现期望的问题。例如在程序启动时新运行一个线程，那模拟器的调度序列可能会因为这个新的输入而改变，它仍然是确定性的（相同的输入有相同的输出），只是没能再触发之前的问题。这实际上某种程度违背了模拟器提供的承诺，确定性和可复现性并不总是能完全划等号</div><div class="notion-blank notion-block-1638875639798091a0c7ee77e82faea7"> </div><div class="notion-text notion-block-1638875639798029a4f9fc0740cc225c">从工程角度来说，语言上实现的模拟器大多会有比较强的侵入性，会限制并发模型和依赖库。除了新项目以外难以引入。而 Antithesis 方案技术壁垒过高，大部分人没有能力实现，如果没有开源方案共建，无法广泛普及</div><div class="notion-text notion-block-16388756397980998d95ecc8652b5f48">不过这也只是模拟器实现中的困难，从方向上来说，高度的可复现性和极高的测试效率就足以成为任何追求可靠性的系统尝试和探索它的理由。我始终相信这项技术的巨大潜力，一定会是未来的方向</div><div class="notion-blank notion-block-14e887563979805ba907fa44a69fac3a"> </div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-1468875639798077b407cce692980528" data-id="1468875639798077b407cce692980528"><span><div id="1468875639798077b407cce692980528" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1468875639798077b407cce692980528" title="Ref"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Ref</span></span></h3><ol start="1" class="notion-list notion-list-numbered notion-block-15688756397980968511d07ea0d1afcc"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://notes.eatonphil.com/2024-08-20-deterministic-simulation-testing.html">What&#x27;s the big deal about Deterministic Simulation Testing?</a></li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-15688756397980598c19c0a9041b4b4c"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://sled.rs/simulation.html">sled simulation guide (jepsen-proof engineering)</a></li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-156887563979804684f9cf4e00d9d30e"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://risingwave.com/blog/deterministic-simulation-a-new-era-of-distributed-system-testing/">Deterministic Simulation: A New Era of Distributed System Testing (Part 1 of 2)</a></li></ol><ol start="4" class="notion-list notion-list-numbered notion-block-15688756397980dd9064edbc50276b74"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://risingwave.com/blog/applying-deterministic-simulation-the-risingwave-story-part-2-of-2/">Applying Deterministic Simulation: The RisingWave Story (Part 2 of 2)</a></li></ol><ol start="5" class="notion-list notion-list-numbered notion-block-156887563979809e9cedf30e2b8c2e96"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://juejin.cn/post/7262172937511518267">确定性模拟的背景、原理、框架及应用实例 - RisingWave中文开源社区</a></li></ol><ol start="6" class="notion-list notion-list-numbered notion-block-156887563979806d9f04e544ed180e3f"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://dropbox.tech/infrastructure/-testing-our-new-sync-engine">Testing sync at Dropbox</a></li></ol><ol start="7" class="notion-list notion-list-numbered notion-block-15688756397980259abfc8bcb20bbf99"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://tigerbeetle.com/blog/2023-07-11-we-put-a-distributed-database-in-the-browser">We Put a Distributed Database In the Browser – And Made a Game of It!</a></li></ol><ol start="8" class="notion-list notion-list-numbered notion-block-15d88756397980a3b167fae2fec0b471"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://tigerbeetle.com/blog/a-friendly-abstraction-over-iouring-and-kqueue">A Programmer-Friendly I/O Abstraction Over io_uring and kqueue</a></li></ol><ol start="9" class="notion-list notion-list-numbered notion-block-1568875639798008a838c85d3fc72086"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.polarsignals.com/blog/posts/2024/05/28/mostly-dst-in-go">(Mostly) Deterministic Simulation Testing in Go</a></li></ol><ol start="10" class="notion-list notion-list-numbered notion-block-15d88756397980e4951ae577fb68c399"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://blog.resonatehq.io/deterministic-simulation-testing">Deterministic Simulation Testing | Resonate</a></li></ol><ol start="11" class="notion-list notion-list-numbered notion-block-16388756397980fdbfe5f1f23adbe2ca"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/is_something_bugging_you/">Is something bugging you? | Antithesis</a></li></ol><ol start="12" class="notion-list notion-list-numbered notion-block-163887563979801bb93df42333e51cd6"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/deterministic_hypervisor/">So you think you want to write a deterministic hypervisor? | Antithesis</a></li></ol><ol start="13" class="notion-list notion-list-numbered notion-block-16388756397980af886cfeae3d3b0b3f"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/autonomous_testing/">Your computer can test better than you (and that&#x27;s a good thing) | Antithesis</a></li></ol><ol start="14" class="notion-list notion-list-numbered notion-block-16388756397980c1ab6ce3d7358a2c71"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/multiverse_debugging/">Debugging in the Multiverse | Ahtithesis</a></li></ol><ol start="15" class="notion-list notion-list-numbered notion-block-16388756397980c4aba8f98e557c4e0a"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/case_studies/mongodb_productivity/">Accelerating developers at MongoDB</a></li></ol><ol start="16" class="notion-list notion-list-numbered notion-block-16388756397980109419d128087b2edb"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://antithesis.com/blog/mongo_bug/">Working with Antithesis at MongoDB</a></li></ol><ol start="17" class="notion-list notion-list-numbered notion-block-16388756397980c787d1e337495c67ed"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.warpstream.com/blog/deterministic-simulation-testing-for-our-entire-saas">Deterministic Simulation Testing for Our Entire SaaS</a></li></ol><ol start="18" class="notion-list notion-list-numbered notion-block-1638875639798036a0e7ec748a7e218b"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.cockroachlabs.com/blog/demonic-nondeterminism/">Antithesis of a One-in-a-Million Bug: Taming Demonic Nondeterminism</a></li></ol><ol start="19" class="notion-list notion-list-numbered notion-block-16388756397980f0a915df7c499fa1a2"><li><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://developers.facebook.com/blog/post/2022/11/22/hermit-deterministic-linux-testing/">Hermit: Deterministic Linux for Controlled Testing and Software Bug-finding</a></li></ol><div class="notion-blank notion-block-14688756397980038b36dabb553fa829"> </div><div class="notion-blank notion-block-14688756397980b198b5ddab736aeb80"> </div></main></div><div class="flex flex-row gap-2"><a class="rounded-full px-4 py-1 bg-gray-100/[.3] text-gray-400 text-xs sm:text-sm font-normal leading-6 cursor-pointer transition-all duration-300 hover:bg-[var(--theme-color)] hover:text-white hover:-translate-y-1" href="/tag/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F">分布式系统</a></div><div class="mt-8 mb-6 w-full border-b border-dashed border-gray-200"></div><p class="text-base mb-3 font-normal text-gray-300">下一篇</p><a href="/post/coroutine"><h2 class="mb-2 sm:mb-4 text-gray-800 text-2xl font-bold relative transition-all duration-300 before:invisible before:h-5 before:w-0 before:bg-[var(--theme-color)] before:opacity-5 before:absolute before:top-4 before:-left-2 before:rounded-lg before:transition-all before:duration-500 hover:before:visible hover:before:w-full hover:text-[var(--theme-color)] hover:drop-shadow(0_1px_2px_rgb(255,255,255)">浅谈协程</h2></a><div class="mt-6 mb-8 w-full border-b border-dashed border-gray-200"></div><div id="comment" class="comment mt-5 text-gray-800 dark:text-gray-300 "><div class="text-center">Loading...<i class="fas fa-spinner animate-spin text-3xl "></i></div></div><aside class="hidden lg:block absolute h-full w-52 -right-56 top-36"><div class="sticky top-20"></div></aside></div></div></div></div><footer class="w-full border-t border-gray-200/[.8] relative mt-72 md:mt-60 before:w-full before:h-[22rem] before:z-10 before:block before:absolute before:-top-[17.6rem] before:left-0 before:bg-[url(/images/footer-bg.png)] before:bg-no-repeat before:bg-center before:bg-cover lg:before:bg-contain "><div class="max-w-[var(--content-width)] mx-auto my-12"><p class="mx-6 text-left text-xs text-gray-500 font-bold relative z-20">© <!-- -->2018-2025<!-- --> <!-- -->xxxuuu<!-- --> · Powered by <a class="hover:underline text-gray-700" href="https://github.com/xxxuuu/NotionNext">NotionNext</a></p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"NOTION_CONFIG":{"LINK":"https://xxxuuu.me","THEME":"autumn","KEYWORDS":"分布式系统,存储,云原生","AUTHOR":"xxxuuu","BIO":"xxxuuu","CUSTOM_MENU":"true","CUSTOM_RIGHT_CLICK_CONTEXT_MENU":"false","LANG":"zh-CN","SINCE":"2018","POST_TITLE_ICON":"false"},"notice":null,"siteInfo":{"title":"x³u³","description":"🗒 碎碎念","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","icon":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection\u0026id=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026t=0bb2e606-8d0c-4f7c-aca9-70986e90c055\u0026width=800\u0026cache=v2","link":"https://xxxuuu.me"},"allNavPages":[{"title":"2024 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2024summary","href":"/post/2024summary","pageIcon":"","lastEditedDate":"2025-01-01T07:04:00.847Z","publishDate":1735689600000,"ext":{},"short_id":"16e88756"},{"title":"确定性模拟器","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":"最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题","slug":"post/deterministic-simulator","href":"/post/deterministic-simulator","pageIcon":"","lastEditedDate":"2024-12-21T17:14:04.798Z","publishDate":1734739200000,"ext":{},"short_id":"14688756"},{"title":"浅谈协程","pageCoverThumbnail":"","category":null,"tags":["操作系统"],"summary":"最近经常被各种人问到一些关于协程的事情，例如 xx 语言的 xx 是不是协程，xx 语言和 xx 语言的协程有什么区别，我不得不一次次 share 出我的文章，索性直接发到 blog 上吧","slug":"post/coroutine","href":"/post/coroutine","pageIcon":"","lastEditedDate":"2024-11-22T15:31:35.278Z","publishDate":1732233600000,"ext":{},"short_id":"14688756"},{"title":"MemoryDB: Redis + Remote Log","pageCoverThumbnail":"","category":null,"tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","slug":"post/memorydb","href":"/post/memorydb","pageIcon":"","lastEditedDate":"2024-11-18T03:17:24.166Z","publishDate":1731801600000,"ext":{},"short_id":"12988756"},{"title":"应该在 DBMS 中使用 MMAP 吗？","pageCoverThumbnail":"","category":null,"tags":["论文阅读","数据库"],"summary":null,"slug":"post/db-mmap","href":"/post/db-mmap","pageIcon":"","lastEditedDate":"2024-11-03T07:26:55.807Z","publishDate":1729987200000,"ext":{},"short_id":"94e03781"},{"title":"日本游记","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念","旅行"],"summary":"次の駅は、東京です","slug":"post/japan-travel","href":"/post/japan-travel","pageIcon":"","lastEditedDate":"2024-11-09T06:15:00.190Z","publishDate":1729468800000,"ext":{},"short_id":"11688756"},{"title":"PVE 迁移翻车自救","pageCoverThumbnail":"","category":null,"tags":["折腾","PVE"],"summary":null,"slug":"post/pve-migration-rescue","href":"/post/pve-migration-rescue","pageIcon":"","lastEditedDate":"2024-10-13T12:39:01.428Z","publishDate":1728777600000,"ext":{},"short_id":"11d88756"},{"title":"译：使 Rust library 兼容 no_std","pageCoverThumbnail":"","category":null,"tags":["Rust"],"summary":"Effective Rust Item 33","slug":"post/rust-no-std","href":"/post/rust-no-std","pageIcon":"","lastEditedDate":"2024-09-21T10:57:48.427Z","publishDate":1726876800000,"ext":{},"short_id":"4e5d7fc0"},{"title":"Infra 窘境","pageCoverThumbnail":"","category":null,"tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","slug":"post/infra-dilemma","href":"/post/infra-dilemma","pageIcon":"","lastEditedDate":"2024-09-12T13:38:22.109Z","publishDate":1725321600000,"ext":{},"short_id":"5b4b2d85"},{"title":"迁移博客到 Notion","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"Make Notion Great Again！","slug":"post/migrate-blog-to-notion","href":"/post/migrate-blog-to-notion","pageIcon":"","lastEditedDate":"2024-11-17T13:06:23.284Z","publishDate":1724544000000,"ext":{},"short_id":"a06c26b2"},{"title":"Longhorn 浅析","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","category":null,"tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","slug":"post/longhorn","href":"/post/longhorn","pageIcon":"","lastEditedDate":"2024-10-08T10:27:34.636Z","publishDate":1723075200000,"ext":{},"short_id":"bde25ba8"},{"title":"从 Linux 内核看读写锁设计","pageCoverThumbnail":"","category":null,"tags":["Linux","操作系统"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","slug":"post/kernel-rwlock","href":"/post/kernel-rwlock","pageIcon":"","lastEditedDate":"2024-11-22T13:43:47.074Z","publishDate":1704326400000,"ext":{},"short_id":"0e96a78e"},{"title":"2023 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block\u0026id=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026t=d26ce18a-fa8d-4df4-8b82-69c419c5b621\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2023summary","href":"/post/2023summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:27.095Z","publishDate":1703980800000,"ext":{},"short_id":"d26ce18a"},{"title":"混乱的软中断概念","pageCoverThumbnail":"","category":null,"tags":["Linux","操作系统"],"summary":"软中断（softirq）和软件中断（software interrupt）","slug":"post/softirq-and-software-interrupt","href":"/post/softirq-and-software-interrupt","pageIcon":"","lastEditedDate":"2024-11-22T13:43:43.070Z","publishDate":1692144000000,"ext":{},"short_id":"3327d648"},{"title":"PVE8 上启用 12 代 Intel CPU 核显 SR-IOV","pageCoverThumbnail":"","category":null,"tags":["折腾","PVE"],"summary":"拯救我的 Galgame 和追番体验～","slug":"post/pve8-intel-sr-iov","href":"/post/pve8-intel-sr-iov","pageIcon":"","lastEditedDate":"2024-10-13T03:51:26.211Z","publishDate":1691280000000,"ext":{},"short_id":"d5fd419b"},{"title":"容器标准和生态","pageCoverThumbnail":"","category":null,"tags":["Cloud Native"],"summary":null,"slug":"post/container-spec-ecosystem","href":"/post/container-spec-ecosystem","pageIcon":"","lastEditedDate":"2024-08-27T15:25:22.390Z","publishDate":1689120000000,"ext":{},"short_id":"deaccfa2"},{"title":"Vim as an IDE","pageCoverThumbnail":"","category":null,"tags":["折腾","Vim"],"summary":"记录 Vim 入教过程和折腾记录","slug":"post/vim-as-an-ide","href":"/post/vim-as-an-ide","pageIcon":"","lastEditedDate":"2024-08-27T15:25:23.390Z","publishDate":1687392000000,"ext":{},"short_id":"f26f0a34"},{"title":"Kubernetes CSI","pageCoverThumbnail":"","category":null,"tags":["Cloud Native","Kubernetes"],"summary":null,"slug":"post/kubernetes-csi","href":"/post/kubernetes-csi","pageIcon":"","lastEditedDate":"2024-08-27T15:25:21.307Z","publishDate":1686960000000,"ext":{},"short_id":"a23d61e0"},{"title":"2022 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F967f6a03-c26f-451c-971a-3b507ae769f3%2Ftencent_badge.jpg?table=block\u0026id=cc463e20-63ea-4132-acea-84fc7307dde8\u0026t=cc463e20-63ea-4132-acea-84fc7307dde8\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2022summary","href":"/post/2022summary","pageIcon":"","lastEditedDate":"2024-11-10T10:41:29.538Z","publishDate":1672444800000,"ext":{},"short_id":"cc463e20"},{"title":"The Google File System 论文概览","pageCoverThumbnail":"","category":null,"tags":["论文阅读","分布式系统"],"summary":null,"slug":"post/gfs-paper","href":"/post/gfs-paper","pageIcon":"","lastEditedDate":"2024-08-27T15:25:15.003Z","publishDate":1644796800000,"ext":{},"short_id":"1eecd7c4"},{"title":"MIT6.824 Lab1 MapReduce","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":null,"slug":"post/mit6824-lab1-mapreduce","href":"/post/mit6824-lab1-mapreduce","pageIcon":"","lastEditedDate":"2024-08-27T15:25:13.836Z","publishDate":1644624000000,"ext":{},"short_id":"514ae2e3"},{"title":"蒟蒻的 2021 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block\u0026id=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026t=7b0eb02d-8b44-45f3-b593-52c0a62f4595\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"落落落落的一年","slug":"post/2021summary","href":"/post/2021summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:12.636Z","publishDate":1640908800000,"ext":{},"short_id":"7b0eb02d"},{"title":"蒟蒻的 2020 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F1dc80ee3-5c1d-4af8-a284-d7896174816a%2Ficpc%25E5%258D%2597%25E4%25BA%25AC.png?table=block\u0026id=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026t=37c4cfd9-62a3-41bb-9989-f9df38c45d04\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"转眼三年已经过去，我也迎来了毕业","slug":"post/2020summary","href":"/post/2020summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:11.370Z","publishDate":1610236800000,"ext":{},"short_id":"37c4cfd9"},{"title":"蒟蒻的 2019 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F2fdfd260-e2c8-42ea-9d8d-6fd6795797dc%2Flanqiao.jpeg?table=block\u0026id=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026t=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"随着2019年最后一晚的落幕，21世纪的10年代也结束了，今年的我无论是在技术上还是别的方面，都成长了许多。以本文记录我的技术路程，迎接新的一年","slug":"post/2019summary","href":"/post/2019summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:09.504Z","publishDate":1577836800000,"ext":{},"short_id":"8aa3f594"},{"title":"蒟蒻的 2018 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff362b439-342f-451a-b70e-41ec07d86ab3%2F2018summary.jpeg?table=block\u0026id=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026t=806f9f46-c738-4c87-9957-e73d11ec44bd\u0026width=800\u0026cache=v2","category":null,"tags":["碎碎念"],"summary":"又是一年过去了，2018算是人生中最重要的转折点之一，总结一下今年的经历和感想，也算是记录我的技术路程","slug":"post/2018summary","href":"/post/2018summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:07.408Z","publishDate":1546214400000,"ext":{},"short_id":"806f9f46"}],"tagOptions":[{"name":"碎碎念","color":"red","count":9},{"name":"分布式系统","color":"gray","count":5},{"name":"折腾","color":"blue","count":4},{"name":"论文阅读","color":"orange","count":3},{"name":"操作系统","color":"blue","count":3},{"name":"Linux","color":"purple","count":2},{"name":"Cloud Native","color":"brown","count":2},{"name":"数据库","color":"yellow","count":2},{"name":"PVE","color":"blue","count":2},{"name":"存储","color":"default","count":1},{"name":"Vim","color":"pink","count":1},{"name":"Kubernetes","color":"green","count":1},{"name":"Rust","color":"orange","count":1},{"name":"旅行","color":"yellow","count":1}],"categoryOptions":[],"customNav":[{"icon":"fas fa-link","name":"友链","href":"/links","target":"_self","show":true},{"icon":null,"name":"关于","href":"/about","target":"_self","show":true}],"customMenu":[{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/","title":"🏠 首页","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:49.016Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/","name":"🏠 首页","target":"_self","password":"","show":true},{"date":{"start_date":"2024-08-24","date_format":"relative"},"type":"Menu","slug":"/archive","title":"📃 归档","status":"Published","category":"","comment":"","publishDate":1724457600000,"publishDay":"2024-8-24","lastEditedDate":"2024-08-25T14:25:34.971Z","lastEditedDay":"2024-8-25","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/archive","name":"📃 归档","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/links","summary":"跳转到/links","title":"👬 友链","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:37.252Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/links","name":"👬 友链","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/about","summary":"跳转到/about","title":"👤 关于","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:43.389Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/about","name":"👤 关于","target":"_self","password":"","show":true}],"postCount":25,"latestPosts":[{"id":"16e88756-3979-8010-aeb9-d7e49f597453","date":{"start_date":"2025-01-01","date_format":"relative"},"type":"Post","slug":"post/2024summary","tags":["碎碎念"],"title":"2024 年度总结","status":"Published","category":"","comment":"","publishDate":1735689600000,"publishDay":"2025-1-1","lastEditedDate":"2025-01-01T07:04:00.847Z","lastEditedDay":"2025-1-1","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2024summary","target":"_self","password":""},{"id":"14688756-3979-80f8-8f88-d0bb8697b4a4","date":{"start_date":"2024-12-21","date_format":"relative"},"type":"Post","slug":"post/deterministic-simulator","tags":["分布式系统"],"summary":"最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题","title":"确定性模拟器","status":"Published","category":"","comment":"","publishDate":1734739200000,"publishDay":"2024-12-21","lastEditedDate":"2024-12-21T17:14:04.798Z","lastEditedDay":"2024-12-21","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"}],"href":"/post/deterministic-simulator","target":"_self","password":""},{"id":"14688756-3979-806c-af3c-f23f4c85d88e","date":{"start_date":"2024-11-22","date_format":"relative"},"type":"Post","slug":"post/coroutine","tags":["操作系统"],"summary":"最近经常被各种人问到一些关于协程的事情，例如 xx 语言的 xx 是不是协程，xx 语言和 xx 语言的协程有什么区别，我不得不一次次 share 出我的文章，索性直接发到 blog 上吧","title":"浅谈协程","status":"Published","category":"","comment":"","publishDate":1732233600000,"publishDay":"2024-11-22","lastEditedDate":"2024-11-22T15:31:35.278Z","lastEditedDay":"2024-11-22","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"操作系统","color":"blue"}],"href":"/post/coroutine","target":"_self","password":""},{"id":"12988756-3979-8065-aeb4-e6ec1258ed90","date":{"start_date":"2024-11-17","date_format":"relative"},"type":"Post","slug":"post/memorydb","tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","title":"MemoryDB: Redis + Remote Log","status":"Published","category":"","comment":"","publishDate":1731801600000,"publishDay":"2024-11-17","lastEditedDate":"2024-11-18T03:17:24.166Z","lastEditedDay":"2024-11-18","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"},{"name":"数据库","color":"yellow"},{"name":"论文阅读","color":"orange"}],"href":"/post/memorydb","target":"_self","password":""},{"id":"94e03781-e74c-41d0-89f7-df2e2a7ad93f","date":{"start_date":"2024-10-27","date_format":"relative"},"type":"Post","slug":"post/db-mmap","tags":["论文阅读","数据库"],"title":"应该在 DBMS 中使用 MMAP 吗？","status":"Published","category":"","comment":"","publishDate":1729987200000,"publishDay":"2024-10-27","lastEditedDate":"2024-11-03T07:26:55.807Z","lastEditedDay":"2024-11-3","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"数据库","color":"yellow"}],"href":"/post/db-mmap","target":"_self","password":""},{"id":"11688756-3979-8028-b7d8-ce8bf2ec4253","date":{"start_date":"2024-10-21","date_format":"relative"},"type":"Post","slug":"post/japan-travel","tags":["碎碎念","旅行"],"summary":"次の駅は、東京です","title":"日本游记","status":"Published","category":"","comment":"","publishDate":1729468800000,"publishDay":"2024-10-21","lastEditedDate":"2024-11-09T06:15:00.190Z","lastEditedDay":"2024-11-9","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fb07e03ea-454d-48b4-a53c-169003780460%2FDSC_0663.jpg?table=block\u0026id=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026t=11688756-3979-8028-b7d8-ce8bf2ec4253\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"},{"name":"旅行","color":"yellow"}],"href":"/post/japan-travel","target":"_self","password":""}],"post":{"id":"14688756-3979-80f8-8f88-d0bb8697b4a4","date":{"start_date":"2024-12-21","date_format":"relative"},"type":"Post","slug":"post/deterministic-simulator","tags":["分布式系统"],"summary":"最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题","title":"确定性模拟器","status":"Published","category":"","comment":"","publishDate":1734739200000,"publishDay":"2024-12-21","lastEditedDate":"2024-12-21T17:14:04.798Z","lastEditedDay":"2024-12-21","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"}],"href":"/post/deterministic-simulator","target":"_self","password":"","blockMap":{"block":{"14688756-3979-80f8-8f88-d0bb8697b4a4":{"value":{"id":"14688756-3979-80f8-8f88-d0bb8697b4a4","version":1967,"type":"page","content":["14e88756-3979-808f-b237-d3cde90f613c","14688756-3979-801a-bb15-d0452b85dcda","14688756-3979-8082-ae22-dd9fc9a43f62","14688756-3979-803d-87fc-e30cc9932e6e","14688756-3979-80cc-acc3-e58a3f6b6a57","14688756-3979-803a-a5b5-f29c0e50d3b0","14688756-3979-8009-a223-cea1d27a3498","14688756-3979-8062-b8c5-d87d04aff441","14688756-3979-8076-a9d3-dded2eb4b947","14688756-3979-804d-bdaa-cba241bd6b6c","14688756-3979-80c6-861c-ec28cce2d5e1","14688756-3979-80f7-99e1-c0397719a466","14688756-3979-806a-b7c9-e9578695638b","14d88756-3979-8078-87c5-e2f310cf37a2","14d88756-3979-8086-b923-dfa7249c270a","14d88756-3979-8026-835f-f80b749733ab","14688756-3979-802c-9b5b-f909ab4df682","14688756-3979-8040-a39f-f7a4e9444f67","14688756-3979-80c6-b932-f3528c2eb1cf","14688756-3979-80ad-a3aa-ecf1d52b66d2","14688756-3979-80cf-99e3-e62ed68705a5","14688756-3979-8033-ad07-ef0f3d03592e","14688756-3979-800c-8533-edac5c20d358","14688756-3979-809c-9593-f0d4daaa832f","14688756-3979-8088-ad6d-c83f56aee1ae","14e88756-3979-8018-9eb7-d2af4375643f","14e88756-3979-8067-8c33-eef84ff81962","14688756-3979-8023-bc87-da5ae108cbca","14688756-3979-8005-8196-c86a25cabe3c","14e88756-3979-8046-b25b-e1efa8a8f2a3","16388756-3979-809e-8e0a-e5e68ab6e62f","16388756-3979-806d-86ce-d8f9fd7e7068","14688756-3979-80d2-a4da-c3b81913bc35","14688756-3979-80c9-bf23-db8484ff255f","14688756-3979-8004-b4bf-eb00d0243e23","14688756-3979-809a-bafd-d84c762e6046","14688756-3979-8064-b23d-e634fd248245","14688756-3979-80f0-94cd-ce1884d02c29","14688756-3979-8016-b156-d447217c8c99","14688756-3979-80c3-9d2e-cfcff5cec2ec","14e88756-3979-804a-8b40-f7b088c16bf0","14e88756-3979-8040-915f-c27a22c99bdf","14d88756-3979-8087-8306-cd07f8fa013e","14688756-3979-80d5-bf4b-df676b154192","14e88756-3979-801f-a62b-dfbe156f074d","14688756-3979-801d-bcd3-da848c7040c3","14688756-3979-807f-b5ed-f38e8d6f9f4e","14688756-3979-804a-b414-cf66116330b5","15588756-3979-8009-9b36-e6ee36419c76","15588756-3979-8060-a127-e61da4ff8e98","15588756-3979-80fc-947d-dab04fd4a368","14e88756-3979-801c-b3ca-ce2a10345671","14e88756-3979-807b-840c-e426982423df","14e88756-3979-8055-bd6e-e02b8e2edbea","14e88756-3979-8081-88f0-f6d31be0fd70","14d88756-3979-80ef-a5a8-fad2fa764a39","16388756-3979-80c8-8a75-fc9b49013e01","16388756-3979-80db-84d3-cbdf3226052b","16388756-3979-8055-a2d2-f0719ed0694d","16388756-3979-809a-a586-f2403bc1a49b","16388756-3979-80db-a4ff-df3176c6beef","14688756-3979-8089-887f-ddef36bb3744","14688756-3979-8096-97e1-f9037ff18883","15588756-3979-8020-9a3e-e98f34aabf18","15588756-3979-80d5-a9c9-d84116744b96","15588756-3979-805c-8064-ca0cf669e11e","15588756-3979-8003-a518-d2a03b846bca","15588756-3979-80bc-ad79-c98d3ad9c90f","15588756-3979-80f9-ab0f-cb4f38655458","15588756-3979-8041-81d5-c26aa14efb3c","15588756-3979-8060-9138-d8bae2d3e272","15588756-3979-80dc-b057-f7491ab0735d","15588756-3979-8075-9ca3-c85efd227d9c","15588756-3979-80d6-99b1-fde45aa6e309","15588756-3979-80e9-a241-c485214a3f3a","15588756-3979-80ce-9df5-f0342930d96e","14688756-3979-805d-924f-e6a74a881692","ff0a8206-103c-457d-a809-b4356a897c93","93733ab2-0e61-4462-b5bf-01440b2c8d59","14688756-3979-8085-9faa-f36901f37fe2","15588756-3979-8024-9cb7-cf4ba1e3f73f","15588756-3979-80eb-8801-fda0a89bc81d","15588756-3979-80ca-87cc-d04e9c81f48a","15588756-3979-8054-8a08-fbb411b18a98","14688756-3979-8061-8912-ed8070306960","14688756-3979-808c-b56b-f7721a3b7fa0","14688756-3979-80fb-8a7d-fccd5dffb793","14688756-3979-80c1-8154-d71ad5bbaf1d","15588756-3979-8000-a34d-c6a02159cb77","15588756-3979-8076-9bd3-d7121fc3f77c","14688756-3979-805d-aab6-ee285a94362b","15588756-3979-8092-858f-e69881f0fee9","15588756-3979-8019-b605-da63c99b640e","15588756-3979-80c1-a5bd-e7c817807ff5","15588756-3979-80c8-a5e9-d86058788242","15588756-3979-8013-a01c-f1d76abbd18a","15588756-3979-80a5-8c42-dec92a24d35b","15588756-3979-8056-9ffa-f5656b3c5b70","15688756-3979-800c-9402-f7227ae25c39","15688756-3979-80ce-b0ec-c39f8deb0f5f","15688756-3979-80f5-ae6d-ef2512c94e7e","15688756-3979-80c4-9eb5-c9a9a211f267","15688756-3979-806d-a76c-c663ddac212b","15688756-3979-80b9-804d-fa061cd6059d","15688756-3979-8002-812b-c1bfb8bb916e","15688756-3979-800b-be54-c2d26a2fc767","15688756-3979-8098-ad64-f1f378d9ea14","15688756-3979-8036-90d4-ddc19da4df4f","16388756-3979-8085-8430-e495a91a56a3","15688756-3979-80ec-9de5-daeb532f7b16","15688756-3979-8032-881f-e3ed296331a8","15688756-3979-8024-9baf-cb35507d9dc4","15688756-3979-8099-8ab3-d69c8b466640","15688756-3979-8084-8c3f-dc05dd9c488f","15688756-3979-8040-9b67-fbf1dc7c01f3","15688756-3979-80af-870e-e158c659751a","15688756-3979-80ef-a20e-ff5d2b27d237","15688756-3979-80af-8283-c59e4f873bc6","15688756-3979-8044-a934-f77c1927aa95","15d88756-3979-8071-9a01-fda4c4c76ea1","15688756-3979-80aa-887c-ca129211a741","15688756-3979-8048-8a84-fec2d4d195e1","15688756-3979-801e-b69e-e2aa947cdf33","15688756-3979-8085-94d5-ff49a017c0ee","15688756-3979-8033-a8c4-f2fa564262a8","15688756-3979-8084-8ce8-cac3a55edd48","15d88756-3979-80b0-abc9-f6e61c7e6a49","15d88756-3979-8060-9a0c-cb05b9fb541d","15f88756-3979-80c8-bee5-e16ebd98c2b5","15f88756-3979-805e-a240-e10edd6b6039","15688756-3979-8072-98ab-d5788f197995","14e88756-3979-8099-adef-eb9c7aedb2c8","15688756-3979-803d-91e6-ebcd952b1b20","15d88756-3979-80bd-9e9c-e0969fd8918d","15d88756-3979-8014-a2fc-d855d9a18884","15d88756-3979-8018-a997-df6b4fc342b4","15d88756-3979-8014-a3f9-eb9e919b10a9","15d88756-3979-8026-9adb-ca92f7e007a7","15d88756-3979-80c6-817f-c6bbd63bae9d","15d88756-3979-8070-90a7-c9036452a144","15d88756-3979-8032-b987-d34fa11492ed","15688756-3979-80b8-b0e7-fe471ca097c1","16188756-3979-8003-83be-f5c73388a2c3","16188756-3979-803c-bc3c-fd96997ede33","16188756-3979-808f-b4ed-ec4610e57a92","16188756-3979-80e6-b285-ee945f2f0c88","15d88756-3979-8090-8652-d2dfbb4a4a29","15d88756-3979-8029-a98e-d62678a59318","15d88756-3979-80f7-9fdd-f05be4805fe0","15d88756-3979-8007-9f87-d679d633bf95","14e88756-3979-80c4-aad5-eb5f84c7cba2","15d88756-3979-80a0-808b-f83287a80f92","15d88756-3979-80de-a1b0-d7d8abb937c5","14e88756-3979-80fb-9682-c82cd0951eb8","16388756-3979-803e-a5eb-f2e9b38810fd","16388756-3979-801d-94de-dbe880d5f14d","16388756-3979-80cf-8567-e086700c2500","16388756-3979-8053-89c7-c17c592b3b22","16388756-3979-809a-bae5-c09f2e391b1c","16388756-3979-804c-aa50-e42428d6f3c7","16388756-3979-8008-b456-f8adb7e890e0","16388756-3979-807b-9031-cc7e6f644eda","16388756-3979-8014-8744-f072e25c7ed3","16388756-3979-8063-825d-e1b4d5c5f37b","16388756-3979-80a4-ac7d-c5e418719cd2","16388756-3979-8058-8bdb-efd7ab2f8664","16388756-3979-80f0-ad36-df677f835799","16388756-3979-80a7-8de2-ea3d83691037","16388756-3979-8056-95cb-eb7189b9ce22","16388756-3979-80e9-b7ce-f692887db5b2","16388756-3979-8059-9633-cef458af8d42","16388756-3979-80e5-8895-edd9a05561fe","16388756-3979-8082-908d-cc6fca43ce89","16388756-3979-8005-a055-cf615d7f8ccc","16388756-3979-8064-9d05-deca6e7e1b99","16388756-3979-8075-924e-f320ea24f1cd","16388756-3979-80df-acd6-cea786fdffde","16388756-3979-801b-956f-e58a6ba86c1f","16388756-3979-80e9-8f23-f65876ae038e","16388756-3979-8020-839c-df1d8094357a","14688756-3979-80c9-9fad-f4cedf846fff","16388756-3979-803c-ae1d-fcb8a529ede5","16388756-3979-802a-8b7a-c2f4a55c21af","16388756-3979-806d-91c9-efb99ad9e058","16388756-3979-803f-9fb7-fc047484627d","16388756-3979-8091-a0c7-ee77e82faea7","16388756-3979-8029-a4f9-fc0740cc225c","16388756-3979-8099-8d95-ecc8652b5f48","14e88756-3979-805b-a907-fa44a69fac3a","14688756-3979-8077-b407-cce692980528","15688756-3979-8096-8511-d07ea0d1afcc","15688756-3979-8059-8c19-c0a9041b4b4c","15688756-3979-8046-84f9-cf4e00d9d30e","15688756-3979-80dd-9064-edbc50276b74","15688756-3979-809e-9ced-f30e2b8c2e96","15688756-3979-806d-9f04-e544ed180e3f","15688756-3979-8025-9abf-c8bcb20bbf99","15d88756-3979-80a3-b167-fae2fec0b471","15688756-3979-8008-a838-c85d3fc72086","15d88756-3979-80e4-951a-e577fb68c399","16388756-3979-80fd-bfe5-f1f23adbe2ca","16388756-3979-801b-b93d-f42333e51cd6","16388756-3979-80af-886c-feae3d3b0b3f","16388756-3979-80c1-ab6c-e3d7358a2c71","16388756-3979-80c4-aba8-f98e557c4e0a","16388756-3979-8010-9419-d128087b2edb","16388756-3979-80c7-87d1-e337495c67ed","16388756-3979-8036-a0e7-ec748a7e218b","16388756-3979-80f0-a915-df7c499fa1a2","14688756-3979-8003-8b36-dabb553fa829","14688756-3979-80b1-98b5-ddab736aeb80"],"format":{"page_font":"mono","block_locked":false,"block_locked_by":"919e7400-5a69-4402-b2e1-f7d99cc48131","copied_from_pointer":{"id":"2eace25c-842c-46fd-9ccb-e9190981b6c3","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"page_cover_position":0.6,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/d4f84dd8-db30-446f-b12a-72e636660f61/SocialMediaPreviewImage.png","page_floating_table_of_contents":{"state":"minimal"}},"created_time":1732283930748,"last_edited_time":1734801244798,"parent_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","parent_table":"collection","alive":true,"copied_from":"2eace25c-842c-46fd-9ccb-e9190981b6c3","file_ids":["d73ecb77-f178-407b-a2f2-ae9d9730c200","1a69081b-b54d-40c9-a213-43ab59edc22e","425adfab-dfef-4b60-bf89-60980b6fac5b","5cbcab0c-5fc1-4e0c-a134-dea5e9e04c71","8d779b08-a2ce-4471-b27c-2755795d614a","d4f84dd8-db30-446f-b12a-72e636660f61"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0dc306ca-50a6-4917-9b5a-85a61f0f66f5":{"value":{"id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","version":192,"type":"collection_view_page","content":["c12d1fcb-2e22-4dc3-a5f5-b5010c63059a"],"view_ids":["2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","14688756-3979-80e7-97c9-000c212f8370","14588756-3979-8039-9990-000cefddccf8","55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","8dfd415c-71af-41f9-b984-e7182bf2210b","3c2f93d8-6810-42a1-87da-55f1ecda9bca"],"collection_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","format":{"site_id":"cd684fc1-aa3f-4897-8f3a-ec903e77f063","block_locked":false,"block_locked_by":"27074aef-7216-41ed-baef-d9b53addd870","collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"copied_from_pointer":{"id":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","table":"block","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"page_cover_position":0.5,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/16412a4f-3220-4021-b553-56a010794a94/SocialMediaPreviewImage.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"919e7400-5a69-4402-b2e1-f7d99cc48131"},{"role":"reader","type":"public_permission","added_timestamp":1724420656606,"allow_duplicate":false}],"created_time":1724383978099,"last_edited_time":1735711344467,"parent_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","parent_table":"space","alive":true,"copied_from":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","file_ids":["49b4570c-b2f0-457b-81b7-b68e2693a471","708d7d1d-6233-408b-952f-594bb2831de7","145cea07-09d7-4146-bcf5-bebd1518488c","a9af1d6b-f284-4734-ba06-990353cf3f84","20ee2bf3-8f75-4cd7-9d6e-e1a780d5f17c","16412a4f-3220-4021-b553-56a010794a94"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-808f-b237-d3cde90f613c":{"value":{"id":"14e88756-3979-808f-b237-d3cde90f613c","version":509,"type":"text","properties":{"title":[["最初接触到确定性模拟的概念是在 2022 年 Rust China Conf 上听的一场演讲，后续一直持续关注着这个领域，也在腾讯组内分享过相关议题"]]},"format":{"copied_from_pointer":{"id":"3fce500c-02f1-42b0-87f3-3c40061e07f7","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732953654409,"last_edited_time":1734793546816,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-801a-bb15-d0452b85dcda":{"value":{"id":"14688756-3979-801a-bb15-d0452b85dcda","version":3,"type":"text","created_time":1732284197081,"last_edited_time":1732284197082,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8082-ae22-dd9fc9a43f62":{"value":{"id":"14688756-3979-8082-ae22-dd9fc9a43f62","version":15,"type":"sub_header","properties":{"title":[["背景"]]},"format":{"copied_from_pointer":{"id":"0761aaa0-a74a-47de-ae64-f44f45f97eb5","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228796,"last_edited_time":1732954046589,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"0761aaa0-a74a-47de-ae64-f44f45f97eb5","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-803d-87fc-e30cc9932e6e":{"value":{"id":"14688756-3979-803d-87fc-e30cc9932e6e","version":3,"type":"text","properties":{"title":[["分布式系统面临的问题："]]},"format":{"copied_from_pointer":{"id":"715cecba-77c7-47af-b190-4d95886b77a2","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228797,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"715cecba-77c7-47af-b190-4d95886b77a2","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80cc-acc3-e58a3f6b6a57":{"value":{"id":"14688756-3979-80cc-acc3-e58a3f6b6a57","version":3,"type":"numbered_list","properties":{"title":[["通信不可靠：丢包，超时，乱序，重复"]]},"content":["49688360-6eeb-480f-9284-f81070003083"],"format":{"copied_from_pointer":{"id":"dd19048a-29db-484e-8c1d-2e8ea3d53c27","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228798,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"dd19048a-29db-484e-8c1d-2e8ea3d53c27","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-803a-a5b5-f29c0e50d3b0":{"value":{"id":"14688756-3979-803a-a5b5-f29c0e50d3b0","version":3,"type":"numbered_list","properties":{"title":[["时钟不可靠：时钟漂移，拖尾，回退"]]},"content":["7f92640c-e8eb-42cf-a384-8d18a5089a04","84ea3146-11e8-488a-93cc-61dfd64e986d"],"format":{"copied_from_pointer":{"id":"417fdeca-d412-4af3-8023-a94a035bd150","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228798,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"417fdeca-d412-4af3-8023-a94a035bd150","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8009-a223-cea1d27a3498":{"value":{"id":"14688756-3979-8009-a223-cea1d27a3498","version":3,"type":"numbered_list","properties":{"title":[["节点不可靠：阻塞，宕机，掉线，停顿"]]},"content":["d7e394de-d11c-48cb-8e0c-460e69085362"],"format":{"copied_from_pointer":{"id":"7adcc185-0436-45d2-b724-02320c16c7eb","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228799,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"7adcc185-0436-45d2-b724-02320c16c7eb","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8062-b8c5-d87d04aff441":{"value":{"id":"14688756-3979-8062-b8c5-d87d04aff441","version":3,"type":"text","properties":{"title":[["分布式软件/算法的目标：容忍不可靠的环境，实现容错，同时保证安全性"]]},"format":{"copied_from_pointer":{"id":"da3d6bbb-a51c-4cf9-8fe1-d3ee6a3262cf","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228799,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"da3d6bbb-a51c-4cf9-8fe1-d3ee6a3262cf","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8076-a9d3-dded2eb4b947":{"value":{"id":"14688756-3979-8076-a9d3-dded2eb4b947","version":120,"type":"text","properties":{"title":[["节点不可能只依赖自身状态来对整个系统进行判断，需要达成共识：Paxos、ZAB、Raft…."]]},"format":{"copied_from_pointer":{"id":"1f9ea33d-cba7-410b-a066-5eabdbf08623","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228799,"last_edited_time":1732892142680,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"1f9ea33d-cba7-410b-a066-5eabdbf08623","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-804d-bdaa-cba241bd6b6c":{"value":{"id":"14688756-3979-804d-bdaa-cba241bd6b6c","version":3,"type":"image","properties":{"source":[["https://raft.github.io/logo/solo.svg"]],"caption":[["Raft logo"]]},"format":{"block_width":144,"block_height":320,"display_source":"https://raft.github.io/logo/solo.svg","block_full_width":false,"block_page_width":false,"copied_from_pointer":{"id":"bb170072-a213-4558-8b79-97c4d0798ef2","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228799,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"bb170072-a213-4558-8b79-97c4d0798ef2","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c6-861c-ec28cce2d5e1":{"value":{"id":"14688756-3979-80c6-861c-ec28cce2d5e1","version":3,"type":"text","properties":{"title":[["通常共识算法都是实现了全序广播，能够保证一系列消息以相同的顺序被应用到每个节点上，以此实现共识"]]},"format":{"copied_from_pointer":{"id":"f7551bff-d2b8-4ee3-a6b6-53dcb4627b3a","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228799,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"f7551bff-d2b8-4ee3-a6b6-53dcb4627b3a","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80f7-99e1-c0397719a466":{"value":{"id":"14688756-3979-80f7-99e1-c0397719a466","version":3,"type":"text","format":{"copied_from_pointer":{"id":"7b5faa2e-afb5-4ece-b9d7-563094c5312a","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228800,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"7b5faa2e-afb5-4ece-b9d7-563094c5312a","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-806a-b7c9-e9578695638b":{"value":{"id":"14688756-3979-806a-b7c9-e9578695638b","version":297,"type":"text","properties":{"title":[["共识算法的作者都声称他们的算法简单、易于理解，算法本身的正确性也通过形式化验证进行保证"]]},"format":{"copied_from_pointer":{"id":"826ed60e-242a-4104-b6e0-19f60498b117","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228800,"last_edited_time":1732892571713,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"826ed60e-242a-4104-b6e0-19f60498b117","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-8078-87c5-e2f310cf37a2":{"value":{"id":"14d88756-3979-8078-87c5-e2f310cf37a2","version":134,"type":"image","properties":{"size":[["72.5KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/93c5caed-f667-49b7-8ba3-8b3cf803c63d/image.png"]],"caption":[["Raft 论文的标题的定语就是 Understandable"]]},"format":{"block_width":707.975830078125,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/93c5caed-f667-49b7-8ba3-8b3cf803c63d/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.20266120777891505,"block_preserve_scale":true},"created_time":1732892196197,"last_edited_time":1732892678129,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["93c5caed-f667-49b7-8ba3-8b3cf803c63d"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-8086-b923-dfa7249c270a":{"value":{"id":"14d88756-3979-8086-b923-dfa7249c270a","version":31,"type":"image","properties":{"size":[["27.1KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/765fda1c-1475-4ca9-ba0e-7b1b8870060c/image.png"]],"caption":[["Lamport 的第二篇 "],["Paxos Made Simple",[["i"]]],[" 论文中，第一句话是 Paxos is very simple"]]},"format":{"block_width":707.96875,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/765fda1c-1475-4ca9-ba0e-7b1b8870060c/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.17479674796747968,"block_preserve_scale":true},"created_time":1732892472877,"last_edited_time":1732892557139,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["765fda1c-1475-4ca9-ba0e-7b1b8870060c"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-8026-835f-f80b749733ab":{"value":{"id":"14d88756-3979-8026-835f-f80b749733ab","version":15,"type":"text","properties":{"title":[["共识算法看起来没有那么复杂，但具体落地时，正确实现非常困难，分布式系统的环境非常复杂，不确定因素和扰动过多，要在任何一种情况下都能正常工作是一个很大的挑战"]]},"format":{"copied_from_pointer":{"id":"cd25a995-b415-4d52-af50-d4c98b26fac5","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732892207811,"last_edited_time":1732892573575,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-802c-9b5b-f909ab4df682":{"value":{"id":"14688756-3979-802c-9b5b-f909ab4df682","version":3,"type":"text","properties":{"title":[["一些 bug 可能需要运行数千次，才会发生一次，且几乎无法复现"]]},"format":{"copied_from_pointer":{"id":"defc22ab-a764-4efc-83f4-a153f48215f2","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228801,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"defc22ab-a764-4efc-83f4-a153f48215f2","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8040-a39f-f7a4e9444f67":{"value":{"id":"14688756-3979-8040-a39f-f7a4e9444f67","version":9,"type":"image","properties":{"size":[["161.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f9fa10f4-1198-4a2f-b546-aed8998940c7/Untitled.png"]],"caption":[["MIT 6.824 指南通常打着「数千次都不出错」的 slogan，也进一步说明了测试的困难"]]},"format":{"block_width":528,"block_height":320,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f9fa10f4-1198-4a2f-b546-aed8998940c7/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.41637831603229525,"copied_from_pointer":{"id":"c206bc8c-4636-4058-b334-9527d5834632","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228802,"last_edited_time":1734267521072,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"c206bc8c-4636-4058-b334-9527d5834632","file_ids":["f9fa10f4-1198-4a2f-b546-aed8998940c7"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c6-b932-f3528c2eb1cf":{"value":{"id":"14688756-3979-80c6-b932-f3528c2eb1cf","version":31,"type":"text","properties":{"title":[["如何解决在分布式系统上进行测试的问题？"]]},"format":{"copied_from_pointer":{"id":"c685a2aa-5313-4f6e-970e-c4503fe68fec","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228802,"last_edited_time":1732892704963,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"c685a2aa-5313-4f6e-970e-c4503fe68fec","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80ad-a3aa-ecf1d52b66d2":{"value":{"id":"14688756-3979-80ad-a3aa-ecf1d52b66d2","version":3,"type":"text","format":{"copied_from_pointer":{"id":"7f1e29ef-deb7-4c77-9bea-9322f7a0d45c","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228802,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"7f1e29ef-deb7-4c77-9bea-9322f7a0d45c","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80cf-99e3-e62ed68705a5":{"value":{"id":"14688756-3979-80cf-99e3-e62ed68705a5","version":9,"type":"sub_header","properties":{"title":[["确定性测试 \u0026 模拟"]]},"format":{"copied_from_pointer":{"id":"a6764856-1fd7-4efa-9a63-970a4f4dccc7","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228802,"last_edited_time":1732949103858,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"a6764856-1fd7-4efa-9a63-970a4f4dccc7","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8033-ad07-ef0f3d03592e":{"value":{"id":"14688756-3979-8033-ad07-ef0f3d03592e","version":30,"type":"text","properties":{"title":[["安全性的一些业界方案："]]},"format":{"copied_from_pointer":{"id":"3e64c441-8258-426a-8539-7d8914118884","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228802,"last_edited_time":1732891737283,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"3e64c441-8258-426a-8539-7d8914118884","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-800c-8533-edac5c20d358":{"value":{"id":"14688756-3979-800c-8533-edac5c20d358","version":156,"type":"bulleted_list","properties":{"title":[["混沌测试：ChaosMesh"]]},"content":["14d88756-3979-8036-95ba-c8201bde96f0"],"format":{"copied_from_pointer":{"id":"e483bffe-cb44-4b36-b420-39510858b73a","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228803,"last_edited_time":1734777691550,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"e483bffe-cb44-4b36-b420-39510858b73a","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-809c-9593-f0d4daaa832f":{"value":{"id":"14688756-3979-809c-9593-f0d4daaa832f","version":82,"type":"bulleted_list","properties":{"title":[["验证框架：Jepsen"]]},"content":["87659099-a29a-423f-b646-11284eb2ffeb"],"format":{"copied_from_pointer":{"id":"9356ea44-1822-41a9-a846-a0094c2905e4","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228802,"last_edited_time":1732892642989,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"9356ea44-1822-41a9-a846-a0094c2905e4","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8088-ad6d-c83f56aee1ae":{"value":{"id":"14688756-3979-8088-ad6d-c83f56aee1ae","version":401,"type":"text","properties":{"title":[["主动向系统注入故障并验证，这能提高错误发生概率，暴露问题。但无法复现的根本问题还是没有解决："]]},"format":{"copied_from_pointer":{"id":"11283f6b-9f3e-4533-9b75-32f7dd71f157","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228803,"last_edited_time":1732950253590,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"11283f6b-9f3e-4533-9b75-32f7dd71f157","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"49688360-6eeb-480f-9284-f81070003083":{"value":{"id":"49688360-6eeb-480f-9284-f81070003083","version":42,"type":"image","properties":{"size":[["64.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2f213fe1-0bc3-44f8-b28d-487ee51299bb/Untitled.png"]],"caption":[["无法区分通信失败的原因"]]},"format":{"block_width":679.9921875,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2f213fe1-0bc3-44f8-b28d-487ee51299bb/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3333333333333333,"copied_from_pointer":{"id":"7bd6f0c7-6987-4fa5-b600-cc2aa4850d83","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228798,"last_edited_time":1732284248321,"parent_id":"14688756-3979-80cc-acc3-e58a3f6b6a57","parent_table":"block","alive":true,"copied_from":"7bd6f0c7-6987-4fa5-b600-cc2aa4850d83","file_ids":["2f213fe1-0bc3-44f8-b28d-487ee51299bb"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7f92640c-e8eb-42cf-a384-8d18a5089a04":{"value":{"id":"7f92640c-e8eb-42cf-a384-8d18a5089a04","version":2,"type":"image","properties":{"size":[["714.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8674fe3b-771b-43f4-860a-10847162d1f5/Untitled.png"]]},"format":{"block_width":528,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8674fe3b-771b-43f4-860a-10847162d1f5/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.627,"copied_from_pointer":{"id":"fae206bd-965a-4fb7-ae98-55c2a301eb3a","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228798,"last_edited_time":1732284228845,"parent_id":"14688756-3979-803a-a5b5-f29c0e50d3b0","parent_table":"block","alive":true,"copied_from":"fae206bd-965a-4fb7-ae98-55c2a301eb3a","file_ids":["8674fe3b-771b-43f4-860a-10847162d1f5"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"84ea3146-11e8-488a-93cc-61dfd64e986d":{"value":{"id":"84ea3146-11e8-488a-93cc-61dfd64e986d","version":2,"type":"image","properties":{"size":[["136.8KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/03aedc4e-a2cf-4b3a-b645-d32d76a5b468/Untitled.png"]],"caption":[["时钟使得事件排序不可靠"]]},"format":{"block_width":679.984375,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/03aedc4e-a2cf-4b3a-b645-d32d76a5b468/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4750889679715303,"copied_from_pointer":{"id":"f77a2401-a9c5-46a1-b3c7-f2a1e033bbbf","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228798,"last_edited_time":1732284228845,"parent_id":"14688756-3979-803a-a5b5-f29c0e50d3b0","parent_table":"block","alive":true,"copied_from":"f77a2401-a9c5-46a1-b3c7-f2a1e033bbbf","file_ids":["03aedc4e-a2cf-4b3a-b645-d32d76a5b468"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"d7e394de-d11c-48cb-8e0c-460e69085362":{"value":{"id":"d7e394de-d11c-48cb-8e0c-460e69085362","version":2,"type":"image","properties":{"size":[["105.8KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e0b2eeac-ad50-478a-857f-36ceec223c72/Untitled.png"]],"caption":[["GC 停顿期间，世界已经变天了"]]},"format":{"block_width":679.9765625,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e0b2eeac-ad50-478a-857f-36ceec223c72/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3879003558718861,"copied_from_pointer":{"id":"8b31f53e-4304-47e8-8282-1a53cfaf09e8","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228799,"last_edited_time":1732284228845,"parent_id":"14688756-3979-8009-a223-cea1d27a3498","parent_table":"block","alive":true,"copied_from":"8b31f53e-4304-47e8-8282-1a53cfaf09e8","file_ids":["e0b2eeac-ad50-478a-857f-36ceec223c72"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-8036-95ba-c8201bde96f0":{"value":{"id":"14d88756-3979-8036-95ba-c8201bde96f0","version":16,"type":"image","properties":{"size":[["217.5KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ce9ced73-aa89-44bf-aa5f-7bc067eeaf13/image.png"]]},"format":{"block_width":576,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ce9ced73-aa89-44bf-aa5f-7bc067eeaf13/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.519163763066202,"block_preserve_scale":true},"created_time":1732891842195,"last_edited_time":1734777675751,"parent_id":"14688756-3979-800c-8533-edac5c20d358","parent_table":"block","alive":true,"file_ids":["ce9ced73-aa89-44bf-aa5f-7bc067eeaf13"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"87659099-a29a-423f-b646-11284eb2ffeb":{"value":{"id":"87659099-a29a-423f-b646-11284eb2ffeb","version":2,"type":"image","properties":{"size":[["117.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dfc75047-5a34-4cc6-91a0-c2a82f4e4cf8/Untitled.png"]]},"format":{"block_width":576,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dfc75047-5a34-4cc6-91a0-c2a82f4e4cf8/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.3366093366093366,"copied_from_pointer":{"id":"27102a73-197d-48f2-9657-0cabebf5abf8","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228802,"last_edited_time":1732284228845,"parent_id":"14688756-3979-809c-9593-f0d4daaa832f","parent_table":"block","alive":true,"copied_from":"27102a73-197d-48f2-9657-0cabebf5abf8","file_ids":["dfc75047-5a34-4cc6-91a0-c2a82f4e4cf8"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8018-9eb7-d2af4375643f":{"value":{"id":"14e88756-3979-8018-9eb7-d2af4375643f","version":15,"type":"bulleted_list","properties":{"title":[["修复后如何验证真的解决了？还是需要精确复现这个问题"]]},"created_time":1732950253588,"last_edited_time":1732950256319,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8067-8c33-eef84ff81962":{"value":{"id":"14e88756-3979-8067-8c33-eef84ff81962","version":239,"type":"bulleted_list","properties":{"title":[["更多时候还因为日志和信息不足无法定位，要给程序添加日志后等待再次复现"]]},"created_time":1732950256317,"last_edited_time":1732950320196,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8023-bc87-da5ae108cbca":{"value":{"id":"14688756-3979-8023-bc87-da5ae108cbca","version":3,"type":"text","format":{"copied_from_pointer":{"id":"dfb68236-4264-4b71-ae76-e325a322b14b","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228803,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"dfb68236-4264-4b71-ae76-e325a322b14b","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8005-8196-c86a25cabe3c":{"value":{"id":"14688756-3979-8005-8196-c86a25cabe3c","version":583,"type":"text","properties":{"title":[["可以发现，无法复现的原因是系统有很多因素每次运行时都是不确定的，bug 可能只有在程序的某些执行历史下才会复现。而网络延迟、进程调度的波动，最终都会导致执行历史变化，使系统走向无法预测"]]},"format":{"copied_from_pointer":{"id":"9dd5fa05-c03c-4219-b658-74ede19a2eed","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228804,"last_edited_time":1732893403932,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"9dd5fa05-c03c-4219-b658-74ede19a2eed","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8046-b25b-e1efa8a8f2a3":{"value":{"id":"14e88756-3979-8046-b25b-e1efa8a8f2a3","version":617,"type":"text","properties":{"title":[["甚至有可能因为「修复」行为导致问题更难复现，例如为了复现问题，在性能敏感区域加了一长串日志输出，结果因为输出的开销导致的蝴蝶效应更难踩中 bug 触发的时间窗口"]]},"created_time":1732950407022,"last_edited_time":1734786257927,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-809e-8e0a-e5e68ab6e62f":{"value":{"id":"16388756-3979-809e-8e0a-e5e68ab6e62f","version":3,"type":"text","created_time":1734777452852,"last_edited_time":1734777452856,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-806d-86ce-d8f9fd7e7068":{"value":{"id":"16388756-3979-806d-86ce-d8f9fd7e7068","version":260,"type":"text","properties":{"title":[["如果系统像纯函数一样是确定性的，测试就能简单得多。那能不能将不确定性的事件，通过某种参数关联为确定性的事件？典型例子是伪随机数生成器，看起来是不确定性的，实际上是与 seed 关联，结果是确定的。是否可能通过一个 seed，去 hook 系统中的不确定性因素？"]]},"created_time":1734777352159,"last_edited_time":1734777529247,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80d2-a4da-c3b81913bc35":{"value":{"id":"14688756-3979-80d2-a4da-c3b81913bc35","version":3,"type":"text","format":{"copied_from_pointer":{"id":"2ff49c52-a592-4cd6-a3ee-f2743a37f172","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228804,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"2ff49c52-a592-4cd6-a3ee-f2743a37f172","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c9-bf23-db8484ff255f":{"value":{"id":"14688756-3979-80c9-bf23-db8484ff255f","version":3,"type":"text","properties":{"title":[["Sled（一个类似 RocksDB 的嵌入式存储引擎） 的作者在"],["一篇文章",[["a","https://sled.rs/simulation.html"]]],["中提到他是如何在系统中进行测试的："]]},"format":{"copied_from_pointer":{"id":"931c2667-b74b-4d67-a3b9-ca48922fc570","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228807,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"931c2667-b74b-4d67-a3b9-ca48922fc570","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8004-b4bf-eb00d0243e23":{"value":{"id":"14688756-3979-8004-b4bf-eb00d0243e23","version":3,"type":"image","properties":{"size":[["32.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0ceda69-c45c-4992-bc66-37c150805e04/Untitled.png"]]},"format":{"block_width":624,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0ceda69-c45c-4992-bc66-37c150805e04/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.1781609195402299,"copied_from_pointer":{"id":"c1f7e732-845a-4780-bf1e-97b8be5370d6","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228807,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"c1f7e732-845a-4780-bf1e-97b8be5370d6","file_ids":["f0ceda69-c45c-4992-bc66-37c150805e04"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-809a-bafd-d84c762e6046":{"value":{"id":"14688756-3979-809a-bafd-d84c762e6046","version":3,"type":"quote","properties":{"title":[["Jepsen 的出现成功击溃了几乎所有它测试的分布式系统，这表明我们在根本上以一种错误的方式构建分布式系统，这种方式无法避免 bug 的出现"]]},"format":{"copied_from_pointer":{"id":"c4aca430-98a1-4f1e-b6e4-786174aad74c","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228807,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"c4aca430-98a1-4f1e-b6e4-786174aad74c","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8064-b23d-e634fd248245":{"value":{"id":"14688756-3979-8064-b23d-e634fd248245","version":3,"type":"text","format":{"copied_from_pointer":{"id":"873135df-6bf1-443d-bec5-b60119200a6f","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228807,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"873135df-6bf1-443d-bec5-b60119200a6f","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80f0-94cd-ce1884d02c29":{"value":{"id":"14688756-3979-80f0-94cd-ce1884d02c29","version":3,"type":"text","properties":{"title":[["那我们要怎么做才是正确的？"]]},"format":{"copied_from_pointer":{"id":"1f2d05a6-8d7c-42be-9ed4-987812ab941b","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228807,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"1f2d05a6-8d7c-42be-9ed4-987812ab941b","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8016-b156-d447217c8c99":{"value":{"id":"14688756-3979-8016-b156-d447217c8c99","version":3,"type":"image","properties":{"size":[["137.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/973a1bbf-337b-4131-91f6-446e7fe51205/Untitled.png"]]},"format":{"block_width":672,"block_height":320,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/973a1bbf-337b-4131-91f6-446e7fe51205/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.6072664359861591,"copied_from_pointer":{"id":"73c6a0dc-f80a-4ce9-b6c5-94c2b66f3067","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228808,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"73c6a0dc-f80a-4ce9-b6c5-94c2b66f3067","file_ids":["973a1bbf-337b-4131-91f6-446e7fe51205"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c3-9d2e-cfcff5cec2ec":{"value":{"id":"14688756-3979-80c3-9d2e-cfcff5cec2ec","version":3,"type":"quote","properties":{"title":[["1. 将代码写成能在模拟器上被确定性运行的形式\n2. 写一个模拟器去模拟真实世界的行为"]]},"format":{"copied_from_pointer":{"id":"8583b73a-6a5e-490f-8241-19eee3d072e1","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228808,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"8583b73a-6a5e-490f-8241-19eee3d072e1","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-804a-8b40-f7b088c16bf0":{"value":{"id":"14e88756-3979-804a-8b40-f7b088c16bf0","version":3,"type":"text","format":{"copied_from_pointer":{"id":"c0ca3b6d-5e84-45e6-8f64-03439f0a4fd0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732950563124,"last_edited_time":1732950563125,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8040-915f-c27a22c99bdf":{"value":{"id":"14e88756-3979-8040-915f-c27a22c99bdf","version":48,"type":"text","properties":{"title":[["这就是确定性模拟器"]]},"format":{"copied_from_pointer":{"id":"c0ca3b6d-5e84-45e6-8f64-03439f0a4fd0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732950562634,"last_edited_time":1732950565685,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-8087-8306-cd07f8fa013e":{"value":{"id":"14d88756-3979-8087-8306-cd07f8fa013e","version":12,"type":"text","format":{"copied_from_pointer":{"id":"c0ca3b6d-5e84-45e6-8f64-03439f0a4fd0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732893731565,"last_edited_time":1732893978625,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80d5-bf4b-df676b154192":{"value":{"id":"14688756-3979-80d5-bf4b-df676b154192","version":3,"type":"sub_header","properties":{"title":[["业界实现和落地"]]},"format":{"copied_from_pointer":{"id":"2d49ff3c-13dd-4c39-91c9-61bb2d33f420","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228810,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"2d49ff3c-13dd-4c39-91c9-61bb2d33f420","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-801f-a62b-dfbe156f074d":{"value":{"id":"14e88756-3979-801f-a62b-dfbe156f074d","version":41,"type":"sub_sub_header","properties":{"title":[["FoundationDB"]]},"created_time":1732948211728,"last_edited_time":1732948214852,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-801d-bcd3-da848c7040c3":{"value":{"id":"14688756-3979-801d-bcd3-da848c7040c3","version":53,"type":"text","properties":{"title":[["FoundationDB 是 Apple 开源的分布式 KV 数据库，FoundationDB 在开发之初花了两年实现模拟器，在后期取得了非常大的回报，是业界最早全面落地确定性测试的工程之一，也是为数不多能够通过 Jepsen 的系统"]]},"format":{"copied_from_pointer":{"id":"e8035360-48e7-4960-9b8a-253de2a7fefa","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228811,"last_edited_time":1734793616920,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"e8035360-48e7-4960-9b8a-253de2a7fefa","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-807f-b5ed-f38e8d6f9f4e":{"value":{"id":"14688756-3979-807f-b5ed-f38e8d6f9f4e","version":3,"type":"image","properties":{"size":[["5.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/976d433c-4a1f-4a57-8512-3d3a96b455f1/Untitled.png"]]},"format":{"block_width":381.9957275390625,"block_height":44,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/976d433c-4a1f-4a57-8512-3d3a96b455f1/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.11518324607329843,"copied_from_pointer":{"id":"ba1685c1-43ba-45c4-b528-13aa17f8148e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228812,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"ba1685c1-43ba-45c4-b528-13aa17f8148e","file_ids":["976d433c-4a1f-4a57-8512-3d3a96b455f1"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-804a-b414-cf66116330b5":{"value":{"id":"14688756-3979-804a-b414-cf66116330b5","version":1123,"type":"text","properties":{"title":[["FoundationDB 基于 C++ 扩展出了一个名为 Flow 的语言（与其说是语言，更像一种扩展的宏功能，只进行了预编译处理）"]]},"format":{"copied_from_pointer":{"id":"028a8fa3-fe2b-442d-9e6c-1975ddf1174b","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228812,"last_edited_time":1733573915393,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"028a8fa3-fe2b-442d-9e6c-1975ddf1174b","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8009-9b36-e6ee36419c76":{"value":{"id":"15588756-3979-8009-9b36-e6ee36419c76","version":12,"type":"text","properties":{"title":[["Flow 采用 Actor 单线程异步模型（async/await），由 runtime 负责所有调度，以此控制执行顺序，确保不会因为内核的线程调度导致不确定性。再通过接口接管了网络、存储、时间等其他外部调用，实现所有不确定性事件的受控"]]},"created_time":1733572161133,"last_edited_time":1733572197846,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8060-a127-e61da4ff8e98":{"value":{"id":"15588756-3979-8060-a127-e61da4ff8e98","version":3,"type":"text","created_time":1733572147431,"last_edited_time":1733572147433,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80fc-947d-dab04fd4a368":{"value":{"id":"15588756-3979-80fc-947d-dab04fd4a368","version":371,"type":"text","properties":{"title":[["在这些改造后，Flow 看起来也和 C++ 没什么区别，使用 "],["ACTOR",[["c"]]],[" 即可定义一个异步任务："]]},"created_time":1733569068661,"last_edited_time":1733572204725,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-801c-b3ca-ce2a10345671":{"value":{"id":"14e88756-3979-801c-b3ca-ce2a10345671","version":291,"type":"code","properties":{"title":[["ACTOR Future\u003cfloat\u003e asyncAdd(Futur\u003cfloat\u003e f, float offset) {\n    float value = wait(f);\n    return value + offset;\n}"]],"language":[["cpp"]]},"format":{"code_wrap":false},"created_time":1732938481652,"last_edited_time":1732938543057,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-807b-840c-e426982423df":{"value":{"id":"14e88756-3979-807b-840c-e426982423df","version":554,"type":"text","properties":{"title":[["模拟器中每个测试由一段配置文件定义，这里包括了测试的行为，以及注入的故障，例如向网络注入延迟、关闭连接、杀死节点、变更配置等。只要用相同的配置文件作为输入，模拟器就会产生相同的执行历史，问题就能被复现"]]},"created_time":1732949514957,"last_edited_time":1734357943197,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8055-bd6e-e02b8e2edbea":{"value":{"id":"14e88756-3979-8055-bd6e-e02b8e2edbea","version":372,"type":"code","properties":{"title":[["testTitle=SwizzledCycleTest\n    testName=Cycle\n    transactionsPerSecond=1000.0\n    testDuration=30.0\n    expectedRate=0.01\n\n    testName=RandomClogging\n    testDuration=30.0\n    swizzle = 1\n\n    testName=Attrition\n    machinesToKill=10\n    machinesToLeave=3\n    reboot=true\n    testDuration=30.0\n    \n    testName=ChangeConfig\n    maxDelayBeforeChange=30.0\n    coordinators=auto"]],"language":[["Plain Text"]]},"format":{"code_wrap":false},"created_time":1732949508259,"last_edited_time":1732950003337,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8081-88f0-f6d31be0fd70":{"value":{"id":"14e88756-3979-8081-88f0-f6d31be0fd70","version":147,"type":"text","properties":{"title":[["FoundationDB 本身是开源的，但可惜模拟器部分没有开源，论文和演讲中也只进行了简单介绍"]]},"created_time":1732948275688,"last_edited_time":1732949592787,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14d88756-3979-80ef-a5a8-fad2fa764a39":{"value":{"id":"14d88756-3979-80ef-a5a8-fad2fa764a39","version":11,"type":"video","properties":{"source":[["https://www.youtube.com/watch?v=4fFDFbi3toc"]],"caption":[["“Don’t debug your system, debug a simulation instead.”"]]},"format":{"link_title":"\"Testing Distributed Systems w/ Deterministic Simulation\" by Will Wilson","block_width":1280,"link_author":"Strange Loop Conference","link_provider":"YouTube","display_source":"https://www.youtube.com/embed/4fFDFbi3toc?rel=0","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5625,"block_preserve_scale":true},"created_time":1732894462069,"last_edited_time":1732894505271,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80c8-8a75-fc9b49013e01":{"value":{"id":"16388756-3979-80c8-8a75-fc9b49013e01","version":3,"type":"text","format":{"copied_from_pointer":{"id":"2e207dba-2ed8-40db-a206-287e4e2aa594","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734778297379,"last_edited_time":1734778297383,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80db-84d3-cbdf3226052b":{"value":{"id":"16388756-3979-80db-84d3-cbdf3226052b","version":368,"type":"text","properties":{"title":[["最终，他们声称确定性模拟让他们发现了数据库"],["所有",[["b"]]],[" bug："]]},"format":{"copied_from_pointer":{"id":"2e207dba-2ed8-40db-a206-287e4e2aa594","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734778296068,"last_edited_time":1734778447904,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8055-a2d2-f0719ed0694d":{"value":{"id":"16388756-3979-8055-a2d2-f0719ed0694d","version":5,"type":"quote","properties":{"title":[["Anyway, we did this for a while and found all of the bugs in the database. I know, I know, that’s an insane thing to say. It’s kind of true though. In the entire history of the company, I think we only ever had one or two bugs reported by a customer. "],["Ever",[["i"]]],[". Kyle Kingsbury aka “aphyr” didn’t even bother testing it with Jepsen, because he didn’t think he’d find anything."]]},"created_time":1734778365123,"last_edited_time":1734778365663,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-809a-a586-f2403bc1a49b":{"value":{"id":"16388756-3979-809a-a586-f2403bc1a49b","version":15,"type":"image","properties":{"size":[["219.1KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/fb249a39-9fb3-4972-8d23-40a0631b0304/image.png"]]},"format":{"block_width":480,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/fb249a39-9fb3-4972-8d23-40a0631b0304/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.6047700170357752,"block_preserve_scale":true},"created_time":1734778337651,"last_edited_time":1734778456804,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["fb249a39-9fb3-4972-8d23-40a0631b0304"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80db-a4ff-df3176c6beef":{"value":{"id":"16388756-3979-80db-a4ff-df3176c6beef","version":348,"type":"text","properties":{"title":[["无论如何，FoundationDB 开创了确定性模拟的先河。所有后来者都无法绕过 FoundationDB 的影响"]]},"format":{"copied_from_pointer":{"id":"2e207dba-2ed8-40db-a206-287e4e2aa594","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734778296241,"last_edited_time":1734778572865,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8089-887f-ddef36bb3744":{"value":{"id":"14688756-3979-8089-887f-ddef36bb3744","version":3,"type":"text","format":{"copied_from_pointer":{"id":"2e207dba-2ed8-40db-a206-287e4e2aa594","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228812,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"2e207dba-2ed8-40db-a206-287e4e2aa594","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8096-97e1-f9037ff18883":{"value":{"id":"14688756-3979-8096-97e1-f9037ff18883","version":115,"type":"sub_sub_header","properties":{"title":[["RisingWave \u0026 MadSim"]]},"format":{"copied_from_pointer":{"id":"f66d9c68-f64c-4708-a0cd-66e8f8e64c1b","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228812,"last_edited_time":1733641831684,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"f66d9c68-f64c-4708-a0cd-66e8f8e64c1b","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8020-9a3e-e98f34aabf18":{"value":{"id":"15588756-3979-8020-9a3e-e98f34aabf18","version":424,"type":"text","properties":{"title":[["RisingWave",[["a","https://github.com/risingwavelabs/risingwave"]]],[" 是一个分布式流数据库，受到 FoundationDB 的启发，他们开发了一个名为 "],["MadSim",[["a","https://github.com/madsim-rs/madsim"]]],[" 的确定性测试框架，两者都是开源项目"]]},"created_time":1733569529232,"last_edited_time":1733580029431,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80d5-a9c9-d84116744b96":{"value":{"id":"15588756-3979-80d5-a9c9-d84116744b96","version":13,"type":"image","properties":{"size":[["303.3KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/683e1fa8-10b4-46f1-8e56-dc5a6fe7630a/image.png"]]},"format":{"block_width":707.98291015625,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/683e1fa8-10b4-46f1-8e56-dc5a6fe7630a/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5727272727272728,"block_preserve_scale":true},"created_time":1733572990977,"last_edited_time":1733572998136,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["683e1fa8-10b4-46f1-8e56-dc5a6fe7630a"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-805c-8064-ca0cf669e11e":{"value":{"id":"15588756-3979-805c-8064-ca0cf669e11e","version":3,"type":"text","created_time":1733570225919,"last_edited_time":1733570225921,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8003-a518-d2a03b846bca":{"value":{"id":"15588756-3979-8003-a518-d2a03b846bca","version":1539,"type":"text","properties":{"title":[["RisingWave 和 MadSim 都基于 Rust 开发。Rust 原生支持异步，但特殊的是，Rust 只提供了异步需要的语言特性、关键字和相关类型等；如异步任务如何执行、管理和调度等具体实现则不在语言内提供，因此社区有各种不同的 runtime"]]},"created_time":1733569525998,"last_edited_time":1733580032424,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80bc-ad79-c98d3ad9c90f":{"value":{"id":"15588756-3979-80bc-ad79-c98d3ad9c90f","version":782,"type":"text","properties":{"title":[["在这种设计下，MadSim 就可以作为一个异步 runtime 呈现，使用单线程运行异步任务，不需要对语言做侵入性改动即可轻松控制调度，并且能和工具链（如调试器）结合得更好"]]},"created_time":1733573261949,"last_edited_time":1734618010471,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80f9-ab0f-cb4f38655458":{"value":{"id":"15588756-3979-80f9-ab0f-cb4f38655458","version":3,"type":"text","created_time":1733570611536,"last_edited_time":1733570611537,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8041-81d5-c26aa14efb3c":{"value":{"id":"15588756-3979-8041-81d5-c26aa14efb3c","version":775,"type":"text","properties":{"title":[["MadSim 的基本架构如下，这里也参考了 FoundationDB，包括一个全局的随机数生成器，以及基于这之上的定时器，任务调度器和环境模拟（网络、存储）"]]},"created_time":1733570611669,"last_edited_time":1733580039696,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8060-9138-d8bae2d3e272":{"value":{"id":"15588756-3979-8060-9138-d8bae2d3e272","version":21,"type":"image","properties":{"size":[["62.1KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ee0cf179-f3de-4b34-aed2-fe0ce16b7108/image.png"]]},"format":{"block_width":707.9900512695312,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/ee0cf179-f3de-4b34-aed2-fe0ce16b7108/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4675,"block_preserve_scale":true},"created_time":1733570619478,"last_edited_time":1733571967874,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["ee0cf179-f3de-4b34-aed2-fe0ce16b7108"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80dc-b057-f7491ab0735d":{"value":{"id":"15588756-3979-80dc-b057-f7491ab0735d","version":280,"type":"text","properties":{"title":[["除此之外，MadSim 还提供了对 Rust 异步 runtime 事实标准 tokio 的 API 兼容，这使得使用 tokio 的项目无需修改一行代码，就可以无缝接入 MadSim"]]},"created_time":1733570611378,"last_edited_time":1733580037638,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8075-9ca3-c85efd227d9c":{"value":{"id":"15588756-3979-8075-9ca3-c85efd227d9c","version":873,"type":"text","properties":{"title":[["还有一些异步 API 之外的部分，例如获取系统时间和配置等（"],["gettimeofday",[["c"]]],[","],["get_random",[["c"]]],[","],["sysconf",[["c"]]],[" 等 API），可能会被部分标准库和依赖库不知不觉地调用而破坏确定性，Madsim 通过重载 libc 函数完成 hook"]]},"created_time":1733572522584,"last_edited_time":1733574750017,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80d6-99b1-fde45aa6e309":{"value":{"id":"15588756-3979-80d6-99b1-fde45aa6e309","version":971,"type":"text","properties":{"title":[["最后一些常见的外部系统网络交互的 client 库，也提供了有确定性模拟的包装实现"]]},"created_time":1733574079339,"last_edited_time":1733574700264,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80e9-a241-c485214a3f3a":{"value":{"id":"15588756-3979-80e9-a241-c485214a3f3a","version":11,"type":"image","properties":{"size":[["62.8KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7cd5f1fb-c836-4b1a-bace-c3f094b8e3cb/image.png"]]},"format":{"block_width":2228,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7cd5f1fb-c836-4b1a-bace-c3f094b8e3cb/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5035906642728905,"block_preserve_scale":true},"created_time":1733574432594,"last_edited_time":1733574437225,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["7cd5f1fb-c836-4b1a-bace-c3f094b8e3cb"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80ce-9df5-f0342930d96e":{"value":{"id":"15588756-3979-80ce-9df5-f0342930d96e","version":3,"type":"text","created_time":1733573543942,"last_edited_time":1733573543944,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-805d-924f-e6a74a881692":{"value":{"id":"14688756-3979-805d-924f-e6a74a881692","version":82,"type":"text","properties":{"title":[["MadSim 中，系统中每一个节点被抽象成状态机。输入会触发节点的状态转移，输入通常有两类：消息和定时器。而节点的输出就是对另一个节点发送的消息，定时器通常是节点自身在某一时刻做的一件事情"]]},"format":{"copied_from_pointer":{"id":"64990605-ff3e-4f36-9f00-f18283de4705","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228808,"last_edited_time":1733572470376,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"64990605-ff3e-4f36-9f00-f18283de4705","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ff0a8206-103c-457d-a809-b4356a897c93":{"value":{"id":"ff0a8206-103c-457d-a809-b4356a897c93","version":54,"type":"text","properties":{"title":[["在系统的一开始，存在一个初始状态，接着一些节点的定时器可能被激活（例如心跳或注册等），触发状态转移，发送消息给其它节点，进一步触发其它节点的转移"]]},"format":{"copied_from_pointer":{"id":"f54233cc-7984-4016-b2a7-27d743fcf339","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228808,"last_edited_time":1733572406592,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"f54233cc-7984-4016-b2a7-27d743fcf339","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"93733ab2-0e61-4462-b5bf-01440b2c8d59":{"value":{"id":"93733ab2-0e61-4462-b5bf-01440b2c8d59","version":10,"type":"image","properties":{"size":[["1047.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d758bf6b-a683-4d6d-af43-3d498791c1e7/Untitled.png"]]},"format":{"block_width":672,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d758bf6b-a683-4d6d-af43-3d498791c1e7/Untitled.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.41276252019386106,"copied_from_pointer":{"id":"8e424f67-afed-4838-a7ab-25bc2b18b606","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228809,"last_edited_time":1733572439490,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"8e424f67-afed-4838-a7ab-25bc2b18b606","file_ids":["d758bf6b-a683-4d6d-af43-3d498791c1e7"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8085-9faa-f36901f37fe2":{"value":{"id":"14688756-3979-8085-9faa-f36901f37fe2","version":53,"type":"text","properties":{"title":[["从更高的维度将「整个系统」看作一个大的状态机，唯一的外部输入就只有时间，整个系统就是一个随着时间不断变化状态的状态机，可以看作只有状态转移的时候，时间才被推进了"]]},"format":{"copied_from_pointer":{"id":"6d91358b-6fc2-4a4f-a9fb-1669c3bd0ff0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228809,"last_edited_time":1733572488257,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"6d91358b-6fc2-4a4f-a9fb-1669c3bd0ff0","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8024-9cb7-cf4ba1e3f73f":{"value":{"id":"15588756-3979-8024-9cb7-cf4ba1e3f73f","version":40,"type":"text","properties":{"title":[["将这些状态的转移在时间轴上排列，状态转移之间的时间对状态机是没意义的，模拟器就可以通过离散事件模拟的方式在一个转移结束后直接跳到下一个转移的时间节点，实现时间加速"]]},"content":["f4b66a13-e0af-4e59-b631-8320d65ea25b"],"format":{"copied_from_pointer":{"id":"5d479534-2659-4942-8da5-e2395400aabc","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733572432642,"last_edited_time":1734357183238,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80eb-8801-fda0a89bc81d":{"value":{"id":"15588756-3979-80eb-8801-fda0a89bc81d","version":163,"type":"text","properties":{"title":[["这也是 FoundationDB 中提过的模拟器的另一个好处"]]},"format":{"copied_from_pointer":{"id":"fc18e1e9-5d7e-4605-8161-1d826ae1e4c9","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733572444316,"last_edited_time":1734357183565,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80ca-87cc-d04e9c81f48a":{"value":{"id":"15588756-3979-80ca-87cc-d04e9c81f48a","version":3,"type":"text","format":{"copied_from_pointer":{"id":"fc18e1e9-5d7e-4605-8161-1d826ae1e4c9","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733572372851,"last_edited_time":1733572372852,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8054-8a08-fbb411b18a98":{"value":{"id":"15588756-3979-8054-8a08-fbb411b18a98","version":152,"type":"text","properties":{"title":[["既然是开源的，简单看一下关键实现"]]},"format":{"copied_from_pointer":{"id":"fc18e1e9-5d7e-4605-8161-1d826ae1e4c9","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733571964028,"last_edited_time":1733587473260,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8061-8912-ed8070306960":{"value":{"id":"14688756-3979-8061-8912-ed8070306960","version":484,"type":"bulleted_list","properties":{"title":[["runtime 初始化时，使用传入的 seed 构造随机数生成器，之后所有事件的模拟都能被这个 seed 确定"]]},"content":["15588756-3979-8021-94b2-d0703be6fcd1"],"format":{"copied_from_pointer":{"id":"fc18e1e9-5d7e-4605-8161-1d826ae1e4c9","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228813,"last_edited_time":1733575358703,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"fc18e1e9-5d7e-4605-8161-1d826ae1e4c9","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-808c-b56b-f7721a3b7fa0":{"value":{"id":"14688756-3979-808c-b56b-f7721a3b7fa0","version":62,"type":"bulleted_list","properties":{"title":[["定时器，实质上是在时间堆中加入了一个带定时器回调的输入"]]},"content":["15588756-3979-804b-be58-dbe0dccbd45a"],"format":{"copied_from_pointer":{"id":"71521d45-47e6-4b08-8f3c-ec94eb3c50e6","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228813,"last_edited_time":1733587703005,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"71521d45-47e6-4b08-8f3c-ec94eb3c50e6","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80fb-8a7d-fccd5dffb793":{"value":{"id":"14688756-3979-80fb-8a7d-fccd5dffb793","version":457,"type":"bulleted_list","properties":{"title":[["调度器：通过 event-loop 来进行调度，从就绪队列里随机取任务执行，这里的「随机」也是基于全局的随机数生成器，调度顺序都是被 seed 确定的。然后直接跳转到下一个事件的时间点"]]},"content":["15588756-3979-8075-85be-c4fdf65433f1"],"format":{"copied_from_pointer":{"id":"d4e50ba6-b6d0-4d89-b9c3-d82fb3a1a819","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228813,"last_edited_time":1733579747093,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"d4e50ba6-b6d0-4d89-b9c3-d82fb3a1a819","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c1-8154-d71ad5bbaf1d":{"value":{"id":"14688756-3979-80c1-8154-d71ad5bbaf1d","version":1073,"type":"bulleted_list","properties":{"title":[["网络接口的语义比较复杂，这部分有不小工作量，最底下是维护链接的实现，这里存储了所有节点的信息，使用 channel 进行通信，并且可以根据配置的丢包率和延迟来注入故障。再往上提供 socket 语义的接口，感觉都是体力活"]]},"content":["15588756-3979-8065-840a-e5e9aa06fbf8"],"format":{"copied_from_pointer":{"id":"d913fb2b-1466-4ac7-92cc-e93da37e58c5","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228814,"last_edited_time":1733587342322,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"d913fb2b-1466-4ac7-92cc-e93da37e58c5","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8000-a34d-c6a02159cb77":{"value":{"id":"15588756-3979-8000-a34d-c6a02159cb77","version":9,"type":"text","format":{"copied_from_pointer":{"id":"0c67b200-1190-48f7-a78e-5a09692f3fa1","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733580549761,"last_edited_time":1733581012103,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8076-9bd3-d7121fc3f77c":{"value":{"id":"15588756-3979-8076-9bd3-d7121fc3f77c","version":243,"type":"text","properties":{"title":[["作者提供了一个基于 MadSim 的 MIT 6.824 课程 Raft 实验的重写版 "],["MadRaft",[["a","https://github.com/madsim-rs/madraft"]]],["，这里模拟器中的 Raft 测试比真实运行快上近百倍："]]},"format":{"copied_from_pointer":{"id":"0c67b200-1190-48f7-a78e-5a09692f3fa1","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733570678752,"last_edited_time":1733580058990,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-805d-aab6-ee285a94362b":{"value":{"id":"14688756-3979-805d-aab6-ee285a94362b","version":3,"type":"image","properties":{"size":[["575.9KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/20011529-118d-4555-a03e-fa8e8c527556/Untitled.png"]]},"format":{"block_width":708,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/20011529-118d-4555-a03e-fa8e8c527556/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5948644793152639,"copied_from_pointer":{"id":"221a2f4c-28c8-46b3-ab99-b0273f49eaca","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228814,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"221a2f4c-28c8-46b3-ab99-b0273f49eaca","file_ids":["20011529-118d-4555-a03e-fa8e8c527556"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8092-858f-e69881f0fee9":{"value":{"id":"15588756-3979-8092-858f-e69881f0fee9","version":322,"type":"text","properties":{"title":[["对于未通过的测试，模拟器返回一个 seed，下次使用同样的 seed 运行，就能得到相同的结果"]]},"format":{"copied_from_pointer":{"id":"a8c2f3ec-877a-4133-8456-02aacfe194c0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733575993340,"last_edited_time":1733576023795,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8019-b605-da63c99b640e":{"value":{"id":"15588756-3979-8019-b605-da63c99b640e","version":3,"type":"text","format":{"copied_from_pointer":{"id":"a8c2f3ec-877a-4133-8456-02aacfe194c0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733575971334,"last_edited_time":1733575971335,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80c1-a5bd-e7c817807ff5":{"value":{"id":"15588756-3979-80c1-a5bd-e7c817807ff5","version":169,"type":"text","properties":{"title":[["在 RisingWave 中，Madsim 被应用在四种不同的测试中："]]},"format":{"copied_from_pointer":{"id":"a8c2f3ec-877a-4133-8456-02aacfe194c0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733575971481,"last_edited_time":1733581054346,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80c8-a5e9-d86058788242":{"value":{"id":"15588756-3979-80c8-a5e9-d86058788242","version":895,"type":"numbered_list","properties":{"title":[["单元测试：单元测试关注面比较小，难以发现复杂的问题，所以不是确定性测试主要作用的目标，但确定性模拟器在这里还是起了不少作用，比如测试有关超时的逻辑能瞬间完成。另外单元测试也能反过来验证一些外部系统包装（如 etcd 模拟器）的实现正确与否"]]},"created_time":1733581054571,"last_edited_time":1733632116916,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8013-a01c-f1d76abbd18a":{"value":{"id":"15588756-3979-8013-a01c-f1d76abbd18a","version":344,"type":"numbered_list","properties":{"title":[["E2E 测试：E2E 测试中涵盖了系统的各个模块，更容易出现错误。RisingWave 架构复杂，涉及各种服务"]]},"content":["15588756-3979-80e9-b9b3-d1a2b78dfed3","15588756-3979-8052-b282-e41bc56ecc5f","15588756-3979-8022-98c8-d0f39cf008b6"],"format":{"copied_from_pointer":{"id":"a8c2f3ec-877a-4133-8456-02aacfe194c0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733575971657,"last_edited_time":1733588151191,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80a5-8c42-dec92a24d35b":{"value":{"id":"15588756-3979-80a5-8c42-dec92a24d35b","version":866,"type":"numbered_list","properties":{"title":[["异常测试：E2E 测试主要还是在测试正常情况下的行为，没法完全发挥 MadSim 的作用。在异常测试中，会刻意构造各种故障并验证系统是否仍然能保持正确。在这个过程中发现了很多 bug，得益于模拟器的可复现性，这些问题都能被很快定位和修复"]]},"content":["15588756-3979-80c2-a428-e4466ebf8748"],"created_time":1733587914634,"last_edited_time":1733630251534,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8056-9ffa-f5656b3c5b70":{"value":{"id":"15588756-3979-8056-9ffa-f5656b3c5b70","version":366,"type":"numbered_list","properties":{"title":[["扩容测试：集群配置发生变化时，需要进行重平衡，这个过程也很容易发生错误，特别是叠加异常情况时"]]},"content":["15588756-3979-803c-a4eb-fa1b93eb2234","15688756-3979-8037-9aad-c09f5ac94bbf"],"created_time":1733587918238,"last_edited_time":1733630381052,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-800c-9402-f7227ae25c39":{"value":{"id":"15688756-3979-800c-9402-f7227ae25c39","version":332,"type":"text","properties":{"title":[["在 CI 中，每一项确定性测试都会用不同的 seed 并行执行 16 次（16 核 CI 机器），以尽可能提高覆盖率"]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733631974151,"last_edited_time":1733632106083,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80ce-b0ec-c39f8deb0f5f":{"value":{"id":"15688756-3979-80ce-b0ec-c39f8deb0f5f","version":3,"type":"text","format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733633568970,"last_edited_time":1733633568971,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"f4b66a13-e0af-4e59-b631-8320d65ea25b":{"value":{"id":"f4b66a13-e0af-4e59-b631-8320d65ea25b","version":12,"type":"image","properties":{"size":[["1046.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/71dc8c92-485e-4049-ac85-ed203598b1ce/Untitled.png"]]},"format":{"block_width":672,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/71dc8c92-485e-4049-ac85-ed203598b1ce/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.36935483870967745,"copied_from_pointer":{"id":"42089f0c-4d91-4098-808d-c39d1abe4a9c","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"block_preserve_scale":true},"created_time":1732284228809,"last_edited_time":1733572433221,"parent_id":"15588756-3979-8024-9cb7-cf4ba1e3f73f","parent_table":"block","alive":true,"copied_from":"42089f0c-4d91-4098-808d-c39d1abe4a9c","file_ids":["71dc8c92-485e-4049-ac85-ed203598b1ce"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8021-94b2-d0703be6fcd1":{"value":{"id":"15588756-3979-8021-94b2-d0703be6fcd1","version":53,"type":"code","properties":{"title":[["/// Create a new runtime instance with given seed and config.\npub fn with_seed_and_config(seed: u64, config: Config) -\u003e Self {\n    let rand = rand::GlobalRng::new_with_seed(seed);\n    let sims = Arc::new(Mutex::new(HashMap::new()));\n    let task = task::Executor::new(rand.clone(), sims.clone());\n    let handle = Handle {\n        rand: rand.clone(),\n        time: task.time_handle().clone(),\n        task: task.handle().clone(),\n        sims,\n        config,\n        allow_system_thread: false,\n    };\n    let rt = Runtime { rand, task, handle };\n    rt.add_simulator::\u003cfs::FsSim\u003e();\n    rt.add_simulator::\u003cnet::NetSim\u003e();\n    rt\n}"]],"caption":[["madsim/src/sim/runtime/mod.rs"]],"language":[["Rust"]]},"format":{"code_wrap":false},"created_time":1733575021293,"last_edited_time":1733575099453,"parent_id":"14688756-3979-8061-8912-ed8070306960","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-804b-be58-dbe0dccbd45a":{"value":{"id":"15588756-3979-804b-be58-dbe0dccbd45a","version":31,"type":"code","properties":{"title":[["pub(crate) fn add_timer_at(\n    \u0026self,\n    deadline: Instant,\n    callback: impl FnOnce() + Send + Sync + 'static,\n) {\n    let mut timer = self.timer.lock();\n    timer.add(deadline - self.clock.base_instant(), |_| callback());\n}\n\npub(crate) fn add_timer(\u0026self, dur: Duration, callback: impl FnOnce() + Send + Sync + 'static) {\n    self.add_timer_at(self.clock.now_instant() + dur, callback);\n}"]],"caption":[["madsim/src/sim/time/mod.rs"]],"language":[["Rust"]]},"format":{"code_wrap":false},"created_time":1733575127670,"last_edited_time":1733575136373,"parent_id":"14688756-3979-808c-b56b-f7721a3b7fa0","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8075-85be-c4fdf65433f1":{"value":{"id":"15588756-3979-8075-85be-c4fdf65433f1","version":390,"type":"code","properties":{"title":[["pub fn block_on\u003cF: Future\u003e(\u0026self, future: F) -\u003e F::Output {\n    // ...\n    \n    loop {\n        self.run_all_ready();\n        if task.is_finished() {\n            return task.now_or_never().unwrap();\n        }\n        let going = self.time.advance_to_next_event();\n        \n        // ...\n    }\n}\n\n/// Drain all tasks from ready queue and run them.\nfn run_all_ready(\u0026self) {\n    while let Ok(runnable) = self.queue.try_recv_random(\u0026self.rand) {\n        // ...\n        \n        // run the task\n        let res = {\n            let _guard = crate::context::enter_task(info.clone());\n            std::panic::catch_unwind(move || work(runnable))\n        };\n        if let Err(e) = res {\n            // ...\n        }\n\n        // advance time: 50-100ns\n        let dur = Duration::from_nanos(self.rand.with(|rng| rng.gen_range(50..100)));\n        self.time.handle().advance(dur);\n    }\n}"]],"caption":[["madsim/src/sim/task/mod.rs"]],"language":[["Rust"]]},"format":{"code_wrap":false},"created_time":1733575205392,"last_edited_time":1733575767464,"parent_id":"14688756-3979-80fb-8a7d-fccd5dffb793","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8065-840a-e5e9aa06fbf8":{"value":{"id":"15588756-3979-8065-840a-e5e9aa06fbf8","version":220,"type":"code","properties":{"title":[["/// Opens a new connection to destination.\npub(crate) async fn connect1(\n    self: \u0026Arc\u003cSelf\u003e,\n    node: NodeId,\n    port: u16,\n    mut dst: SocketAddr,\n    protocol: IpProtocol,\n) -\u003e io::Result\u003c(PayloadSender, PayloadReceiver, SocketAddr)\u003e {\n    self.rand_delay().await?;\n    if let Some(addr) = self\n        .ipvs\n        .get_server(ServiceAddr::from_addr_proto(dst, protocol))\n    {\n        dst = addr.parse().expect(\"invalid socket address\");\n    }\n    let (ip, dst_node, socket, latency) = (self.network.lock().try_send(node, dst, protocol))\n        .ok_or_else(|| {\n        io::Error::new(io::ErrorKind::ConnectionRefused, \"connection refused\")\n    })?;\n    let src = (ip, port).into();\n    let (tx1, rx1) = self.channel(node, dst, protocol);\n    let (tx2, rx2) = self.channel(dst_node, src, protocol);\n    trace!(?latency, \"delay\");\n    // FIXME: delay\n    // self.time.add_timer(latency, move || {\n    socket.new_connection(src, dst, tx2, rx1);\n    // });\n    Ok((tx1, rx2, src))\n}\n\n/// Try sending a message to the destination.\n///\n/// If destination is not found or packet loss, returns `None`.\n/// Otherwise returns the source IP, socket and latency.\npub fn try_send(\n    \u0026mut self,\n    node: NodeId,\n    dst: SocketAddr,\n    protocol: IpProtocol,\n) -\u003e Option\u003c(IpAddr, NodeId, Arc\u003cdyn Socket\u003e, Duration)\u003e {\n    let dst_node = self.resolve_dest_node(node, dst, protocol)?;\n    let latency = self.test_link(node, dst_node)?;\n    let sockets = \u0026self.nodes.get(\u0026dst_node)?.sockets;\n    let ep = (sockets.get(\u0026(dst, protocol)))\n        .or_else(|| sockets.get(\u0026((Ipv4Addr::UNSPECIFIED, dst.port()).into(), protocol)))?;\n    let src_ip = if dst.ip().is_loopback() {\n        IpAddr::V4(Ipv4Addr::LOCALHOST)\n    } else {\n        self.nodes.get(\u0026node).expect(\"node not found\").ip.unwrap()\n    };\n    Some((src_ip, dst_node, ep.clone(), latency))\n}\n\n/// Returns the latency of sending a packet. If packet loss, returns `None`.\nfn test_link(\u0026mut self, src: NodeId, dst: NodeId) -\u003e Option\u003cDuration\u003e {\n    if self.link_clogged(src, dst) || self.rand.gen_bool(self.config.packet_loss_rate) {\n        None\n    } else {\n        self.stat.msg_count += 1;\n        // TODO: special value for loopback\n        Some(self.rand.gen_range(self.config.send_latency.clone()))\n    }\n}"]],"caption":[["madsim/src/sim/net/mod.rs \u0026 madsim/src/sim/net/network.rs"]],"language":[["Rust"]]},"format":{"code_wrap":false},"created_time":1733580387528,"last_edited_time":1733587371396,"parent_id":"14688756-3979-80c1-8154-d71ad5bbaf1d","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80e9-b9b3-d1a2b78dfed3":{"value":{"id":"15588756-3979-80e9-b9b3-d1a2b78dfed3","version":11,"type":"image","properties":{"size":[["395.7KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f109c7a4-9022-4d0b-b944-41c93e5d7180/image.png"]]},"format":{"block_width":3840,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f109c7a4-9022-4d0b-b944-41c93e5d7180/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4234375,"block_preserve_scale":true},"created_time":1733586933365,"last_edited_time":1733586939369,"parent_id":"15588756-3979-8013-a01c-f1d76abbd18a","parent_table":"block","alive":true,"file_ids":["f109c7a4-9022-4d0b-b944-41c93e5d7180"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8052-b282-e41bc56ecc5f":{"value":{"id":"15588756-3979-8052-b282-e41bc56ecc5f","version":480,"type":"text","properties":{"title":[["通过 MadSim，可以将上述所有服务运行在模拟器的单线程环境中，使环境构建简单得多，并且基于模拟器时间加速的特性，一轮完整测试只用耗时两分钟，是原先的四分之一"]]},"created_time":1733587755558,"last_edited_time":1733587896921,"parent_id":"15588756-3979-8013-a01c-f1d76abbd18a","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-8022-98c8-d0f39cf008b6":{"value":{"id":"15588756-3979-8022-98c8-d0f39cf008b6","version":404,"type":"text","properties":{"title":[["并且能轻松地并行执行测试，如果发生了错误，使用同样的 seed 就可以轻易复现结果，包括修改代码添加日志，也不会影响可复现性"]]},"created_time":1733587913466,"last_edited_time":1733588049786,"parent_id":"15588756-3979-8013-a01c-f1d76abbd18a","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-80c2-a428-e4466ebf8748":{"value":{"id":"15588756-3979-80c2-a428-e4466ebf8748","version":11,"type":"image","properties":{"size":[["378.5KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/68419cd1-0ecb-4e97-99dd-1a2adbb04406/image.png"]]},"format":{"block_width":3455,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/68419cd1-0ecb-4e97-99dd-1a2adbb04406/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4243125904486252,"block_preserve_scale":true},"created_time":1733587930568,"last_edited_time":1733587934931,"parent_id":"15588756-3979-80a5-8c42-dec92a24d35b","parent_table":"block","alive":true,"file_ids":["68419cd1-0ecb-4e97-99dd-1a2adbb04406"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15588756-3979-803c-a4eb-fa1b93eb2234":{"value":{"id":"15588756-3979-803c-a4eb-fa1b93eb2234","version":13,"type":"image","properties":{"size":[["320.5KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/db6930a8-b915-4f9f-833c-16b133ea15f6/image.png"]]},"format":{"block_width":679.9928588867188,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/db6930a8-b915-4f9f-833c-16b133ea15f6/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.4107244723331432,"block_preserve_scale":true},"created_time":1733587935740,"last_edited_time":1733587938822,"parent_id":"15588756-3979-8056-9ffa-f5656b3c5b70","parent_table":"block","alive":true,"file_ids":["db6930a8-b915-4f9f-833c-16b133ea15f6"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8037-9aad-c09f5ac94bbf":{"value":{"id":"15688756-3979-8037-9aad-c09f5ac94bbf","version":414,"type":"text","properties":{"title":[["在正常测试中，受限于集群和数据规模的问题，测试覆盖面不足。但在模拟器中可以轻松构造较大规模和极端情况下的 case，帮助发现并修复了大量问题"]]},"created_time":1733630381050,"last_edited_time":1733630508314,"parent_id":"15588756-3979-8056-9ffa-f5656b3c5b70","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80f5-ae6d-ef2512c94e7e":{"value":{"id":"15688756-3979-80f5-ae6d-ef2512c94e7e","version":44,"type":"sub_sub_header","properties":{"title":[["Dropbox "],["Trinity",[["b"]]]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733633569123,"last_edited_time":1733634045298,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80c4-9eb5-c9a9a211f267":{"value":{"id":"15688756-3979-80c4-9eb5-c9a9a211f267","version":665,"type":"text","properties":{"title":[["Dropbox 中 Sync Engine 是一个核心功能，负责在客户端和服务器之间进行文件同步"]]},"created_time":1733633581976,"last_edited_time":1733641332564,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-806d-a76c-c663ddac212b":{"value":{"id":"15688756-3979-806d-a76c-c663ddac212b","version":224,"type":"text","properties":{"title":[["2016 年，Dropbox 开始使用 Rust 重写它们的 Sync Engine，并引入了确定性模拟技术来测试，该部分称为 Trinity"]]},"created_time":1733641198126,"last_edited_time":1733641257720,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80b9-804d-fa061cd6059d":{"value":{"id":"15688756-3979-80b9-804d-fa061cd6059d","version":312,"type":"text","properties":{"title":[["动机就像我们一开始提到的那样，问题复现困难，也没有足够日志定位："]]},"created_time":1733633653118,"last_edited_time":1733633785595,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8002-812b-c1bfb8bb916e":{"value":{"id":"15688756-3979-8002-812b-c1bfb8bb916e","version":15,"type":"image","properties":{"size":[["215.1KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/70b000f9-def1-4452-ba16-29d7a0af0188/image.png"]]},"format":{"block_width":624,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/70b000f9-def1-4452-ba16-29d7a0af0188/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.4047919293820933,"block_preserve_scale":true},"created_time":1733633667055,"last_edited_time":1733633792674,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["70b000f9-def1-4452-ba16-29d7a0af0188"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-800b-be54-c2d26a2fc767":{"value":{"id":"15688756-3979-800b-be54-c2d26a2fc767","version":399,"type":"text","properties":{"title":[["整个测试流程也是类似的，通过 seed 构造全局随机数生成器来生成之后的所有随机决策，如果测试失败则输出 seed"]]},"created_time":1733633688956,"last_edited_time":1733633965042,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8098-ad64-f1f378d9ea14":{"value":{"id":"15688756-3979-8098-ad64-f1f378d9ea14","version":15,"type":"image","properties":{"size":[["18.0KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/5cf0904e-be75-4d15-a553-96685049fef7/image.png"]]},"format":{"block_width":576,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/5cf0904e-be75-4d15-a553-96685049fef7/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.6944444444444444,"block_preserve_scale":true},"created_time":1733633689160,"last_edited_time":1733642795093,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["5cf0904e-be75-4d15-a553-96685049fef7"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8036-90d4-ddc19da4df4f":{"value":{"id":"15688756-3979-8036-90d4-ddc19da4df4f","version":484,"type":"text","properties":{"title":[["由于也是 Rust 开发，Trinity 也是作为一个异步 runtime 执行，其他方面也都类似，包括文件系统、网络和时间模拟"]]},"created_time":1733633652938,"last_edited_time":1733640189706,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8085-8430-e495a91a56a3":{"value":{"id":"16388756-3979-8085-8430-e495a91a56a3","version":105,"type":"text","properties":{"title":[["Rust 生态中异步 runtime 的事实标准 tokio 也宣布了其官方的确定性测试项目 "],["turmoil",[["a","https://github.com/tokio-rs/turmoil"]]],["，在这方面 Rust 还是走在了前列"]]},"created_time":1734790613453,"last_edited_time":1734790706785,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80ec-9de5-daeb532f7b16":{"value":{"id":"15688756-3979-80ec-9de5-daeb532f7b16","version":3,"type":"text","created_time":1733634053055,"last_edited_time":1733634053057,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8032-881f-e3ed296331a8":{"value":{"id":"15688756-3979-8032-881f-e3ed296331a8","version":62,"type":"sub_sub_header","properties":{"title":[["TigerBeetle \u0026 VOPR"]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733632255324,"last_edited_time":1733641839616,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8024-9baf-cb35507d9dc4":{"value":{"id":"15688756-3979-8024-9baf-cb35507d9dc4","version":866,"type":"text","properties":{"title":[["TigerBeetle",[["a","https://github.com/tigerbeetle/tigerbeetle"]]],[" 是一个专为金融事务场景设计的数据库，使用 Zig 开发，在首页就着重强调了它们使用确定性模拟来构建数据库以体现可靠性"]]},"created_time":1733640865128,"last_edited_time":1733642518973,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8099-8ab3-d69c8b466640":{"value":{"id":"15688756-3979-8099-8ab3-d69c8b466640","version":148,"type":"image","properties":{"size":[["1409.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/8f427043-fb74-48df-9093-53384be92349/image.png"]],"caption":[["「历经数个世纪的测试」"]]},"format":{"block_width":707.9900512695312,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/8f427043-fb74-48df-9093-53384be92349/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.41216730038022814,"block_preserve_scale":true},"created_time":1733641950670,"last_edited_time":1733642515663,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["8f427043-fb74-48df-9093-53384be92349"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8084-8c3f-dc05dd9c488f":{"value":{"id":"15688756-3979-8084-8c3f-dc05dd9c488f","version":364,"type":"text","properties":{"title":[["并且这个模拟版本 "],["SimTigerBeetle",[["a","https://sim.tigerbeetle.com/"]]],[" 是可以运行在浏览器中的，还包装成了一个游戏的形式，能够折磨这些 beetle（注入故障）"]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733642180147,"last_edited_time":1733644413014,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8040-9b67-fbf1dc7c01f3":{"value":{"id":"15688756-3979-8040-9b67-fbf1dc7c01f3","version":13,"type":"image","properties":{"size":[["9638.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f577125b-a82f-4bc4-9273-af63ba3158d2/image.png"]]},"format":{"block_width":624,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f577125b-a82f-4bc4-9273-af63ba3158d2/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.7197055492638732,"block_preserve_scale":true},"created_time":1733642180998,"last_edited_time":1733642231962,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["f577125b-a82f-4bc4-9273-af63ba3158d2"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80af-870e-e158c659751a":{"value":{"id":"15688756-3979-80af-870e-e158c659751a","version":123,"type":"text","properties":{"title":[["他们开发了称为 Viewstamped Operation Replicator (VOPR) 的模拟器，并将系统编译为 WebAssembly 运行，和前面的模拟器一样，这里也都包含网络、存储、时钟的模拟，并支持故障注入"]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733642843981,"last_edited_time":1733644166629,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80ef-a20e-ff5d2b27d237":{"value":{"id":"15688756-3979-80ef-a20e-ff5d2b27d237","version":3,"type":"text","created_time":1733646543702,"last_edited_time":1733646543704,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80af-8283-c59e4f873bc6":{"value":{"id":"15688756-3979-80af-8283-c59e4f873bc6","version":692,"type":"text","properties":{"title":[["Zig 不像 Rust 那样可以自定义异步 runtime，那这里是如何控制调度的呢？一开始认为这里编译为 WASM 的目的除了支持浏览器外，也是为了能在模拟器上单线程执行。但看了文档才发现，TigerBeetle 从一开始就是单线程的设计，那也不需要什么控制调度一说了："]]},"created_time":1733646272000,"last_edited_time":1733646736034,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8044-a934-f77c1927aa95":{"value":{"id":"15688756-3979-8044-a934-f77c1927aa95","version":12,"type":"bulleted_list","properties":{"title":[["https://docs.tigerbeetle.com/about/performance#single-core-by-design",[["a","https://docs.tigerbeetle.com/about/performance#single-core-by-design"]]]]},"created_time":1733646259918,"last_edited_time":1733646281497,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8071-9a01-fda4c4c76ea1":{"value":{"id":"15d88756-3979-8071-9a01-fda4c4c76ea1","version":191,"type":"text","properties":{"title":[["但并发是必须的，不利用多线程或其他语言的异步机制，如何实现并发？"]]},"created_time":1734230600114,"last_edited_time":1734230621370,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80aa-887c-ca129211a741":{"value":{"id":"15688756-3979-80aa-887c-ca129211a741","version":390,"type":"text","properties":{"title":[["从"],["代码",[["a","https://github.com/tigerbeetle/tigerbeetle/blob/main/src/vopr.zig"]]],["上来看，模拟器会每次通过一个 "],["tick",[["c"]]],[" 推进进度，下面每一层，节点、网络、存储和时间都有对应的 "],["tick",[["c"]]],[" 实现"]]},"created_time":1733643961028,"last_edited_time":1733645269016,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8048-8a84-fec2d4d195e1":{"value":{"id":"15688756-3979-8048-8a84-fec2d4d195e1","version":128,"type":"code","properties":{"title":[["pub fn main() !void {\n    // ...\n\n    while (tick \u003c cli_args.ticks_max_convergence) : (tick += 1) {\n        simulator.tick();\n        tick_total += 1;\n        if (simulator.pending() == null) {\n            break;\n        }\n    }\n\n    // ...\n}\n\npub fn tick(simulator: *Simulator) void {\n    simulator.cluster.context = simulator;\n\n    simulator.cluster.tick();\n    simulator.tick_requests();\n    simulator.tick_crash();\n}"]],"caption":[["tigerbeetle/src/vopr.zig"]],"language":[["Plain Text"]]},"format":{"code_wrap":false},"created_time":1733644455958,"last_edited_time":1733645193598,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-801e-b69e-e2aa947cdf33":{"value":{"id":"15688756-3979-801e-b69e-e2aa947cdf33","version":1029,"type":"text","properties":{"title":[["真实运行的部分，也是通过 "],["tick",[["c"]]],[" 不停推进。相当于手动在代码结构上设计了任务的时间片切分，每 "],["tick",[["c"]]],[" 一次就执行这个任务的一个时间片，调度顺序就是代码中 "],["tick",[["c"]]],[" 调用的顺序，本身就是被确定的。这是完全贯彻了把系统作为状态机实现的想法，从一开始就是为确定性模拟而设计的："]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733644724415,"last_edited_time":1734358158801,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8085-94d5-ff49a017c0ee":{"value":{"id":"15688756-3979-8085-94d5-ff49a017c0ee","version":108,"type":"code","properties":{"title":[["while (true) {\n    replica.tick();\n    if (multiversion != null) multiversion.?.tick();\n    try command.io.run_for_ns(constants.tick_ms * std.time.ns_per_ms);\n}"]],"caption":[["tigerbeetle/src/tigerbeetle/main.zig"]],"language":[["Plain Text"]]},"format":{"code_wrap":false},"created_time":1733645633258,"last_edited_time":1733646571743,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8033-a8c4-f2fa564262a8":{"value":{"id":"15688756-3979-8033-a8c4-f2fa564262a8","version":643,"type":"text","properties":{"title":[["这对代码设计要求会比较高，在很多场景是反范式的，例如 TigerBeetle 内 LSM-Tree 的实现，有点难想象如何通过一堆 tick 来推进整个 LSM-Tree 的 Compaction 流程："]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733646035185,"last_edited_time":1734358301410,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8084-8ce8-cac3a55edd48":{"value":{"id":"15688756-3979-8084-8ce8-cac3a55edd48","version":12,"type":"bulleted_list","properties":{"title":[["https://docs.tigerbeetle.com/about/internals/lsm",[["a","https://docs.tigerbeetle.com/about/internals/lsm"]]]]},"created_time":1733646093008,"last_edited_time":1733646093547,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80b0-abc9-f6e61c7e6a49":{"value":{"id":"15d88756-3979-80b0-abc9-f6e61c7e6a49","version":116,"type":"text","properties":{"title":[["以及他们如何设计这样的 I/O 库："]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734262715720,"last_edited_time":1734262733498,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8060-9a0c-cb05b9fb541d":{"value":{"id":"15d88756-3979-8060-9a0c-cb05b9fb541d","version":12,"type":"bulleted_list","properties":{"title":[["A Programmer-Friendly I/O Abstraction Over io_uring and kqueue",[["a","https://tigerbeetle.com/blog/a-friendly-abstraction-over-iouring-and-kqueue"]]]]},"created_time":1734262725219,"last_edited_time":1734262725814,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15f88756-3979-80c8-bee5-e16ebd98c2b5":{"value":{"id":"15f88756-3979-80c8-bee5-e16ebd98c2b5","version":416,"type":"text","properties":{"title":[["除此之外，TigerBeetle 还有些很独特的设计哲学，例如 0 依赖、0 动态内存分配。包括确定性模拟，这些思想都很前卫，值得一看："]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734410383087,"last_edited_time":1734443342757,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15f88756-3979-805e-a240-e10edd6b6039":{"value":{"id":"15f88756-3979-805e-a240-e10edd6b6039","version":15,"type":"bulleted_list","properties":{"title":[["Tiger Style",[["a","https://github.com/tigerbeetle/tigerbeetle/blob/main/docs/TIGER_STYLE.md"]]]]},"created_time":1734443195849,"last_edited_time":1734443212620,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8072-98ab-d5788f197995":{"value":{"id":"15688756-3979-8072-98ab-d5788f197995","version":3,"type":"text","format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733645761675,"last_edited_time":1733645761677,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-8099-adef-eb9c7aedb2c8":{"value":{"id":"14e88756-3979-8099-adef-eb9c7aedb2c8","version":228,"type":"sub_sub_header","properties":{"title":[["FrostDB \u0026 Resonate"]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732948233044,"last_edited_time":1734357740839,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-803d-91e6-ebcd952b1b20":{"value":{"id":"15688756-3979-803d-91e6-ebcd952b1b20","version":1837,"type":"text","properties":{"title":[["从前面的方案中可以发现，大部分外部调用都可以通过接口 mock 的方式来实现确定性，最麻烦的是如何让整个分布式系统运行在一个节点的一个线程上，消除调度的不确定性"]]},"created_time":1733647219016,"last_edited_time":1734262267434,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80bd-9e9c-e0969fd8918d":{"value":{"id":"15d88756-3979-80bd-9e9c-e0969fd8918d","version":102,"type":"text","properties":{"title":[["上文提到的系统中除了 Rust 能比较好地实现外，其他语言都有些限制，但从头自己造一套任务和调度机制，还是能做到的"]]},"created_time":1734261145271,"last_edited_time":1734357644317,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8014-a2fc-d855d9a18884":{"value":{"id":"15d88756-3979-8014-a2fc-d855d9a18884","version":656,"type":"text","properties":{"title":[["而另外一些语言在设计之处就是完全透明多线程的，在这些语言上会困难得多。例如 Go，很难去避免使用 goroutine，而一旦有多个 goroutine，调度就完全不可控了"]]},"created_time":1734261051264,"last_edited_time":1734265577711,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8018-a997-df6b4fc342b4":{"value":{"id":"15d88756-3979-8018-a997-df6b4fc342b4","version":3,"type":"text","created_time":1734266592288,"last_edited_time":1734266592291,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8014-a3f9-eb9e919b10a9":{"value":{"id":"15d88756-3979-8014-a3f9-eb9e919b10a9","version":912,"type":"text","properties":{"title":[["虽然可以将 Go 程序编译为 WASM 来单线程执行并禁用抢占（"],["GOMAXPROCS=1",[["c"]]],[" 是不行的，碰到阻塞调用时还是会创建线程），但 runtime 仍然会"],["故意随机调度 goroutine",[["a","https://github.com/golang/go/blob/35ef4a9f330fdff870ff637558ec2fd03a93fd9c/src/runtime/proc.go#L6655"]]],["，以及 Go 的 map 遍历顺序也是故意随机的，还有"],["其他很多不确定性来源",[["a","https://blog.merovius.de/posts/2018-01-15-generating_entropy_without_imports_in_go/"]]]]},"created_time":1734262034001,"last_edited_time":1734266404023,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8026-9adb-ca92f7e007a7":{"value":{"id":"15d88756-3979-8026-9adb-ca92f7e007a7","version":702,"type":"text","properties":{"title":[["不过 Go runtime 中这些不确定性来源都是通过启动时的一个 seed 来确定的（就像确定性模拟器做的那样），如果能自定义这个 seed 那就能解决这些问题。但只差这一步，Go 的 runtime 开放和自定义程度很低。要想突破这最后一个限制，只能 fork 一份 runtime 来修改。这几乎就是 "],["FrostDB",[["a","https://github.com/polarsignals/frostdb"]]],[" 所做的事，他们 fork 了 Go runtime "],["修改了几行代码",[["a","https://github.com/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a#diff-99a8f74dc3dbef74ab6a6792a8e36e17d2196486ef16e9b8199ce9a9e7512183R44-R52"]]],[" 来实现这一切："]]},"created_time":1734266508475,"last_edited_time":1734793913623,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80c6-817f-c6bbd63bae9d":{"value":{"id":"15d88756-3979-80c6-817f-c6bbd63bae9d","version":14,"type":"bookmark","properties":{"link":[["https://github.com/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a#diff-99a8f74dc3dbef74ab6a6792a8e36e17d2196486ef16e9b8199ce9a9e7512183R44-R52"]],"title":[["runtime: add GORANDSEED to seed go runtime's randomness · polarsignals/go@ea083ca"]],"description":[["This helps with deterministic execution. This commit additionally enables randomized scheduling. The runtime needs to be run with GOOS=wasip1 GOARCH=wasm for deterministic executions given an initi..."]]},"format":{"bookmark_icon":"https://github.com/fluidicon.png","bookmark_cover":"https://opengraph.githubassets.com/87e8c262666f4289280b098950624d382352a13bc2ff2d18524c0bc9859b943b/polarsignals/go/commit/ea083ca4892a62eb229c1886517e1cdb575ee19a"},"created_time":1734266877907,"last_edited_time":1734266880155,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8070-90a7-c9036452a144":{"value":{"id":"15d88756-3979-8070-90a7-c9036452a144","version":3,"type":"text","created_time":1734262145610,"last_edited_time":1734262145611,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8032-b987-d34fa11492ed":{"value":{"id":"15d88756-3979-8032-b987-d34fa11492ed","version":973,"type":"text","properties":{"title":[["另一条路线是 "],["Resonate",[["a","https://github.com/resonatehq/resonate"]]],["，他们则是确实避免使用 goroutine，自己造了一套 coroutine："]]},"created_time":1734262000493,"last_edited_time":1734617106051,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80b8-b0e7-fe471ca097c1":{"value":{"id":"15688756-3979-80b8-b0e7-fe471ca097c1","version":75,"type":"external_object_instance","format":{"uri":"https://github.com/resonatehq/resonate/blob/268c588e302f13187309e4b37636d19595d42fa1/internal/kernel/scheduler/coroutine.go","stale":false,"bot_id":"1b102d2e-413f-42ce-94df-a9ee84848257","domain":"github.com","attributes":[{"id":"title","name":"File Name","type":"inline","format":{"type":"title","section":"title"},"values":["coroutine.go"]},{"id":"path","name":"File Path","type":"inline","values":["internal/kernel/scheduler/coroutine.go"]},{"id":"content","name":"File Content","type":"inline","format":{"type":"code","section":"body","language":"Go"},"values":["package scheduler\n\nimport (\n\t\"fmt\"\n\n\t\"github.com/resonatehq/resonate/internal/kernel/metadata\"\n)\n\ntype Coroutine[I, O any] struct {\n\tf   func(*Coroutine[I, O])\n\tc_i chan *WrapI[I]\n\tc_o chan *WrapO[O]\n\n\t// lifecycle\n\tonDone []func()\n\n\t// metadata\n\tmetadata *metadata.Metadata\n\n\t// scheduler\n\tScheduler S\n}\n\nfunc (c *Coroutine[I, O]) String() string {\n\treturn fmt.Sprintf(\"Coroutine(metadata=%s)\", c.metadata)\n}\n\ntype WrapI[I any] struct {\n\tValue I\n\tError error\n}\n\ntype WrapO[O any] struct {\n\tValue O\n\tDone  bool\n}\n\nfunc NewCoroutine[I, O any](metadata *metadata.Metadata, f func(*Coroutine[I, O])) *Coroutine[I, O] {\n\tc := \u0026Coroutine[I, O]{\n\t\tf:        f,\n\t\tc_i:      make(chan *WrapI[I]),\n\t\tc_o:      make(chan *WrapO[O]),\n\t\tmetadata: metadata,\n\t}\n\n\tgo func() {\n\t\t\u003c-c.c_i\n\t\tc.f(c)\n\t\tclose(c.c_i)\n\n\t\tc.c_o \u003c- \u0026WrapO[O]{Done: true}\n\t\tclose(c.c_o)\n\t}()\n\n\treturn c\n}\n\nfunc (c *Coroutine[I, O]) OnDone(f func()) {\n\tc.onDone = append(c.onDone, f)\n}\n\nfunc (c *Coroutine[I, O]) Yield(o O) (I, error) {\n\tc.c_o \u003c- \u0026WrapO[O]{Value: o, Done: false}\n\n\ti := \u003c-c.c_i\n\treturn i.Value, i.Error\n}\n\nfunc (c *Coroutine[I, O]) Resume(i I, e error) (O, bool) {\n\tc.c_i \u003c- \u0026WrapI[I]{Value: i, Error: e}\n\n\to := \u003c-c.c_o\n\treturn o.Value, o.Done\n}\n\nfunc (c *Coroutine[I, O]) Time() int64 {\n\treturn c.Scheduler.Time()\n}\n"]},{"id":"owner","name":"Owner","type":"relation","values":["https://github.com/resonatehq"]},{"id":"ref","name":"Branch or Commit","type":"inline","values":["268c588e302f13187309e4b37636d19595d42fa1"]}],"original_url":"https://github.com/resonatehq/resonate/blob/268c588e302f13187309e4b37636d19595d42fa1/internal/kernel/scheduler/coroutine.go","external_object_id":"15688756-3979-81e7-be76-0040f0eec881","related_external_object_uris_to_instance_ids":{"https://github.com/resonatehq":"15688756-3979-80ee-bf74-e8efdd2b8f71"}},"created_time":1733644895426,"last_edited_time":1734801218474,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16188756-3979-8003-83be-f5c73388a2c3":{"value":{"id":"16188756-3979-8003-83be-f5c73388a2c3","version":382,"type":"text","properties":{"title":[["Resonate 给出了一个使用模拟器发现 bug 的例子，包括 seed，用这个 seed 我们也能在本地复现出一样的结果："]]},"created_time":1734618484524,"last_edited_time":1734618575341,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16188756-3979-803c-bc3c-fd96997ede33":{"value":{"id":"16188756-3979-803c-bc3c-fd96997ede33","version":60,"type":"bulleted_list","properties":{"title":[["The One Where DST Finds a Real Bug | Resonate",[["a","https://blog.resonatehq.io/dst-finds-a-bug"]]]]},"created_time":1734618525640,"last_edited_time":1734618547277,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16188756-3979-808f-b4ed-ec4610e57a92":{"value":{"id":"16188756-3979-808f-b4ed-ec4610e57a92","version":23,"type":"text","created_time":1734617259343,"last_edited_time":1734618337199,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16188756-3979-80e6-b285-ee945f2f0c88":{"value":{"id":"16188756-3979-80e6-b285-ee945f2f0c88","version":1198,"type":"text","properties":{"title":[["总得来说，在 Rust 这样比较开放的语言上实现确定性模拟是比较简单且兼容程度较高的。其次是其他相对底层的语言，虽然大多数时候需要实现一套自己的机制导致代码不具备普适性，但至少它们不会偷偷做额外的事把一切变得更糟。最麻烦的是 Go 这样隐藏了很多细节且不可控的语言，各种层面上限制都太大"]]},"created_time":1734617248269,"last_edited_time":1734617838017,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8090-8652-d2dfbb4a4a29":{"value":{"id":"15d88756-3979-8090-8652-d2dfbb4a4a29","version":5,"type":"text","properties":{"title":[["恰好最近 "],["Go 1.24 发布",[["a","https://tip.golang.org/doc/go1.24"]]],["，新增了 "],["synctest",[["c"]]],[" 包，可以在测试代码中实现作用域内的模拟时钟："]]},"created_time":1734261643687,"last_edited_time":1734617776093,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8029-a98e-d62678a59318":{"value":{"id":"15d88756-3979-8029-a98e-d62678a59318","version":9,"type":"code","properties":{"title":[["import (\n\t\"testing\"\n\t\"testing/synctest\"\n\t\"time\"\n)\n\nfunc Test(t *testing.T) {\n\tsynctest.Run(func() {\n\t\tbefore := time.Now()\n\t\ttime.Sleep(time.Second)\n\t\tafter := time.Now()\n\t\tif d := after.Sub(before); d != time.Second {\n\t\t\tt.Fatalf(\"took %v\", d)\n\t\t}\n\t})\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1734265954526,"last_edited_time":1734265957840,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80f7-9fdd-f05be4805fe0":{"value":{"id":"15d88756-3979-80f7-9fdd-f05be4805fe0","version":162,"type":"text","properties":{"title":[["这也是确定性模拟中所需的一个重要机制，希望随着 Go 自身的进一步开发，未来能有更 native 的方式在 Go 上实现确定性模拟"]]},"created_time":1734266806551,"last_edited_time":1734617846490,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-8007-9f87-d679d633bf95":{"value":{"id":"15d88756-3979-8007-9f87-d679d633bf95","version":3,"type":"text","created_time":1734265629504,"last_edited_time":1734265629506,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80ee-bf74-e8efdd2b8f71":{"value":{"id":"15688756-3979-80ee-bf74-e8efdd2b8f71","version":53,"type":"external_object_instance","format":{"uri":"https://github.com/resonatehq","stale":false,"bot_id":"1b102d2e-413f-42ce-94df-a9ee84848257","attributes":[{"id":"title","name":"Login","type":"inline","format":{"type":"title","section":"title"},"values":["resonatehq"]},{"id":"avatar_url","name":"Avatar URL","type":"embed","format":{"type":"icon","section":"entity"},"values":["https://avatars.githubusercontent.com/u/132853763?v=4"],"mimeType":"image/*"}],"external_object_id":"15688756-3979-8171-9d6f-0040588641fe"},"created_time":1733644895426,"last_edited_time":1734801218277,"parent_id":"15688756-3979-80b8-b0e7-fe471ca097c1","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-80c4-aad5-eb5f84c7cba2":{"value":{"id":"14e88756-3979-80c4-aad5-eb5f84c7cba2","version":87,"type":"sub_sub_header","properties":{"title":[["Antithesis"]]},"created_time":1732948241242,"last_edited_time":1734357720987,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80a0-808b-f83287a80f92":{"value":{"id":"15d88756-3979-80a0-808b-f83287a80f92","version":513,"type":"text","properties":{"title":[["模拟器都是单线程运行的，是因为我们默认无法干涉内核层面的调度，才有这样的限制。但真的不能吗？如果将模拟器实现在更底层的级别中呢？"]]},"created_time":1734261686897,"last_edited_time":1734789661562,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80de-a1b0-d7d8abb937c5":{"value":{"id":"15d88756-3979-80de-a1b0-d7d8abb937c5","version":3,"type":"text","created_time":1734261660966,"last_edited_time":1734261660968,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-80fb-9682-c82cd0951eb8":{"value":{"id":"14e88756-3979-80fb-9682-c82cd0951eb8","version":660,"type":"text","properties":{"title":[["Antithesis",[["a","https://antithesis.com/"]]],[" 是 FoundationDB 前成员（CEO 就是前面 FoundationDB 的演讲者）创立的一家公司，他们的平台能为任意系统提供确定性模拟："]]},"format":{"copied_from_pointer":{"id":"7e000d5f-9457-43de-a1da-66b43d41914e","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732948233209,"last_edited_time":1734777162230,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-803e-a5eb-f2e9b38810fd":{"value":{"id":"16388756-3979-803e-a5eb-f2e9b38810fd","version":8,"type":"quote","properties":{"title":[["Antithesis is a "],["continuous reliability platform",[["b"]]],[" that "],["autonomously searches",[["b"]]],[" for problems in your software within a "],["simulated environment",[["b"]]],[". Every problem we find can be "],["perfectly reproduced",[["b"]]],[", allowing for "],["efficient debugging",[["b"]]],[" of even the most complex problems."]]},"created_time":1734777117247,"last_edited_time":1734777166607,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-801d-94de-dbe880d5f14d":{"value":{"id":"16388756-3979-801d-94de-dbe880d5f14d","version":377,"type":"text","properties":{"title":[["作为商业化解决方案，面对各种客户的不同系统。不可能要求客户对系统做大量修改和适配甚至重新设计，确定性模拟必须是透明的"]]},"created_time":1734777590767,"last_edited_time":1734780232330,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80cf-8567-e086700c2500":{"value":{"id":"16388756-3979-80cf-8567-e086700c2500","version":511,"type":"text","properties":{"title":[["因此，Antithesis 开发了一个"],["确定性模拟计算机",[["b"]]],["的 hypervisor。这很疯狂，但确实可行，只要整个虚拟机都是确定性的，那对被测试的软件就是完全透明的"]]},"created_time":1734777645625,"last_edited_time":1734779586376,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8053-89c7-c17c592b3b22":{"value":{"id":"16388756-3979-8053-89c7-c17c592b3b22","version":13,"type":"image","properties":{"size":[["51.4KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/9b66cf7a-d962-4958-83cf-d796d9aa08ad/image.png"]]},"format":{"block_width":528,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/9b66cf7a-d962-4958-83cf-d796d9aa08ad/image.png","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.31857318573185733,"block_preserve_scale":true},"created_time":1734781852944,"last_edited_time":1734781856679,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["9b66cf7a-d962-4958-83cf-d796d9aa08ad"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-809a-bae5-c09f2e391b1c":{"value":{"id":"16388756-3979-809a-bae5-c09f2e391b1c","version":685,"type":"text","properties":{"title":[["脱离语言的另一个好处是，可以真正运行「整个系统」。例如 FoundationDB 没法在模拟器中使用 RocksDB，因为它有后台线程。RisingWave 也给 etcd 和 Kafka 编写了单独的模拟器。但在 Antithesis 中都不需要为这些依赖的库和组件操心"]]},"created_time":1734790435094,"last_edited_time":1734790755645,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-804c-aa50-e42428d6f3c7":{"value":{"id":"16388756-3979-804c-aa50-e42428d6f3c7","version":12,"type":"text","created_time":1734779586930,"last_edited_time":1734789661949,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8008-b456-f8adb7e890e0":{"value":{"id":"16388756-3979-8008-b456-f8adb7e890e0","version":560,"type":"text","properties":{"title":[["实现一个确定性的 hypervisor，这会比想象中更难，因为 CPU 也不是所有的情况都能保证确定性，而它非常复杂"]]},"created_time":1734779586681,"last_edited_time":1734790778431,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-807b-9031-cc7e6f644eda":{"value":{"id":"16388756-3979-807b-9031-cc7e6f644eda","version":335,"type":"text","properties":{"title":[["为了模拟时间流逝，Antithesis 根据执行指令数来推进模拟时钟。但 PMC 中记录的执行指令数并不总是正确，这会破坏确定性。只有对 CPU 的细节足够了解，才可能解决这些问题"]]},"created_time":1734781630768,"last_edited_time":1734801245676,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8014-8744-f072e25c7ed3":{"value":{"id":"16388756-3979-8014-8744-f072e25c7ed3","version":1086,"type":"text","properties":{"title":[["在并发上，虽然被测系统是多线程的，但还是必须让它们运行在一个物理核上。因为有时间加速，这并不会对被测系统的性能造成多大影响。反而从 Antithesis 的角度来说，可以不需要关注核间同步，在不同核上运行更多单独的虚拟机实例提高效率。并且由于工作在更底层的级别上，使得 Antithesis 还能构造像线程饥饿这样的问题"]]},"created_time":1734781886316,"last_edited_time":1734790845446,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8063-825d-e1b4d5c5f37b":{"value":{"id":"16388756-3979-8063-825d-e1b4d5c5f37b","version":9,"type":"video","properties":{"source":[["https://www.youtube.com/watch?v=0E6GBg13P60"]]},"format":{"link_title":"Building a Deterministic Hypervisor with bhyve - May 2024 FreeBSD Developer Summit","block_width":1280,"link_author":"FreeBSD","link_provider":"YouTube","display_source":"https://www.youtube.com/embed/0E6GBg13P60?rel=0","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5625,"block_preserve_scale":true},"created_time":1734794014669,"last_edited_time":1734794016215,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80a4-ac7d-c5e418719cd2":{"value":{"id":"16388756-3979-80a4-ac7d-c5e418719cd2","version":3,"type":"text","created_time":1734781953476,"last_edited_time":1734781953478,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8058-8bdb-efd7ab2f8664":{"value":{"id":"16388756-3979-8058-8bdb-efd7ab2f8664","version":722,"type":"text","properties":{"title":[["Antithesis 还实现了一些很奇妙的技术，例如能智能判断系统执行历史、探索分支路径和状态空间，并且能保存状态。这意味着 Antithesis 的测试是完全自主的，你不需要编写任何测试用例，系统会自动生成用例挖掘可能的分支，进行比人工更可靠的测试，类似于一种更加智能的 fuzzing"]]},"created_time":1734781953220,"last_edited_time":1734787628504,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80f0-ad36-df677f835799":{"value":{"id":"16388756-3979-80f0-ad36-df677f835799","version":1429,"type":"text","properties":{"title":[["Antithesis 可以提供每个 checkpoint 的快照，并且和走向其他分支的执行历史进行对比，他们称为 Multiverse（多重宇宙），你能在这些不同宇宙中进行「时间旅行」式的调试。随时回退到过去和继续走向未来看看发生了什么，甚至可以在时间旅行中执行命令或者使用调试器调试进程，捕获网络数据包，跑火焰图… 当你改变了过去之后，一个新的宇宙就会诞生"]]},"created_time":1734783607021,"last_edited_time":1734786126150,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80a7-8de2-ea3d83691037":{"value":{"id":"16388756-3979-80a7-8de2-ea3d83691037","version":13,"type":"image","properties":{"size":[["16.4KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/39ec0609-297d-47f6-85d4-65c2c1b801c6/image.png"]]},"format":{"block_width":707.9900512695312,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/39ec0609-297d-47f6-85d4-65c2c1b801c6/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.30864197530864196,"block_preserve_scale":true},"created_time":1734784505823,"last_edited_time":1734784510742,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"file_ids":["39ec0609-297d-47f6-85d4-65c2c1b801c6"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8056-95cb-eb7189b9ce22":{"value":{"id":"16388756-3979-8056-95cb-eb7189b9ce22","version":278,"type":"text","properties":{"title":[["这一切都非常黑魔法，更多内容可以浏览他们的 Blog，都很有趣。也许 Antithesis 真的能定义未来的测试方法"]]},"format":{"copied_from_pointer":{"id":"16388756-3979-8093-8c65-c051f8189196","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1734783172457,"last_edited_time":1734784742882,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"16388756-3979-8093-8c65-c051f8189196","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80e9-b7ce-f692887db5b2":{"value":{"id":"16388756-3979-80e9-b7ce-f692887db5b2","version":12,"type":"bulleted_list","properties":{"title":[["https://antithesis.com/blog/",[["a","https://antithesis.com/blog/"]]]]},"created_time":1734783057536,"last_edited_time":1734783060225,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8059-9633-cef458af8d42":{"value":{"id":"16388756-3979-8059-9633-cef458af8d42","version":3,"type":"text","created_time":1734783022260,"last_edited_time":1734783022262,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80e5-8895-edd9a05561fe":{"value":{"id":"16388756-3979-80e5-8895-edd9a05561fe","version":911,"type":"text","properties":{"title":[["Antithesis 的定价不便宜，但在客户侧都有不错的评价，包括一些知名基础设施系统："]]},"created_time":1734777645442,"last_edited_time":1734786897651,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8082-908d-cc6fca43ce89":{"value":{"id":"16388756-3979-8082-908d-cc6fca43ce89","version":365,"type":"bulleted_list","properties":{"title":[["MongoDB 使用 Antithesis 测试存储引擎，核心服务器，同步和升降级功能。发现了一个严重的数据丢失问题："]]},"content":["16388756-3979-8089-bae3-d1aef428453a","16388756-3979-80f4-b6b4-de49173ce089"],"created_time":1734785991816,"last_edited_time":1734786720483,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8005-a055-cf615d7f8ccc":{"value":{"id":"16388756-3979-8005-a055-cf615d7f8ccc","version":189,"type":"bulleted_list","properties":{"title":[["Ethereum 在从 PoW（工作量证明）转向 PoS（权益证明）时使用 Antithesis 进行测试"]]},"content":["16388756-3979-802f-9303-c715c1db4222"],"created_time":1734785747008,"last_edited_time":1734794068685,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8064-9d05-deca6e7e1b99":{"value":{"id":"16388756-3979-8064-9d05-deca6e7e1b99","version":520,"type":"bulleted_list","properties":{"title":[["WarpStream 端到端测试了整个 SaaS 系统，而不是局限在单个组件或进程"]]},"content":["16388756-3979-80ab-bd70-d8e1d10958a7"],"created_time":1734785782446,"last_edited_time":1734790479918,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8089-bae3-d1aef428453a":{"value":{"id":"16388756-3979-8089-bae3-d1aef428453a","version":14,"type":"bulleted_list","properties":{"title":[["Accelerating developers at MongoDB",[["a","https://antithesis.com/case_studies/mongodb_productivity/"]]]]},"created_time":1734785738147,"last_edited_time":1734786542743,"parent_id":"16388756-3979-8082-908d-cc6fca43ce89","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80f4-b6b4-de49173ce089":{"value":{"id":"16388756-3979-80f4-b6b4-de49173ce089","version":18,"type":"bulleted_list","properties":{"title":[["Working with Antithesis at MongoDB",[["a","https://antithesis.com/blog/mongo_bug/"]]]]},"created_time":1734785601589,"last_edited_time":1734786543382,"parent_id":"16388756-3979-8082-908d-cc6fca43ce89","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-802f-9303-c715c1db4222":{"value":{"id":"16388756-3979-802f-9303-c715c1db4222","version":9,"type":"bulleted_list","properties":{"title":[["Testing the Ethereum merge",[["a","https://antithesis.com/case_studies/ethereum_merge/"]]]]},"created_time":1734786961530,"last_edited_time":1734786966802,"parent_id":"16388756-3979-8005-a055-cf615d7f8ccc","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80ab-bd70-d8e1d10958a7":{"value":{"id":"16388756-3979-80ab-bd70-d8e1d10958a7","version":9,"type":"bulleted_list","properties":{"title":[["Deterministic Simulation Testing for Our Entire SaaS",[["a","https://www.warpstream.com/blog/deterministic-simulation-testing-for-our-entire-saas"]]]]},"created_time":1734787851839,"last_edited_time":1734787852974,"parent_id":"16388756-3979-8064-9d05-deca6e7e1b99","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8075-924e-f320ea24f1cd":{"value":{"id":"16388756-3979-8075-924e-f320ea24f1cd","version":310,"type":"bulleted_list","properties":{"title":[["CockroachDB 在 Antithesis 上重现并定位了之前被搁置数年的事务并行提交 bug"]]},"content":["16388756-3979-809b-8c56-e3fc9d4a0e42"],"created_time":1734785826039,"last_edited_time":1734790314772,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80df-acd6-cea786fdffde":{"value":{"id":"16388756-3979-80df-acd6-cea786fdffde","version":3,"type":"text","created_time":1734790262919,"last_edited_time":1734790262923,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-801b-956f-e58a6ba86c1f":{"value":{"id":"16388756-3979-801b-956f-e58a6ba86c1f","version":482,"type":"text","properties":{"title":[["除了 Antithesis 之外，还有一些项目也试图在更底层的级别上进行确定性探索。例如 "],["rr",[["a","https://rr-project.org/"]]],[" 和 "],["dettrace",[["a","https://github.com/dettrace/dettrace"]]],[" 都是通过 ptrace 替换系统调用的想法来实现的确定性调试器，它们都诞生得更早一些。Facebook 也曾发起过 "],["hermit",[["a","https://github.com/facebookexperimental/hermit"]]],[" 项目，虽然现在已经没有在积极开发"]]},"created_time":1734790253335,"last_edited_time":1734794103531,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80e9-8f23-f65876ae038e":{"value":{"id":"16388756-3979-80e9-8f23-f65876ae038e","version":23,"type":"bulleted_list","properties":{"title":[["Hermit: Deterministic Linux for Controlled Testing and Software Bug-finding",[["a","https://developers.facebook.com/blog/post/2022/11/22/hermit-deterministic-linux-testing/"]]]]},"created_time":1734774962573,"last_edited_time":1734790254033,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8020-839c-df1d8094357a":{"value":{"id":"16388756-3979-8020-839c-df1d8094357a","version":3,"type":"text","created_time":1734789906028,"last_edited_time":1734789906029,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80c9-9fad-f4cedf846fff":{"value":{"id":"14688756-3979-80c9-9fad-f4cedf846fff","version":15,"type":"sub_header","properties":{"title":[["总结"]]},"format":{"copied_from_pointer":{"id":"85f478cb-7aa0-4901-92c6-fa7712ab3c30","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228815,"last_edited_time":1732894066672,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"85f478cb-7aa0-4901-92c6-fa7712ab3c30","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-803c-ae1d-fcb8a529ede5":{"value":{"id":"16388756-3979-803c-ae1d-fcb8a529ede5","version":480,"type":"text","properties":{"title":[["确定性模拟器提供了一个非常美好的、仿佛触手可及的设想。这里调试不再困难，系统更加可靠"]]},"created_time":1734790904620,"last_edited_time":1734792320950,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-802a-8b7a-c2f4a55c21af":{"value":{"id":"16388756-3979-802a-8b7a-c2f4a55c21af","version":1172,"type":"text","properties":{"title":[["但软件工程没有银弹，确定性模拟器仍然有很多问题。既然是模拟，前提是我们了解被模拟物的所有行为，但这是不可能的。所有模拟疏漏或失真的细节，最终也会在真实系统中遇见，例如错误理解的网络协议，意想不到的 system call 行为，依赖外部系统本身的 bug。都可能让系统再次在真实环境中故障"]]},"created_time":1734791255362,"last_edited_time":1734793246599,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-806d-91c9-efb99ad9e058":{"value":{"id":"16388756-3979-806d-91c9-efb99ad9e058","version":1253,"type":"text","properties":{"title":[["更重要的是不确定性的消除十分困难，模拟器本身来说，很难 cover 各种场景，而任何一点遗漏，都会把不确定性引入系统，最终走向混沌"]]},"created_time":1734792057813,"last_edited_time":1734792570498,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-803f-9fb7-fc047484627d":{"value":{"id":"16388756-3979-803f-9fb7-fc047484627d","version":425,"type":"text","properties":{"title":[["另一种情况是被测程序的修改会破坏可复现性，被测程序本身就是模拟器输入的一部分，如果修改被测程序，虽然不会破坏「确定性」，但可能会无法复现期望的问题。例如在程序启动时新运行一个线程，那模拟器的调度序列可能会因为这个新的输入而改变，它仍然是确定性的（相同的输入有相同的输出），只是没能再触发之前的问题。这实际上某种程度违背了模拟器提供的承诺，确定性和可复现性并不总是能完全划等号"]]},"created_time":1734792569254,"last_edited_time":1734792714136,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8091-a0c7-ee77e82faea7":{"value":{"id":"16388756-3979-8091-a0c7-ee77e82faea7","version":3,"type":"text","created_time":1734792057920,"last_edited_time":1734792057922,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8029-a4f9-fc0740cc225c":{"value":{"id":"16388756-3979-8029-a4f9-fc0740cc225c","version":609,"type":"text","properties":{"title":[["从工程角度来说，语言上实现的模拟器大多会有比较强的侵入性，会限制并发模型和依赖库。除了新项目以外难以引入。而 Antithesis 方案技术壁垒过高，大部分人没有能力实现，如果没有开源方案共建，无法广泛普及"]]},"created_time":1734792058039,"last_edited_time":1734793210903,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8099-8d95-ecc8652b5f48":{"value":{"id":"16388756-3979-8099-8d95-ecc8652b5f48","version":756,"type":"text","properties":{"title":[["不过这也只是模拟器实现中的困难，从方向上来说，高度的可复现性和极高的测试效率就足以成为任何追求可靠性的系统尝试和探索它的理由。我始终相信这项技术的巨大潜力，一定会是未来的方向"]]},"created_time":1734793000229,"last_edited_time":1734793401787,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14e88756-3979-805b-a907-fa44a69fac3a":{"value":{"id":"14e88756-3979-805b-a907-fa44a69fac3a","version":3,"type":"text","format":{"copied_from_pointer":{"id":"467c7be8-7180-4f49-b60c-52cb02b4dcd3","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732948203298,"last_edited_time":1732948203299,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8077-b407-cce692980528":{"value":{"id":"14688756-3979-8077-b407-cce692980528","version":14,"type":"sub_header","properties":{"title":[["Ref"]]},"format":{"copied_from_pointer":{"id":"1d0bf519-204f-4054-ac9c-be62c4b2e9f0","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228818,"last_edited_time":1732894068493,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"1d0bf519-204f-4054-ac9c-be62c4b2e9f0","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8096-8511-d07ea0d1afcc":{"value":{"id":"15688756-3979-8096-8511-d07ea0d1afcc","version":20,"type":"numbered_list","properties":{"title":[["What's the big deal about Deterministic Simulation Testing?",[["a","https://notes.eatonphil.com/2024-08-20-deterministic-simulation-testing.html"]]]]},"format":{"copied_from_pointer":{"id":"d64ecdf3-109b-4a46-a7d5-f6756cb51082","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733641515285,"last_edited_time":1733641528380,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8059-8c19-c0a9041b4b4c":{"value":{"id":"15688756-3979-8059-8c19-c0a9041b4b4c","version":87,"type":"numbered_list","properties":{"title":[["sled simulation guide (jepsen-proof engineering)",[["a","https://sled.rs/simulation.html"]]]]},"format":{"copied_from_pointer":{"id":"d64ecdf3-109b-4a46-a7d5-f6756cb51082","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733633002590,"last_edited_time":1733641530699,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8046-84f9-cf4e00d9d30e":{"value":{"id":"15688756-3979-8046-84f9-cf4e00d9d30e","version":8,"type":"numbered_list","properties":{"title":[["Deterministic Simulation: A New Era of Distributed System Testing (Part 1 of 2)",[["a","https://risingwave.com/blog/deterministic-simulation-a-new-era-of-distributed-system-testing/"]]]]},"created_time":1733641558156,"last_edited_time":1733641564234,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-80dd-9064-edbc50276b74":{"value":{"id":"15688756-3979-80dd-9064-edbc50276b74","version":13,"type":"numbered_list","properties":{"title":[["Applying Deterministic Simulation: The RisingWave Story (Part 2 of 2)",[["a","https://risingwave.com/blog/applying-deterministic-simulation-the-risingwave-story-part-2-of-2/"]]]]},"created_time":1733641576190,"last_edited_time":1733641584447,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-809e-9ced-f30e2b8c2e96":{"value":{"id":"15688756-3979-809e-9ced-f30e2b8c2e96","version":4,"type":"numbered_list","properties":{"title":[["确定性模拟的背景、原理、框架及应用实例 - RisingWave中文开源社区",[["a","https://juejin.cn/post/7262172937511518267"]]]]},"created_time":1733641546115,"last_edited_time":1733641546117,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-806d-9f04-e544ed180e3f":{"value":{"id":"15688756-3979-806d-9f04-e544ed180e3f","version":45,"type":"numbered_list","properties":{"title":[["Testing sync at Dropbox",[["a","https://dropbox.tech/infrastructure/-testing-our-new-sync-engine"]]]]},"format":{"copied_from_pointer":{"id":"ff225c5f-3625-4fd8-ba3a-759ecc631e88","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1733633514121,"last_edited_time":1733641591092,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8025-9abf-c8bcb20bbf99":{"value":{"id":"15688756-3979-8025-9abf-c8bcb20bbf99","version":8,"type":"numbered_list","properties":{"title":[["We Put a Distributed Database In the Browser – And Made a Game of It!",[["a","https://tigerbeetle.com/blog/2023-07-11-we-put-a-distributed-database-in-the-browser"]]]]},"created_time":1733641631865,"last_edited_time":1733641637071,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80a3-b167-fae2fec0b471":{"value":{"id":"15d88756-3979-80a3-b167-fae2fec0b471","version":8,"type":"numbered_list","properties":{"title":[["A Programmer-Friendly I/O Abstraction Over io_uring and kqueue",[["a","https://tigerbeetle.com/blog/a-friendly-abstraction-over-iouring-and-kqueue"]]]]},"created_time":1734262691195,"last_edited_time":1734262709055,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15688756-3979-8008-a838-c85d3fc72086":{"value":{"id":"15688756-3979-8008-a838-c85d3fc72086","version":24,"type":"numbered_list","properties":{"title":[["(Mostly) Deterministic Simulation Testing in Go",[["a","https://www.polarsignals.com/blog/posts/2024/05/28/mostly-dst-in-go"]]]]},"created_time":1733641490341,"last_edited_time":1733641608277,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"15d88756-3979-80e4-951a-e577fb68c399":{"value":{"id":"15d88756-3979-80e4-951a-e577fb68c399","version":41,"type":"numbered_list","properties":{"title":[["Deterministic Simulation Testing | Resonate",[["a","https://blog.resonatehq.io/deterministic-simulation-testing"]]]]},"created_time":1734267173157,"last_edited_time":1734267199939,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-809b-8c56-e3fc9d4a0e42":{"value":{"id":"16388756-3979-809b-8c56-e3fc9d4a0e42","version":7,"type":"bulleted_list","properties":{"title":[["Antithesis of a One-in-a-Million Bug: Taming Demonic Nondeterminism",[["a","https://www.cockroachlabs.com/blog/demonic-nondeterminism/"]]]]},"created_time":1734787906589,"last_edited_time":1734787906725,"parent_id":"16388756-3979-8075-924e-f320ea24f1cd","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80fd-bfe5-f1f23adbe2ca":{"value":{"id":"16388756-3979-80fd-bfe5-f1f23adbe2ca","version":11,"type":"numbered_list","properties":{"title":[["Is something bugging you? | Antithesis",[["a","https://antithesis.com/blog/is_something_bugging_you/"]]]]},"created_time":1734775001282,"last_edited_time":1734782736220,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-801b-b93d-f42333e51cd6":{"value":{"id":"16388756-3979-801b-b93d-f42333e51cd6","version":11,"type":"numbered_list","properties":{"title":[["So you think you want to write a deterministic hypervisor? | Antithesis",[["a","https://antithesis.com/blog/deterministic_hypervisor/"]]]]},"created_time":1734779208842,"last_edited_time":1734782733573,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80af-886c-feae3d3b0b3f":{"value":{"id":"16388756-3979-80af-886c-feae3d3b0b3f","version":44,"type":"numbered_list","properties":{"title":[["Your computer can test better than you (and that's a good thing) | Antithesis",[["a","https://antithesis.com/blog/autonomous_testing/"]]]]},"created_time":1734782708172,"last_edited_time":1734782727938,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80c1-ab6c-e3d7358a2c71":{"value":{"id":"16388756-3979-80c1-ab6c-e3d7358a2c71","version":53,"type":"numbered_list","properties":{"title":[["Debugging in the Multiverse | Ahtithesis",[["a","https://antithesis.com/blog/multiverse_debugging/"]]]]},"created_time":1734784276837,"last_edited_time":1734784289006,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80c4-aba8-f98e557c4e0a":{"value":{"id":"16388756-3979-80c4-aba8-f98e557c4e0a","version":15,"type":"numbered_list","properties":{"title":[["Accelerating developers at MongoDB",[["a","https://antithesis.com/case_studies/mongodb_productivity/"]]]]},"created_time":1734789559966,"last_edited_time":1734789566945,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8010-9419-d128087b2edb":{"value":{"id":"16388756-3979-8010-9419-d128087b2edb","version":4,"type":"numbered_list","properties":{"title":[["Working with Antithesis at MongoDB",[["a","https://antithesis.com/blog/mongo_bug/"]]]]},"created_time":1734789566939,"last_edited_time":1734789566945,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80c7-87d1-e337495c67ed":{"value":{"id":"16388756-3979-80c7-87d1-e337495c67ed","version":5,"type":"numbered_list","properties":{"title":[["Deterministic Simulation Testing for Our Entire SaaS",[["a","https://www.warpstream.com/blog/deterministic-simulation-testing-for-our-entire-saas"]]]]},"created_time":1734789553532,"last_edited_time":1734789553757,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-8036-a0e7-ec748a7e218b":{"value":{"id":"16388756-3979-8036-a0e7-ec748a7e218b","version":5,"type":"numbered_list","properties":{"title":[["Antithesis of a One-in-a-Million Bug: Taming Demonic Nondeterminism",[["a","https://www.cockroachlabs.com/blog/demonic-nondeterminism/"]]]]},"created_time":1734789547524,"last_edited_time":1734789547931,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"16388756-3979-80f0-a915-df7c499fa1a2":{"value":{"id":"16388756-3979-80f0-a915-df7c499fa1a2","version":5,"type":"numbered_list","properties":{"title":[["Hermit: Deterministic Linux for Controlled Testing and Software Bug-finding",[["a","https://developers.facebook.com/blog/post/2022/11/22/hermit-deterministic-linux-testing/"]]]]},"created_time":1734789826446,"last_edited_time":1734789826803,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-8003-8b36-dabb553fa829":{"value":{"id":"14688756-3979-8003-8b36-dabb553fa829","version":3,"type":"text","format":{"copied_from_pointer":{"id":"99b5bfcf-488b-4704-a51c-427e85590d6a","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284228821,"last_edited_time":1732284228845,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"copied_from":"99b5bfcf-488b-4704-a51c-427e85590d6a","space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80b1-98b5-ddab736aeb80":{"value":{"id":"14688756-3979-80b1-98b5-ddab736aeb80","version":3,"type":"text","format":{"copied_from_pointer":{"id":"3fce500c-02f1-42b0-87f3-3c40061e07f7","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"}},"created_time":1732284014769,"last_edited_time":1732284014770,"parent_id":"14688756-3979-80f8-8f88-d0bb8697b4a4","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"collection":{"0bb2e606-8d0c-4f7c-aca9-70986e90c055":{"value":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","version":85,"name":[["x³u³"]],"description":[["🗒 碎碎念"]],"schema":{"@NcA":{"name":"password","type":"text"},"Dj]h":{"name":"icon","type":"text"},"NX\\Q":{"name":"date","type":"date","date_format":"YYYY/MM/DD"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"95b7fea5-98b3-476e-892f-79e8f36d0633","color":"brown","value":"Notice","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"2287395b-9f64-4852-b46f-ff3df4b4acef","color":"yellow","value":"Menu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"50fefd65-c28e-4806-9183-aa12995f11f3","color":"pink","value":"SubMenu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"b945f57d-dbcc-4603-9fab-5cfe447aad1b","color":"red","value":"Config","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"bB{M":{"name":"category","type":"select"},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"a027d99d-be10-412d-b94a-8c61f6eacc29","color":"default","value":"存储","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4bd9608a-d7d6-4597-beb7-d4849da04909","color":"gray","value":"分布式系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"ad04c718-fd54-4374-bfed-6c7e9dc65e01","color":"blue","value":"折腾","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"25bff120-77fb-40f1-9531-00997afcb444","color":"purple","value":"Linux","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e12d005d-ec78-4876-950d-2399744abbaa","color":"blue","value":"内核","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c7950cbd-8d2c-4cbe-8bb1-679fb433a74f","color":"red","value":"碎碎念","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be9970b9-6fe4-4351-92c2-1e3e41d2a3e3","color":"brown","value":"Cloud Native","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"61c97435-c65a-40b1-9e95-2c6345b6f9d3","color":"pink","value":"Vim","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d18e22d6-cbbb-4311-9928-7c5b58124456","color":"orange","value":"论文阅读","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"526115da-04f3-4be2-8a47-c83c7576b0de","color":"green","value":"Kubernetes","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"12016016-3ecc-4ee7-92c6-6973678fdd05","color":"yellow","value":"数据库","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"1edc83b3-f351-4a21-aafc-3b059d0c0f22","color":"brown","value":"Raft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"158014da-08eb-49f4-97ad-1ce6f6e0ee5c","color":"orange","value":"Rust","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e93f6dd2-caed-4531-9ee1-28fc2cbf1811","color":"yellow","value":"旅行","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c885be61-3b71-4d5f-86cc-4da1586e660a","color":"blue","value":"PVE","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d4f1c8d8-1d0f-47af-a440-4dc14b658610","color":"blue","value":"日语","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be95bbc7-1806-4b7e-8b58-1f540ac0f223","color":"red","value":"网络","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"9bb01875-d8ae-4914-a41b-5eccd75e824f","color":"blue","value":"操作系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"66d0fb9a-8f36-4f9e-98ed-af4057a1773f","color":"default","value":"Nix","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4e4791ca-d6ec-48f9-9bd6-ad6f4572993a","color":"red","value":"NixOS","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d1242312-e0a8-456d-b8f0-6e998e2c4fb2","color":"orange","value":"Invisible","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]}},"icon":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/49b4570c-b2f0-457b-81b7-b68e2693a471/avatar.png","cover":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a9af1d6b-f284-4734-ba06-990353cf3f84/Elaina.jpg","format":{"copied_from_pointer":{"id":"4379bc14-5d22-453b-a153-12639616fc01","table":"collection","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"property_visibility":[{"property":"`gQ~","visibility":"show"},{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","visibility":"show"},{"property":"NX\\Q","visibility":"show"},{"property":"d]hq","visibility":"show"},{"property":"wz|S","visibility":"show"},{"property":"sD^m","visibility":"show"},{"property":"bB{M","visibility":"show"},{"property":"Dj]h","visibility":"hide_if_empty"},{"property":"uHoD","visibility":"show"},{"property":"kiCR","visibility":"hide"}],"ai_suggested_properties":[{"name":"created by","type":"person"},{"name":"updated at","type":"date"},{"name":"priority","type":"select","options":[{"id":"OqCJ","color":"purple","value":"low"},{"id":"X{Pz","color":"pink","value":"medium"},{"id":"LRCx","color":"red","value":"high"},{"id":"VY?=","color":"yellow","value":"urgent"}]},{"name":"visibility","type":"select","options":[{"id":"Q=_{","color":"red","value":"public"},{"id":"A|Nj","color":"green","value":"private"},{"id":"MWlx","color":"gray","value":"restricted"}]},{"name":"attachments","type":"file"},{"name":"related links","type":"multi_select","options":[{"id":"I^W\u003e","color":"default","value":"documentation"},{"id":"\u003cg\\P","color":"yellow","value":"tutorials"},{"id":"RMVI","color":"gray","value":"references"}]},{"name":"estimated completion","type":"date"},{"name":"contact email","type":"email"},{"name":"contact phone","type":"phone_number"},{"name":"is active","type":"checkbox"}],"collection_cover_position":0.6486,"collection_page_properties":[{"visible":false,"property":"`gQ~"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"Dj]h"},{"visible":true,"property":"@NcA"},{"visible":true,"property":"ckw_"}],"collection_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f","abe3a0aa-2aff-4274-81bb-c2443d4ef9e2","a2a32795-101d-46aa-a7f6-eb35b8750166","29db38d2-d5fa-4fa6-8a92-3b527cfe80d1","49b4570c-b2f0-457b-81b7-b68e2693a471","a9af1d6b-f284-4734-ba06-990353cf3f84"],"copied_from":"4379bc14-5d22-453b-a153-12639616fc01","template_pages":["2eace25c-842c-46fd-9ccb-e9190981b6c3"],"migrated":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"space":{"4cc04375-345a-4a1e-bdf0-3a7c88ef0425":{"role":"none"}},"collection_view":{"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef":{"value":{"id":"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","version":111,"type":"table","name":"All","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"860c7b26-627e-4972-b471-8e8bfca0d897","filter":{"filter":{"value":{"type":"exact"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}},{"id":"1c5b2709-6f35-4692-b4db-cb219a62e22d","filter":{"filter":{"value":{"type":"exact"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","15c88756-3979-8089-acb1-e4ae25bf3f4f","16488756-3979-80aa-9bba-cf28c50dec07","16e88756-3979-8010-aeb9-d7e49f597453","14688756-3979-80f8-8f88-d0bb8697b4a4","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14688756-3979-80e7-97c9-000c212f8370":{"value":{"id":"14688756-3979-80e7-97c9-000c212f8370","version":3,"type":"table","name":"Published Post","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"1c5b2709-6f35-4692-b4db-cb219a62e22d","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}},{"id":"860c7b26-627e-4972-b471-8e8bfca0d897","filter":{"filter":{"value":{"type":"exact","value":"Published"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"sort":[{"property":"NX\\Q","direction":"descending"}],"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"14588756-3979-8039-9990-000cefddccf8":{"value":{"id":"14588756-3979-8039-9990-000cefddccf8","version":11,"type":"table","name":"All Post","format":{"table_wrap":false,"show_page_icon":true,"property_filters":[{"id":"eacd5736-8f45-4d4d-97ce-21001f75dceb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"wrap":false,"width":100,"visible":true,"property":"`gQ~"},{"wrap":false,"width":263,"visible":true,"property":"title"},{"wrap":false,"width":233,"visible":true,"property":"wz|S"},{"wrap":false,"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"wrap":false,"width":219,"visible":true,"property":"sD^m"},{"wrap":false,"width":184,"visible":true,"property":"d]hq"},{"wrap":false,"width":111,"visible":true,"property":"NX\\Q"},{"wrap":false,"width":100,"visible":false,"property":"bB{M"},{"wrap":false,"width":117,"visible":false,"property":"Dj]h"},{"wrap":false,"width":100,"visible":false,"property":"@NcA"}],"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","13a88756-3979-80cb-a5e6-fd37fcff6613","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","10d88756-3979-807a-bc25-cf64eed2ccce","14088756-3979-8047-9d4d-c9c8e2152b95","14688756-3979-80f8-8f88-d0bb8697b4a4","14688756-3979-806c-af3c-f23f4c85d88e","12988756-3979-8065-aeb4-e6ec1258ed90","94e03781-e74c-41d0-89f7-df2e2a7ad93f","11688756-3979-8028-b7d8-ce8bf2ec4253","11d88756-3979-8080-877d-cf9a2d058532","4e5d7fc0-68d5-4165-ba12-b2d8bfc7d92c","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"sort":[{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","direction":"descending"},{"property":"NX\\Q","direction":"descending"}],"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d":{"value":{"id":"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","version":1,"type":"table","name":"Config","format":{"gallery_cover":{"type":"page_content"},"list_properties":[{"visible":true,"property":"NX\\Q"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"`gQ~"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"}],"property_filters":[{"id":"b54a6c88-635d-4de4-946e-5a855a1f4069","filter":{"filter":{"value":[{"type":"exact","value":"Notice"},{"type":"exact","value":"Menu"},{"type":"exact","value":"Config"},{"type":"exact","value":"SubMenu"},{"type":"exact","value":"Page"}],"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":116,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":118,"visible":true,"property":"`gQ~"},{"width":219,"visible":true,"property":"title"},{"width":326,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"`gQ~"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"}],"table_frozen_column_index":-1,"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8dfd415c-71af-41f9-b984-e7182bf2210b":{"value":{"id":"8dfd415c-71af-41f9-b984-e7182bf2210b","version":1,"type":"board","name":"Post Board","format":{"board_columns":[{"value":{"type":"select","value":"Draft"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Invisible"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Published"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}],"board_columns_by":{"sort":{"type":"manual"},"type":"select","property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},"board_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"wz|S"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"`gQ~"}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":219,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":155,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c2f93d8-6810-42a1-87da-55f1ecda9bca":{"value":{"id":"3c2f93d8-6810-42a1-87da-55f1ecda9bca","version":74,"type":"chart","name":"Tag","format":{"chart_config":{"type":"column","dataConfig":{"type":"groups_reducer","groupBy":{"sort":{"type":"manual"},"type":"multi_select","property":"sD^m","hideEmptyGroups":false},"aggregationConfig":{"aggregation":{"aggregator":"count"},"seriesFormat":{"displayType":"column"}}},"chartFormat":{"mainSort":"manual","hideLegend":false,"axisCumulative":false,"axisGroupStyle":"normal","donutHideValue":false,"donutDataLabels":"value","axisShowDataLabels":true,"axisHideEmptyGroups":false}},"property_filters":[{"id":"01739a9c-9312-4d0d-bf7d-de1204300bdb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}},{"id":"3e615570-2c44-41d9-ae7c-603eabc9056e","filter":{"filter":{"value":{"type":"exact","value":"Published"},"operator":"enum_is"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"subitem_display_mode":"flattened","table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{"49688360-6eeb-480f-9284-f81070003083":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/2f213fe1-0bc3-44f8-b28d-487ee51299bb/Untitled.png?table=block\u0026id=49688360-6eeb-480f-9284-f81070003083\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=0bRrsdV6N5rH2jbdx7FVukoTPJTrsGX5dT2YIMoDCVs","7f92640c-e8eb-42cf-a384-8d18a5089a04":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/8674fe3b-771b-43f4-860a-10847162d1f5/Untitled.png?table=block\u0026id=7f92640c-e8eb-42cf-a384-8d18a5089a04\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=hrzlEErOoKVZsIaO25pFONxweF11ikxPwilUudtmZuM","84ea3146-11e8-488a-93cc-61dfd64e986d":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/03aedc4e-a2cf-4b3a-b645-d32d76a5b468/Untitled.png?table=block\u0026id=84ea3146-11e8-488a-93cc-61dfd64e986d\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=A_cQqooBfZ4-_IWCq-fV4dOBlcy6S4HEvKNOoIFdiqk","d7e394de-d11c-48cb-8e0c-460e69085362":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/e0b2eeac-ad50-478a-857f-36ceec223c72/Untitled.png?table=block\u0026id=d7e394de-d11c-48cb-8e0c-460e69085362\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=7Uzelk-BEQBT2cVBGGN43OjXZgLeZjZfI_p6Y0eB_Ag","14688756-3979-8040-a39f-f7a4e9444f67":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f9fa10f4-1198-4a2f-b546-aed8998940c7/Untitled.png?table=block\u0026id=14688756-3979-8040-a39f-f7a4e9444f67\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=kG3g6Hy8GLlxm5TC1eWagi4qQ-FJuKXl7XIXlcee9yU","87659099-a29a-423f-b646-11284eb2ffeb":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/dfc75047-5a34-4cc6-91a0-c2a82f4e4cf8/Untitled.png?table=block\u0026id=87659099-a29a-423f-b646-11284eb2ffeb\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=BsdihKyJqC56XLQxxN4WurqyIVed3HBVqwNjqpo4uEE","14688756-3979-8004-b4bf-eb00d0243e23":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/f0ceda69-c45c-4992-bc66-37c150805e04/Untitled.png?table=block\u0026id=14688756-3979-8004-b4bf-eb00d0243e23\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=W9Tp5dStv4OD3bP7XovM_Hb3CwRAJ0Hqjkhkv2Vvgbw","14688756-3979-8016-b156-d447217c8c99":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/973a1bbf-337b-4131-91f6-446e7fe51205/Untitled.png?table=block\u0026id=14688756-3979-8016-b156-d447217c8c99\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=owxX9am5GGda6bY_GhFt7uNMGi-8PDCN4pX9dsqPMuU","14688756-3979-807f-b5ed-f38e8d6f9f4e":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/976d433c-4a1f-4a57-8512-3d3a96b455f1/Untitled.png?table=block\u0026id=14688756-3979-807f-b5ed-f38e8d6f9f4e\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=17yvyZtXJp68cSPrw_FcmaRnGAuyKRoY8ueCr6hp44E","93733ab2-0e61-4462-b5bf-01440b2c8d59":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/d758bf6b-a683-4d6d-af43-3d498791c1e7/Untitled.png?table=block\u0026id=93733ab2-0e61-4462-b5bf-01440b2c8d59\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=DSpSvedLXFa-zjuVhdsLqcXe605XletbUAKdDXk6_zQ","f4b66a13-e0af-4e59-b631-8320d65ea25b":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/71dc8c92-485e-4049-ac85-ed203598b1ce/Untitled.png?table=block\u0026id=f4b66a13-e0af-4e59-b631-8320d65ea25b\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=1ffTnF--SMKenQMH5opQXv2clVnL1lfFmKy6wfHUsmM","14688756-3979-805d-aab6-ee285a94362b":"https://file.notion.so/f/f/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/20011529-118d-4555-a03e-fa8e8c527556/Untitled.png?table=block\u0026id=14688756-3979-805d-aab6-ee285a94362b\u0026spaceId=4cc04375-345a-4a1e-bdf0-3a7c88ef0425\u0026expirationTimestamp=1735804800000\u0026signature=3aZ5BM36ALbH--oeUvEKPcNF081eEbmBE3QqLdRxzcA"}}},"prev":{"id":"16e88756-3979-8010-aeb9-d7e49f597453","date":{"start_date":"2025-01-01","date_format":"relative"},"type":"Post","slug":"post/2024summary","tags":["碎碎念"],"title":"2024 年度总结","status":"Published","category":"","comment":"","publishDate":1735689600000,"publishDay":"2025-1-1","lastEditedDate":"2025-01-01T07:04:00.847Z","lastEditedDay":"2025-1-1","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fbfe50417-58ba-4d65-ab45-24dd49660962%2Fimage.png?table=block\u0026id=16e88756-3979-8010-aeb9-d7e49f597453\u0026t=16e88756-3979-8010-aeb9-d7e49f597453\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2024summary","target":"_self","password":""},"next":{"id":"14688756-3979-806c-af3c-f23f4c85d88e","date":{"start_date":"2024-11-22","date_format":"relative"},"type":"Post","slug":"post/coroutine","tags":["操作系统"],"summary":"最近经常被各种人问到一些关于协程的事情，例如 xx 语言的 xx 是不是协程，xx 语言和 xx 语言的协程有什么区别，我不得不一次次 share 出我的文章，索性直接发到 blog 上吧","title":"浅谈协程","status":"Published","category":"","comment":"","publishDate":1732233600000,"publishDay":"2024-11-22","lastEditedDate":"2024-11-22T15:31:35.278Z","lastEditedDay":"2024-11-22","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"操作系统","color":"blue"}],"href":"/post/coroutine","target":"_self","password":""},"recommendPosts":[{"id":"12988756-3979-8065-aeb4-e6ec1258ed90","date":{"start_date":"2024-11-17","date_format":"relative"},"type":"Post","slug":"post/memorydb","tags":["分布式系统","数据库","论文阅读"],"summary":"MemoryDB 是 Amazon 的一个 Redis 兼容的 KV 数据库，论文发表在 SIGMOD 2024 上","title":"MemoryDB: Redis + Remote Log","status":"Published","category":"","comment":"","publishDate":1731801600000,"publishDay":"2024-11-17","lastEditedDate":"2024-11-18T03:17:24.166Z","lastEditedDay":"2024-11-18","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"},{"name":"数据库","color":"yellow"},{"name":"论文阅读","color":"orange"}],"href":"/post/memorydb","target":"_self","password":""},{"id":"bde25ba8-2381-4da6-bb5e-5787ace45def","date":{"start_date":"2024-08-08","date_format":"relative"},"type":"Post","slug":"post/longhorn","tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","title":"Longhorn 浅析","status":"Published","category":"","comment":"","publishDate":1723075200000,"publishDay":"2024-8-8","lastEditedDate":"2024-10-08T10:27:34.636Z","lastEditedDay":"2024-10-8","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block\u0026id=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026t=bde25ba8-2381-4da6-bb5e-5787ace45def\u0026width=800\u0026cache=v2","ext":{},"tagItems":[{"name":"存储","color":"default"},{"name":"分布式系统","color":"gray"}],"href":"/post/longhorn","target":"_self","password":""},{"id":"1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","date":{"start_date":"2022-02-14","date_format":"relative"},"type":"Post","slug":"post/gfs-paper","tags":["论文阅读","分布式系统"],"title":"The Google File System 论文概览","status":"Published","category":"","comment":"","publishDate":1644796800000,"publishDay":"2022-2-14","lastEditedDate":"2024-08-27T15:25:15.003Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"分布式系统","color":"gray"}],"href":"/post/gfs-paper","target":"_self","password":""},{"id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","date":{"start_date":"2022-02-12","date_format":"relative"},"type":"Post","slug":"post/mit6824-lab1-mapreduce","tags":["分布式系统"],"title":"MIT6.824 Lab1 MapReduce","status":"Published","category":"","comment":"","publishDate":1644624000000,"publishDay":"2022-2-12","lastEditedDate":"2024-08-27T15:25:13.836Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"}],"href":"/post/mit6824-lab1-mapreduce","target":"_self","password":""}]},"__N_SSG":true},"page":"/[prefix]/[slug]","query":{"prefix":"post","slug":"deterministic-simulator"},"buildId":"qJmeKOSpowsMdtVOkS5A4","runtimeConfig":{"NODE_ENV_API":"prod","THEMES":["autumn","commerce","example","fukasawa","game","gitbook","heo","hexo","landing","matery","medium","movie","nav","next","nobelium","plog","simple","starter"]},"isFallback":false,"dynamicIds":[10635,31794,46767],"gsp":true,"scriptLoader":[]}</script></body></html>
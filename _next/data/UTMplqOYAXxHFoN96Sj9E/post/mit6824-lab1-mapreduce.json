{"pageProps":{"NOTION_CONFIG":{"LINK":"https://xxxuuu.me","THEME":"autumn","KEYWORDS":"分布式系统,存储,云原生","AUTHOR":"xxxuuu","BIO":"xxxuuu","CUSTOM_MENU":"true","CUSTOM_RIGHT_CLICK_CONTEXT_MENU":"false","LANG":"zh-CN","SINCE":"2018","POST_TITLE_ICON":"false"},"notice":null,"siteInfo":{"title":"x³u³","description":"🗒 碎碎念","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fa9af1d6b-f284-4734-ba06-990353cf3f84%2FElaina.jpg?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&width=800&cache=v2","icon":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F49b4570c-b2f0-457b-81b7-b68e2693a471%2Favatar.png?table=collection&id=0bb2e606-8d0c-4f7c-aca9-70986e90c055&t=0bb2e606-8d0c-4f7c-aca9-70986e90c055&width=800&cache=v2","link":"https://xxxuuu.me"},"allNavPages":[{"title":"Infra 窘境","pageCoverThumbnail":"","category":null,"tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","slug":"post/infra-dilemma","href":"/post/infra-dilemma","pageIcon":"","lastEditedDate":"2024-09-12T13:38:22.109Z","publishDate":1725321600000,"ext":{},"short_id":"5b4b2d85"},{"title":"迁移博客到 Notion","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"Make Notion Great Again！","slug":"post/migrate-blog-to-notion","href":"/post/migrate-blog-to-notion","pageIcon":"","lastEditedDate":"2024-08-29T13:08:42.341Z","publishDate":1724544000000,"ext":{},"short_id":"a06c26b2"},{"title":"Longhorn 浅析","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block&id=bde25ba8-2381-4da6-bb5e-5787ace45def&t=bde25ba8-2381-4da6-bb5e-5787ace45def&width=800&cache=v2","category":null,"tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","slug":"post/longhorn","href":"/post/longhorn","pageIcon":"","lastEditedDate":"2024-09-12T13:44:37.605Z","publishDate":1723075200000,"ext":{},"short_id":"bde25ba8"},{"title":"从 Linux 内核看读写锁设计","pageCoverThumbnail":"","category":null,"tags":["Linux","内核"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","slug":"post/kernel-rwlock","href":"/post/kernel-rwlock","pageIcon":"","lastEditedDate":"2024-08-27T15:25:28.206Z","publishDate":1704326400000,"ext":{},"short_id":"0e96a78e"},{"title":"2023 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block&id=d26ce18a-fa8d-4df4-8b82-69c419c5b621&t=d26ce18a-fa8d-4df4-8b82-69c419c5b621&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2023summary","href":"/post/2023summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:27.095Z","publishDate":1703980800000,"ext":{},"short_id":"d26ce18a"},{"title":"混乱的软中断概念","pageCoverThumbnail":"","category":null,"tags":["Linux","内核"],"summary":"软中断（softirq）和软件中断（software interrupt）","slug":"post/softirq-and-software-interrupt","href":"/post/softirq-and-software-interrupt","pageIcon":"","lastEditedDate":"2024-08-27T15:25:25.736Z","publishDate":1692144000000,"ext":{},"short_id":"3327d648"},{"title":"PVE8 上启用 12 代 Intel CPU 核显 SR-IOV","pageCoverThumbnail":"","category":null,"tags":["折腾"],"summary":"拯救我的 Galgame 和追番体验～","slug":"post/pve8-intel-sr-iov","href":"/post/pve8-intel-sr-iov","pageIcon":"","lastEditedDate":"2024-08-27T15:25:24.786Z","publishDate":1691280000000,"ext":{},"short_id":"d5fd419b"},{"title":"容器标准和生态","pageCoverThumbnail":"","category":null,"tags":["Cloud Native"],"summary":null,"slug":"post/container-spec-ecosystem","href":"/post/container-spec-ecosystem","pageIcon":"","lastEditedDate":"2024-08-27T15:25:22.390Z","publishDate":1689120000000,"ext":{},"short_id":"deaccfa2"},{"title":"Vim as an IDE","pageCoverThumbnail":"","category":null,"tags":["折腾","Vim"],"summary":"记录 Vim 入教过程和折腾记录","slug":"post/vim-as-an-ide","href":"/post/vim-as-an-ide","pageIcon":"","lastEditedDate":"2024-08-27T15:25:23.390Z","publishDate":1687392000000,"ext":{},"short_id":"f26f0a34"},{"title":"Kubernetes CSI","pageCoverThumbnail":"","category":null,"tags":["Cloud Native","Kubernetes"],"summary":null,"slug":"post/kubernetes-csi","href":"/post/kubernetes-csi","pageIcon":"","lastEditedDate":"2024-08-27T15:25:21.307Z","publishDate":1686960000000,"ext":{},"short_id":"a23d61e0"},{"title":"2022 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F967f6a03-c26f-451c-971a-3b507ae769f3%2Ftencent_badge.jpg?table=block&id=cc463e20-63ea-4132-acea-84fc7307dde8&t=cc463e20-63ea-4132-acea-84fc7307dde8&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":null,"slug":"post/2022summary","href":"/post/2022summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:20.451Z","publishDate":1672444800000,"ext":{},"short_id":"cc463e20"},{"title":"The Google File System 论文概览","pageCoverThumbnail":"","category":null,"tags":["论文阅读","分布式系统"],"summary":null,"slug":"post/gfs-paper","href":"/post/gfs-paper","pageIcon":"","lastEditedDate":"2024-08-27T15:25:15.003Z","publishDate":1644796800000,"ext":{},"short_id":"1eecd7c4"},{"title":"MIT6.824 Lab1 MapReduce","pageCoverThumbnail":"","category":null,"tags":["分布式系统"],"summary":null,"slug":"post/mit6824-lab1-mapreduce","href":"/post/mit6824-lab1-mapreduce","pageIcon":"","lastEditedDate":"2024-08-27T15:25:13.836Z","publishDate":1644624000000,"ext":{},"short_id":"514ae2e3"},{"title":"蒟蒻的 2021 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block&id=7b0eb02d-8b44-45f3-b593-52c0a62f4595&t=7b0eb02d-8b44-45f3-b593-52c0a62f4595&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":"落落落落的一年","slug":"post/2021summary","href":"/post/2021summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:12.636Z","publishDate":1640908800000,"ext":{},"short_id":"7b0eb02d"},{"title":"蒟蒻的 2020 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F1dc80ee3-5c1d-4af8-a284-d7896174816a%2Ficpc%25E5%258D%2597%25E4%25BA%25AC.png?table=block&id=37c4cfd9-62a3-41bb-9989-f9df38c45d04&t=37c4cfd9-62a3-41bb-9989-f9df38c45d04&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":"转眼三年已经过去，我也迎来了毕业","slug":"post/2020summary","href":"/post/2020summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:11.370Z","publishDate":1610236800000,"ext":{},"short_id":"37c4cfd9"},{"title":"蒟蒻的 2019 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F2fdfd260-e2c8-42ea-9d8d-6fd6795797dc%2Flanqiao.jpeg?table=block&id=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84&t=8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":"随着2019年最后一晚的落幕，21世纪的10年代也结束了，今年的我无论是在技术上还是别的方面，都成长了许多。以本文记录我的技术路程，迎接新的一年","slug":"post/2019summary","href":"/post/2019summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:09.504Z","publishDate":1577836800000,"ext":{},"short_id":"8aa3f594"},{"title":"蒟蒻的 2018 年度总结","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Ff362b439-342f-451a-b70e-41ec07d86ab3%2F2018summary.jpeg?table=block&id=806f9f46-c738-4c87-9957-e73d11ec44bd&t=806f9f46-c738-4c87-9957-e73d11ec44bd&width=800&cache=v2","category":null,"tags":["碎碎念"],"summary":"又是一年过去了，2018算是人生中最重要的转折点之一，总结一下今年的经历和感想，也算是记录我的技术路程","slug":"post/2018summary","href":"/post/2018summary","pageIcon":"","lastEditedDate":"2024-08-27T15:25:07.408Z","publishDate":1546214400000,"ext":{},"short_id":"806f9f46"}],"tagOptions":[{"name":"碎碎念","color":"red","count":7},{"name":"分布式系统","color":"gray","count":3},{"name":"折腾","color":"blue","count":3},{"name":"Linux","color":"purple","count":2},{"name":"内核","color":"blue","count":2},{"name":"Cloud Native","color":"brown","count":2},{"name":"存储","color":"default","count":1},{"name":"Vim","color":"pink","count":1},{"name":"论文阅读","color":"orange","count":1},{"name":"Kubernetes","color":"green","count":1}],"categoryOptions":[],"customNav":[{"icon":"fas fa-link","name":"友链","href":"/links","target":"_self","show":true},{"icon":null,"name":"关于","href":"/about","target":"_self","show":true}],"customMenu":[{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/","title":"🏠 首页","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:49.016Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/","name":"🏠 首页","target":"_self","password":"","show":true},{"date":{"start_date":"2024-08-24","date_format":"relative"},"type":"Menu","slug":"/archive","title":"📃 归档","status":"Published","category":"","comment":"","publishDate":1724457600000,"publishDay":"2024-8-24","lastEditedDate":"2024-08-25T14:25:34.971Z","lastEditedDay":"2024-8-25","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/archive","name":"📃 归档","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/links","summary":"跳转到/links","title":"👬 友链","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:37.252Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/links","name":"👬 友链","target":"_self","password":"","show":true},{"date":{"start_date":"2023-03-23"},"type":"Menu","slug":"/about","summary":"跳转到/about","title":"👤 关于","status":"Published","category":"","comment":"","publishDate":1679529600000,"publishDay":"2023-3-23","lastEditedDate":"2024-08-29T13:50:43.389Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[],"href":"/about","name":"👤 关于","target":"_self","password":"","show":true}],"postCount":17,"latestPosts":[{"id":"bde25ba8-2381-4da6-bb5e-5787ace45def","date":{"start_date":"2024-08-08","date_format":"relative"},"type":"Post","slug":"post/longhorn","tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","title":"Longhorn 浅析","status":"Published","category":"","comment":"","publishDate":1723075200000,"publishDay":"2024-8-8","lastEditedDate":"2024-09-12T13:44:37.605Z","lastEditedDay":"2024-9-12","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block&id=bde25ba8-2381-4da6-bb5e-5787ace45def&t=bde25ba8-2381-4da6-bb5e-5787ace45def&width=800&cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block&id=bde25ba8-2381-4da6-bb5e-5787ace45def&t=bde25ba8-2381-4da6-bb5e-5787ace45def&width=800&cache=v2","ext":{},"tagItems":[{"name":"存储","color":"default"},{"name":"分布式系统","color":"gray"}],"href":"/post/longhorn","target":"_self","password":""},{"id":"5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","date":{"start_date":"2024-09-03","date_format":"relative"},"type":"Post","slug":"post/infra-dilemma","tags":["碎碎念"],"summary":"前段时间秋招也陆续开始了，偶尔有师弟问我不想写业务，怎么才能做 infra，其实我是劝退的。算下来我毕业正式工作也一年多了，趁机从个人角度发表点暴论","title":"Infra 窘境","status":"Published","category":"","comment":"","publishDate":1725321600000,"publishDay":"2024-9-3","lastEditedDate":"2024-09-12T13:38:22.109Z","lastEditedDay":"2024-9-12","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/infra-dilemma","target":"_self","password":""},{"id":"a06c26b2-5941-43ea-a89e-d0bebab47add","date":{"start_date":"2024-08-25","date_format":"relative"},"type":"Post","slug":"post/migrate-blog-to-notion","tags":["折腾"],"summary":"Make Notion Great Again！","title":"迁移博客到 Notion","status":"Published","category":"","comment":"","publishDate":1724544000000,"publishDay":"2024-8-25","lastEditedDate":"2024-08-29T13:08:42.341Z","lastEditedDay":"2024-8-29","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"折腾","color":"blue"}],"href":"/post/migrate-blog-to-notion","target":"_self","password":""},{"id":"0e96a78e-dec9-4620-b0e8-a2b889017cb7","date":{"start_date":"2024-01-04","date_format":"relative"},"type":"Post","slug":"post/kernel-rwlock","tags":["Linux","内核"],"summary":"前段时间看了《Linux内核设计与实现》，第 10 章「内核同步方法」中提到了几种内核中的读写锁。它们分别代表了几种比较典型的读写锁设计，非常值得学习，这里记录一下，讨论是基于 2.6 内核和 x86 体系结构的基础上进行的","title":"从 Linux 内核看读写锁设计","status":"Published","category":"","comment":"","publishDate":1704326400000,"publishDay":"2024-1-4","lastEditedDate":"2024-08-27T15:25:28.206Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Linux","color":"purple"},{"name":"内核","color":"blue"}],"href":"/post/kernel-rwlock","target":"_self","password":""},{"id":"d26ce18a-fa8d-4df4-8b82-69c419c5b621","date":{"start_date":"2023-12-31","date_format":"relative"},"type":"Post","slug":"post/2023summary","tags":["碎碎念"],"title":"2023 年度总结","status":"Published","category":"","comment":"","publishDate":1703980800000,"publishDay":"2023-12-31","lastEditedDate":"2024-08-27T15:25:27.095Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block&id=d26ce18a-fa8d-4df4-8b82-69c419c5b621&t=d26ce18a-fa8d-4df4-8b82-69c419c5b621&width=800&cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2F9e8551ce-463f-41bc-b07f-5a8362a94846%2F2023summary.jpg?table=block&id=d26ce18a-fa8d-4df4-8b82-69c419c5b621&t=d26ce18a-fa8d-4df4-8b82-69c419c5b621&width=800&cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2023summary","target":"_self","password":""},{"id":"3327d648-8e54-4edf-a38e-a9cba8884a1a","date":{"start_date":"2023-08-16","date_format":"relative"},"type":"Post","slug":"post/softirq-and-software-interrupt","tags":["Linux","内核"],"summary":"软中断（softirq）和软件中断（software interrupt）","title":"混乱的软中断概念","status":"Published","category":"","comment":"","publishDate":1692144000000,"publishDay":"2023-8-16","lastEditedDate":"2024-08-27T15:25:25.736Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"Linux","color":"purple"},{"name":"内核","color":"blue"}],"href":"/post/softirq-and-software-interrupt","target":"_self","password":""}],"post":{"id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","date":{"start_date":"2022-02-12","date_format":"relative"},"type":"Post","slug":"post/mit6824-lab1-mapreduce","tags":["分布式系统"],"title":"MIT6.824 Lab1 MapReduce","status":"Published","category":"","comment":"","publishDate":1644624000000,"publishDay":"2022-2-12","lastEditedDate":"2024-08-27T15:25:13.836Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"分布式系统","color":"gray"}],"href":"/post/mit6824-lab1-mapreduce","target":"_self","password":"","blockMap":{"block":{"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8":{"value":{"id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","version":368,"type":"page","content":["935d2ea7-70e8-498b-ba63-97e9acbcaea2","fa977779-dd2e-45d2-ad93-5af507e884c9","6572a053-cbd7-4377-a3c2-b540dbc04a3f","c360e7b2-6575-47cb-b732-2a749337e806","3a8d645a-caba-409f-b7b3-02a4253af2d7","075138a4-f727-49fa-b6ad-b98c0e62e04e","3b527aa1-367c-4b3a-a029-b2b938a49fd8","3b35400d-f90b-4afe-ab1e-00d377db8791","a037ec1f-2a3b-4fe0-96d7-16d0d133bbe5","788cfff4-d71b-4654-bc00-3ab2a1eb4492","87360bd9-cffb-49a0-a1c3-9df704332978","d8f0db75-f5bb-439f-82e3-f278628995f5","0f0e43a4-f946-4b8e-be21-4e46cbdffe9e","caefcab6-d0b2-4d06-b4f8-18cdee854e39","8059d12c-1466-4a2e-9f02-45be00ec975c","7617d4dc-3611-47c1-af1f-458560baf760","91fb010f-38b3-464c-968a-619281a5c821","0c3fcda9-fe02-4e2c-895a-1798485c46d7","5cfde954-537b-41f9-82b7-d8ab1ceeac77","e9273e7f-b3e9-4e57-82d0-1274610363da","99919243-7234-4cfd-b7bb-fb9cb65f5479","23539db8-8d46-4ed5-8650-6f8e729872c7","2565347d-bb73-4d2c-99c1-d70328ce40a7","0aa1a9e5-d262-452e-af53-f5af089e9dc8","785ccf9a-02ad-410b-906b-b2f0707b1166","df288f48-80f0-4acc-8482-9ec23cf7890d","5cc826e2-7f18-4538-a9b2-79c7af60fb90","17ae721e-d275-4611-96bd-e31414812895","c5485bca-d66a-4c13-8bdf-6cbb0371f6a0","b868159f-3fc6-48f5-9173-0038736ce33d","5cf9bc79-2513-4072-aab9-505d51982623","4ef40f32-0148-4456-8b48-1dc17d28bc75","3c88417e-d136-42e6-88dd-562a392322aa","5234c43c-85b1-4521-aa0d-6be5a39ab23e","d8184474-ff1c-4e9a-b57f-d7b93fc9a2d7","3ffdb3fc-ef07-4846-a16f-df6b601a991b","2dbbb2e1-f59e-496d-91eb-869a44223a12","ec345c1e-a43a-42a5-84dc-8747deba1413","56e68a06-6eb1-49b6-8560-446b9e8bf41e","2c9e32fc-0f8e-4c8e-94aa-c48c3ddf591c","bb9670c5-ed18-427e-be6e-5cbd6571e2c3","b905a81d-430f-457b-a21d-d0b7a2b90533","21c028d7-9092-41b9-9f1a-2c11f56c5076","18c18469-c74b-4dba-af6e-6a140a5691ae","b58f75f6-7cc3-4c4c-8481-1b69d1e20755","eff0e80c-cfde-4d3d-9014-5f32bcbd1a00","34a6b2bd-7306-417e-a4d6-a07cd6fa7d5d","62cdbcca-09b2-4b4f-8c66-62180a5f2c59","af33b620-5d80-4d50-9781-196a0ab0f769","9d6d743e-1f3d-4b8f-9095-d7ce5ae3d06b","f6e58cfb-6405-4cd5-9b5f-8a805e1dcbf2","cff402fe-f121-44b7-85cc-5886ccb10be7","b5e7120a-8037-4d92-93cc-9991db1f7c9b","950f783a-527a-4e53-9615-1463578712e5","78687761-b4f3-4ff9-bc6c-f50811667e6f","f0feb91f-c8ca-40eb-ae76-52236bfd7a8b","f3ac5e02-b66a-4fc0-a1f6-c482d6335444","5d834921-6b4d-4ed8-9a1b-fad43ac8bcf8","1780d10e-e22a-4ff0-806a-96e898d30da9","dfc0dbb8-2830-48c0-bed0-141d0b3d5fad","71e42015-612f-4e65-949a-af69c29d0d07","c9166293-d328-4439-96f3-0aae24404835","8bd75ca7-145b-4672-9630-f790b4191b13","733aa4c7-ff68-4728-b16e-ccfc0cc89952","1596317e-1d33-45b2-bd54-12b0378190bf","55570b63-960d-4390-917e-9d073e7af779","5042d783-eb3f-44a5-a530-45e111ed9f79","9829d2c3-050e-4de4-8162-7d8e6e9b2d97","3fc42c65-e080-40b8-bea0-8b6e6760ac35","37f1bc4b-98f0-47d3-bfb5-f19737d538dc","42fadd25-c9cc-4c19-8a80-4a29451526f9","3e488399-925e-4b05-9baf-7d1dac5214d9","e9f7dec4-08a9-406b-bb19-faa7ec3e5b97","b33a09d4-c55c-4642-b9dd-34ec9c254647","5f101ea0-c385-4e46-aa3b-31c5bf03fcae","a8aaf11b-81b9-433a-8196-06bdfd108cc2","c32b5c3c-713d-45b7-8017-a40408378ec6","e1bbe15b-4e86-4ad8-a704-e5764ddbd0f2","56be1a70-b944-4edd-8f78-d5cecd00541b","d221ce35-4116-46a8-ac85-83737d06e748","fd6765ba-8507-4d9a-bb2f-479704b12260","9461eabe-e699-4fcd-86a6-8b3990a645f2","ab469838-0602-4dd0-887a-4da5de28f08d","794880fc-65ec-4f91-9d5b-8637bfa7f7ee","dc73c99c-fb6f-4eb7-a0b2-e50826c520ba","73f98fd8-5d82-4184-9429-e96b88c6f01a","a28aaf7a-8701-4f5b-9d74-fb0b71aeb3e9","8babe63b-c2ab-4e41-ace8-b342307f74c1","729e864a-dd73-4207-bc40-bf6d7359493d","8671d953-a460-4f0d-a800-23d02fb0edff","5a3fd442-a953-4013-a70b-f5e36d6c4b08","c62f6ccd-ebeb-4856-8019-08edad2593c6","af72b189-e092-4fb0-aace-61a08ccf4114","c11385fd-e906-4748-8c9c-29e27aa025d3","150ea716-ecf7-4204-b4d2-a6d8146ec7a2","5adcef19-96fb-49bc-8e81-8244d9fc69aa","5499776a-642a-480d-ba76-6199e49a8b71","dd4af0b6-1713-4f84-b825-682c57676392","e3f62adc-483c-4e01-a803-f61dc87f9932"],"format":{"page_font":"mono","block_locked":false,"block_locked_by":"919e7400-5a69-4402-b2e1-f7d99cc48131","copied_from_pointer":{"id":"2eace25c-842c-46fd-9ccb-e9190981b6c3","table":"block","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"page_cover_position":0.6,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/d7ba78d6-7c53-4ec7-905e-207d2d001fe7/SocialMediaPreviewImage.png"},"created_time":1724599829997,"last_edited_time":1724772313836,"parent_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","parent_table":"collection","alive":true,"copied_from":"2eace25c-842c-46fd-9ccb-e9190981b6c3","file_ids":["d7ba78d6-7c53-4ec7-905e-207d2d001fe7"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0dc306ca-50a6-4917-9b5a-85a61f0f66f5":{"value":{"id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","version":143,"type":"collection_view_page","content":["c12d1fcb-2e22-4dc3-a5f5-b5010c63059a"],"view_ids":["2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","8dfd415c-71af-41f9-b984-e7182bf2210b","3c2f93d8-6810-42a1-87da-55f1ecda9bca"],"collection_id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","format":{"site_id":"cd684fc1-aa3f-4897-8f3a-ec903e77f063","block_locked":false,"block_locked_by":"27074aef-7216-41ed-baef-d9b53addd870","collection_pointer":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","table":"collection","spaceId":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"copied_from_pointer":{"id":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","table":"block","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"page_cover_position":0.5,"social_media_image_preview_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/16412a4f-3220-4021-b553-56a010794a94/SocialMediaPreviewImage.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"919e7400-5a69-4402-b2e1-f7d99cc48131"},{"role":"reader","type":"public_permission","added_timestamp":1724420656606,"allow_duplicate":false}],"created_time":1724383978099,"last_edited_time":1725549574575,"parent_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425","parent_table":"space","alive":true,"copied_from":"02ab3b86-7800-4aa6-9e9e-415905ef32a5","file_ids":["49b4570c-b2f0-457b-81b7-b68e2693a471","708d7d1d-6233-408b-952f-594bb2831de7","145cea07-09d7-4146-bcf5-bebd1518488c","a9af1d6b-f284-4734-ba06-990353cf3f84","20ee2bf3-8f75-4cd7-9d6e-e1a780d5f17c","16412a4f-3220-4021-b553-56a010794a94"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"935d2ea7-70e8-498b-ba63-97e9acbcaea2":{"value":{"id":"935d2ea7-70e8-498b-ba63-97e9acbcaea2","version":2,"type":"text","properties":{"title":[["Lab 地址："],["6.824 Lab 1: MapReduce",[["a","http://nil.csail.mit.edu/6.824/2020/labs/lab-mr.html"]]]]},"created_time":1724685260330,"last_edited_time":1724685260332,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"fa977779-dd2e-45d2-ad93-5af507e884c9":{"value":{"id":"fa977779-dd2e-45d2-ad93-5af507e884c9","version":2,"type":"text","properties":{"title":[["论文："],["MapReduce: Simplified Data Processing on Large Clusters",[["a","http://static.googleusercontent.com/media/research.google.com/zh-CN//archive/mapreduce-osdi04.pdf"]]]]},"created_time":1724685260331,"last_edited_time":1724685260332,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"6572a053-cbd7-4377-a3c2-b540dbc04a3f":{"value":{"id":"6572a053-cbd7-4377-a3c2-b540dbc04a3f","version":2,"type":"text","properties":{"title":[["一个中文翻译："],["MapReduce：在大型集群上简化数据处理",[["a","https://zhuanlan.zhihu.com/p/122571315"]]]]},"created_time":1724685260331,"last_edited_time":1724685260332,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c360e7b2-6575-47cb-b732-2a749337e806":{"value":{"id":"c360e7b2-6575-47cb-b732-2a749337e806","version":3,"type":"text","created_time":1724685261607,"last_edited_time":1724685261607,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3a8d645a-caba-409f-b7b3-02a4253af2d7":{"value":{"id":"3a8d645a-caba-409f-b7b3-02a4253af2d7","version":2,"type":"text","properties":{"title":[["MIT6.824 的第一节课要做的 Lab 就是大名鼎鼎的 Google 分布式系统三驾马车之一的 MapReduce（另外两个是 GFS 和 BigTable），课程需要我们阅读 MapReduce 的论文后实现一个简化版的 MapReduce Framework"]]},"created_time":1724685267028,"last_edited_time":1724685267029,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"075138a4-f727-49fa-b6ad-b98c0e62e04e":{"value":{"id":"075138a4-f727-49fa-b6ad-b98c0e62e04e","version":3,"type":"text","created_time":1724685706232,"last_edited_time":1724685706232,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3b527aa1-367c-4b3a-a029-b2b938a49fd8":{"value":{"id":"3b527aa1-367c-4b3a-a029-b2b938a49fd8","version":40,"type":"sub_header","properties":{"title":[["概览"]]},"created_time":1724685269728,"last_edited_time":1724685709517,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3b35400d-f90b-4afe-ab1e-00d377db8791":{"value":{"id":"3b35400d-f90b-4afe-ab1e-00d377db8791","version":2,"type":"text","properties":{"title":[["首先应该先看论文，再 "],["clone",[["c"]]],[" 项目，看看涉及 Lab1 部分的结构，弄清楚要基于什么去完成实验"]]},"created_time":1724685269925,"last_edited_time":1724685269927,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"a037ec1f-2a3b-4fe0-96d7-16d0d133bbe5":{"value":{"id":"a037ec1f-2a3b-4fe0-96d7-16d0d133bbe5","version":2,"type":"text","properties":{"title":[["从用户的角度来看，应该看我们将要实现的东西能给 Client 提供怎样的抽象。首先 "],["/mrapps",[["c"]]],[" 中的就是使用 MapReduce 库的 Clients，例如 Getting started 中的 "],["/mrapps/wc.go",[["c"]]],[" 是进行词频统计的，MapReduce 库需要用户实现 Map 和 Reduce 两个函数："]]},"created_time":1724685269925,"last_edited_time":1724685269927,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"788cfff4-d71b-4654-bc00-3ab2a1eb4492":{"value":{"id":"788cfff4-d71b-4654-bc00-3ab2a1eb4492","version":13,"type":"code","properties":{"title":[["func Map(filename string, contents string) []mr.KeyValue {}\nfunc Reduce(key string, values []string) string {}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685277948,"last_edited_time":1724685284874,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"87360bd9-cffb-49a0-a1c3-9df704332978":{"value":{"id":"87360bd9-cffb-49a0-a1c3-9df704332978","version":2,"type":"text","properties":{"title":[["它们的语义和论文中的一致，不同的是，这里在 "],["Map",[["c"]]],[" 中没有论文中的 "],["Emit",[["c"]]],[" 操作，而是要求用户返回一个 key-value 列表，列表的每一项就相当于一个 "],["Emit",[["c"]]],[" 的 key-value 对"]]},"created_time":1724685289271,"last_edited_time":1724685289273,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"d8f0db75-f5bb-439f-82e3-f278628995f5":{"value":{"id":"d8f0db75-f5bb-439f-82e3-f278628995f5","version":2,"type":"text","properties":{"title":[["最后将 Client 通过 "],["go build -buildmode=plugin xxx.go",[["c"]]],[" 编译为动态链接库，启动一个 MapReduce Job 时和输入文件一起作为参数传入"]]},"created_time":1724685289271,"last_edited_time":1724685289273,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0f0e43a4-f946-4b8e-be21-4e46cbdffe9e":{"value":{"id":"0f0e43a4-f946-4b8e-be21-4e46cbdffe9e","version":3,"type":"text","created_time":1724685275805,"last_edited_time":1724685275806,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"caefcab6-d0b2-4d06-b4f8-18cdee854e39":{"value":{"id":"caefcab6-d0b2-4d06-b4f8-18cdee854e39","version":5,"type":"text","properties":{"title":[["实验提供了一个简单的顺序单机 MapReduce 实现在 "],["mrsequential.go",[["c"]]],[" 内，可以看下它的实现，有助于理解执行过程。其首先加载了被编译为动态链接库的用户代码："]]},"created_time":1724685274781,"last_edited_time":1724685293824,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8059d12c-1466-4a2e-9f02-45be00ec975c":{"value":{"id":"8059d12c-1466-4a2e-9f02-45be00ec975c","version":7,"type":"code","properties":{"title":[["func loadPlugin(filename string) (func(string, string) []mr.KeyValue, func(string, []string) string) {\n\tp, err := plugin.Open(filename)\n\tif err != nil {\n\t\tlog.Fatalf(\"cannot load plugin %v\", filename)\n\t}\n\txmapf, err := p.Lookup(\"Map\")\n\tif err != nil {\n\t\tlog.Fatalf(\"cannot find Map in %v\", filename)\n\t}\n\tmapf := xmapf.(func(string, string) []mr.KeyValue)\n\txreducef, err := p.Lookup(\"Reduce\")\n\tif err != nil {\n\t\tlog.Fatalf(\"cannot find Reduce in %v\", filename)\n\t}\n\treducef := xreducef.(func(string, []string) string)\n\n\treturn mapf, reducef\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685296550,"last_edited_time":1724685301709,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"7617d4dc-3611-47c1-af1f-458560baf760":{"value":{"id":"7617d4dc-3611-47c1-af1f-458560baf760","version":5,"type":"text","properties":{"title":[["然后加载输入文件传递给用户代码的 "],["Map",[["c"]]],[" 执行，将执行的中间结果存储起来"]]},"created_time":1724685307495,"last_edited_time":1724685308332,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"91fb010f-38b3-464c-968a-619281a5c821":{"value":{"id":"91fb010f-38b3-464c-968a-619281a5c821","version":7,"type":"code","properties":{"title":[["intermediate := []mr.KeyValue{}\nfor _, filename := range os.Args[2:] {\n\tfile, err := os.Open(filename)\n\tif err != nil {\n\t\tlog.Fatalf(\"cannot open %v\", filename)\n\t}\n\tcontent, err := ioutil.ReadAll(file)\n\tif err != nil {\n\t\tlog.Fatalf(\"cannot read %v\", filename)\n\t}\n\tfile.Close()\n\tkva := mapf(filename, string(content))\n\tintermediate = append(intermediate, kva...)\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685310641,"last_edited_time":1724685314165,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0c3fcda9-fe02-4e2c-895a-1798485c46d7":{"value":{"id":"0c3fcda9-fe02-4e2c-895a-1798485c46d7","version":9,"type":"text","properties":{"title":[["Map",[["c"]]],[" 执行完后对中间结果排序"]]},"created_time":1724685318490,"last_edited_time":1724685325835,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5cfde954-537b-41f9-82b7-d8ab1ceeac77":{"value":{"id":"5cfde954-537b-41f9-82b7-d8ab1ceeac77","version":16,"type":"code","properties":{"title":[["sort.Sort(ByKey(intermediate))"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685318490,"last_edited_time":1724685332411,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"e9273e7f-b3e9-4e57-82d0-1274610363da":{"value":{"id":"e9273e7f-b3e9-4e57-82d0-1274610363da","version":5,"type":"text","properties":{"title":[["最后调用 "],["Reduce",[["c"]]],[" 并写入结果文件"]]},"created_time":1724685336534,"last_edited_time":1724685336922,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"99919243-7234-4cfd-b7bb-fb9cb65f5479":{"value":{"id":"99919243-7234-4cfd-b7bb-fb9cb65f5479","version":9,"type":"code","properties":{"title":[["i := 0\nfor i < len(intermediate) {\n\tj := i + 1\n\tfor j < len(intermediate) && intermediate[j].Key == intermediate[i].Key {\n\t\tj++\n\t}\n\tvalues := []string{}\n\tfor k := i; k < j; k++ {\n\t\tvalues = append(values, intermediate[k].Value)\n\t}\n\toutput := reducef(intermediate[i].Key, values)\n\n\t// this is the correct format for each line of Reduce output.\n\tfmt.Fprintf(ofile, \"%v %v\\n\", intermediate[i].Key, output)\n\n\ti = j\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685339586,"last_edited_time":1724685346078,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"23539db8-8d46-4ed5-8650-6f8e729872c7":{"value":{"id":"23539db8-8d46-4ed5-8650-6f8e729872c7","version":5,"type":"text","properties":{"title":[["总体流程基本对应论文的图 1 的各个阶段，只不过是单机顺序实现，没有调度和网络部分"]]},"created_time":1724685349815,"last_edited_time":1724685350146,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"2565347d-bb73-4d2c-99c1-d70328ce40a7":{"value":{"id":"2565347d-bb73-4d2c-99c1-d70328ce40a7","version":13,"type":"image","properties":{"size":[["135.6KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7a021825-09e3-46e4-9457-4d2b1d15cc2d/image.png"]]},"format":{"block_width":548.8635864257812,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/7a021825-09e3-46e4-9457-4d2b1d15cc2d/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.7136752136752137,"block_preserve_scale":true},"created_time":1724685356570,"last_edited_time":1724685368797,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"file_ids":["7a021825-09e3-46e4-9457-4d2b1d15cc2d"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"0aa1a9e5-d262-452e-af53-f5af089e9dc8":{"value":{"id":"0aa1a9e5-d262-452e-af53-f5af089e9dc8","version":3,"type":"text","created_time":1724685363383,"last_edited_time":1724685363384,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"785ccf9a-02ad-410b-906b-b2f0707b1166":{"value":{"id":"785ccf9a-02ad-410b-906b-b2f0707b1166","version":2,"type":"text","properties":{"title":[["然后我们需要实现自己的 MapReduce 库在 "],["mr/master.go",[["c"]]],["，"],["mr/worker.go",[["c"]]],["，"],["mr/rpc.go",[["c"]]],[" 三个文件中，里面已经有一些定义好的方法。要实现一些细节和要注意的点包括："]]},"created_time":1724685363792,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"df288f48-80f0-4acc-8482-9ec23cf7890d":{"value":{"id":"df288f48-80f0-4acc-8482-9ec23cf7890d","version":2,"type":"numbered_list","properties":{"title":[["一个 Master，一个或多个 Worker，通过 RPC 通信。在开始一个 MapReduce Job 时，通常先启动 Master，然后启动一个或多个 Worker（通过 "],["main/mrmaster.go",[["c"]]],[" 和 "],["main/mrworker.go",[["c"]]],["）"]]},"created_time":1724685363793,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5cc826e2-7f18-4538-a9b2-79c7af60fb90":{"value":{"id":"5cc826e2-7f18-4538-a9b2-79c7af60fb90","version":2,"type":"numbered_list","properties":{"title":[["容错机制，包括 Worker、Master 宕机的处理"]]},"content":["8cc600f9-5f89-45ed-997b-51fe9cc16cfa","3cd6a478-19e8-4304-8280-b1fbc3678471"],"created_time":1724685363806,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"17ae721e-d275-4611-96bd-e31414812895":{"value":{"id":"17ae721e-d275-4611-96bd-e31414812895","version":2,"type":"numbered_list","properties":{"title":[["同论文一样，"],["Map",[["c"]]],[" 的输出（中间结果）也应该写入到文件中，然后划分成多个 bucket，这保证相同 key 都在同一文件中，能在同一 Worker 里被打包到 "],["Reduce",[["c"]]],[" 执行，这个分区数量可以通过启动 Master 时的参数指定"]]},"created_time":1724685363806,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c5485bca-d66a-4c13-8bdf-6cbb0371f6a0":{"value":{"id":"c5485bca-d66a-4c13-8bdf-6cbb0371f6a0","version":2,"type":"numbered_list","properties":{"title":[["每个 "],["Reduce",[["c"]]],[" 的结果输出到单独的文件上"]]},"created_time":1724685363807,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b868159f-3fc6-48f5-9173-0038736ce33d":{"value":{"id":"b868159f-3fc6-48f5-9173-0038736ce33d","version":2,"type":"numbered_list","properties":{"title":[["Master 应该实现 "],["Done",[["c"]]],[" 以明确地告知客户端 MapReduce 是否执行完毕"]]},"created_time":1724685363807,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5cf9bc79-2513-4072-aab9-505d51982623":{"value":{"id":"5cf9bc79-2513-4072-aab9-505d51982623","version":2,"type":"numbered_list","properties":{"title":[["结束后应该正确地回收每个 Worker 进程"]]},"created_time":1724685363807,"last_edited_time":1724685363810,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"4ef40f32-0148-4456-8b48-1dc17d28bc75":{"value":{"id":"4ef40f32-0148-4456-8b48-1dc17d28bc75","version":3,"type":"text","created_time":1724685365675,"last_edited_time":1724685365676,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c88417e-d136-42e6-88dd-562a392322aa":{"value":{"id":"3c88417e-d136-42e6-88dd-562a392322aa","version":2,"type":"text","properties":{"title":[["参考论文第 3 节，捋一下我们的流程："]]},"created_time":1724685371960,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5234c43c-85b1-4521-aa0d-6be5a39ab23e":{"value":{"id":"5234c43c-85b1-4521-aa0d-6be5a39ab23e","version":2,"type":"numbered_list","properties":{"title":[["首先启动 Master，然后启动一个或多个 Worker，Worker 启动时向 Master 获取任务"]]},"created_time":1724685371960,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"d8184474-ff1c-4e9a-b57f-d7b93fc9a2d7":{"value":{"id":"d8184474-ff1c-4e9a-b57f-d7b93fc9a2d7","version":2,"type":"numbered_list","properties":{"title":[["Master 为 Worker 分配任务后，要监视其是否完成或超时，超时后将任务分配给其他 Worker。任务一开始只应该分配 "],["Map",[["c"]]],[" ，所有 "],["Map",[["c"]]],[" 执行完成后才分配 "],["Reduce",[["c"]]]]},"created_time":1724685371961,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3ffdb3fc-ef07-4846-a16f-df6b601a991b":{"value":{"id":"3ffdb3fc-ef07-4846-a16f-df6b601a991b","version":2,"type":"numbered_list","properties":{"title":[["当 Worker 完成一个任务后，继续获取任务"]]},"created_time":1724685371961,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"2dbbb2e1-f59e-496d-91eb-869a44223a12":{"value":{"id":"2dbbb2e1-f59e-496d-91eb-869a44223a12","version":2,"type":"numbered_list","properties":{"title":[["Map",[["c"]]],[" 中，Master 需要传递给 Worker 输入文件的位置，Worker 执行 "],["Map",[["c"]]],[" 完后写入中间结果到本地并进行分区，然后返回位置给 Master"]]},"created_time":1724685371961,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ec345c1e-a43a-42a5-84dc-8747deba1413":{"value":{"id":"ec345c1e-a43a-42a5-84dc-8747deba1413","version":2,"type":"numbered_list","properties":{"title":[["Master 需要等待 "],["Map",[["c"]]],[" 都执行完毕才分配 "],["Reduce",[["c"]]],["，为 Worker 分配 "],["Reduce",[["c"]]],[" 时要传递同一分区的中间结果文件的位置，Worker 读取文件并进行排序以将相同的 key 排到一起，然后将相同的 key 对应的 value 集合传入 "],["Reduce",[["c"]]],[" 函数中"]]},"created_time":1724685371961,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"56e68a06-6eb1-49b6-8560-446b9e8bf41e":{"value":{"id":"56e68a06-6eb1-49b6-8560-446b9e8bf41e","version":2,"type":"numbered_list","properties":{"title":[["所有任务执行完后，Master 告知客户端以结束对 MapReduce 的调用"]]},"created_time":1724685371961,"last_edited_time":1724685371964,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"2c9e32fc-0f8e-4c8e-94aa-c48c3ddf591c":{"value":{"id":"2c9e32fc-0f8e-4c8e-94aa-c48c3ddf591c","version":3,"type":"text","created_time":1724685723122,"last_edited_time":1724685723123,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"bb9670c5-ed18-427e-be6e-5cbd6571e2c3":{"value":{"id":"bb9670c5-ed18-427e-be6e-5cbd6571e2c3","version":28,"type":"sub_header","properties":{"title":[["数据结构"]]},"created_time":1724685373368,"last_edited_time":1724685726100,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b905a81d-430f-457b-a21d-d0b7a2b90533":{"value":{"id":"b905a81d-430f-457b-a21d-d0b7a2b90533","version":5,"type":"text","properties":{"title":[["逻辑都清楚后就可以开始实现了，Master 作为最重要的节点，其存储了大多数必要的数据，如论文 3.2 节所示："]]},"created_time":1724685373166,"last_edited_time":1724685376256,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"21c028d7-9092-41b9-9f1a-2c11f56c5076":{"value":{"id":"21c028d7-9092-41b9-9f1a-2c11f56c5076","version":11,"type":"image","properties":{"size":[["101.5KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/6f81b6ca-ec49-42b7-b22b-b6671ced1a54/image.png"]]},"format":{"block_width":762,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/6f81b6ca-ec49-42b7-b22b-b6671ced1a54/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.7454068241469817,"block_preserve_scale":true},"created_time":1724685380957,"last_edited_time":1724685392134,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"file_ids":["6f81b6ca-ec49-42b7-b22b-b6671ced1a54"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"18c18469-c74b-4dba-af6e-6a140a5691ae":{"value":{"id":"18c18469-c74b-4dba-af6e-6a140a5691ae","version":2,"type":"text","properties":{"title":[["大致分为："]]},"created_time":1724685388556,"last_edited_time":1724685388559,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b58f75f6-7cc3-4c4c-8481-1b69d1e20755":{"value":{"id":"b58f75f6-7cc3-4c4c-8481-1b69d1e20755","version":2,"type":"numbered_list","properties":{"title":[["Map",[["c"]]],[" 和 "],["Reduce",[["c"]]],[" 任务的状态"]]},"created_time":1724685388557,"last_edited_time":1724685388559,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"eff0e80c-cfde-4d3d-9014-5f32bcbd1a00":{"value":{"id":"eff0e80c-cfde-4d3d-9014-5f32bcbd1a00","version":2,"type":"numbered_list","properties":{"title":[["Worker 节点信息"]]},"created_time":1724685388557,"last_edited_time":1724685388559,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"34a6b2bd-7306-417e-a4d6-a07cd6fa7d5d":{"value":{"id":"34a6b2bd-7306-417e-a4d6-a07cd6fa7d5d","version":2,"type":"numbered_list","properties":{"title":[["输入和中间文件的位置"]]},"created_time":1724685388557,"last_edited_time":1724685388559,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"62cdbcca-09b2-4b4f-8c66-62180a5f2c59":{"value":{"id":"62cdbcca-09b2-4b4f-8c66-62180a5f2c59","version":2,"type":"text","properties":{"title":[["这里我们可以不需要存储 Worker 节点信息，因为这里是 Worker 向 Master 拉任务，而不是 Master 推任务给 Worker，Master 可以不用知道 Worker 的具体情况。只存储任务状态和文件位置即可，Master 的结构大致如下："]]},"created_time":1724685388557,"last_edited_time":1724685388559,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"af33b620-5d80-4d50-9781-196a0ab0f769":{"value":{"id":"af33b620-5d80-4d50-9781-196a0ab0f769","version":7,"type":"code","properties":{"title":[["// taskState 任务状态\ntype taskState int\n\nconst (\n\t// IDLE 空闲\n\tIDLE taskState = iota\n\t// IN_PROGRESS 运行中\n\tIN_PROGRESS\n\t// COMPLETED 完成\n\tCOMPLETED\n)\n\ntype Master struct {\n\t// 每个任务的输入文件列表\n\tfiles map[TaskType][][]string\n\t// 任务状态\n\ttasks map[TaskType]map[int]taskState\n\t// 空闲任务\n\tidleTasks map[TaskType]map[int]struct{}\n\t// 完成的任务数量\n\tcnt map[TaskType]int\n\t// reduce分区数\n\tnReduce int\n\t// 修改任务状态的互斥锁\n\tlock sync.Mutex\n\t// 响应客户端是否完成\n\tfinish chan struct{}\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685395536,"last_edited_time":1724685395830,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"9d6d743e-1f3d-4b8f-9095-d7ce5ae3d06b":{"value":{"id":"9d6d743e-1f3d-4b8f-9095-d7ce5ae3d06b","version":5,"type":"text","properties":{"title":[["TaskType",[["c"]]],[" 要在 RPC 中传输，定义在 "],["mr/rpc.go",[["c"]]],[" 中，多了一个 "],["None",[["c"]]],[" 用以表示当前无任务可分配的情况："]]},"created_time":1724685398050,"last_edited_time":1724685401822,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8cc600f9-5f89-45ed-997b-51fe9cc16cfa":{"value":{"id":"8cc600f9-5f89-45ed-997b-51fe9cc16cfa","version":2,"type":"text","properties":{"title":[["Master 的宕机可以和论文一样，交给客户端重试，不同之处是论文中持久化了 checkpoint 使得 Master 在宕机恢复后可以恢复任务进度，但 Lab 中没有要求我们实现；对于 Worker，如果执行任务超时，则 Master 将认为它宕机或执行缓慢，此时重新分配任务到另一个 Worker"]]},"created_time":1724685363806,"last_edited_time":1724685363810,"parent_id":"5cc826e2-7f18-4538-a9b2-79c7af60fb90","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3cd6a478-19e8-4304-8280-b1fbc3678471":{"value":{"id":"3cd6a478-19e8-4304-8280-b1fbc3678471","version":2,"type":"text","properties":{"title":[["另一方面，应该确保宕机时不会出现文件部分写入的情况，一个方法是在文件写入后重命名（大部分操作系统的文件系统实现中，重命名是原子操作）"]]},"created_time":1724685363806,"last_edited_time":1724685363810,"parent_id":"5cc826e2-7f18-4538-a9b2-79c7af60fb90","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"f6e58cfb-6405-4cd5-9b5f-8a805e1dcbf2":{"value":{"id":"f6e58cfb-6405-4cd5-9b5f-8a805e1dcbf2","version":7,"type":"code","properties":{"title":[["type TaskType int\n\nconst (\n\tNone TaskType = iota\n\tMap\n\tReduce\n)"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685404155,"last_edited_time":1724685407926,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"cff402fe-f121-44b7-85cc-5886ccb10be7":{"value":{"id":"cff402fe-f121-44b7-85cc-5886ccb10be7","version":5,"type":"text","properties":{"title":[["客户端（"],["main/mrmaster.go",[["c"]]],["）会调用 "],["MakeMaster",[["c"]]],[" 初始化 Master 并启动 Master 的 RPC 服务器，初始化时把输入文件列表添加到 "],["Map",[["c"]]],[" 任务中并标记为空闲："]]},"created_time":1724685397584,"last_edited_time":1724685412691,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b5e7120a-8037-4d92-93cc-9991db1f7c9b":{"value":{"id":"b5e7120a-8037-4d92-93cc-9991db1f7c9b","version":7,"type":"code","properties":{"title":[["func MakeMaster(files []string, nReduce int) *Master {\n\tt1 := map[TaskType]map[int]taskState{\n\t\tMap:    {},\n\t\tReduce: {},\n\t}\n\tt2 := map[TaskType]map[int]struct{}{\n\t\tMap:    {},\n\t\tReduce: {},\n\t}\n\n\tf := map[TaskType][][]string{\n\t\tMap:    {},\n\t\tReduce: make([][]string, nReduce),\n\t}\n\tfor i := range files {\n\t\tt1[Map][i] = IDLE\n\t\tt2[Map][i] = struct{}{}\n\t\tf[Map] = append(f[Map], []string{files[i]})\n\t}\n\n\tm := Master{\n\t\tf,\n\t\tt1,\n\t\tt2,\n\t\tmake(map[TaskType]int),\n\t\tnReduce,\n\t\tsync.Mutex{},\n\t\tmake(chan struct{}),\n\t}\n\n\tm.server()\n\treturn &m\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685414510,"last_edited_time":1724685420954,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"950f783a-527a-4e53-9615-1463578712e5":{"value":{"id":"950f783a-527a-4e53-9615-1463578712e5","version":3,"type":"text","created_time":1724685448167,"last_edited_time":1724685448168,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"78687761-b4f3-4ff9-bc6c-f50811667e6f":{"value":{"id":"78687761-b4f3-4ff9-bc6c-f50811667e6f","version":2,"type":"text","properties":{"title":[["Master 中应该给 Worker 提供三种 RPC 接口："]]},"created_time":1724685448391,"last_edited_time":1724685448393,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"f0feb91f-c8ca-40eb-ae76-52236bfd7a8b":{"value":{"id":"f0feb91f-c8ca-40eb-ae76-52236bfd7a8b","version":2,"type":"bulleted_list","properties":{"title":[["心跳接口，供 Worker 判断 Master 是否活着"]]},"created_time":1724685448391,"last_edited_time":1724685448393,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"f3ac5e02-b66a-4fc0-a1f6-c482d6335444":{"value":{"id":"f3ac5e02-b66a-4fc0-a1f6-c482d6335444","version":2,"type":"bulleted_list","properties":{"title":[["获取任务接口，Worker 从这个接口获取新任务以执行"]]},"created_time":1724685448391,"last_edited_time":1724685448393,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5d834921-6b4d-4ed8-9a1b-fad43ac8bcf8":{"value":{"id":"5d834921-6b4d-4ed8-9a1b-fad43ac8bcf8","version":2,"type":"bulleted_list","properties":{"title":[["通知任务完成接口，Worker 完成任务后通过该接口通知 Master"]]},"created_time":1724685448391,"last_edited_time":1724685448393,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"1780d10e-e22a-4ff0-806a-96e898d30da9":{"value":{"id":"1780d10e-e22a-4ff0-806a-96e898d30da9","version":2,"type":"text","properties":{"title":[["RPC 这里用的是 Go 内置的 "],["net/rpc",[["c"]]],["，一些 RPC 过程中的数据类型定义如下："]]},"created_time":1724685448391,"last_edited_time":1724685448393,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"dfc0dbb8-2830-48c0-bed0-141d0b3d5fad":{"value":{"id":"dfc0dbb8-2830-48c0-bed0-141d0b3d5fad","version":9,"type":"code","properties":{"title":[["type EmptyArgs struct{}\n\ntype Task struct {\n\tID       int\n\tNReduce  int\n\tTaskType TaskType\n\tFiles    []string\n}\n\ntype FinishNotify struct {\n\tErr       error\n\tTask      Task\n\tFilenames []string\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685452188,"last_edited_time":1724685457635,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"71e42015-612f-4e65-949a-af69c29d0d07":{"value":{"id":"71e42015-612f-4e65-949a-af69c29d0d07","version":26,"type":"text","properties":{"title":[["net/rpc",[["c"]]],[" 使用的 gob 来序列化，它不支持传递空值，所以定义一个 "],["EmptyArgs ",[["c"]]],["空结构体来表示，空结构体不占用实际内存，在 Master 中的空闲任务队列中也使用了这个方法 "]]},"created_time":1724685480718,"last_edited_time":1724685501573,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c9166293-d328-4439-96f3-0aae24404835":{"value":{"id":"c9166293-d328-4439-96f3-0aae24404835","version":22,"type":"text","properties":{"title":[["Task",[["c"]]],[" 是 Master 返回任务给 Worker 时传递的类型，包括任务 ID，Reduce 分区数，任务类型（Map 或 Reduce）和输入文件列表 "],["FinishNotify",[["c"]]],[" 是 Worker 完成任务时向 Master 通知传递的类型，包括错误信息，完成的任务内容本身，输出的文件列表"]]},"created_time":1724685501571,"last_edited_time":1724685772634,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8bd75ca7-145b-4672-9630-f790b4191b13":{"value":{"id":"8bd75ca7-145b-4672-9630-f790b4191b13","version":3,"type":"text","created_time":1724685787107,"last_edited_time":1724685787107,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"733aa4c7-ff68-4728-b16e-ccfc0cc89952":{"value":{"id":"733aa4c7-ff68-4728-b16e-ccfc0cc89952","version":44,"type":"sub_header","properties":{"title":[["Master 实现"]]},"created_time":1724685524357,"last_edited_time":1724685792105,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"1596317e-1d33-45b2-bd54-12b0378190bf":{"value":{"id":"1596317e-1d33-45b2-bd54-12b0378190bf","version":2,"type":"text","properties":{"title":[["然后是 Master 的三个 RPC 接口实现："]]},"created_time":1724685524857,"last_edited_time":1724685524859,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"55570b63-960d-4390-917e-9d073e7af779":{"value":{"id":"55570b63-960d-4390-917e-9d073e7af779","version":2,"type":"text","properties":{"title":[["心跳接口实际上不需要返回任何数据，RPC 调用底层会知道是否调用成功，这就够了"]]},"created_time":1724685524857,"last_edited_time":1724685524859,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5042d783-eb3f-44a5-a530-45e111ed9f79":{"value":{"id":"5042d783-eb3f-44a5-a530-45e111ed9f79","version":7,"type":"code","properties":{"title":[["func (m *Master) Ping(args EmptyArgs, reply *EmptyArgs) error {\n    return nil\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685529774,"last_edited_time":1724685530080,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"9829d2c3-050e-4de4-8162-7d8e6e9b2d97":{"value":{"id":"9829d2c3-050e-4de4-8162-7d8e6e9b2d97","version":5,"type":"text","properties":{"title":[["获取任务接口，因为需要并发修改任务状态，得加锁。然后确定待分配的任务类型，"],["Map",[["c"]]],[" 全部执行完后才执行 "],["Reduce",[["c"]]],["，从空闲队列中取出后，返回即可。最后新建了个 goroutine 来检查任务情况，如果 10 秒内未执行完毕，可以认为 Worker 宕机或执行缓慢，重置任务进度等待下次分配"]]},"created_time":1724685531758,"last_edited_time":1724685535375,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3fc42c65-e080-40b8-bea0-8b6e6760ac35":{"value":{"id":"3fc42c65-e080-40b8-bea0-8b6e6760ac35","version":7,"type":"code","properties":{"title":[["func (m *Master) PullTask(args EmptyArgs, reply *Task) error {\n    m.lock.Lock()\n    defer m.lock.Unlock()\n\n    taskType := Map\n    // map全部完成才分配reduce\n    if len(m.tasks[Map]) == m.cnt[Map] {\n        taskType = Reduce\n    }\n\n    // 无空闲任务\n    if len(m.idleTasks[taskType]) == 0 {\n        reply.TaskType = None\n        return nil\n    }\n\n    // 从空闲区里选一个 分配任务\n    var idx int\n    for k := range m.idleTasks[taskType] {\n        idx = k\n        break\n    }\n    reply.TaskType = taskType\n    reply.Files = m.files[taskType][idx]\n    reply.ID = idx\n    reply.NReduce = m.nReduce\n\n    delete(m.idleTasks[taskType], idx)\n    m.tasks[taskType][idx] = IN_PROGRESS\n\n    // 分配后检查任务状态\n    go func() {\n        time.Sleep(time.Second * 10)\n        m.lock.Lock()\n        if m.tasks[taskType][idx] == IN_PROGRESS {\n            m.tasks[taskType][idx] = IDLE\n            m.idleTasks[taskType][idx] = struct{}{}\n        }\n        m.lock.Unlock()\n    }()\n\n    return nil\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685542262,"last_edited_time":1724685542715,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"37f1bc4b-98f0-47d3-bfb5-f19737d538dc":{"value":{"id":"37f1bc4b-98f0-47d3-bfb5-f19737d538dc","version":2,"type":"text","properties":{"title":[["最后一个通知任务完成接口，如果成功完成，就进行记录，同时如果完成的任务是 "],["Map",[["c"]]],[" 的话，要将其输出的中间结果作为 "],["Reduce",[["c"]]],[" 任务添加进任务队列里。最后检查是否所有任务都已完成"]]},"created_time":1724685548207,"last_edited_time":1724685548209,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"42fadd25-c9cc-4c19-8a80-4a29451526f9":{"value":{"id":"42fadd25-c9cc-4c19-8a80-4a29451526f9","version":9,"type":"code","properties":{"title":[["func (m *Master) FinishTask(data FinishNotify, reply *EmptyArgs) error {\n    m.lock.Lock()\n    defer m.lock.Unlock()\n    id := data.Task.ID\n\n    // 已经完成 忽略\n    if data.Task.TaskType == None || m.tasks[data.Task.TaskType][id] == COMPLETED {\n        return nil\n    }\n\n    // 发生错误 重置任务状态 等待下次调度\n    if data.Err != nil {\n        log.Printf(\"%v\\n\", data.Err)\n        m.tasks[data.Task.TaskType][id] = IDLE\n        m.idleTasks[data.Task.TaskType][id] = struct{}{}\n        return nil\n    }\n\n    // 记录完成\n    m.tasks[data.Task.TaskType][id] = COMPLETED\n    m.cnt[data.Task.TaskType]++\n\n    // Map 结果加到待执行 Reduce 里，按分区划分\n    if data.Task.TaskType == Map {\n        for i := range data.Filenames {\n            m.files[Reduce][i] = append(m.files[Reduce][i], data.Filenames[i])\n            m.tasks[Reduce][i] = IDLE\n            m.idleTasks[Reduce][i] = struct{}{}\n        }\n    }\n\n    // 全部完成 Done() 可以返回了\n    if len(m.tasks[Map]) == m.cnt[Map] &&\n        len(m.tasks[Reduce]) == m.cnt[Reduce] {\n        log.Println(\"MapReduce 结束\")\n        m.finish <- struct{}{}\n    }\n\n    return nil\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685548207,"last_edited_time":1724685564744,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3e488399-925e-4b05-9baf-7d1dac5214d9":{"value":{"id":"3e488399-925e-4b05-9baf-7d1dac5214d9","version":2,"type":"text","properties":{"title":[["最后完成这里有个 "],["finish",[["c"]]],[" ，它的作用是通知 "],["Done",[["c"]]],[" 可以返回给客户端任务已完成"]]},"created_time":1724685569421,"last_edited_time":1724685569423,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"e9f7dec4-08a9-406b-bb19-faa7ec3e5b97":{"value":{"id":"e9f7dec4-08a9-406b-bb19-faa7ec3e5b97","version":9,"type":"code","properties":{"title":[["func (m *Master) Done() bool {\n    <-m.finish\n    return true\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685569421,"last_edited_time":1724685578709,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"b33a09d4-c55c-4642-b9dd-34ec9c254647":{"value":{"id":"b33a09d4-c55c-4642-b9dd-34ec9c254647","version":3,"type":"text","created_time":1724685796685,"last_edited_time":1724685796686,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5f101ea0-c385-4e46-aa3b-31c5bf03fcae":{"value":{"id":"5f101ea0-c385-4e46-aa3b-31c5bf03fcae","version":38,"type":"sub_header","properties":{"title":[["Worker 实现"]]},"created_time":1724685589795,"last_edited_time":1724685799530,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"a8aaf11b-81b9-433a-8196-06bdfd108cc2":{"value":{"id":"a8aaf11b-81b9-433a-8196-06bdfd108cc2","version":2,"type":"text","properties":{"title":[["Master 的实现基本完成，接下来是 Worker，Worker 信息的定义如下，存储 "],["Map",[["c"]]],[" 函数，"],["Reduce",[["c"]]],[" 函数，是否可以退出和接收的任务队列："]]},"created_time":1724685590053,"last_edited_time":1724685590055,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c32b5c3c-713d-45b7-8017-a40408378ec6":{"value":{"id":"c32b5c3c-713d-45b7-8017-a40408378ec6","version":18,"type":"code","properties":{"title":[["type WorkerInfo struct {\n\tmapf    func(string, string) []KeyValue\n\treducef func(string, []string) string\n\texit    chan struct{}\n\ttasks   chan Task\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685590053,"last_edited_time":1724685606650,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"e1bbe15b-4e86-4ad8-a704-e5764ddbd0f2":{"value":{"id":"e1bbe15b-4e86-4ad8-a704-e5764ddbd0f2","version":2,"type":"text","properties":{"title":[["客户端（"],["main/mrworker.go",[["c"]]],["）会调用 "],["Worker()",[["c"]]],[" 来启动 Worker，在其中进行我们的初始化"]]},"created_time":1724685612015,"last_edited_time":1724685612028,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"56be1a70-b944-4edd-8f78-d5cecd00541b":{"value":{"id":"56be1a70-b944-4edd-8f78-d5cecd00541b","version":2,"type":"bulleted_list","properties":{"title":[["首先新建一个 goroutine 在后台对 Master 进行心跳检测，设定中当 Master 10s 内未响应时，Worker 可以认为 Master 已经关闭，自身便可以关闭。Worker 退出的另一个设计思路是可以添加一个 "],["TaskType",[["c"]]],[" 表示「请关闭」，Worker 接收到该任务后就可以自行关闭"]]},"created_time":1724685612026,"last_edited_time":1724685612028,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"d221ce35-4116-46a8-ac85-83737d06e748":{"value":{"id":"d221ce35-4116-46a8-ac85-83737d06e748","version":2,"type":"bulleted_list","properties":{"title":[["然后是一个循环，不断从 Master 处获取任务并执行，当收到退出信号时就退出"]]},"created_time":1724685612026,"last_edited_time":1724685612028,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"fd6765ba-8507-4d9a-bb2f-479704b12260":{"value":{"id":"fd6765ba-8507-4d9a-bb2f-479704b12260","version":7,"type":"code","properties":{"title":[["func Worker(mapf func(string, string) []KeyValue,\n\treducef func(string, []string) string) {\n\n\tw := WorkerInfo{\n\t\tmapf,\n\t\treducef,\n\t\tmake(chan struct{}),\n\t\tmake(chan Task, 1),\n\t}\n\n\t// Master 10秒没响应就认为它已经关闭， Worker可以退出\n\tgo func() {\n\t\tbefore := time.Now().UnixNano()\n\t\tTIMEOUT := time.Second.Nanoseconds() * 10\n\t\tfor {\n\t\t\tif w.healthCheck() {\n\t\t\t\tbefore = time.Now().UnixNano()\n\t\t\t} else if time.Now().UnixNano()-before >= TIMEOUT {\n\t\t\t\tlog.Println(\"Master 无响应，可以退出\")\n\t\t\t\tw.exit <- struct{}{}\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttime.Sleep(time.Second)\n\t\t}\n\t}()\n\n\t// 超时退出或等待分配新任务\n\tfor {\n\t\tselect {\n\t\tcase <-w.exit:\n\t\t\tclose(w.tasks)\n\t\t\tclose(w.exit)\n\t\t\treturn\n\t\tcase t := <-w.tasks:\n\t\t\tw.execTask(t)\n\t\tdefault:\n\t\t\tif ok, t := w.pullTask(); !ok {\n\t\t\t\ttime.Sleep(time.Second)\n\t\t\t} else {\n\t\t\t\tw.tasks <- t\n\t\t\t}\n\t\t}\n\t}\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685619896,"last_edited_time":1724685620262,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"9461eabe-e699-4fcd-86a6-8b3990a645f2":{"value":{"id":"9461eabe-e699-4fcd-86a6-8b3990a645f2","version":5,"type":"text","properties":{"title":[["其中 "],["healthCheck",[["c"]]],[" 和 "],["pullTask",[["c"]]],[" 实现如下，"],["call",[["c"]]],[" 是 Lab 本身已经实现好的对 RPC 调用的封装："]]},"created_time":1724685626225,"last_edited_time":1724685626516,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"ab469838-0602-4dd0-887a-4da5de28f08d":{"value":{"id":"ab469838-0602-4dd0-887a-4da5de28f08d","version":7,"type":"code","properties":{"title":[["// 健康检查\nfunc (w *WorkerInfo) healthCheck() bool {\n\treturn call(\"Master.Ping\", EmptyArgs{}, &EmptyArgs{})\n}\n\n// 从Master处获取任务\nfunc (w *WorkerInfo) pullTask() (bool, Task) {\n\tt := Task{}\n\tok := call(\"Master.PullTask\", EmptyArgs{}, &t)\n\tif !ok || t.TaskType == None {\n\t\treturn false, Task{}\n\t}\n\treturn true, t\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685632497,"last_edited_time":1724685636857,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"794880fc-65ec-4f91-9d5b-8637bfa7f7ee":{"value":{"id":"794880fc-65ec-4f91-9d5b-8637bfa7f7ee","version":5,"type":"text","properties":{"title":[["当接收到任务时，就调用 "],["execTask",[["c"]]],[" 来执行任务，它根据任务类型调用 "],["execMap",[["c"]]],[" 或 "],["execReduce",[["c"]]],[" 来执行，最后处理执行结果，通知回 Master"]]},"created_time":1724685640811,"last_edited_time":1724685641020,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"dc73c99c-fb6f-4eb7-a0b2-e50826c520ba":{"value":{"id":"dc73c99c-fb6f-4eb7-a0b2-e50826c520ba","version":7,"type":"code","properties":{"title":[["func (w *WorkerInfo) execTask(t Task) {\n\tvar notifyData FinishNotify\n\tnotifyData.Task = t\n\tdefer func() {\n\t\terr := recover()\n\t\tif err != nil {\n\t\t\tnotifyData.Err = fmt.Errorf(\"%v\", err)\n\t\t}\n\n\t\t// 向 Master 报告执行完毕\n\t\tcall(\"Master.FinishTask\", notifyData, &EmptyArgs{})\n\t}()\n\n\tlog.Printf(\"执行任务 %v\\n\", t)\n\n\tvar fun func(task Task) ([]string, error)\n\tif t.TaskType == Map {\n\t\tfun = w.execMap\n\t} else if t.TaskType == Reduce {\n\t\tfun = w.execReduce\n\t} else {\n\t\treturn\n\t}\n\n\tif outfile, err := fun(t); err != nil {\n\t\tnotifyData.Err = err\n\t} else {\n\t\tnotifyData.Filenames = outfile\n\t}\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685649234,"last_edited_time":1724685649515,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"73f98fd8-5d82-4184-9429-e96b88c6f01a":{"value":{"id":"73f98fd8-5d82-4184-9429-e96b88c6f01a","version":2,"type":"text","properties":{"title":[["execMap",[["c"]]],[" 内首先循环读入每个文件，将它们的内容传递给用户的 "],["Map",[["c"]]],[" 函数执行，结果追加到 key-value 列表中，然后创建指定分区数量（"],["NReduce",[["c"]]],["）的临时文件，通过 "],["ihash",[["c"]]],[" 来确定每个 key 映射到哪个分区中，序列化数据写入到该分区的临时文件上。最后通过原子重命名来保证不会出现文件的部分写入"]]},"created_time":1724685655018,"last_edited_time":1724685655020,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"a28aaf7a-8701-4f5b-9d74-fb0b71aeb3e9":{"value":{"id":"a28aaf7a-8701-4f5b-9d74-fb0b71aeb3e9","version":7,"type":"code","properties":{"title":[["func (w *WorkerInfo) execMap(t Task) ([]string, error) {\n\tkva := []KeyValue{}\n\tfor i := range t.Files {\n\t\tfile, _ := os.Open(t.Files[i])\n\t\tdefer file.Close()\n\t\tcontent, _ := ioutil.ReadAll(file)\n\n\t\ttmpKva := w.mapf(t.Files[i], string(content))\n\t\tkva = append(kva, tmpKva...)\n\t}\n\n\t// 根据 key 分别写入不同文件\n\ttmpfiles := make([]*os.File, t.NReduce)\n\n\tfor i := range tmpfiles {\n\t\ttmpfiles[i], _ = ioutil.TempFile(\"\", \"*.tmp\")\n\t\tdefer tmpfiles[i].Close()\n\t}\n\ttmpData := make([][]KeyValue, t.NReduce)\n\tfor i := range kva {\n\t\tidx := ihash(kva[i].Key) % t.NReduce\n\t\ttmpData[idx] = append(tmpData[idx], kva[i])\n\t}\n\tfor i := range tmpData {\n\t\tbuf := &bytes.Buffer{}\n\t\tenc := gob.NewEncoder(buf)\n\t\tif err := enc.Encode(&tmpData[i]); err != nil {\n\t\t\tos.Remove(tmpfiles[i].Name())\n\t\t\treturn []string{}, errors.New(\"cannot serialize\")\n\t\t}\n\t\ttmpfiles[i].Write(buf.Bytes())\n\t}\n\n\t// 通过写入到临时文件 再重命名来保证原子性\n\t// 格式 mr-X-Y X是Map任务号 Y是Reduce任务号 即ihash(X)\n\tres := make([]string, 0, t.NReduce)\n\tfor i := range tmpfiles {\n\t\tname := fmt.Sprintf(\"./mr-%d-%d\", t.ID, i)\n\t\tos.Rename(tmpfiles[i].Name(), name)\n\t\tres = append(res, name)\n\t}\n\treturn res, nil\n}\n\nfunc ihash(key string) int {\n\th := fnv.New32a()\n\th.Write([]byte(key))\n\treturn int(h.Sum32() & 0x7fffffff)\n}"]],"language":[["Go"]]},"format":{"code_wrap":true},"created_time":1724685655018,"last_edited_time":1724685663420,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8babe63b-c2ab-4e41-ace8-b342307f74c1":{"value":{"id":"8babe63b-c2ab-4e41-ace8-b342307f74c1","version":2,"type":"text","properties":{"title":[["execReduce",[["c"]]],[" 类似，读入文件，反序列化加载到 key-value 列表中，然后排序以让相同 key 排在一起，文件大到不足以放入内存时应该采用外部排序，不过 Lab 中可以假定不存在这种情况。然后对于相同的 key，将其 value 的集合打包调用用户的 "],["Reduce",[["c"]]],[" 函数。结果也是一样写入临时文件再原子重命名"]]},"created_time":1724685669347,"last_edited_time":1724685669350,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"729e864a-dd73-4207-bc40-bf6d7359493d":{"value":{"id":"729e864a-dd73-4207-bc40-bf6d7359493d","version":9,"type":"code","properties":{"title":[["func (w *WorkerInfo) execReduce(t Task) ([]string, error) {\n\tkva := []KeyValue{}\n\tfor i := range t.Files {\n\t\tfile, _ := os.Open(t.Files[i])\n\t\tdefer file.Close()\n\t\tcontent, _ := ioutil.ReadAll(file)\n\n\t\tdec := gob.NewDecoder(bytes.NewBuffer(content))\n\t\tvar tmpKva []KeyValue\n\t\tdec.Decode(&tmpKva)\n\t\tkva = append(kva, tmpKva...)\n\t}\n\n\t// 排序key 打包调用reduce\n\tsort.Slice(kva, func(i, j int) bool {\n\t\treturn kva[i].Key < kva[j].Key\n\t})\n\n\tofile, _ := ioutil.TempFile(\"\", \"*.tmp\")\n\tdefer ofile.Close()\n\tfor i := 0; i < len(kva); {\n\t\tj := i + 1\n\t\tfor j < len(kva) && kva[j].Key == kva[i].Key {\n\t\t\tj++\n\t\t}\n\t\tvalues := []string{}\n\t\tfor k := i; k < j; k++ {\n\t\t\tvalues = append(values, kva[k].Value)\n\t\t}\n\t\toutput := w.reducef(kva[i].Key, values)\n\n\t\tfmt.Fprintf(ofile, \"%v %v\\n\", kva[i].Key, output)\n\n\t\ti = j\n\t}\n\toname := fmt.Sprintf(\"mr-out-%d\", t.ID)\n\tos.Rename(ofile.Name(), oname)\n\treturn []string{oname}, nil\n}"]],"language":[["Go"]]},"format":{"code_wrap":false},"created_time":1724685669348,"last_edited_time":1724685679409,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8671d953-a460-4f0d-a800-23d02fb0edff":{"value":{"id":"8671d953-a460-4f0d-a800-23d02fb0edff","version":3,"type":"text","created_time":1724685805003,"last_edited_time":1724685805004,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5a3fd442-a953-4013-a70b-f5e36d6c4b08":{"value":{"id":"5a3fd442-a953-4013-a70b-f5e36d6c4b08","version":23,"type":"sub_header","properties":{"title":[["测试"]]},"created_time":1724685681434,"last_edited_time":1724685806174,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c62f6ccd-ebeb-4856-8019-08edad2593c6":{"value":{"id":"c62f6ccd-ebeb-4856-8019-08edad2593c6","version":2,"type":"text","properties":{"title":[["Worker 也搞定，最后调用 "],["main/test-mr.sh",[["c"]]],[" 进行测试，其会运行五个测试"]]},"created_time":1724685685615,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"af72b189-e092-4fb0-aace-61a08ccf4114":{"value":{"id":"af72b189-e092-4fb0-aace-61a08ccf4114","version":2,"type":"numbered_list","properties":{"title":[["wc-test：词频统计应用测试"]]},"created_time":1724685685615,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"c11385fd-e906-4748-8c9c-29e27aa025d3":{"value":{"id":"c11385fd-e906-4748-8c9c-29e27aa025d3","version":2,"type":"numbered_list","properties":{"title":[["indexer-test：索引构建应用测试"]]},"created_time":1724685685615,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"150ea716-ecf7-4204-b4d2-a6d8146ec7a2":{"value":{"id":"150ea716-ecf7-4204-b4d2-a6d8146ec7a2","version":2,"type":"numbered_list","properties":{"title":[["map-parallelism-test： "],["Map",[["c"]]],[" 并行测试"]]},"created_time":1724685685625,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5adcef19-96fb-49bc-8e81-8244d9fc69aa":{"value":{"id":"5adcef19-96fb-49bc-8e81-8244d9fc69aa","version":2,"type":"numbered_list","properties":{"title":[["reduce-parallelism-test： "],["Reduce",[["c"]]],[" 并行测试"]]},"created_time":1724685685625,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"5499776a-642a-480d-ba76-6199e49a8b71":{"value":{"id":"5499776a-642a-480d-ba76-6199e49a8b71","version":2,"type":"numbered_list","properties":{"title":[["crash-test： 宕机测试"]]},"created_time":1724685685625,"last_edited_time":1724685685628,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"dd4af0b6-1713-4f84-b825-682c57676392":{"value":{"id":"dd4af0b6-1713-4f84-b825-682c57676392","version":13,"type":"image","properties":{"size":[["184.7KB"]],"title":[["image.png"]],"source":[["https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/b91d7944-eb3d-4261-873c-eae0b7276027/image.png"]]},"format":{"block_width":548.8635864257812,"display_source":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/b91d7944-eb3d-4261-873c-eae0b7276027/image.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.504950495049505,"block_preserve_scale":true},"created_time":1724685691051,"last_edited_time":1724685707378,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"file_ids":["b91d7944-eb3d-4261-873c-eae0b7276027"],"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"e3f62adc-483c-4e01-a803-f61dc87f9932":{"value":{"id":"e3f62adc-483c-4e01-a803-f61dc87f9932","version":5,"type":"text","properties":{"title":[["bingo"]]},"created_time":1724685696568,"last_edited_time":1724685697091,"parent_id":"514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"collection":{"0bb2e606-8d0c-4f7c-aca9-70986e90c055":{"value":{"id":"0bb2e606-8d0c-4f7c-aca9-70986e90c055","version":78,"name":[["x³u³"]],"description":[["🗒 碎碎念"]],"schema":{"@NcA":{"name":"password","type":"text"},"Dj]h":{"name":"icon","type":"text"},"NX\\Q":{"name":"date","type":"date","date_format":"YYYY/MM/DD"},"`gQ~":{"name":"type","type":"select","options":[{"id":"5aff2f95-fd1e-489b-8840-bf10bc9519cb","color":"purple","value":"Post","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"374d2bc6-a144-4832-8ca4-474aaae0ea1f","color":"orange","value":"Page","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"95b7fea5-98b3-476e-892f-79e8f36d0633","color":"brown","value":"Notice","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"2287395b-9f64-4852-b46f-ff3df4b4acef","color":"yellow","value":"Menu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"50fefd65-c28e-4806-9183-aa12995f11f3","color":"pink","value":"SubMenu","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"b945f57d-dbcc-4603-9fab-5cfe447aad1b","color":"red","value":"Config","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"bB{M":{"name":"category","type":"select"},"d]hq":{"name":"slug","type":"text"},"sD^m":{"name":"tags","type":"multi_select","options":[{"id":"a027d99d-be10-412d-b94a-8c61f6eacc29","color":"default","value":"存储","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"4bd9608a-d7d6-4597-beb7-d4849da04909","color":"gray","value":"分布式系统","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"ad04c718-fd54-4374-bfed-6c7e9dc65e01","color":"blue","value":"折腾","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"25bff120-77fb-40f1-9531-00997afcb444","color":"purple","value":"Linux","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"e12d005d-ec78-4876-950d-2399744abbaa","color":"blue","value":"内核","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"c7950cbd-8d2c-4cbe-8bb1-679fb433a74f","color":"red","value":"碎碎念","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"be9970b9-6fe4-4351-92c2-1e3e41d2a3e3","color":"brown","value":"Cloud Native","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"61c97435-c65a-40b1-9e95-2c6345b6f9d3","color":"pink","value":"Vim","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d18e22d6-cbbb-4311-9928-7c5b58124456","color":"orange","value":"论文阅读","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"526115da-04f3-4be2-8a47-c83c7576b0de","color":"green","value":"Kubernetes","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"12016016-3ecc-4ee7-92c6-6973678fdd05","color":"yellow","value":"数据库","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"1edc83b3-f351-4a21-aafc-3b059d0c0f22","color":"brown","value":"Raft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"158014da-08eb-49f4-97ad-1ce6f6e0ee5c","color":"orange","value":"Rust","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]},"wz|S":{"name":"summary","type":"text"},"title":{"name":"title","type":"title"},"f211bdc0-ee00-4186-9a7d-f68c055ec2ee":{"name":"status","type":"select","options":[{"id":"7abc61d4-b405-480d-b699-12588755fa65","color":"red","value":"Published","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"d1242312-e0a8-456d-b8f0-6e998e2c4fb2","color":"orange","value":"Invisible","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]},{"id":"41d5f5c6-b53c-42bc-8e0f-fc9402048480","color":"yellow","value":"Draft","collectionIds":["0bb2e606-8d0c-4f7c-aca9-70986e90c055"]}]}},"icon":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/49b4570c-b2f0-457b-81b7-b68e2693a471/avatar.png","cover":"https://prod-files-secure.s3.us-west-2.amazonaws.com/4cc04375-345a-4a1e-bdf0-3a7c88ef0425/a9af1d6b-f284-4734-ba06-990353cf3f84/Elaina.jpg","format":{"copied_from_pointer":{"id":"4379bc14-5d22-453b-a153-12639616fc01","table":"collection","spaceId":"6c096b44-beb9-48ee-8f92-1efdde47f3a3"},"property_visibility":[{"property":"`gQ~","visibility":"show"},{"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee","visibility":"show"},{"property":"NX\\Q","visibility":"show"},{"property":"d]hq","visibility":"show"},{"property":"wz|S","visibility":"show"},{"property":"sD^m","visibility":"show"},{"property":"bB{M","visibility":"show"},{"property":"Dj]h","visibility":"hide_if_empty"},{"property":"uHoD","visibility":"show"},{"property":"kiCR","visibility":"hide"}],"ai_suggested_properties":[{"name":"created by","type":"person"},{"name":"updated at","type":"date"},{"name":"priority","type":"select","options":[{"id":"OqCJ","color":"purple","value":"low"},{"id":"X{Pz","color":"pink","value":"medium"},{"id":"LRCx","color":"red","value":"high"},{"id":"VY?=","color":"yellow","value":"urgent"}]},{"name":"visibility","type":"select","options":[{"id":"Q=_{","color":"red","value":"public"},{"id":"A|Nj","color":"green","value":"private"},{"id":"MWlx","color":"gray","value":"restricted"}]},{"name":"attachments","type":"file"},{"name":"related links","type":"multi_select","options":[{"id":"I^W>","color":"default","value":"documentation"},{"id":"<g\\P","color":"yellow","value":"tutorials"},{"id":"RMVI","color":"gray","value":"references"}]},{"name":"estimated completion","type":"date"},{"name":"contact email","type":"email"},{"name":"contact phone","type":"phone_number"},{"name":"is active","type":"checkbox"}],"collection_cover_position":0.6486,"collection_page_properties":[{"visible":false,"property":"`gQ~"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"Dj]h"},{"visible":true,"property":"@NcA"},{"visible":true,"property":"ckw_"}],"collection_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"file_ids":["6cf3dc36-2f98-4f0e-9679-1bdbb1485129","5520bd92-e709-4c0d-ad58-06923f23f7e9","624d393a-62e3-4464-a1bf-1c79ecd4fbda","d52f6766-3e32-4c3d-8529-46e1f214360f","abe3a0aa-2aff-4274-81bb-c2443d4ef9e2","a2a32795-101d-46aa-a7f6-eb35b8750166","29db38d2-d5fa-4fa6-8a92-3b527cfe80d1","49b4570c-b2f0-457b-81b7-b68e2693a471","a9af1d6b-f284-4734-ba06-990353cf3f84"],"copied_from":"4379bc14-5d22-453b-a153-12639616fc01","template_pages":["2eace25c-842c-46fd-9ccb-e9190981b6c3"],"migrated":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"space":{},"collection_view":{"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef":{"value":{"id":"2efe7048-0d5f-4e04-8b4e-2a3793ad6aef","version":74,"type":"table","name":"Table","format":{"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"table_frozen_column_index":-1,"collection_view_default_template":{"template_page_id":"2eace25c-842c-46fd-9ccb-e9190981b6c3"}},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"page_sort":["cc459e5b-0f15-4a0c-83db-bb6bf2001aa3","a9bfecc8-9761-4987-9aca-af79d4ebbd0c","7aa40ad8-1e69-4d56-b245-d135d3101cec","e4eefa7d-e2f2-44ed-83f6-fd6951d50900","0f9b7a0d-ad15-4ece-8a8b-948d96b50ff7","58a216ce-4d8d-4b60-906c-6097c5fd8d41","b824f35b-aee9-4a22-81c9-d44b65f99f43","ba565c08-0d2f-46cb-9fcb-5eeface44dfb","560c76dd-c69f-429b-827d-7974407bb23f","0533a861-81cc-40fa-8ab8-5be721800b86","3578fa31-ea0a-4e07-82dc-28704e0dc685","f2625c60-ca69-493b-858c-bf38979f468c","96b14e20-e592-42f6-b7d2-357f4693f18c","fe8fafec-6d1b-4fbb-8a7a-fb079a6bb8e4","9345db3a-b8bd-4e02-b296-9734958eddb6","26e8ddc4-10b4-4765-a96d-e87290556164","840f0871-b58b-428d-8a28-0861947974b4","5787bc4f-06a4-4158-a27f-6c81fb9b1efe","e1bff221-486f-42c8-9cf3-6379f83f3510","2db01777-47d0-4230-bbe8-ef65ab694707","ab0d5acb-9230-4656-9c49-1aff13aba865","98330ff5-71d2-4ea9-945a-ba76fc282e9d","71439e60-5784-4dc5-b71f-e4cd7b0c4304","bfe53f5c-d4bd-4df7-a071-84db62310ad2","0606268b-9014-490d-b84d-d41d4be8df11","c09a05a2-6ab7-41e1-b23c-9e442cd61f6e","8bc2fda4-9fb5-4a89-95b8-c8c175e462c2","459c966a-bb34-47d2-ba4c-b1f0509ab033","022b3625-9f9f-42e0-a8a4-64bae1929d2f","d1a9da33-04a6-4f8b-8458-83aabde787be","40557fff-8f06-4643-be33-a0aab52b28be","b1c009da-991f-4449-b945-6bc4584cca98","fee7a505-5f8e-4186-9b2d-4c80ebee5077","df084444-e2d8-412a-bd56-c6b2c1046d5d","94e03781-e74c-41d0-89f7-df2e2a7ad93f","5b4b2d85-43c0-4edb-ad2d-0f14d79b4c4b","a06c26b2-5941-43ea-a89e-d0bebab47add","bde25ba8-2381-4da6-bb5e-5787ace45def","0e96a78e-dec9-4620-b0e8-a2b889017cb7","832b2511-aada-4c80-903c-1aadd7db46ce","2672b128-6cb0-4b3a-b54b-6b356a4ffbdd","634565f7-7a6e-4c4e-ac58-77b12c21f7ab","6e0bb534-679f-424e-80b3-e9bee483b7e8","da88c0a2-fce1-4336-97e7-61bc4149027a","0ee52933-5891-4387-a10c-921468884ab4","f086cce1-bf32-4be2-9fab-8529a2186ba3","e50dd6f9-49d4-4c3a-b723-da54361b34d5","3f554fe3-c9cb-4f63-99b2-f90f395308f6","eaf25f44-f59e-48d1-b475-a28066593688","af6f6570-0d18-4c3d-9145-3ee677a60c35","4c1d6186-e507-4ca2-9c02-d32dfbe2cca5","ff668a4c-0b15-45ec-9716-42f1af578ece","ce720858-10b7-4c0c-8083-906f29150a81","9ee7cbfe-3f95-4fc7-aab6-0d03c30a1e1b","3a554c07-e77f-43fa-ba66-ff39cf1e0ca5","4194acae-3f4b-4c08-98b9-907a0b5bd4b9","ce969492-bca9-4a45-8730-9ae753bdd027","368e5462-3dca-4c8b-ab1f-595cb04c56e0","d26ce18a-fa8d-4df4-8b82-69c419c5b621","3327d648-8e54-4edf-a38e-a9cba8884a1a","d5fd419b-4cb7-44c8-a8d7-0c8ed44c1963","deaccfa2-4562-437c-874e-fc5041f3fad5","f26f0a34-d6f1-419a-b91b-e0ea3639fe4b","a23d61e0-cc90-4068-bfb0-986afaf60ac5","cc463e20-63ea-4132-acea-84fc7307dde8","1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","514ae2e3-a0d5-414c-86e5-ed5f8a9eb9c8","7b0eb02d-8b44-45f3-b593-52c0a62f4595","37c4cfd9-62a3-41bb-9989-f9df38c45d04","8aa3f594-ff5d-4f99-b0a2-fa09bb32ba84","806f9f46-c738-4c87-9957-e73d11ec44bd","64ac0e55-b2ae-4c80-8226-7a1f4b4ed8da","4d7cb2a6-768c-42c7-aad0-8e56168076d5","1e5f4845-8e82-4ab1-aad9-0d4c9eed2fde","37e5fc82-97ee-4a59-9d0b-1f44e2977cc9","1ccc4db8-78ca-45b9-947b-5d216a3e0667","f3550fb0-346c-4212-b57f-86433738b50b","7d2888d0-b55f-4909-97bf-944e56f19c0e","d9436315-195f-458c-93ac-09e5b8780171","51b42828-cae5-456b-9c2f-9b4b2232380e","280fbd32-0621-4ccb-babb-5790a693090e","1ffb90ba-821d-4d16-8520-e46604a470d7","adc7c47b-6dd7-439f-9e06-6075256c91a7","d6ba00e3-fb3f-4f30-9fa7-23c0b0712cdd","2eb83ae6-642d-45a1-a8a4-04463c20dc4b","c248bc92-b7a1-4f5b-a0a9-f1d5186a8dae","9900ca48-1c4f-44e3-9dae-ab5bd1633d6c","f9e566d7-45f7-4335-afe7-506247cd0b8e","a0b1590c-24bd-41dd-a6e0-b3cdac7bb4e6","8c6e229b-cbd3-4dc6-9b49-34f701a8aead","1467d162-f107-4606-b5dc-ec538ede0fdd","09bb7c8f-a916-4a39-bd01-2786a14bacc4","9e017f37-5917-4cda-afb8-92072abdbdba","8aafeb2c-85b4-4c4e-af36-3b9efacb167c","6d0e0705-57f3-4223-8745-a27295245029","dec89a30-7004-499f-a99e-05b2842cad2b","7efc83d4-2645-4578-b588-a9cffb15524a","1769e8de-bebe-4687-a28a-34c15859ed98","203f2c30-a3cd-4f70-95b3-07df9f996428","2a0b435c-6f77-4db8-be6b-831d177bd762","eac01009-c323-46fd-8339-09c282e6597e","c4b37f96-4ab0-4a0b-a16e-55bac3e32990","4ad5c69e-0dab-4d66-b548-360da7d53568","72d89744-ac04-4dd4-be8b-9d629acd7c11","32dc3358-e954-4934-9e71-cf1dfbca5b91","961e45bd-8bed-4ebc-b3d8-1f0e63736d04"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d":{"value":{"id":"55d7f55d-3bd1-4a1a-97c9-a6c8354ecd3d","version":1,"type":"table","name":"Config","format":{"gallery_cover":{"type":"page_content"},"list_properties":[{"visible":true,"property":"NX\\Q"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"`gQ~"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"}],"property_filters":[{"id":"b54a6c88-635d-4de4-946e-5a855a1f4069","filter":{"filter":{"value":[{"type":"exact","value":"Notice"},{"type":"exact","value":"Menu"},{"type":"exact","value":"Config"},{"type":"exact","value":"SubMenu"},{"type":"exact","value":"Page"}],"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":116,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":118,"visible":true,"property":"`gQ~"},{"width":219,"visible":true,"property":"title"},{"width":326,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"d]hq"},{"visible":true,"property":"`gQ~"},{"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"bB{M"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"wz|S"},{"visible":false,"property":"sD^m"}],"table_frozen_column_index":-1,"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"8dfd415c-71af-41f9-b984-e7182bf2210b":{"value":{"id":"8dfd415c-71af-41f9-b984-e7182bf2210b","version":1,"type":"board","name":"Post Board","format":{"board_columns":[{"value":{"type":"select","value":"Draft"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Invisible"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select","value":"Published"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"value":{"type":"select"},"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"}],"board_columns_by":{"sort":{"type":"manual"},"type":"select","property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},"board_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"bB{M"},{"visible":true,"property":"sD^m"},{"visible":true,"property":"wz|S"},{"visible":false,"property":"NX\\Q"},{"visible":false,"property":"Dj]h"},{"visible":false,"property":"@NcA"},{"visible":false,"property":"d]hq"},{"visible":false,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"visible":false,"property":"`gQ~"}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":116,"visible":true,"property":"bB{M"},{"width":142,"visible":true,"property":"sD^m"},{"width":219,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":155,"visible":true,"property":"d]hq"},{"width":352,"visible":true,"property":"wz|S"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":true,"property":"@NcA"},{"width":117,"visible":true,"property":"Dj]h"}],"table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"},"3c2f93d8-6810-42a1-87da-55f1ecda9bca":{"value":{"id":"3c2f93d8-6810-42a1-87da-55f1ecda9bca","version":72,"type":"chart","format":{"chart_config":{"type":"column","dataConfig":{"type":"groups_reducer","groupBy":{"sort":{"type":"manual"},"type":"multi_select","property":"sD^m","hideEmptyGroups":false},"aggregationConfig":{"aggregation":{"aggregator":"count"},"seriesFormat":{"displayType":"column"}}},"chartFormat":{"mainSort":"manual","hideLegend":false,"axisCumulative":false,"axisGroupStyle":"normal","donutHideValue":false,"donutDataLabels":"value","axisShowDataLabels":true,"axisHideEmptyGroups":false}},"property_filters":[{"id":"01739a9c-9312-4d0d-bf7d-de1204300bdb","filter":{"filter":{"value":{"type":"exact","value":"Post"},"operator":"enum_is"},"property":"`gQ~"}}],"table_properties":[{"width":100,"visible":true,"property":"`gQ~"},{"width":247,"visible":true,"property":"title"},{"width":233,"visible":true,"property":"wz|S"},{"width":100,"visible":true,"property":"f211bdc0-ee00-4186-9a7d-f68c055ec2ee"},{"width":219,"visible":true,"property":"sD^m"},{"width":184,"visible":true,"property":"d]hq"},{"width":111,"visible":true,"property":"NX\\Q"},{"width":100,"visible":false,"property":"bB{M"},{"width":117,"visible":false,"property":"Dj]h"},{"width":100,"visible":false,"property":"@NcA"}],"subitem_display_mode":"flattened","table_subitem_toggle_column":"title"},"parent_id":"0dc306ca-50a6-4917-9b5a-85a61f0f66f5","parent_table":"block","alive":true,"space_id":"4cc04375-345a-4a1e-bdf0-3a7c88ef0425"},"role":"reader"}},"notion_user":{},"collection_query":{},"signed_urls":{}}},"prev":{"id":"1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","date":{"start_date":"2022-02-14","date_format":"relative"},"type":"Post","slug":"post/gfs-paper","tags":["论文阅读","分布式系统"],"title":"The Google File System 论文概览","status":"Published","category":"","comment":"","publishDate":1644796800000,"publishDay":"2022-2-14","lastEditedDate":"2024-08-27T15:25:15.003Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"分布式系统","color":"gray"}],"href":"/post/gfs-paper","target":"_self","password":""},"next":{"id":"7b0eb02d-8b44-45f3-b593-52c0a62f4595","date":{"start_date":"2021-12-31","date_format":"relative"},"type":"Post","slug":"post/2021summary","tags":["碎碎念"],"summary":"落落落落的一年","title":"蒟蒻的 2021 年度总结","status":"Published","category":"","comment":"","publishDate":1640908800000,"publishDay":"2021-12-31","lastEditedDate":"2024-08-27T15:25:12.636Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block&id=7b0eb02d-8b44-45f3-b593-52c0a62f4595&t=7b0eb02d-8b44-45f3-b593-52c0a62f4595&width=800&cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fd8a67659-bb3d-447e-b70f-7aa9f7987b88%2Fgpnu.jpeg?table=block&id=7b0eb02d-8b44-45f3-b593-52c0a62f4595&t=7b0eb02d-8b44-45f3-b593-52c0a62f4595&width=800&cache=v2","ext":{},"tagItems":[{"name":"碎碎念","color":"red"}],"href":"/post/2021summary","target":"_self","password":""},"recommendPosts":[{"id":"bde25ba8-2381-4da6-bb5e-5787ace45def","date":{"start_date":"2024-08-08","date_format":"relative"},"type":"Post","slug":"post/longhorn","tags":["存储","分布式系统"],"summary":"Longhorn 是一个 Go 实现的 Cloud Native Storage，比较好奇作为一个提供块存储的分布式存储系统，使用 Go 实现，会面临哪些挑战，性能方面要又要如何优化","title":"Longhorn 浅析","status":"Published","category":"","comment":"","publishDate":1723075200000,"publishDay":"2024-8-8","lastEditedDate":"2024-09-12T13:44:37.605Z","lastEditedDay":"2024-9-12","fullWidth":false,"pageIcon":"","pageCover":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block&id=bde25ba8-2381-4da6-bb5e-5787ace45def&t=bde25ba8-2381-4da6-bb5e-5787ace45def&width=800&cache=v2","pageCoverThumbnail":"https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F4cc04375-345a-4a1e-bdf0-3a7c88ef0425%2Fc3967b7e-bde2-4b5b-b5f6-97de21642f16%2Flonghorn.png?table=block&id=bde25ba8-2381-4da6-bb5e-5787ace45def&t=bde25ba8-2381-4da6-bb5e-5787ace45def&width=800&cache=v2","ext":{},"tagItems":[{"name":"存储","color":"default"},{"name":"分布式系统","color":"gray"}],"href":"/post/longhorn","target":"_self","password":""},{"id":"1eecd7c4-1e60-4aff-adbf-ccc85f820ef2","date":{"start_date":"2022-02-14","date_format":"relative"},"type":"Post","slug":"post/gfs-paper","tags":["论文阅读","分布式系统"],"title":"The Google File System 论文概览","status":"Published","category":"","comment":"","publishDate":1644796800000,"publishDay":"2022-2-14","lastEditedDate":"2024-08-27T15:25:15.003Z","lastEditedDay":"2024-8-27","fullWidth":false,"pageIcon":"","pageCover":"","pageCoverThumbnail":"","ext":{},"tagItems":[{"name":"论文阅读","color":"orange"},{"name":"分布式系统","color":"gray"}],"href":"/post/gfs-paper","target":"_self","password":""}]},"__N_SSG":true}
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53891],{85504:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=a(85893),l=a(84588),s=a(69325),n=a(26964),c=a(24955),i=a.n(c),o=a(23493),d=a.n(o),u=a(41664),x=a.n(u),m=a(11163),h=a(67294),g=a(46977);let f=[{key:"↑ ↓",action:"选择"},{key:"Enter",action:"跳转"},{key:"Esc",action:"关闭"}];function p(e){let{cRef:t}=e,[a,n]=(0,h.useState)([]),[c,o]=(0,h.useState)(!1),[u,x]=(0,h.useState)(0),[p,j]=(0,h.useState)(null),[v,k]=(0,h.useState)(0),[N,w]=(0,h.useState)(0),[A,_]=(0,h.useState)(0),[E,I]=(0,h.useState)(0),[S,P]=(0,h.useState)(!1),C=(0,h.useRef)(null),O=(0,m.useRouter)();(0,g.y1)("ctrl+k",e=>{e.preventDefault(),o(!0)}),(0,g.y1)("down",e=>{e.preventDefault(),E<a.length-1&&I(E+1)},{enableOnFormTags:!0}),(0,g.y1)("up",e=>{e.preventDefault(),E>0&&I(E-1)},{enableOnFormTags:!0}),(0,g.y1)("esc",e=>{e.preventDefault(),o(!1)},{enableOnFormTags:!0});let L=()=>{a.length>0&&(window.location.href="".concat((0,s.JA)("SUB_PATH",""),"/").concat(a[E].slug))};(0,g.y1)("enter",e=>{a.length>0&&L(D)},{enableOnFormTags:!0});let T=()=>{I(0),j(""),n([]),_(0),k(0),w(0),C.current&&(C.current.value="")};(0,h.useEffect)(()=>{o(!1)},[O]),(0,h.useEffect)(()=>{c?setTimeout(()=>{var e;null===(e=C.current)||void 0===e||e.focus()},100):T()},[c]),(0,h.useImperativeHandle)(t,()=>({openSearch:()=>{o(!0)}}));let D=i()((0,s.JA)("ALGOLIA_APP_ID"),(0,s.JA)("ALGOLIA_SEARCH_ONLY_APP_KEY")).initIndex((0,s.JA)("ALGOLIA_INDEX")),F=async(e,t)=>{if(j(e),x(t),n([]),_(0),k(0),w(0),I(0),e&&""!==e){P(!0);try{let{hits:a,nbHits:r,nbPages:s,processingTimeMS:c}=await D.search(e,{page:t,hitsPerPage:10});_(c),k(s),w(r),n(a),P(!1);let i=document.getElementById("search-wrapper").getElementsByClassName("replace");setTimeout(()=>{(0,l.Z)({doms:i,search:e,target:{element:"span",className:"font-bold border-b border-dashed"}})},200)}catch(e){console.error("Algolia search error:",e)}}},R=(0,h.useRef)(d()(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;F(e,t)},1e3)),J=(0,h.useRef)(null),G=e=>{let t=e.target.value;J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{R.current(t)},800)},H=()=>{o(!1)};return(0,s.JA)("ALGOLIA_APP_ID")?(0,r.jsxs)("div",{id:"search-wrapper",className:"".concat(c?"opacity-100":"invisible opacity-0 pointer-events-none"," z-30 fixed h-screen w-screen left-0 top-0 sm:mt-12 flex items-start justify-center mt-0"),children:[(0,r.jsxs)("div",{className:"".concat(c?"opacity-100":"invisible opacity-0 translate-y-10"," flex flex-col justify-between w-full min-h-[10rem] h-full md:h-fit max-w-xl dark:bg-hexo-black-gray dark:border-gray-800 bg-white dark:bg- p-5 rounded-lg z-50 shadow border hover:border-blue-600 duration-300 transition-all "),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-2xl text-blue-600 dark:text-yellow-600 font-bold",children:"搜索"}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"text-gray-600 fa-solid fa-xmark p-1 cursor-pointer hover:text-blue-600",onClick:H})})]}),(0,r.jsx)("input",{type:"text",placeholder:"在这里输入搜索关键词...",onChange:e=>G(e),className:"text-black dark:text-gray-200 bg-gray-50 dark:bg-gray-600 outline-blue-500 w-full px-4 my-2 py-1 mb-4 border rounded-md",ref:C}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(b,{})}),0===a.length&&p&&!S&&(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:" text-slate-600 text-center my-4 text-base",children:[" ","无法找到相关结果",(0,r.jsxs)("span",{className:"font-semibold",children:['"',p,'"']})]})}),(0,r.jsx)("ul",{className:"flex-1 overflow-auto",children:a.map((e,t)=>(0,r.jsx)("li",{onMouseEnter:()=>I(t),onClick:()=>L(t),className:"cursor-pointer replace my-2 p-2 duration-100 \n              rounded-lg\n              ".concat(E===t?"bg-blue-600 dark:bg-yellow-600":""),children:(0,r.jsx)("a",{className:"".concat(E===t?" text-white":" text-black dark:text-gray-300 "),children:e.title})},e.objectID))}),(0,r.jsx)(y,{totalPage:v,page:u,switchPage:e=>{R.current(p,e)}}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2 sm:text-sm text-xs dark:text-gray-300",children:[0===N&&(0,r.jsx)("div",{className:"flex items-center",children:f.map((e,t)=>(0,r.jsxs)(h.Fragment,{children:[(0,r.jsx)("div",{className:"border-gray-300 dark:text-gray-300 text-gray-600 px-2 rounded border inline-block",children:e.key}),(0,r.jsx)("span",{className:"ml-2 mr-4  text-gray-600 dark:text-gray-300",children:e.action})]},t))}),(0,r.jsx)("div",{children:N>0&&(0,r.jsxs)("p",{children:["共搜索到 ",N," 条结果，用时 ",A," 毫秒"]})}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-300  text-right",children:(0,r.jsxs)("span",{children:[(0,r.jsx)("i",{className:"fa-brands fa-algolia"})," Algolia 提供搜索服务"]})})]})]}),(0,r.jsx)("div",{onClick:H,className:"z-30 fixed top-0 left-0 w-full h-full flex items-center justify-center glassmorphism"})]}):(0,r.jsx)(r.Fragment,{})}function b(){let{tagOptions:e}=(0,n.O)(),t=null==e?void 0:e.slice(0,10);return(0,r.jsx)("div",{id:"tags-group",className:"dark:border-gray-700 space-y-2",children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(x(),{passHref:!0,href:"/tag/".concat(encodeURIComponent(e.name)),className:"cursor-pointer inline-block whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-black dark:text-gray-300 hover:bg-blue-600 dark:hover:bg-yellow-600 hover:scale-110 hover:text-white rounded-lg px-2 py-0.5 duration-150 transition-all",children:[(0,r.jsxs)("div",{className:"text-lg",children:[e.name," "]}),e.count?(0,r.jsx)("sup",{className:"relative ml-1",children:e.count}):(0,r.jsx)(r.Fragment,{})]})},t))})}function y(e){let{totalPage:t,page:a,switchPage:l}=e;return t<=0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"flex space-x-1 w-full justify-center py-1",children:Array.from({length:t},(e,t)=>{let s=a===t?"font-bold text-white bg-blue-600 dark:bg-yellow-600 rounded":"hover:text-blue-600 hover:font-bold dark:text-gray-300";return(0,r.jsx)("div",{onClick:()=>l(t),className:"text-center cursor-pointer w-6 h-6 ".concat(s),children:t+1},t)})})}}}]);